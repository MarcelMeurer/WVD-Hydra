!function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkngx_admin=self.webpackChunkngx_admin||[]).push([[106],{75106:function(e,o,a){"use strict";a.r(o),a.d(o,{ImageBuilderModule:function(){return ve}});var i=a(38583),l=a(99763),r=a(37716),d=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-image-builder"]],decls:1,vars:0,template:function(e,t){1&e&&r["\u0275\u0275element"](0,"router-outlet")},directives:[l.lC],styles:[""]}),e}(),m=a(79765),s=a(46782),c=a(11173),g=a(85902),u=a(27861),p=a(39538),h=a(91841),f=a(9857),S=a(3679),v=a(98774),b=a(99588),y=["saveSettings"];function C(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"nb-option",13),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275property"]("value",n.Id),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",n.DisplayName," ")}}var x=function(e){return{"is-invalid":e}};function I(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"div",0),r["\u0275\u0275elementStart"](2,"div",17),r["\u0275\u0275elementStart"](3,"p"),r["\u0275\u0275text"](4,"Service Account, optional: Enter a service account to use in scripts."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",0),r["\u0275\u0275elementStart"](6,"div",43),r["\u0275\u0275elementStart"](7,"div",5),r["\u0275\u0275elementStart"](8,"label",44),r["\u0275\u0275text"](9,"Service Account Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",19),r["\u0275\u0275elementStart"](11,"input",45,46),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).model.ServiceDomainUser=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",43),r["\u0275\u0275elementStart"](14,"div",5),r["\u0275\u0275elementStart"](15,"label",47),r["\u0275\u0275text"](16,"Service Account Password"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",19),r["\u0275\u0275elementStart"](18,"input",48,49),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).model.ServiceDomainPwEncrypted=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var o=r["\u0275\u0275reference"](12),a=r["\u0275\u0275reference"](19),i=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](11),r["\u0275\u0275property"]("ngModel",i.model.ServiceDomainUser)("ngClass",r["\u0275\u0275pureFunction1"](4,x,i.submitted&&o.invalid)),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngModel",i.model.ServiceDomainPwEncrypted)("ngClass",r["\u0275\u0275pureFunction1"](6,x,i.submitted&&a.invalid))}}function E(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"nb-option",13),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275property"]("value",n.Id),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n.Name," ")}}function M(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"nb-option",13),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275property"]("value",n.name),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n.regionalDisplayName," ")}}function w(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",5),r["\u0275\u0275elementStart"](1,"label",62),r["\u0275\u0275text"](2,"Locations"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"div",19),r["\u0275\u0275elementStart"](4,"nb-select",63),r["\u0275\u0275listener"]("selectedChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](3).model.SharedImageGalleryDefinitionIdRegions=e}),r["\u0275\u0275template"](5,M,2,2,"nb-option",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var o=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("selected",o.model.SharedImageGalleryDefinitionIdRegions),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",o.AllRegions)}}function T(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-accordion",0),r["\u0275\u0275elementStart"](1,"nb-accordion-item"),r["\u0275\u0275elementStart"](2,"nb-accordion-item-header"),r["\u0275\u0275text"](3," Azure Compute Gallery "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-accordion-item-body"),r["\u0275\u0275elementStart"](5,"div",0),r["\u0275\u0275elementStart"](6,"div",17),r["\u0275\u0275elementStart"](7,"div",5),r["\u0275\u0275elementStart"](8,"label",50),r["\u0275\u0275text"](9,"Azure Compute Gallery Definition"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",19),r["\u0275\u0275elementStart"](11,"nb-select",51),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).model.SharedImageGalleryDefinitionId=e}),r["\u0275\u0275elementStart"](12,"nb-option",13),r["\u0275\u0275text"](13,"Don't copy image"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](14,E,2,2,"nb-option",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"div",17),r["\u0275\u0275template"](16,w,6,2,"div",52),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",0),r["\u0275\u0275elementStart"](18,"div",41),r["\u0275\u0275elementStart"](19,"div",5),r["\u0275\u0275elementStart"](20,"label",53),r["\u0275\u0275text"](21,"Remove Native Image after Copying"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",54),r["\u0275\u0275elementStart"](23,"nb-checkbox",55),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).model.SharedImageGalleryDefinitionRemoveImageAfterCopying=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"div",41),r["\u0275\u0275elementStart"](25,"div",5),r["\u0275\u0275elementStart"](26,"label",56),r["\u0275\u0275text"](27,"Date Naming"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"div",54),r["\u0275\u0275elementStart"](29,"nb-checkbox",57),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).model.SharedImageGalleryDateNaming=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"div",41),r["\u0275\u0275elementStart"](31,"div",5),r["\u0275\u0275elementStart"](32,"label",58),r["\u0275\u0275text"](33,"Shallow replication"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"div",54),r["\u0275\u0275elementStart"](35,"nb-checkbox",59),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).model.SharedImageGalleryDefinitionShallowReplication=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](36,"div",17),r["\u0275\u0275elementStart"](37,"div",5),r["\u0275\u0275elementStart"](38,"label",60),r["\u0275\u0275text"](39,"Keep Older Versions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](40,"div",19),r["\u0275\u0275elementStart"](41,"nb-select",61),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).model.SharedImageKeepVersions=e}),r["\u0275\u0275elementStart"](42,"nb-option",13),r["\u0275\u0275text"](43,"All"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](44,"nb-option",13),r["\u0275\u0275text"](45,"Last version"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](46,"nb-option",13),r["\u0275\u0275text"](47,"Last 3 versions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](48,"nb-option",13),r["\u0275\u0275text"](49,"Last 5 versions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](50,"nb-option",13),r["\u0275\u0275text"](51,"Last 10 versions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](52,"nb-option",13),r["\u0275\u0275text"](53,"Last 20 versions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var o=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](11),r["\u0275\u0275property"]("ngModel",o.model.SharedImageGalleryDefinitionId),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngForOf",o.GalleryImages),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!o.model.SharedImageGalleryDefinitionShallowReplication),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngModel",o.model.SharedImageGalleryDefinitionRemoveImageAfterCopying),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",o.model.SharedImageGalleryDateNaming),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",o.model.SharedImageGalleryDefinitionShallowReplication),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",o.model.SharedImageKeepVersions),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("value",0),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",3),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",5),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",10),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",20)}}function V(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"nb-option",13),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275property"]("value",n.Id),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n.Name," ")}}function k(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-accordion",0),r["\u0275\u0275elementStart"](1,"nb-accordion-item"),r["\u0275\u0275elementStart"](2,"nb-accordion-item-header"),r["\u0275\u0275text"](3," Azure Local "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-accordion-item-body"),r["\u0275\u0275elementStart"](5,"div",0),r["\u0275\u0275elementStart"](6,"div",17),r["\u0275\u0275elementStart"](7,"div",5),r["\u0275\u0275elementStart"](8,"label",64),r["\u0275\u0275text"](9,"Custom Location"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",19),r["\u0275\u0275elementStart"](11,"nb-select",65),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).model.HciLocationId=e}),r["\u0275\u0275elementStart"](12,"nb-option",13),r["\u0275\u0275text"](13,"Don't copy image"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](14,V,2,2,"nb-option",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"div",0),r["\u0275\u0275elementStart"](16,"div",43),r["\u0275\u0275elementStart"](17,"div",5),r["\u0275\u0275elementStart"](18,"label",66),r["\u0275\u0275text"](19,"Remove Native Image after Copying"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div",19),r["\u0275\u0275elementStart"](21,"nb-checkbox",67),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).model.HciLocationRemoveImageAfterCopying=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",43),r["\u0275\u0275elementStart"](23,"div",5),r["\u0275\u0275elementStart"](24,"label",68),r["\u0275\u0275text"](25,"Use storage account"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"div",19),r["\u0275\u0275elementStart"](27,"nb-checkbox",69),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).model.HciUseStorageAccount=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"div",17),r["\u0275\u0275elementStart"](29,"div",5),r["\u0275\u0275elementStart"](30,"label",70),r["\u0275\u0275text"](31,"Keep Older Versions "),r["\u0275\u0275element"](32,"nb-icon",71),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](33,"div",19),r["\u0275\u0275elementStart"](34,"nb-select",72),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).model.HciLocationImageKeepVersions=e}),r["\u0275\u0275elementStart"](35,"nb-option",13),r["\u0275\u0275text"](36,"All"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"nb-option",13),r["\u0275\u0275text"](38,"Last version"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](39,"nb-option",13),r["\u0275\u0275text"](40,"Last 3 versions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](41,"nb-option",13),r["\u0275\u0275text"](42,"Last 5 versions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](43,"nb-option",13),r["\u0275\u0275text"](44,"Last 10 versions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](45,"nb-option",13),r["\u0275\u0275text"](46,"Last 20 versions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var o=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](11),r["\u0275\u0275property"]("ngModel",o.model.HciLocationId),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngForOf",o.CustomLocations),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngModel",o.model.HciLocationRemoveImageAfterCopying),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",o.model.HciUseStorageAccount),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngModel",o.model.HciLocationImageKeepVersions),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("value",0),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",3),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",5),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",10),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",10)}}function O(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"button",73),r["\u0275\u0275text"](1,"Store imaging configuration "),r["\u0275\u0275elementEnd"]())}function R(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"button",74),r["\u0275\u0275text"](1,"Update imaging configuration "),r["\u0275\u0275elementEnd"]())}function D(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"button",75),r["\u0275\u0275text"](1," Create image "),r["\u0275\u0275elementEnd"]())}function P(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"button",75),r["\u0275\u0275text"](1," Apply now "),r["\u0275\u0275elementEnd"]())}function _(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"div",5),r["\u0275\u0275elementStart"](2,"label",14),r["\u0275\u0275text"](3,"Virtual Machine"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",7),r["\u0275\u0275elementStart"](5,"nb-select-filter",15,16),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().model.VmResourceId=e})("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().onVmChange(e)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",0),r["\u0275\u0275elementStart"](8,"div",17),r["\u0275\u0275elementStart"](9,"div",5),r["\u0275\u0275elementStart"](10,"label",18),r["\u0275\u0275text"](11,"Automatic Naming"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",19),r["\u0275\u0275elementStart"](13,"nb-checkbox",20),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().model.ImageAutoNaming=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",17),r["\u0275\u0275elementStart"](15,"div",5),r["\u0275\u0275elementStart"](16,"label",21),r["\u0275\u0275text"](17,"Image Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"div",19),r["\u0275\u0275elementStart"](19,"input",22,23),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().model.ImageName=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",0),r["\u0275\u0275elementStart"](22,"div",24),r["\u0275\u0275elementStart"](23,"div",5),r["\u0275\u0275elementStart"](24,"label",25),r["\u0275\u0275text"](25,"Image Description"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"div",7),r["\u0275\u0275elementStart"](27,"input",26,27),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().model.ImageNote=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"div",0),r["\u0275\u0275elementStart"](30,"div",17),r["\u0275\u0275elementStart"](31,"div",5),r["\u0275\u0275elementStart"](32,"label",28),r["\u0275\u0275text"](33,"Target Resource Group"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"div",19),r["\u0275\u0275elementStart"](35,"nb-select-filter",29,30),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().model.ImageResourceGroupId=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"div",17),r["\u0275\u0275elementStart"](38,"div",5),r["\u0275\u0275elementStart"](39,"label",31),r["\u0275\u0275text"](40,"Keep Older Versions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](41,"div",19),r["\u0275\u0275elementStart"](42,"nb-select",32),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().model.ImageKeepVersions=e}),r["\u0275\u0275elementStart"](43,"nb-option",13),r["\u0275\u0275text"](44,"All"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](45,"nb-option",13),r["\u0275\u0275text"](46,"Last version"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](47,"nb-option",13),r["\u0275\u0275text"](48,"Last 3 versions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](49,"nb-option",13),r["\u0275\u0275text"](50,"Last 5 versions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](51,"nb-option",13),r["\u0275\u0275text"](52,"Last 10 versions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](53,"nb-option",13),r["\u0275\u0275text"](54,"Last 20 versions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](55,"div",0),r["\u0275\u0275elementStart"](56,"div",17),r["\u0275\u0275elementStart"](57,"div",5),r["\u0275\u0275elementStart"](58,"label",33),r["\u0275\u0275text"](59,"Optional.: Run a Script or Collection on the Master first"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](60,"div",19),r["\u0275\u0275elementStart"](61,"ngx-scriptAndCollection",34),r["\u0275\u0275listener"]("onStatusChange",function(e){r["\u0275\u0275restoreView"](n);var t=r["\u0275\u0275nextContext"]();return t.setSelectedScriptOrCollection(t.i,e)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](62,"div",17),r["\u0275\u0275elementStart"](63,"div",5),r["\u0275\u0275elementStart"](64,"label",35),r["\u0275\u0275text"](65,"Tag as 'TestImage'"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](66,"div",19),r["\u0275\u0275elementStart"](67,"nb-checkbox",36),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().model.TagAsTestImage=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](68,I,20,8,"div",11),r["\u0275\u0275template"](69,T,54,13,"nb-accordion",37),r["\u0275\u0275template"](70,k,47,11,"nb-accordion",37),r["\u0275\u0275element"](71,"br"),r["\u0275\u0275elementStart"](72,"div",5),r["\u0275\u0275elementStart"](73,"div",38),r["\u0275\u0275template"](74,O,2,0,"button",39),r["\u0275\u0275template"](75,R,2,0,"button",40),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](76,"div",41),r["\u0275\u0275template"](77,D,2,0,"button",42),r["\u0275\u0275template"](78,P,2,0,"button",42),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=r["\u0275\u0275reference"](6),a=r["\u0275\u0275reference"](20),i=r["\u0275\u0275reference"](28),l=r["\u0275\u0275reference"](36),d=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",d.model.VmResourceId)("nbSpinner",d.spinner2)("ngClass",r["\u0275\u0275pureFunction1"](30,x,d.submitted&&o.invalid))("options",d.Vms),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngModel",d.model.ImageAutoNaming),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("disabled",d.model.ImageAutoNaming)("ngModel",d.model.ImageName)("ngClass",r["\u0275\u0275pureFunction1"](32,x,d.submitted&&a.invalid)),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngModel",d.model.ImageNote)("ngClass",r["\u0275\u0275pureFunction1"](34,x,d.submitted&&i.invalid)),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngModel",d.model.ImageResourceGroupId)("ngClass",r["\u0275\u0275pureFunction1"](36,x,d.submitted&&l.invalid))("options",d.ResourceGroups),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngModel",d.model.ImageKeepVersions),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("value",0),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",3),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",5),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",10),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",20),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("scene",d.model.SceneId)("idSc",d.model.ScriptOrCollectionOnMaster),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",d.model.TagAsTestImage),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",d.model.ScriptOrCollectionOnMaster&&"00000000-0000-0000-0000-000000000000"!=d.model.ScriptOrCollectionOnMaster),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",d.GalleryImagesLength),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",d.CustomLocationsLength),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",d.storeDirect&&"00000000-0000-0000-0000-000000000000"==d.model.TemplateId),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",d.storeDirect&&"00000000-0000-0000-0000-000000000000"!=d.model.TemplateId),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",d.storeDirect),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!d.storeDirect)}}function L(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275text"](2,"Save imaging configuration"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"nb-card-body"),r["\u0275\u0275text"](4," Enter a name or description to store the imaging configuration in the database. "),r["\u0275\u0275elementStart"](5,"textarea",76),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().model.TemplateName=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"nb-card-footer"),r["\u0275\u0275elementStart"](7,"div",0),r["\u0275\u0275element"](8,"div",77),r["\u0275\u0275elementStart"](9,"div",78),r["\u0275\u0275elementStart"](10,"button",79),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n).dialogRef.close("0")}),r["\u0275\u0275text"](11,"Cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",78),r["\u0275\u0275elementStart"](13,"button",80),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n).dialogRef.close("1")}),r["\u0275\u0275text"](14,"Ok"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var o=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",o.model.TemplateName)}}var N=function(){var e=function(){function e(t,o,a,i){n(this,e),this.http=t,this.actionService=o,this.dialogService=a,this.viewSceneService=i,this.destroyed$=new m.xQ,this.isInit=!1,this.lastScene="",this.onStatusChange=new r.EventEmitter,this.model=new g.dR,this.GalleryImagesLength=!1,this.CustomLocationsLength=!1,this.spinner1=!0,this.spinner2=!0,this.submitted=!1}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.viewSceneService.getViewScenes().pipe((0,s.R)(this.destroyed$)).subscribe(function(t){e.ViewScenes=t,console.log("Got data about the scenes",e.ViewScenes),e.model=JSON.parse(JSON.stringify(new g.dR)),e.configurationTemplate&&(console.log("Got configuration from parent",e.configurationTemplate),e.onSceneChange(e.configurationTemplate.SceneId)),1==e.ViewScenes.length&&null==e.model.SceneId&&(e.model.SceneId=e.ViewScenes[0].Id,e.onSceneChange(e.model.SceneId)),e.spinner1=!1})}},{key:"onVmChange",value:function(e){console.log("VM changed to ".concat(e));var t=this.Vms.find(function(t){return t.Id.toLowerCase()===e.toLowerCase()});this.isInit||(this.ResourceGroups=this.AllResourceGroups.filter(function(e){return e.SubscriptionId.toLowerCase()===t.SubscriptionId}),this.GalleryImages=this.AllGalleryImages.filter(function(e){return e.HyperV.toLowerCase()===t.HyperV.toLowerCase()}),this.GalleryImagesLength=0!=this.GalleryImages.length,this.CustomLocationsLength=0!=this.CustomLocations.length,this.model.ImageResourceGroupId="",this.model.SharedImageGalleryDefinitionId="",this.model.HciLocationId="",this.saveLocalConfig())}},{key:"onSceneChange",value:function(e){var t=this;""!=e&&(console.log("Tenant changed to ".concat(e,". Updating VMs")),this.model.TemplateId="00000000-0000-0000-0000-000000000000",this.spinner2=!0,""!=this.lastScene&&this.resetDependentForms(),this.http.get("".concat((new c.tc).apiURL(),"/data/scenes/").concat(e,"/virtualmachines/imageview")).subscribe(function(n){t.Vms=n,console.log("Got VMs for the selected tenant: "+n.length),t.Vms.length>0&&t.http.get("".concat((new c.tc).apiURL(),"/data/scenes/").concat(e,"/rolloutResources/subscriptions/").concat(t.Vms[0].SubscriptionId,"/locations")).subscribe(function(e){var n;if(t.AllRegions=e,console.log("Got Regions for the selected tenant: "+e.length),null===(n=t.configurationTemplate)||void 0===n?void 0:n.VmResourceId){t.model.VmResourceId=t.configurationTemplate.VmResourceId;var o=0;console.log("Waiting for the resource groups, gallery images and custom location to be initialized");var a=setInterval(function(){t.CustomLocations&&t.AllGalleryImages&&t.AllResourceGroups&&(clearInterval(a),t.onVmChange(t.model.VmResourceId),t.model=t.configurationTemplate,t.configurationTemplate=null),++o>200&&clearInterval(a)},50)}}),t.spinner2=!1}),this.http.get("".concat((new c.tc).apiURL(),"/data/scenes/").concat(e,"/resourcegroups")).subscribe(function(e){t.AllResourceGroups=e,console.log("Got RGs for the selected tenant: "+e.length)}),this.http.get("".concat((new c.tc).apiURL(),"/data/scenes/").concat(e,"/galleryimages")).subscribe(function(e){t.AllGalleryImages=e,console.log("Got GalleryImages for the selected tenant: "+e.length)}),this.http.get("".concat((new c.tc).apiURL(),"/data/scenes/").concat(e,"/customlocations")).subscribe(function(e){t.CustomLocations=e,console.log("Got GalleryImages for the selected tenant: "+e.length)}),this.isInit||(this.model.VmResourceId="",this.model.ImageResourceGroupId="",this.model.SharedImageGalleryDefinitionId="",this.model.HciLocationId="",this.lastScene=e,this.model.SceneId=e,this.saveLocalConfig()))}},{key:"setSelectedScriptOrCollection",value:function(e,t){this.model.ScriptOrCollectionOnMaster=t}},{key:"resetDependentForms",value:function(){this.model.SceneId=null}},{key:"onSubmit",value:function(e,t){var n=this;this.submitted=!0,console.log(t),e.valid?(this.saveLocalConfig(),this.storeDirect?"storeImage"==t?this.dialogService.open(this.saveSettings,{}).onClose.subscribe(function(e){"1"==e&&(n.model.TemplateId=window.crypto.randomUUID(),n.actionService.sendActionAsync("scenes/".concat(n.model.SceneId,"/storageimagedefinition"),n.model,"Store image definition","").subscribe(function(e){e?console.log("Got data from the server",e,n.model):n.model.TemplateId="00000000-0000-0000-0000-000000000000"}))}):"updateImage"==t?this.dialogService.open(this.saveSettings,{}).onClose.subscribe(function(e){"1"==e&&n.actionService.sendActionAsync("scenes/".concat(n.model.SceneId,"/storageimagedefinition"),n.model,"Update image definition","").subscribe(function(e){e&&console.log("Got data from the server",e,n.model)})}):this.actionService.sendActionAsync("scenes/".concat(this.model.SceneId,"/createimage"),this.model,"Create image","").subscribe():(console.log("Sending configuration back to parent"),this.onStatusChange.emit(this.model))):alert("Please check your configuration. Some properties or selections are not valid or missing. Check the red-cross-marked properties.")}},{key:"onCancel",value:function(){console.log("Canceling deployment configuration"),this.onStatusChange.emit(null)}},{key:"saveLocalConfig",value:function(){JSON,localStorage.setItem("Hydra.ImageCreation.Default",JSON.stringify(this.model))}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(!0),this.destroyed$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](h.eN),r["\u0275\u0275directiveInject"](u.c),r["\u0275\u0275directiveInject"](f.Gln),r["\u0275\u0275directiveInject"](p.E))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-image-creation-config"]],viewQuery:function(e,t){var n;(1&e&&r["\u0275\u0275viewQuery"](y,5),2&e)&&(r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.saveSettings=n.first))},inputs:{configurationTemplate:"configurationTemplate",sceneId:"sceneId",storeDirect:"storeDirect"},outputs:{onStatusChange:"onStatusChange"},decls:23,vars:7,consts:[[1,"row"],[1,"col-md-12"],["nbSpinnerSize","small",3,"nbSpinner"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group","row"],["for","dc-scene",1,"label","col-sm-2","col-form-label"],[1,"col-sm-10"],["id","dc-scene","fullWidth","","name","SceneId","required","","nbTooltip","Select the tenant to select the VM (Golden Master)",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["SceneId","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["saveSettings",""],[3,"value"],["for","dc-VmResourceId",1,"label","col-sm-2","col-form-label"],["id","dc-VmResourceId","fullWidth","","nbSpinnerSize","small","placeholder","Select your Golden Master","nbTooltip","Select your Golden Master","name","VmResourceId","required","","labelName","DisplayName","valueName","Id","pre","1",1,"form-control",3,"ngModel","nbSpinner","ngClass","options","ngModelChange"],["VmResourceId","ngModel"],[1,"col-sm-6"],["for","dc-ImageAutoNaming",1,"label","col-sm-4","col-form-label"],[1,"col-sm-8"],["id","dc-ImageAutoNaming","name","ImageAutoNaming","nbTooltip","Creates a name automatically: <VM-Name>_<DateTime>. E.g.: T-AVD-BASIC-01_2021-10-01_14-00-00",3,"ngModel","ngModelChange"],["for","dc-ImageName",1,"label","col-sm-4","col-form-label"],["type","text","id","dc-ImageName","nbInput","","fullWidth","","maxlength","60","placeholder","Image name","required","","minlength","4","nbTooltip","Enter a name for the image. Ensure that the name is not in use by another resource.","name","ImageName",1,"form-control",3,"disabled","ngModel","ngClass","ngModelChange"],["ImageName","ngModel"],[1,"col-sm-12"],["for","dc-ImageNote",1,"label","col-sm-2","col-form-label"],["type","text","id","dc-ImageNote","nbInput","","fullWidth","","maxlength","250","placeholder","Windows 10 EUV 20H2 with O365 and main business apps","nbTooltip","Use up to 250 characters to make a not for this image.","name","ImageNote",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["ImageNote","ngModel"],["for","dc-ImageResourceGroupId",1,"label","col-sm-4","col-form-label"],["id","dc-ImageResourceGroupId","fullWidth","","nbTooltip","Select a resource group to store the image.","name","ImageResourceGroupId","required","","labelName","Name","valueName","Id",1,"form-control",3,"ngModel","ngClass","options","ngModelChange"],["ImageResourceGroupId","ngModel"],["for","dc-ImageKeepVersions",1,"label","col-sm-4","col-form-label"],["id","dc-ImageKeepVersions","fullWidth","","nbTooltip","You can optionally delete older images of the same VM in the subscription.","name","ImageKeepVersions",3,"ngModel","ngModelChange"],["for","dc-ScriptOrCollectionStart",1,"label","col-sm-4","col-form-label"],["id","dc-ScriptOrCollectionStart","nbTooltip","Runs a script or collection on the VM / Golden Master before the imaging process starts. This can be used to (e.g.) apply Windows Updates in front of building the final image. This process changes the Master permanently. Steps related to a session host are ignored - only VM native steps are applied.",3,"scene","idSc","onStatusChange"],["for","dc-TagAsTestImage",1,"label","col-sm-4","col-form-label"],["id","dc-TagAsTestImage","name","TagAsTestImage","nbTooltip","Tags an image optionally as a 'TestImage'. Test images are ignored if the rollout configuration is set to use the newest image from a gallery definition or from a VM. Regardless, these images can be selected directly in the rollout configuration (e.g., in a test host pool). To untag, remove the tag 'AVD.TestImage' from an image or gallery version in the Azure Portal.",3,"ngModel","ngModelChange"],["class","row",4,"ngIf"],[1,"offset-sm-8","col-sm-2"],["id","storeImage","nbButton","","style","float: right;","type","submit","nbTooltip","Save the imaging configuration to the database.",4,"ngIf"],["id","updateImage","nbButton","","style","float: right;","type","submit","nbTooltip","Update the imaging configuration in the database.",4,"ngIf"],[1,"col-sm-2"],["type","submit","nbButton","","status","primary","style","float: right;","nbTooltip","Use this configuration to create a new image from the selected VM (Golden Master). The VM remains untouched and can be reused at any time.",4,"ngIf"],[1,"col-sm-3"],["for","dc-ServiceDomainUser",1,"label","col-sm-4","col-form-label"],["type","text","id","dc-ServiceDomainUser","nbInput","","fullWidth","","placeholder","service@contoso.com","nbTooltip","Name of the service account, written as name@domain.com","name","ServiceDomainUser",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["ServiceDomainUser","ngModel"],["for","dc-ServiceDomainPwEncrypted",1,"label","col-sm-4","col-form-label"],["type","password","id","dc-ServiceDomainPwEncrypted","nbInput","","fullWidth","","placeholder","**********************","nbTooltip","Password of the service account","name","ServiceDomainPwEncrypted",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["ServiceDomainPwEncrypted","ngModel"],["for","dc-SharedImageGalleryDefinitionId",1,"label","col-sm-4","col-form-label"],["id","dc-SharedImageGalleryDefinitionId","fullWidth","","nbTooltip","Select a shared image gallery definition as a target for the image. The image is copied to the definition at the end of the process.","name","SharedImageGalleryDefinitionId",3,"ngModel","ngModelChange"],["class","form-group row",4,"ngIf"],["for","dc-SharedImageGalleryDefinitionRemoveImageAfterCopying",1,"label","col-sm-8","col-form-label"],[1,"col-sm-4"],["id","dc-SharedImageGalleryDefinitionRemoveImageAfterCopying","name","SharedImageGalleryDefinitionRemoveImageAfterCopying","nbTooltip","Optionally, delete the native image after copying it to the gallery definition.",3,"ngModel","ngModelChange"],["for","dc-SharedImageGalleryDateNaming",1,"label","col-sm-8","col-form-label"],["id","dc-SharedImageGalleryDateNaming","name","SharedImageGalleryDateNaming","nbTooltip","Usually, the version x.y.z is counted up automatically. Using this option, the version will be year.month.day (UTC). This simplifies the view of the image versions but will remove an existing version from the same day in the gallery definition and is not recognized as a new image for existing hosts.",3,"ngModel","ngModelChange"],["for","dc-SharedImageGalleryDefinitionShallowReplication",1,"label","col-sm-8","col-form-label"],["id","dc-SharedImageGalleryDefinitionShallowReplication","name","SharedImageGalleryDefinitionShallowReplication","nbTooltip","For testing and development, an image version can be configured as shallow replication. This makes the image ready faster, but you can't deploy many hosts in parallel while the image is not copied and the image is only available in the home region.",3,"ngModel","ngModelChange"],["for","dc-SharedImageKeepVersions",1,"label","col-sm-4","col-form-label"],["id","dc-SharedImageKeepVersions","fullWidth","","nbTooltip","You can optionally delete older image versions in the gallery definition.","name","SharedImageKeepVersions",3,"ngModel","ngModelChange"],["for","dc-SharedImageGalleryDefinitionIdRegions",1,"label","col-sm-4","col-form-label"],["id","dc-SharedImageGalleryDefinitionIdRegions","fullWidth","","multiple","","nbTooltip","Select the regions where you want to have your image available.","name","SharedImageGalleryDefinitionIdRegions",3,"selected","selectedChange"],["for","dc-HciLocationId",1,"label","col-sm-4","col-form-label"],["id","dc-HciLocationId","fullWidth","","nbTooltip","Select a custom location as a target for the image. The image is copied to the definition at the end of the process.","name","HciLocationId",3,"ngModel","ngModelChange"],["for","dc-HciLocationRemoveImageAfterCopying",1,"label","col-sm-4","col-form-label"],["id","dc-HciLocationRemoveImageAfterCopying","name","HciLocationRemoveImageAfterCopying","nbTooltip","Optionally, delete the native image after copying it to the custom location.",3,"ngModel","ngModelChange"],["for","dc-HciUseStorageAccount",1,"label","col-sm-4","col-form-label"],["id","dc-HciUseStorageAccount","name","HciUseStorageAccount","nbTooltip","Using a storage account is a more reliable way to transfer an image to Azure Local. If used, the Hydra service principal needs Microsoft.Storage/storageAccounts/write and Storage Blob Data Contributor on the selected resource group.",3,"ngModel","ngModelChange"],["for","dc-HciLocationImageKeepVersions",1,"label","col-sm-4","col-form-label"],["icon","alert-triangle-outline","nbTooltip","Caution: Never let Hydra delete an image that is being used by a virtual machine. VMs can no longer be started or stopped if the base image is deleted. Only deletion would work."],["id","dc-HciLocationImageKeepVersions","fullWidth","","nbTooltip","You can optionally delete older image versions in the Azure portal. Caution: Never let Hydra delete an image that is being used by a virtual machine. VMs can no longer be started or stopped if the base image is deleted. Only deletion would work.","name","HciLocationImageKeepVersions",3,"ngModel","ngModelChange"],["id","storeImage","nbButton","","type","submit","nbTooltip","Save the imaging configuration to the database.",2,"float","right"],["id","updateImage","nbButton","","type","submit","nbTooltip","Update the imaging configuration in the database.",2,"float","right"],["type","submit","nbButton","","status","primary","nbTooltip","Use this configuration to create a new image from the selected VM (Golden Master). The VM remains untouched and can be reused at any time.",2,"float","right"],["rows","1","nbInput","","fullWidth","","placeholder","Name or description","nbTooltip","Enter a name or description to store the imaging configuration in the database.",3,"ngModel","ngModelChange"],[1,"col-sm-6",2,"min-width","200px"],[1,"col-sm-3","text-right"],["nbButton","",1,"cancel",3,"click"],["nbButton","",3,"click"]],template:function(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"nb-card"),r["\u0275\u0275elementStart"](3,"nb-card-header",2),r["\u0275\u0275elementStart"](4,"h1"),r["\u0275\u0275text"](5,"Capture a VM / Golden Master"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"nb-card-body"),r["\u0275\u0275elementStart"](7,"p"),r["\u0275\u0275text"](8,"Create a new image from the selected VM (Golden Master). The original VM remains untouched and can be reused at any time."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](9,"br"),r["\u0275\u0275elementStart"](10,"form",3,4),r["\u0275\u0275listener"]("ngSubmit",function(e){r["\u0275\u0275restoreView"](n);var o=r["\u0275\u0275reference"](11);return t.onSubmit(o,e.submitter.id)}),r["\u0275\u0275elementStart"](12,"div",5),r["\u0275\u0275elementStart"](13,"label",6),r["\u0275\u0275text"](14,"Tenant"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"div",7),r["\u0275\u0275elementStart"](16,"nb-select",8,9),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.model.SceneId=e})("ngModelChange",function(e){return t.onSceneChange(e)}),r["\u0275\u0275template"](18,C,2,2,"nb-option",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](19,_,79,38,"ng-container",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](20,"br"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](21,L,15,1,"ng-template",null,12,r["\u0275\u0275templateRefExtractor"])}if(2&e){var o=r["\u0275\u0275reference"](17);r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("nbSpinner",t.spinner1),r["\u0275\u0275advance"](13),r["\u0275\u0275property"]("ngModel",t.model.SceneId)("ngClass",r["\u0275\u0275pureFunction1"](5,x,t.submitted&&o.invalid)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",t.ViewScenes),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.model.SceneId)}},directives:[f.Asz,f.ndF,f.Q7R,f.yKW,S._Y,S.JL,S.F,f.rs,S.Q7,f.jNv,S.JJ,S.On,i.mk,i.sg,i.O5,f.q51,v.S,f.NTf,f.h8i,S.Fj,S.nD,S.wO,b.I,f.qCO,f.SaG,f.YZd,f.AvE,f.fMN,f.DPz,f.XWE],styles:["nb-checkbox[_ngcontent-%COMP%]{margin-bottom:1rem}.form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}.form-control[_ngcontent-%COMP%]{padding:0;border:0}"]}),e}(),G=a(46679),A=function(){var e=function e(t){var o,a,i;n(this,e),this.router=t,null!=(null===(o=this.router.getCurrentNavigation())||void 0===o?void 0:o.extras.state)?(console.log("Getting data from ImagingDefinitions"),this.configTemplate=JSON.parse(JSON.stringify(null===(i=null===(a=this.router.getCurrentNavigation())||void 0===a?void 0:a.extras.state)||void 0===i?void 0:i.data)),console.log(this.configTemplate)):this.configTemplate=null};return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](l.F0))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-image-creation"]],decls:2,vars:2,consts:[[3,"storeDirect","configurationTemplate"],["header","Imaging Log","filterActions","VmCreateImage","filterLastDays","3","top","12"]],template:function(e,t){1&e&&(r["\u0275\u0275element"](0,"ngx-image-creation-config",0),r["\u0275\u0275element"](1,"ngx-actionsLog",1)),2&e&&r["\u0275\u0275property"]("storeDirect",!0)("configurationTemplate",t.configTemplate)},directives:[N,G.d],styles:[".nb-theme-default   [_nghost-%COMP%]   .size-tiny[_ngcontent-%COMP%]{width:26rem;height:17rem}.nb-theme-default   [_nghost-%COMP%]   .flex-container[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;-ms-box-orient:horizontal;display:-moz-flex;display:flex}.nb-theme-default   [_nghost-%COMP%]   .nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.nb-theme-default   [_nghost-%COMP%]   .wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.nb-theme-dark   [_nghost-%COMP%]   .size-tiny[_ngcontent-%COMP%]{width:26rem;height:17rem}.nb-theme-dark   [_nghost-%COMP%]   .flex-container[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;-ms-box-orient:horizontal;display:-moz-flex;display:flex}.nb-theme-dark   [_nghost-%COMP%]   .nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.nb-theme-dark   [_nghost-%COMP%]   .wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.nb-theme-cosmic   [_nghost-%COMP%]   .size-tiny[_ngcontent-%COMP%]{width:26rem;height:17rem}.nb-theme-cosmic   [_nghost-%COMP%]   .flex-container[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;-ms-box-orient:horizontal;display:-moz-flex;display:flex}.nb-theme-cosmic   [_nghost-%COMP%]   .nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.nb-theme-cosmic   [_nghost-%COMP%]   .wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.nb-theme-corporate   [_nghost-%COMP%]   .size-tiny[_ngcontent-%COMP%]{width:26rem;height:17rem}.nb-theme-corporate   [_nghost-%COMP%]   .flex-container[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;-ms-box-orient:horizontal;display:-moz-flex;display:flex}.nb-theme-corporate   [_nghost-%COMP%]   .nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.nb-theme-corporate   [_nghost-%COMP%]   .wrap[_ngcontent-%COMP%]{flex-wrap:wrap}"]}),e}(),z=a(46797),W=a(25917),F=a(39761),U=a(43190),H=a(67666),B=a(68307),K=a(11627),$=a(5304),j=a(56825),q=a(69517),J=a(46016),Q=["schedules"],Y=["dialog"];function X(e,t){1&e&&r["\u0275\u0275element"](0,"span",16)}function Z(e,t){1&e&&r["\u0275\u0275element"](0,"span",17)}function ee(e,t){1&e&&r["\u0275\u0275element"](0,"span",16)}function te(e,t){1&e&&r["\u0275\u0275element"](0,"span",17)}function ne(e,t){1&e&&r["\u0275\u0275element"](0,"span",16)}function oe(e,t){1&e&&r["\u0275\u0275element"](0,"span",17)}function ae(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-icon",23),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"]().$implicit;return r["\u0275\u0275nextContext"](2).configureSchedules(e.TemplateId)}),r["\u0275\u0275elementEnd"]()}}function ie(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-icon",24),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"]().$implicit;return r["\u0275\u0275nextContext"](2).configureSchedules(e.TemplateId)}),r["\u0275\u0275elementEnd"]()}}function le(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"tr"),r["\u0275\u0275elementStart"](2,"td"),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"td"),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"td"),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"td"),r["\u0275\u0275text"](9),r["\u0275\u0275pipe"](10,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"td"),r["\u0275\u0275text"](12),r["\u0275\u0275pipe"](13,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"td"),r["\u0275\u0275elementStart"](15,"div",0),r["\u0275\u0275element"](16,"p"),r["\u0275\u0275elementStart"](17,"nb-icon",18),r["\u0275\u0275listener"]("click",function(){var e=r["\u0275\u0275restoreView"](n).$implicit;return r["\u0275\u0275nextContext"](2).config(e)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](18,ae,1,0,"nb-icon",19),r["\u0275\u0275template"](19,ie,1,0,"nb-icon",20),r["\u0275\u0275elementStart"](20,"nb-icon",21),r["\u0275\u0275listener"]("click",function(){var e=r["\u0275\u0275restoreView"](n).$implicit;return r["\u0275\u0275nextContext"](2).delete(e.TemplateId)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"nb-icon",22),r["\u0275\u0275listener"]("click",function(){var e=r["\u0275\u0275restoreView"](n).$implicit;return r["\u0275\u0275nextContext"](2).start(e.TemplateId)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=t.$implicit;r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",o.SceneName," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",o.TemplateName," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate2"](" ",o.VmResourceId.split("/")[4],"\\",o.VmResourceId.split("/")[8]," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind2"](10,8,o.LastRunTime,"short")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind2"](13,11,o.NextRunTime,"short")," "),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",!(null!=o.TemplateSchedule&&o.TemplateSchedule.Enabled)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==o.TemplateSchedule?null:o.TemplateSchedule.Enabled)}}function re(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"div",9),r["\u0275\u0275elementStart"](2,"table",10),r["\u0275\u0275elementStart"](3,"thead"),r["\u0275\u0275elementStart"](4,"tr"),r["\u0275\u0275elementStart"](5,"th",11),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"]();return e.sortType="SceneName",e.sortReverse=!e.sortReverse,e.sort(e.sortReverse,e.sortType)}),r["\u0275\u0275text"](6," Tenant "),r["\u0275\u0275template"](7,X,1,0,"span",12),r["\u0275\u0275template"](8,Z,1,0,"span",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"th",11),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"]();return e.sortType="TemplateName",e.sortReverse=!e.sortReverse,e.sort(e.sortReverse,e.sortType)}),r["\u0275\u0275text"](10," Description / Name "),r["\u0275\u0275template"](11,ee,1,0,"span",12),r["\u0275\u0275template"](12,te,1,0,"span",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"th",11),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"]();return e.sortType="VmResourceId",e.sortReverse=!e.sortReverse,e.sort(e.sortReverse,e.sortType)}),r["\u0275\u0275text"](14," Resource Group / VM "),r["\u0275\u0275template"](15,ne,1,0,"span",12),r["\u0275\u0275template"](16,oe,1,0,"span",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"th"),r["\u0275\u0275text"](18,"Last Runtime (UTC)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"th"),r["\u0275\u0275text"](20,"Next Runtime (UTC)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"th"),r["\u0275\u0275text"](22,"Actions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"tbody"),r["\u0275\u0275template"](24,le,22,14,"ng-container",14),r["\u0275\u0275pipe"](25,"slice"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"ngb-pagination",15),r["\u0275\u0275listener"]("pageChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().page=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var o=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf","SceneName"==o.sortType&&!o.sortReverse),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","SceneName"==o.sortType&&o.sortReverse),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf","TemplateName"==o.sortType&&!o.sortReverse),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","TemplateName"==o.sortType&&o.sortReverse),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf","VmResourceId"==o.sortType&&!o.sortReverse),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","VmResourceId"==o.sortType&&o.sortReverse),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngForOf",r["\u0275\u0275pipeBind3"](25,13,o.imagingDefinitions,(o.page-1)*o.pageSize,o.page*o.pageSize))("ngForTrackBy",o.identifyViewImagingDefinitions),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("collectionSize",o.collectionSize)("page",o.page)("maxSize",5)("boundaryLinks",!0)("pageSize",o.pageSize)}}function de(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275text"](2,"Confirmation"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"nb-card-body"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"nb-card-footer"),r["\u0275\u0275elementStart"](6,"div",0),r["\u0275\u0275element"](7,"div",25),r["\u0275\u0275elementStart"](8,"div",26),r["\u0275\u0275elementStart"](9,"button",27),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n).dialogRef.close("0")}),r["\u0275\u0275text"](10,"Cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",26),r["\u0275\u0275elementStart"](12,"button",28),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n).dialogRef.close("1")}),r["\u0275\u0275text"](13,"Ok"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit;r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](o)}}function me(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"nb-option",42),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275property"]("value",n.id),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",n.name," ")}}var se=function(e){return{"is-invalid":e}};function ce(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275text"](2,"Imaging schedules"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"nb-card-body"),r["\u0275\u0275elementStart"](4,"p"),r["\u0275\u0275text"](5," You can configure a time to start the imaging process. Please note that the configured time is in UTC time. "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",29),r["\u0275\u0275elementStart"](7,"div",9),r["\u0275\u0275elementStart"](8,"table",10),r["\u0275\u0275elementStart"](9,"thead"),r["\u0275\u0275elementStart"](10,"tr"),r["\u0275\u0275elementStart"](11,"th"),r["\u0275\u0275text"](12,"Enabled"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"th"),r["\u0275\u0275text"](14,"Weekdays"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"th"),r["\u0275\u0275text"](16,"Start (UTC time)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"th"),r["\u0275\u0275text"](18,"Advanced"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"tbody"),r["\u0275\u0275elementContainerStart"](20,30),r["\u0275\u0275elementStart"](21,"tr"),r["\u0275\u0275elementStart"](22,"td"),r["\u0275\u0275elementStart"](23,"nb-checkbox",31),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().modelSchedules.Enabled=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"td"),r["\u0275\u0275elementStart"](25,"nb-checkbox",32),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().modelSchedules.Weekdays.Mo=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"nb-checkbox",33),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().modelSchedules.Weekdays.Tu=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"nb-checkbox",34),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().modelSchedules.Weekdays.We=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"nb-checkbox",35),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().modelSchedules.Weekdays.Th=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"nb-checkbox",36),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().modelSchedules.Weekdays.Fr=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"nb-checkbox",37),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().modelSchedules.Weekdays.Sa=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](31,"nb-checkbox",38),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().modelSchedules.Weekdays.Su=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"td"),r["\u0275\u0275elementStart"](33,"nb-select",39),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().modelSchedules.TimeFrom=e}),r["\u0275\u0275template"](34,me,2,2,"nb-option",40),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](35,"td"),r["\u0275\u0275elementStart"](36,"ngx-scheduleSelector",41),r["\u0275\u0275listener"]("onStatusChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().setScheduleAdv(e)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"nb-card-footer"),r["\u0275\u0275elementStart"](38,"div",0),r["\u0275\u0275element"](39,"div",25),r["\u0275\u0275elementStart"](40,"div",26),r["\u0275\u0275elementStart"](41,"button",27),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n).dialogRef.close("0")}),r["\u0275\u0275text"](42,"Cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](43,"div",26),r["\u0275\u0275elementStart"](44,"button",28),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n).dialogRef.close("1")}),r["\u0275\u0275text"](45,"Ok"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var o=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](23),r["\u0275\u0275property"]("ngModel",o.modelSchedules.Enabled),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",o.modelSchedules.Weekdays.Mo),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",o.modelSchedules.Weekdays.Tu),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",o.modelSchedules.Weekdays.We),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",o.modelSchedules.Weekdays.Th),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",o.modelSchedules.Weekdays.Fr),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",o.modelSchedules.Weekdays.Sa),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",o.modelSchedules.Weekdays.Su),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",o.modelSchedules.TimeFrom)("ngClass",r["\u0275\u0275pureFunction1"](15,se,o.submitted&&"INVALID"==(null==o.f.form.controls.TimeFrom?null:o.f.form.controls.TimeFrom.status))),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",o.timeMinuteSelectorEnum),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("dateStart",o.modelSchedules.DateStart)("dateEnd",o.modelSchedules.DateEnd)("repeatWeek",o.modelSchedules.RepeatWeek)("repeatMonth",o.modelSchedules.RepeatMonth)}}var ge,ue,pe=[{path:"",component:d,children:[{path:"create-image",component:A},{path:"imaging-definitions",component:(ge=function(){function e(t,o,a,i,l){n(this,e),this.actionService=t,this.http=o,this.toastrService=a,this.dialogService=i,this.router=l,this.interval=2*c.tc.autoRefreshDefault,this.page=1,this.pageSize=20,this.imagingDefinitions$=new m.xQ,this.imagingDefinitions=[],this.allimagingDefinitions=[],this.httpWebRoot=(new c.tc).apiURL(),this.sortType="SceneName",this.sortReverse=!0,this.searchPhrase="",this.styleBtSemiRound="semi-round",this.modelSchedules=new g.m$,this.timeMinuteSelectorEnum=j.ub}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.imagingDefinitionsSubscription$=this.imagingDefinitions$.pipe((0,F.O)(0),(0,U.w)(function(){return(0,z.H)(1,e.interval)}),(0,U.w)(function(){return e.http.get("".concat((new c.tc).apiURL(),"/data/azure/imagingDefinitions"))}),(0,H.a)(function(t){return t.pipe((0,B.b)(function(t){return e.showToast("danger","Failure accessing the ImagingDefinition-API","Cannot read data from API. The message is: ".concat(t.message," with status ").concat(t.statusText))}),(0,K.j)(function(){return(0,z.H)(5e3)}))}),(0,$.K)(function(t){return e.showToast("danger","Failure accessing the ImagingDefinition-API","Cannot read data from API. Reload this site to try it again. The message is: ".concat(t.message," with status ").concat(t.statusText)),(0,W.of)([])})).subscribe(function(t){console.log("imagingDefinitions: Getting data ",t.length),e.collectionSize=t.length,e.allimagingDefinitions=t,e.searchTable(),e.sort(e.sortReverse,e.sortType)})}},{key:"identifyViewImagingDefinitions",value:function(e,t){return t.Id}},{key:"update",value:function(){this.imagingDefinitions$.next()}},{key:"configureSchedules",value:function(e){var t=this,n=this.allimagingDefinitions.find(function(t){return t.TemplateId==e});n&&(null==n.TemplateSchedule&&(n.TemplateSchedule=new g.m$),this.modelSchedules=n.TemplateSchedule,this.dialogService.open(this.schedules).onClose.subscribe(function(o){"1"==o&&(n.TemplateSchedule=t.modelSchedules,t.triggerImagingConfiguration(e,"storageimagedefinition","Setting schedule",!1,n),t.allimagingDefinitions.find(function(t){return t.TemplateId==e}).TemplateSchedule=t.modelSchedules)}))}},{key:"setScheduleAdv",value:function(e){this.modelSchedules.DateStart=e.DateStart,this.modelSchedules.DateEnd=e.DateEnd,this.modelSchedules.RepeatWeek=e.RepeatWeek,this.modelSchedules.RepeatMonth=e.RepeatMonth}},{key:"delete",value:function(e){var t=this.allimagingDefinitions.find(function(t){return t.TemplateId==e});this.triggerImagingConfiguration(e,"deletestorageimagedefinition","Delete imaging definition",!0,t)}},{key:"start",value:function(e){var t=this.allimagingDefinitions.find(function(t){return t.TemplateId==e});this.triggerImagingConfiguration(e,"runstorageimagedefinition","Start imaging",!0,t)}},{key:"config",value:function(e){this.navigateTo("/pages/image-builder/create-image","",e)}},{key:"triggerImagingConfiguration",value:function(e,t,n){var o=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;a?this.dialogService.open(this.dialog,{context:"Please confirm the operation '".concat(n,"'")}).onClose.subscribe(function(a){"1"==a&&o.triggerImagingConfigurationExecute(e,t,n,i)}):this.triggerImagingConfigurationExecute(e,t,n,i)}},{key:"triggerImagingConfigurationExecute",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this.allimagingDefinitions.find(function(t){return t.TemplateId==e});console.log("Start action: "+t+" with item id: "+(null==a?void 0:a.TemplateId)),this.actionService.sendActionAsync("scenes/".concat(null==a?void 0:a.SceneId,"/").concat(t),o,n,null==a?void 0:a.VmResourceId.split("/").pop()).subscribe(function(e){})}},{key:"navigateTo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.router.navigate([e],{queryParams:{search:t},state:{data:n}})}},{key:"searchTable",value:function(){var e=this;this.imagingDefinitions=this.allimagingDefinitions.filter(function(t){return""==e.searchPhrase||t.TemplateName.toLowerCase().includes(e.searchPhrase.toLowerCase())||t.VmResourceId.toLowerCase().indexOf(e.searchPhrase.toLowerCase())>-1||t.SceneName.toLowerCase().indexOf(e.searchPhrase.toLowerCase())>-1}),this.sort(this.sortReverse,this.sortType),this.collectionSize=this.imagingDefinitions.length}},{key:"sort",value:function(e,t){var n=(t+".....").split(".");this.sortInternal(e,n[0],n[1],n[2],n[3])}},{key:"sortInternal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";this.imagingDefinitions=this.imagingDefinitions.sort(function(i,l){try{if(""!=a)var r=i[t][n][o][a],d=l[t][n][o][a];else""!=o?(r=i[t][n][o],d=l[t][n][o]):""!=n?(r=i[t][n],d=l[t][n]):(r=i[t],d=l[t])}catch(m){r=1,d=1}return e?r>d?1:d>r?-1:0:r>d?-1:1})}},{key:"ngOnDestroy",value:function(){this.imagingDefinitionsSubscription$&&this.imagingDefinitionsSubscription$.unsubscribe()}},{key:"showToast",value:function(e,t,n){this.toastrService.show(n,t?"".concat(t):"",{status:e,destroyByClick:!0,duration:2e4,hasIcon:!0,position:f.fe3.TOP_RIGHT,preventDuplicates:!0})}}]),e}(),ge.\u0275fac=function(e){return new(e||ge)(r["\u0275\u0275directiveInject"](u.c),r["\u0275\u0275directiveInject"](h.eN),r["\u0275\u0275directiveInject"](f.quB),r["\u0275\u0275directiveInject"](f.Gln),r["\u0275\u0275directiveInject"](l.F0))},ge.\u0275cmp=r["\u0275\u0275defineComponent"]({type:ge,selectors:[["ngx-imaging-definitions-config"]],viewQuery:function(e,t){var n;1&e&&(r["\u0275\u0275viewQuery"](Q,5),r["\u0275\u0275viewQuery"](Y,5)),2&e&&(r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.schedules=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.dialog=n.first))},decls:19,vars:3,consts:[[1,"row"],[1,"col-sm-6"],["type","text","nbInput","","fullWidth","","placeholder","Search for a specific tenant, description, VM",3,"ngModel","ngModelChange"],[4,"ngIf"],["type","button","nbButton","",3,"status","click"],["icon","refresh"],["header","Imaging Log","filterActions","VmCreateImage","filterLastDays","3","top","12"],["dialog",""],["schedules",""],[1,"table-responsive"],[1,"table","table-bordered","table-striped"],[3,"click"],["class","fa fa-caret-down",4,"ngIf"],["class","fa fa-caret-up",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex","justify-content-center",3,"collectionSize","page","maxSize","boundaryLinks","pageSize","pageChange"],[1,"fa","fa-caret-down"],[1,"fa","fa-caret-up"],["icon","settings-outline","nbTooltip","Configure","nbTooltip","Reconfigure the imaging configuration",3,"click"],["icon","clock-outline","nbTooltip","Configure schedule","nbTooltipPlacement","top",3,"click",4,"ngIf"],["icon","clock","nbTooltip","Configure schedule","nbTooltipPlacement","top",3,"click",4,"ngIf"],["icon","trash-2-outline","nbTooltip","Delete","nbTooltip","Delete the imaging configuration",3,"click"],["icon","play-circle-outline","nbTooltip","Start","nbTooltip","Start imaging",3,"click"],["icon","clock-outline","nbTooltip","Configure schedule","nbTooltipPlacement","top",3,"click"],["icon","clock","nbTooltip","Configure schedule","nbTooltipPlacement","top",3,"click"],[1,"col-sm-6",2,"min-width","200px"],[1,"col-sm-3","text-right"],["nbButton","",1,"cancel",3,"click"],["nbButton","",3,"click"],["formArrayName","Schedule"],[1,"form-group","row"],["name","Schedule_Enable_111",3,"ngModel","ngModelChange"],["name","Schedule_Weekday_Mo_111","nbTooltip","Monday",3,"ngModel","ngModelChange"],["name","Schedule_Weekday_Tu_111","nbTooltip","Tuesday",3,"ngModel","ngModelChange"],["name","Schedule_Weekday_We_111","nbTooltip","Wednesday",3,"ngModel","ngModelChange"],["name","Schedule_Weekday_Th_111","nbTooltip","Thursday",3,"ngModel","ngModelChange"],["name","Schedule_Weekday_Fr_111","nbTooltip","Friday",3,"ngModel","ngModelChange"],["name","Schedule_Weekday_Sa_111","nbTooltip","Saturday",3,"ngModel","ngModelChange"],["name","Schedule_Weekday_Su_111","nbTooltip","Sunday",3,"ngModel","ngModelChange"],["id","dc-TimeFrom_111","fullWidth","","nbTooltip","Start time (UTC time)","name","TimeFrom_111",3,"ngModel","ngClass","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"dateStart","dateEnd","repeatWeek","repeatMonth","onStatusChange"],[3,"value"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"nb-card"),r["\u0275\u0275elementStart"](2,"nb-card-header"),r["\u0275\u0275elementStart"](3,"h1"),r["\u0275\u0275text"](4,"Imaging Definitions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"nb-card-body"),r["\u0275\u0275elementStart"](6,"div",0),r["\u0275\u0275elementStart"](7,"div",1),r["\u0275\u0275elementStart"](8,"input",2),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.searchPhrase=e})("ngModelChange",function(){return t.searchTable()}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](9,"div",1),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](10,re,27,17,"div",3),r["\u0275\u0275elementStart"](11,"button",4),r["\u0275\u0275listener"]("click",function(){return t.update()}),r["\u0275\u0275element"](12,"nb-icon",5),r["\u0275\u0275text"](13," Update "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](14,"ngx-actionsLog",6),r["\u0275\u0275template"](15,de,14,1,"ng-template",null,7,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275template"](17,ce,46,17,"ng-template",null,8,r["\u0275\u0275templateRefExtractor"])),2&e&&(r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngModel",t.searchPhrase),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.imagingDefinitions),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("status",t.styleBtSemiRound))},directives:[f.Asz,f.ndF,f.yKW,f.h8i,S.Fj,S.JJ,S.On,i.O5,f.DPz,f.fMN,G.d,i.sg,q.N9,f.jNv,f.XWE,S.JL,f.NTf,f.rs,i.mk,J.S,f.q51],pipes:[i.OU,i.uU],styles:[".nb-theme-default   [_nghost-%COMP%]   .size-tiny[_ngcontent-%COMP%]{width:26rem;height:17rem}.nb-theme-default   [_nghost-%COMP%]   .flex-container[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;-ms-box-orient:horizontal;display:-moz-flex;display:flex}.nb-theme-default   [_nghost-%COMP%]   .nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.nb-theme-default   [_nghost-%COMP%]   .wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.nb-theme-dark   [_nghost-%COMP%]   .size-tiny[_ngcontent-%COMP%]{width:26rem;height:17rem}.nb-theme-dark   [_nghost-%COMP%]   .flex-container[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;-ms-box-orient:horizontal;display:-moz-flex;display:flex}.nb-theme-dark   [_nghost-%COMP%]   .nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.nb-theme-dark   [_nghost-%COMP%]   .wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.nb-theme-cosmic   [_nghost-%COMP%]   .size-tiny[_ngcontent-%COMP%]{width:26rem;height:17rem}.nb-theme-cosmic   [_nghost-%COMP%]   .flex-container[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;-ms-box-orient:horizontal;display:-moz-flex;display:flex}.nb-theme-cosmic   [_nghost-%COMP%]   .nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.nb-theme-cosmic   [_nghost-%COMP%]   .wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.nb-theme-corporate   [_nghost-%COMP%]   .size-tiny[_ngcontent-%COMP%]{width:26rem;height:17rem}.nb-theme-corporate   [_nghost-%COMP%]   .flex-container[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;-ms-box-orient:horizontal;display:-moz-flex;display:flex}.nb-theme-corporate   [_nghost-%COMP%]   .nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.nb-theme-corporate   [_nghost-%COMP%]   .wrap[_ngcontent-%COMP%]{flex-wrap:wrap}"]}),ge)},{path:"**",redirectTo:"create-image",pathMatch:"full"}]}],he=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[l.Bz.forChild(pe)],l.Bz]}),e}(),fe=a(36518),Se=a(34978),ve=((ue=function e(){n(this,e)}).\u0275fac=function(e){return new(e||ue)},ue.\u0275mod=r["\u0275\u0275defineNgModule"]({type:ue}),ue.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[i.ez,he,f.zyh,f.uuI,S.u5,f.IIj,f.rgH,fe.PagesModule,f.MfT,f.nKr,f.oGl,f.KdK,q.jF,f.T2N,Se.D]]}),ue)}}])}();