!function(){var e=["checked"];function t(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(s){a=!0,o=s}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}(self.webpackChunkngx_admin=self.webpackChunkngx_admin||[]).push([[490],{35179:function(r,o,l){"use strict";l.r(o),l.d(o,{UserSettingsModule:function(){return $e}});var u=l(38583),m=l(10264),p=l(79765),f=l(46797),g=l(40205),v=l(25917),h=l(94402),y=l(68307),b=l(11627),S=l(15257),C=l(45435),E=l(43190),x=l(39761),k=l(67666),w=l(5304),P=l(46782),O=l(94612),R=l(42145),I=l(548),N=l(95242),T=l(34022);function F(e,t,n){return 0===n?[t]:(e.push(t),e)}var A=l(14625),D=l(34681),M=l(76897),G=l(11173),U=(function(e){e.Tenant="SceneName",e.Name="CloudPcUserSetting.DisplayName",e.Assigned="AssignmentsData",e.LastUpdated="CloudPcUserSetting.LastModifiedDateTime"}(U||(U={})),U),_=l(37716),V=l(47010),j=["popoverRef"];function H(e,t){if(1&e){var n=_["\u0275\u0275getCurrentView"]();_["\u0275\u0275elementStart"](0,"ngx-table-filter-popover",4),_["\u0275\u0275listener"]("filtersChanges",function(e){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"]().filtersChanged(e)}),_["\u0275\u0275elementEnd"]()}if(2&e){var r=_["\u0275\u0275nextContext"]();_["\u0275\u0275property"]("filters",r.filters)("filterName",r.filterName)}}var $=function(e){return{"filters-applied":e}},B=function(){var e=function(){function e(){var t=this;c(this,e),this.dataSource=[],this.filtersChanges=new _.EventEmitter,this.filters=[],this.areFiltersApplied=!1,this.valueMapper=function(e){var n;switch(t.resourcePath){case U.Assigned:return(null===(n=e.AssignmentsData)||void 0===n?void 0:n.length)>0?"Yes":"No";default:return t.getObjectValueByResourcePath(e,t.resourcePath)}},this.getObjectValueByResourcePath=function(e,t){return null==t?void 0:t.split(".").reduce(function(e,t){return e&&void 0!==e[t]?e[t]:void 0},e)}}return d(e,[{key:"ngOnInit",value:function(){this.buildFilters()}},{key:"filtersChanged",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.areFiltersApplied=e[0].some(function(e){return e.checked}),this.filtersChanges.emit(e),n||null===(t=this.popoverRef)||void 0===t||t.hide()}},{key:"buildFilters",value:function(){var e;if((null===(e=this.dataSource)||void 0===e?void 0:e.length)&&this.resourcePath){var t=new Set(this.dataSource.map(this.valueMapper)),n=Array.from(t);this.filters=n.map(function(e){return{label:e,checked:!1}}).sort(function(e,t){return e.label.toLowerCase().localeCompare(t.label.toLowerCase())})}}},{key:"resetAllFilters",value:function(){this.filters=this.filters.map(function(e){return a(a({},e),{},{checked:!1})}),this.areFiltersApplied=!1,this.filtersChanged([this.filters,this.filterName],!0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=_["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-user-settings-filter-trigger"]],viewQuery:function(e,t){var n;(1&e&&_["\u0275\u0275viewQuery"](j,7),2&e)&&(_["\u0275\u0275queryRefresh"](n=_["\u0275\u0275loadQuery"]())&&(t.popoverRef=n.first))},inputs:{resourcePath:"resourcePath",filterName:"filterName",dataSource:"dataSource"},outputs:{filtersChanges:"filtersChanges"},decls:5,vars:5,consts:[["nbButton","","size","tiny","nbPopoverTrigger","focus","nbPopoverPlacement","bottom",3,"ngClass","nbPopover","disabled","click"],["popoverRef","nbPopover"],["icon","funnel"],["tableFilterPopoverTpl",""],[3,"filters","filterName","filtersChanges"]],template:function(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"button",0,1),_["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),_["\u0275\u0275element"](2,"nb-icon",2),_["\u0275\u0275elementEnd"](),_["\u0275\u0275template"](3,H,1,2,"ng-template",null,3,_["\u0275\u0275templateRefExtractor"])),2&e){var n=_["\u0275\u0275reference"](4);_["\u0275\u0275property"]("ngClass",_["\u0275\u0275pureFunction1"](3,$,t.areFiltersApplied))("nbPopover",n)("disabled",!t.dataSource.length&&!t.areFiltersApplied)}},directives:[A.DPz,u.mk,A.ydg,A.fMN,V.D],styles:['[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]   button.filters-applied[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-.188em;right:-.188em;width:.7em;height:.7em;border-radius:50%;background-color:var(--primary)}']}),e}(),z=l(3679),q=l(88002),L=l(36123),W=l(30110),Q=l(39538),K=(function(e){e[e.NotConfigured=0]="NotConfigured",e[e.CrossRegion=1]="CrossRegion",e[e.Premium=2]="Premium",e[e.UnknownFutureValue=3]="UnknownFutureValue"}(K||(K={})),K),Y=(function(e){e[e.MicrosoftHostedNetwork=0]="MicrosoftHostedNetwork",e[e.AzureNetworkConnection=1]="AzureNetworkConnection"}(Y||(Y={})),Y),J=(function(e){e[e.Image=0]="Image",e[e.Snapshot=1]="Snapshot",e[e.UnknownFutureValue=2]="UnknownFutureValue"}(J||(J={})),J),X=(function(e){e[e.Hours4=4]="Hours4",e[e.Hours6=6]="Hours6",e[e.Hours12=12]="Hours12",e[e.Hours16=16]="Hours16",e[e.Hours24=24]="Hours24"}(X||(X={})),X),Z=function(){var t=function(){function t(e,n,r,o,i,l){c(this,t),this.dialogRef=e,this.dialogService=n,this.viewSceneService=r,this.wd365Service=o,this.toastrService=i,this.cdr=l,this.destroyed$=new p.xQ,this.tenants$=this.wd365Service.getViewScenes(),this.form=new z.cw({settings:new z.cw({tenant:new z.NI(null,z.kI.required),displayName:new z.NI("",z.kI.required),localAdminEnabled:new z.NI(!1),resetEnabled:new z.NI(!1),userRestoreEnabled:new z.NI(!1),frequencyInHours:new z.NI(X.Hours12),disasterRecoveryType:new z.NI(K.NotConfigured),networkType:new z.NI(Y.MicrosoftHostedNetwork),regionGroup:new z.NI(""),regionName:new z.NI(""),userInitiatedDisasterRecoveryAllowed:new z.NI(!1),provisioningSourceType:new z.NI("")}),assignments:new z.cw({groups:new z.Oe([])})}),this.isSaving=!1}return d(t,[{key:"assignmentGroupsFormArray",get:function(){var e;return null===(e=this.form.get("assignments"))||void 0===e?void 0:e.get("groups")}},{key:"userSettings",set:function(e){var t;e&&(this.cloudPcUserSettings=a({},e),this.populateSettingsForm(e),this.populateAssignmentsFormArray(null===(t=this.cloudPcUserSettings)||void 0===t?void 0:t.AssignmentsData))}},{key:"ngOnInit",value:function(){var e=this;this.initialFormValues=this.form.getRawValue(),this.hasFormChanges$=this.form.valueChanges.pipe((0,q.U)(function(t){return(0,L.xF)(e.initialFormValues,t).hasDifference}),(0,x.O)(!1))}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"close",value:function(){(0,L.xF)(this.initialFormValues,this.form.getRawValue()).hasDifference?this.showConfirmationDialog():this.dialogRef.close()}},{key:"showConfirmationDialog",value:function(){var e=this;this.dialogService.open(W.z,{context:{headerTitle:"Warning",bodyText:"You are about to exit without saving your changes. Are you sure you want to leave?",cancelButtonText:"Close without saving",confirmButtonText:"Stay"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1}).onClose.subscribe(function(t){!0!==t&&e.dialogRef.close()})}},{key:"save",value:function(){var t,n,r=this,o=this.form.getRawValue().settings,l=o.tenant,s=o.networkType===Y.MicrosoftHostedNetwork&&o.regionGroup,c=this.assignmentGroupsFormArray.value.map(function(t){t.checked;return i(t,e)}),u=null===(n=null===(t=this.cloudPcUserSettings)||void 0===t?void 0:t.CloudPcUserSetting)||void 0===n?void 0:n.Id,d=a(a(a({},u&&{id:u}),{},{displayName:o.displayName,localAdminEnabled:o.localAdminEnabled,resetEnabled:o.resetEnabled,restorePointSetting:{userRestoreEnabled:o.userRestoreEnabled,frequencyInHours:o.frequencyInHours},crossRegionDisasterRecoverySetting:{crossRegionDisasterRecoveryEnabled:o.disasterRecoveryType===K.CrossRegion,maintainCrossRegionRestorePointEnabled:!0,disasterRecoveryType:o.disasterRecoveryType,userInitiatedDisasterRecoveryAllowed:o.disasterRecoveryType===K.Premium&&o.userInitiatedDisasterRecoveryAllowed,disasterRecoveryNetworkSetting:s?{RegionGroup:o.regionGroup,RegionName:o.regionName}:null},notificationSetting:{restartPromptsDisabled:!1}},""!==o.provisioningSourceType&&{provisioningSourceType:o.provisioningSourceType}),{},{Assignments:c});this.isSaving=!0,this.cdr.markForCheck(),this.wd365Service.saveUserSettings(l,d).pipe((0,P.R)(this.destroyed$)).subscribe({next:function(){r.toastrService.success(r.cloudPcUserSettings?"User setting updated":"User setting created","Success"),r.dialogRef.close({created:!0})},error:function(e){r.isSaving=!1,r.toastrService.danger(e.message||(r.cloudPcUserSettings?"Failed to update user setting":"Failed to create user setting"),"Error"),r.cdr.markForCheck()}})}},{key:"populateSettingsForm",value:function(e){var t,n,r,o,i,l,a,s,c,u,d=e.CloudPcUserSetting,m=null==d?void 0:d.RestorePointSetting,p=null==d?void 0:d.CrossRegionDisasterRecoverySetting,f=null==p?void 0:p.DisasterRecoveryNetworkSetting;this.form.patchValue({settings:{tenant:e.SceneId,displayName:null!==(t=null==d?void 0:d.DisplayName)&&void 0!==t?t:"",localAdminEnabled:null!==(n=null==d?void 0:d.LocalAdminEnabled)&&void 0!==n&&n,resetEnabled:null!==(r=null==d?void 0:d.ResetEnabled)&&void 0!==r&&r,userRestoreEnabled:null!==(o=null==m?void 0:m.UserRestoreEnabled)&&void 0!==o&&o,frequencyInHours:null!==(i=null==m?void 0:m.FrequencyInHours)&&void 0!==i?i:X.Hours12,disasterRecoveryType:null!==(l=null==p?void 0:p.DisasterRecoveryType)&&void 0!==l?l:K.NotConfigured,networkType:Y.MicrosoftHostedNetwork,regionGroup:null!==(a=null==f?void 0:f.RegionGroup)&&void 0!==a?a:"",regionName:null!==(s=null==f?void 0:f.RegionName)&&void 0!==s?s:"",userInitiatedDisasterRecoveryAllowed:null!==(c=null==p?void 0:p.UserInitiatedDisasterRecoveryAllowed)&&void 0!==c&&c,provisioningSourceType:null!==(u=null==d?void 0:d.ProvisioningSourceType)&&void 0!==u?u:""}})}},{key:"populateAssignmentsFormArray",value:function(e){var t,n=this;this.assignmentGroupsFormArray.clear(),null===(t=null==e?void 0:e.map(function(e){return a(a({},e),{},{checked:!1})}))||void 0===t||t.forEach(function(e){return n.assignmentGroupsFormArray.push(new z.NI(e),{emitEvent:!1})}),this.initialFormValues=this.form.getRawValue()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(_["\u0275\u0275directiveInject"](A.X4l),_["\u0275\u0275directiveInject"](A.Gln),_["\u0275\u0275directiveInject"](Q.E),_["\u0275\u0275directiveInject"](D.G),_["\u0275\u0275directiveInject"](A.quB),_["\u0275\u0275directiveInject"](_.ChangeDetectorRef))},t.\u0275cmp=_["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-manage-user-settings-dialog"]],inputs:{userSettings:"userSettings"},decls:17,vars:16,consts:[["nbSpinnerMessage","Saving...",3,"nbSpinner"],[3,"formGroup"],["tabTitle","Settings","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["settingsTab",""],[3,"form","tenants","cloudPcUserSettings"],["tabTitle","Assignments"],[3,"form","tenantId"],[1,"d-flex","justify-content-between"],["type","button","nbButton","",3,"disabled","click"]],template:function(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"nb-card",0),_["\u0275\u0275elementStart"](1,"nb-card-header"),_["\u0275\u0275text"](2),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](3,"nb-card-body"),_["\u0275\u0275elementStart"](4,"nb-tabset",1),_["\u0275\u0275elementStart"](5,"nb-tab",2,3),_["\u0275\u0275element"](7,"ngx-settings-tab",4),_["\u0275\u0275pipe"](8,"async"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](9,"nb-tab",5),_["\u0275\u0275element"](10,"ngx-assignments-tab",6),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](11,"nb-card-footer",7),_["\u0275\u0275elementStart"](12,"button",8),_["\u0275\u0275listener"]("click",function(){return t.close()}),_["\u0275\u0275text"](13,"Close"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](14,"button",8),_["\u0275\u0275listener"]("click",function(){return t.save()}),_["\u0275\u0275pipe"](15,"async"),_["\u0275\u0275text"](16),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e){var n,r=_["\u0275\u0275reference"](6);_["\u0275\u0275property"]("nbSpinner",t.isSaving),_["\u0275\u0275advance"](2),_["\u0275\u0275textInterpolate1"](" ",t.cloudPcUserSettings?"Update user settings":"Create user settings"," "),_["\u0275\u0275advance"](2),_["\u0275\u0275property"]("formGroup",t.form),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("badgeDot",!r.active&&(null==t.form.controls||null==t.form.controls.settings?null:t.form.controls.settings.invalid)),_["\u0275\u0275advance"](2),_["\u0275\u0275property"]("form",null==t.form.controls?null:t.form.controls.settings)("tenants",_["\u0275\u0275pipeBind1"](8,12,t.tenants$))("cloudPcUserSettings",t.cloudPcUserSettings),_["\u0275\u0275advance"](3),_["\u0275\u0275property"]("form",null==t.form.controls?null:t.form.controls.assignments)("tenantId",null==(n=t.form.get("settings.tenant"))?null:n.value),_["\u0275\u0275advance"](2),_["\u0275\u0275property"]("disabled",t.isSaving),_["\u0275\u0275advance"](2),_["\u0275\u0275property"]("disabled",t.form.invalid||t.isSaving||t.cloudPcUserSettings&&!_["\u0275\u0275pipeBind1"](15,14,t.hasFormChanges$)),_["\u0275\u0275advance"](2),_["\u0275\u0275textInterpolate1"](" ",t.cloudPcUserSettings?"Update":"Save"," ")}},styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:80em;height:80vh}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]   nb-tabset[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]   nb-tabset[_ngcontent-%COMP%]   nb-tab[_ngcontent-%COMP%]{height:calc(100% - 2rem);overflow-y:auto}"],changeDetection:0}),t}(),ee=l(60290),te=l(73544);function ne(e,t){1&e&&_["\u0275\u0275element"](0,"nb-spinner")}function re(e,t){if(1&e){var n=_["\u0275\u0275getCurrentView"]();_["\u0275\u0275elementStart"](0,"ngx-user-settings-filter-trigger",18),_["\u0275\u0275listener"]("filtersChanges",function(e){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"](2).populateFiltersSet(e)}),_["\u0275\u0275elementEnd"]()}if(2&e){var r=_["\u0275\u0275nextContext"](2);_["\u0275\u0275property"]("resourcePath",r.sortKeys.Tenant)("dataSource",r.allUserSettingsCache)}}function oe(e,t){if(1&e){var n=_["\u0275\u0275getCurrentView"]();_["\u0275\u0275elementStart"](0,"ngx-user-settings-filter-trigger",19),_["\u0275\u0275listener"]("filtersChanges",function(e){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"](2).populateFiltersSet(e)}),_["\u0275\u0275elementEnd"]()}if(2&e){var r=_["\u0275\u0275nextContext"](2);_["\u0275\u0275property"]("resourcePath",r.sortKeys.Assigned)("dataSource",r.allUserSettingsCache)}}function ie(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"td"),_["\u0275\u0275text"](1),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate"]((null==n.AssignmentsData?null:n.AssignmentsData.length)>0?"Yes":"No")}}function le(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"td"),_["\u0275\u0275text"](1),_["\u0275\u0275pipe"](2,"date"),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate"](_["\u0275\u0275pipeBind2"](2,1,n.CloudPcUserSetting.LastModifiedDateTime,"short"))}}function ae(e,t){if(1&e){var n=_["\u0275\u0275getCurrentView"]();_["\u0275\u0275elementStart"](0,"td",20),_["\u0275\u0275elementStart"](1,"nb-action",21),_["\u0275\u0275listener"]("click",function(){var e=_["\u0275\u0275restoreView"](n).$implicit;return _["\u0275\u0275nextContext"](2).openManageUserSettingsDialog(e)}),_["\u0275\u0275element"](2,"nb-icon",22),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()}}function se(e,t){if(1&e){var n=_["\u0275\u0275getCurrentView"]();_["\u0275\u0275elementContainerStart"](0),_["\u0275\u0275elementStart"](1,"ngx-data-table",1,2),_["\u0275\u0275listener"]("clearFiltersClick",function(){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"]().clearFilters()})("selectionChange",function(e){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"]().selectionChange(e)}),_["\u0275\u0275elementStart"](3,"div",3),_["\u0275\u0275elementStart"](4,"nb-actions",4),_["\u0275\u0275elementStart"](5,"nb-action",5),_["\u0275\u0275listener"]("click",function(){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"]().removeSelectedUserSettings()}),_["\u0275\u0275element"](6,"nb-icon",6),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](7,"nb-action",7),_["\u0275\u0275listener"]("click",function(){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"]().openManageUserSettingsDialog()}),_["\u0275\u0275element"](8,"nb-icon",8),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](9,"ngx-table-column",9),_["\u0275\u0275template"](10,re,1,2,"ng-template",null,10,_["\u0275\u0275templateRefExtractor"]),_["\u0275\u0275elementEnd"](),_["\u0275\u0275element"](12,"ngx-table-column",11),_["\u0275\u0275elementStart"](13,"ngx-table-column",12),_["\u0275\u0275template"](14,oe,1,2,"ng-template",null,10,_["\u0275\u0275templateRefExtractor"]),_["\u0275\u0275template"](16,ie,2,1,"ng-template",null,13,_["\u0275\u0275templateRefExtractor"]),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](18,"ngx-table-column",14),_["\u0275\u0275template"](19,le,3,4,"ng-template",null,13,_["\u0275\u0275templateRefExtractor"]),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](21,"ngx-table-column",15),_["\u0275\u0275template"](22,ae,3,0,"ng-template",null,13,_["\u0275\u0275templateRefExtractor"]),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](24,"button",16),_["\u0275\u0275listener"]("click",function(){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"]().update()}),_["\u0275\u0275element"](25,"nb-icon",17),_["\u0275\u0275text"](26," Update "),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementContainerEnd"]()}if(2&e){var r=_["\u0275\u0275reference"](2),o=_["\u0275\u0275nextContext"]();_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("data",o.userSettings)("config",o.tableConfig)("columnFilters",o.filterState.columnFilters),_["\u0275\u0275advance"](4),_["\u0275\u0275propertyInterpolate"]("nbTooltip",r.hasSelection?"Delete":"Select at least one item to delete"),_["\u0275\u0275property"]("disabled",!r.hasSelection),_["\u0275\u0275advance"](4),_["\u0275\u0275property"]("sortable",!0)("searchable",!0),_["\u0275\u0275advance"](3),_["\u0275\u0275property"]("sortable",!0)("searchable",!0),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("sortable",!0),_["\u0275\u0275advance"](5),_["\u0275\u0275property"]("sortable",!0)}}var ce,ue={autoFocus:!0,closeOnEsc:!1,closeOnBackdropClick:!1,hasScroll:!1},de=[{path:"",component:(ce=function(){function e(t,n,r,o){var i=this;c(this,e),this.wd365Service=t,this.toastrService=n,this.cdr=r,this.dialogService=o,this.destroyed$=new p.xQ,this.selectedUserSettingsGroups={},this.userSettings$=new p.xQ,this.filterState={searchQuery:"",columnFilters:{}},this.tableConfig={id:"UserSettings",search:{placeholder:"Search for user settings"},selectionKey:"IsSelected",sorting:{enabled:!0,defaultColumn:U.Tenant,defaultDirection:"asc"}},this.sortKeys=U,this.userSettings=[],this.allUserSettingsCache=[],this.isLoading=!1,this.retryApiCallWithToastCallback=function(e){return e.pipe((0,y.b)(function(e){return i.showDangerToast("Failure accessing the User Settings API","Cannot read data from API. The message is: ".concat(e.message," with status ").concat(e.statusText))}),(0,b.j)(function(){return(0,f.H)(M.e5)}))},this.handleApiErrorCallback=function(e){return(0,g._)(function(){return i.showDangerToast("Failure accessing the API","Cannot read data from API. Reload this site to try it again. The message is: ".concat(e.message," with status ").concat(e.statusText)),(0,v.of)([])})}}return d(e,[{key:"ngOnInit",value:function(){this.loadUserSettings()}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"openManageUserSettingsDialog",value:function(e){var t=this;this.dialogService.open(Z,a({context:{userSettings:e}},ue)).onClose.subscribe(function(e){(null==e?void 0:e.created)&&t.update()})}},{key:"update",value:function(){this.userSettings$.next()}},{key:"populateFiltersSet",value:function(e){var t=n(e,2),r=t[0],o=t[1],i=r.filter(function(e){return e.checked}).map(function(e){return e.label.toLowerCase()});this.filterState=a(a({},this.filterState),{},{columnFilters:a(a({},this.filterState.columnFilters),{},s({},o,i))}),this.applyAllFilters()}},{key:"clearFilters",value:function(){var e;this.filterState=a(a({},this.filterState),{},{columnFilters:{}}),null===(e=this.filterTriggers)||void 0===e||e.forEach(function(e){return e.resetAllFilters()}),this.applyAllFilters()}},{key:"selectionChange",value:function(e){var n=this.userSettings.filter(function(t){return e.includes(t.CloudPcUserSetting.Id)});this.selectedUserSettingsGroups=n.reduce(function(e,n){var r;return n.SceneId?a(a({},e),{},s({},n.SceneId,[].concat(t(null!==(r=e[n.SceneId])&&void 0!==r?r:[]),[n.CloudPcUserSetting.Id]))):e},{})}},{key:"removeSelectedUserSettings",value:function(){var e=this,t=Object.values(this.selectedUserSettingsGroups).flat().length;0!==t&&this.dialogService.open(W.z,a({context:{headerTitle:"Delete user settings?",bodyText:"Please confirm deletion of ".concat(t," user setting(s)"),cancelButtonText:"Cancel",confirmButtonText:"Delete"}},ue)).onClose.pipe((0,S.q)(1),(0,C.h)(function(e){return!0===e}),(0,E.w)(function(){return e.processUserSettingsRemoval()})).subscribe({next:function(){e.update(),e.toastrService.success("".concat(t," user settings deleted"),"User setting deleted")},error:function(t){return e.toastrService.danger(t.message,"Error")}})}},{key:"loadUserSettings",value:function(){var e=this;this.isLoading=!0,this.userSettings$.pipe((0,x.O)(0),(0,E.w)(function(){return(0,f.H)(0,G.tc.autoRefreshDefault)}),(0,E.w)(function(){return e.wd365Service.getUserSettings()}),(0,k.a)(this.retryApiCallWithToastCallback),(0,w.K)(this.handleApiErrorCallback),(0,y.b)(function(n){var r=n.map(function(e){var t,n;return a(a({},e),{},{Id:null!==(n=null===(t=e.CloudPcUserSetting)||void 0===t?void 0:t.Id)&&void 0!==n?n:e.Id})});e.allUserSettingsCache=t(r),e.applyAllFilters()}),(0,P.R)(this.destroyed$)).subscribe(function(){e.isLoading=!1,e.cdr.markForCheck()})}},{key:"showDangerToast",value:function(e,t){this.toastrService.danger(t,e,{destroyByClick:!0,duration:2e4,hasIcon:!0,position:A.fe3.TOP_RIGHT,preventDuplicates:!0})}},{key:"applyAllFilters",value:function(){var e=this,n=t(this.allUserSettingsCache);Object.keys(this.filterState.columnFilters).some(function(t){var n;return(null===(n=e.filterState.columnFilters[t])||void 0===n?void 0:n.length)>0})&&(n=this.applyColumnFilters(n)),this.userSettings=n,this.cdr.markForCheck()}},{key:"applyColumnFilters",value:function(e){var t=this,n=Object.keys(this.filterState.columnFilters).filter(function(e){var n;return(null===(n=t.filterState.columnFilters[e])||void 0===n?void 0:n.length)>0});return n.length?e.filter(function(e){return n.every(function(n){var r,o=t.filterState.columnFilters[n],i=null===(r=t.getTableCellValue(e,n))||void 0===r?void 0:r.toLowerCase();return o.includes(i)})}):e}},{key:"getTableCellValue",value:function(e,t){var n;switch(t){case"SceneName":return e.SceneName;case"IsAssigned":return(null===(n=e.AssignmentsData)||void 0===n?void 0:n.length)>0?"Yes":"No";default:return""}}},{key:"processUserSettingsRemoval",value:function(){var e=this;return(0,h.D)(Object.entries(this.selectedUserSettingsGroups)).pipe((0,O.b)(function(t){var r=n(t,2),o=r[0],i=r[1];return e.wd365Service.removeUserSettings(o,i)}),function(e,t){return arguments.length>=2?function(n){return(0,T.z)((0,R.R)(e,t),(0,I.h)(1),(0,N.d)(t))(n)}:function(t){return(0,T.z)((0,R.R)(function(t,n,r){return e(t,n,r+1)}),(0,I.h)(1))(t)}}(F,[]))}}]),e}(),ce.\u0275fac=function(e){return new(e||ce)(_["\u0275\u0275directiveInject"](D.G),_["\u0275\u0275directiveInject"](A.quB),_["\u0275\u0275directiveInject"](_.ChangeDetectorRef),_["\u0275\u0275directiveInject"](A.Gln))},ce.\u0275cmp=_["\u0275\u0275defineComponent"]({type:ce,selectors:[["ngx-user-settings"]],viewQuery:function(e,t){var n;1&e&&_["\u0275\u0275viewQuery"](B,5),2&e&&_["\u0275\u0275queryRefresh"](n=_["\u0275\u0275loadQuery"]())&&(t.filterTriggers=n)},decls:7,vars:2,consts:[[4,"ngIf"],[3,"data","config","columnFilters","clearFiltersClick","selectionChange"],["dataTable",""],["data-table-actions","",1,"d-flex","align-items-center"],["size","small"],["nbTooltipPlacement","top",3,"disabled","nbTooltip","click"],["icon","trash-2-outline"],[3,"click"],["icon","plus-outline"],["key","SceneName","label","Tenant",3,"sortable","searchable"],["headerFilter",""],["key","CloudPcUserSetting.DisplayName","label","Name",3,"sortable","searchable"],["key","AssignmentsData","label","Assigned",3,"sortable"],["cell",""],["key","CloudPcUserSetting.LastModifiedDateTime","label","Last updated",3,"sortable"],["key","actions","label","Edit"],["type","button","nbButton","","status","semi-round",3,"click"],["icon","refresh"],["filterName","SceneName",3,"resourcePath","dataSource","filtersChanges"],["filterName","IsAssigned",3,"resourcePath","dataSource","filtersChanges"],[1,"text-center","align-middle"],["nbTooltip","Edit user setting",1,"d-inline","c-pointer",3,"click"],["icon","settings-2-outline"]],template:function(e,t){1&e&&(_["\u0275\u0275elementStart"](0,"nb-card"),_["\u0275\u0275elementStart"](1,"nb-card-header"),_["\u0275\u0275elementStart"](2,"h1"),_["\u0275\u0275text"](3,"User Settings"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](4,"nb-card-body"),_["\u0275\u0275template"](5,ne,1,0,"nb-spinner",0),_["\u0275\u0275template"](6,se,27,11,"ng-container",0),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e&&(_["\u0275\u0275advance"](5),_["\u0275\u0275property"]("ngIf",t.isLoading),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",!t.isLoading))},directives:[A.Asz,A.ndF,A.yKW,u.O5,A.Tzq,ee.Q,A.lYD,A.Bk3,A.jNv,A.fMN,te.U,A.DPz,B],pipes:[u.uU],styles:["[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   nb-actions[_ngcontent-%COMP%]   nb-action[_ngcontent-%COMP%]:not(.disabled){cursor:pointer}"],changeDetection:0}),ce)}],me=function(){var e=function e(){c(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=_["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=_["\u0275\u0275defineInjector"]({imports:[[m.Bz.forChild(de)],m.Bz]}),e}(),pe=l(61367),fe=l(14171),ge=l(88100);function ve(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"nb-option",32),_["\u0275\u0275text"](1),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;_["\u0275\u0275property"]("value",n.Id),_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate1"](" ",n.DisplayName," ")}}function he(e,t){1&e&&(_["\u0275\u0275elementContainerStart"](0),_["\u0275\u0275elementStart"](1,"span",33),_["\u0275\u0275text"](2,"This field is required"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementContainerEnd"]())}function ye(e,t){1&e&&(_["\u0275\u0275elementContainerStart"](0),_["\u0275\u0275elementStart"](1,"span",33),_["\u0275\u0275text"](2,"This field is required"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementContainerEnd"]())}function be(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"nb-option",32),_["\u0275\u0275text"](1),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;_["\u0275\u0275property"]("value",n.value),_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate1"](" ",n.label," ")}}function Se(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"nb-option",32),_["\u0275\u0275text"](1),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;_["\u0275\u0275property"]("value",n.value),_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate1"](" ",n.label," ")}}function Ce(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"nb-option",43),_["\u0275\u0275text"](1),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=_["\u0275\u0275nextContext"](4);_["\u0275\u0275property"]("value",n.value)("disabled",n.value===r.CloudPcDisasterRecoveryNetworkType.AzureNetworkConnection),_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate1"](" ",n.label," ")}}function Ee(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"div",3),_["\u0275\u0275elementStart"](1,"div",13),_["\u0275\u0275elementStart"](2,"label",39),_["\u0275\u0275text"](3,"Network Type"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275element"](4,"nb-icon",40),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](5,"div",7),_["\u0275\u0275elementStart"](6,"nb-select",41),_["\u0275\u0275template"](7,Ce,2,3,"nb-option",42),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"](3);_["\u0275\u0275advance"](7),_["\u0275\u0275property"]("ngForOf",n.networkTypeOptions)}}function xe(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"nb-option",32),_["\u0275\u0275text"](1),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;_["\u0275\u0275property"]("value",n.value),_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate1"](" ",n.label," ")}}function ke(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"nb-option",32),_["\u0275\u0275text"](1),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;_["\u0275\u0275property"]("value",n.value),_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate1"](" ",n.label," ")}}function we(e,t){if(1&e&&(_["\u0275\u0275elementContainerStart"](0),_["\u0275\u0275elementStart"](1,"div",3),_["\u0275\u0275elementStart"](2,"div",4),_["\u0275\u0275elementStart"](3,"label",44),_["\u0275\u0275elementStart"](4,"span",6),_["\u0275\u0275text"](5,"*"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](6,"span"),_["\u0275\u0275text"](7,"Geography"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](8,"div",7),_["\u0275\u0275elementStart"](9,"nb-select",45),_["\u0275\u0275template"](10,xe,2,2,"nb-option",9),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](11,"div",3),_["\u0275\u0275elementStart"](12,"div",4),_["\u0275\u0275elementStart"](13,"label",46),_["\u0275\u0275elementStart"](14,"span",6),_["\u0275\u0275text"](15,"*"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](16,"span"),_["\u0275\u0275text"](17,"Region"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](18,"div",7),_["\u0275\u0275elementStart"](19,"nb-select",47),_["\u0275\u0275template"](20,ke,2,2,"nb-option",9),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementContainerEnd"]()),2&e){var n=_["\u0275\u0275nextContext"](3);_["\u0275\u0275advance"](9),_["\u0275\u0275property"]("nbSpinner",(null==n.form||null==n.form.controls||null==n.form.controls.tenant?null:n.form.controls.tenant.value)&&(null==n.form||null==n.form.controls||null==n.form.controls.disasterRecoveryType?null:n.form.controls.disasterRecoveryType.value)!==n.CloudPcDisasterRecoveryType.NotConfigured&&!n.regionGroupOptions.length)("placeholder",null!=n.form&&null!=n.form.controls&&null!=n.form.controls.tenant&&n.form.controls.tenant.value?"Select one":"Select tenant first"),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngForOf",n.regionGroupOptions),_["\u0275\u0275advance"](9),_["\u0275\u0275property"]("nbSpinner",(null==n.form||null==n.form.controls||null==n.form.controls.regionGroup?null:n.form.controls.regionGroup.value)&&!n.regionNameOptions.length)("placeholder",null!=n.form&&null!=n.form.controls&&null!=n.form.controls.regionGroup&&n.form.controls.regionGroup.value?"Select one":"Select geography first"),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngForOf",n.regionNameOptions)}}function Pe(e,t){1&e&&(_["\u0275\u0275elementStart"](0,"div",3),_["\u0275\u0275elementStart"](1,"div",13),_["\u0275\u0275elementStart"](2,"label",14),_["\u0275\u0275text"](3,"Allow user to initiate Disaster Recovery Plus service"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](4,"div",16),_["\u0275\u0275element"](5,"nb-checkbox",48),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]())}function Oe(e,t){if(1&e&&(_["\u0275\u0275elementContainerStart"](0),_["\u0275\u0275elementStart"](1,"p",20),_["\u0275\u0275text"](2," Protect Cloud PCs during regional outages. Purchase and assign optional disaster recovery licenses before configuring. Disaster Recovery Plus cannot be configured for Frontline Cloud PCs. Optional disaster recovery cannot be configured for Government Cloud PCs. "),_["\u0275\u0275elementStart"](3,"a",34),_["\u0275\u0275text"](4,"Learn more about optional Business Continuity and Disaster Recovery"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275text"](5,". "),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](6,"div",3),_["\u0275\u0275elementStart"](7,"div",13),_["\u0275\u0275elementStart"](8,"label",35),_["\u0275\u0275text"](9,"Enable additional DR for this user setting"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275element"](10,"nb-icon",36),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](11,"div",7),_["\u0275\u0275elementStart"](12,"nb-select",37),_["\u0275\u0275template"](13,Se,2,2,"nb-option",9),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275template"](14,Ee,8,1,"div",38),_["\u0275\u0275template"](15,we,21,6,"ng-container",10),_["\u0275\u0275template"](16,Pe,6,0,"div",38),_["\u0275\u0275elementContainerEnd"]()),2&e){var n=_["\u0275\u0275nextContext"](2);_["\u0275\u0275advance"](13),_["\u0275\u0275property"]("ngForOf",n.disasterRecoveryOptions),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",(null==n.form||null==n.form.controls||null==n.form.controls.disasterRecoveryType?null:n.form.controls.disasterRecoveryType.value)!==n.CloudPcDisasterRecoveryType.NotConfigured),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",(null==n.form||null==n.form.controls||null==n.form.controls.disasterRecoveryType?null:n.form.controls.disasterRecoveryType.value)!==n.CloudPcDisasterRecoveryType.NotConfigured&&(null==n.form||null==n.form.controls||null==n.form.controls.networkType?null:n.form.controls.networkType.value)===n.CloudPcDisasterRecoveryNetworkType.MicrosoftHostedNetwork),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",(null==n.form||null==n.form.controls||null==n.form.controls.disasterRecoveryType?null:n.form.controls.disasterRecoveryType.value)===n.CloudPcDisasterRecoveryType.Premium)}}function Re(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"nb-option",32),_["\u0275\u0275text"](1),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;_["\u0275\u0275property"]("value",n.value),_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate1"](" ",n.label," ")}}function Ie(e,t){if(1&e){var n=_["\u0275\u0275getCurrentView"]();_["\u0275\u0275elementContainerStart"](0,1),_["\u0275\u0275elementStart"](1,"h6",2),_["\u0275\u0275text"](2,"General"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](3,"div",3),_["\u0275\u0275elementStart"](4,"div",4),_["\u0275\u0275elementStart"](5,"label",5),_["\u0275\u0275elementStart"](6,"span",6),_["\u0275\u0275text"](7,"*"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](8,"span"),_["\u0275\u0275text"](9,"Tenant"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](10,"div",7),_["\u0275\u0275elementStart"](11,"nb-select",8),_["\u0275\u0275template"](12,ve,2,2,"nb-option",9),_["\u0275\u0275elementEnd"](),_["\u0275\u0275template"](13,he,3,0,"ng-container",10),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](14,"div",3),_["\u0275\u0275elementStart"](15,"div",4),_["\u0275\u0275elementStart"](16,"label",11),_["\u0275\u0275elementStart"](17,"span",6),_["\u0275\u0275text"](18,"*"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](19,"span"),_["\u0275\u0275text"](20,"Name"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](21,"div",7),_["\u0275\u0275element"](22,"input",12),_["\u0275\u0275template"](23,ye,3,0,"ng-container",10),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](24,"div",3),_["\u0275\u0275elementStart"](25,"div",13),_["\u0275\u0275elementStart"](26,"label",14),_["\u0275\u0275text"](27,"Enable Local admin"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275element"](28,"nb-icon",15),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](29,"div",16),_["\u0275\u0275element"](30,"nb-checkbox",17),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](31,"div",3),_["\u0275\u0275elementStart"](32,"div",13),_["\u0275\u0275elementStart"](33,"label",14),_["\u0275\u0275text"](34,"Enable users to reset their Cloud PCs"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275element"](35,"nb-icon",18),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](36,"div",16),_["\u0275\u0275element"](37,"nb-checkbox",19),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](38,"h6",2),_["\u0275\u0275text"](39,"Point-in-time restore service"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](40,"p",20),_["\u0275\u0275text"](41," Restore a user\u2019s Cloud PC to a backup taken at a specific point in time. Users will lose any data stored on the Cloud PC disk between the current time and the recovery point. "),_["\u0275\u0275elementStart"](42,"a",21),_["\u0275\u0275text"](43,"Learn more"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275text"](44,". "),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](45,"div",3),_["\u0275\u0275elementStart"](46,"div",13),_["\u0275\u0275elementStart"](47,"label",14),_["\u0275\u0275text"](48,"Allow user to initiate restore service"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275element"](49,"nb-icon",22),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](50,"div",16),_["\u0275\u0275element"](51,"nb-checkbox",23),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](52,"div",3),_["\u0275\u0275elementStart"](53,"div",13),_["\u0275\u0275elementStart"](54,"label",24),_["\u0275\u0275text"](55,"Frequency of restore-point service"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275element"](56,"nb-icon",25),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](57,"div",7),_["\u0275\u0275elementStart"](58,"nb-select",26),_["\u0275\u0275template"](59,be,2,2,"nb-option",9),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275element"](60,"hr",27),_["\u0275\u0275elementStart"](61,"h6",28),_["\u0275\u0275listener"]("click",function(){_["\u0275\u0275restoreView"](n);var e=_["\u0275\u0275nextContext"]();return e.isDisasterRecoveryExpanded=!e.isDisasterRecoveryExpanded}),_["\u0275\u0275element"](62,"nb-icon",29),_["\u0275\u0275text"](63," Optional Business Continuity and Disaster Recovery "),_["\u0275\u0275elementEnd"](),_["\u0275\u0275template"](64,Oe,17,4,"ng-container",10),_["\u0275\u0275elementStart"](65,"h6",2),_["\u0275\u0275text"](66,"Provisioning source type"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](67,"div",20),_["\u0275\u0275elementStart"](68,"ul"),_["\u0275\u0275elementStart"](69,"li"),_["\u0275\u0275elementStart"](70,"b"),_["\u0275\u0275text"](71,"Default"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275text"](72,": use the image from the provisioning policy."),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](73,"li"),_["\u0275\u0275elementStart"](74,"b"),_["\u0275\u0275text"](75,"From Snapshot"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275text"](76,": use an uploaded personal image if available. Provisioning fails if no snapshot exists for the user. "),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](77,"div",3),_["\u0275\u0275elementStart"](78,"div",4),_["\u0275\u0275elementStart"](79,"label",30),_["\u0275\u0275text"](80,"Type"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](81,"div",7),_["\u0275\u0275elementStart"](82,"nb-select",31),_["\u0275\u0275template"](83,Re,2,2,"nb-option",9),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementContainerEnd"]()}if(2&e){var r=_["\u0275\u0275nextContext"]();_["\u0275\u0275property"]("formGroup",r.form),_["\u0275\u0275advance"](11),_["\u0275\u0275property"]("nbSpinner",!(null!=r.tenants&&r.tenants.length)),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngForOf",r.tenants),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",(null==r.form||null==r.form.controls||null==r.form.controls.tenant||null==r.form.controls.tenant.errors?null:r.form.controls.tenant.errors.required)&&(null==r.form||null==r.form.controls||null==r.form.controls.tenant?null:r.form.controls.tenant.touched)),_["\u0275\u0275advance"](10),_["\u0275\u0275property"]("ngIf",(null==r.form||null==r.form.controls||null==r.form.controls.displayName||null==r.form.controls.displayName.errors?null:r.form.controls.displayName.errors.required)&&(null==r.form||null==r.form.controls||null==r.form.controls.displayName?null:r.form.controls.displayName.touched)),_["\u0275\u0275advance"](36),_["\u0275\u0275property"]("ngForOf",r.frequencyOptions),_["\u0275\u0275advance"](3),_["\u0275\u0275property"]("icon",r.isDisasterRecoveryExpanded?"chevron-down-outline":"chevron-right-outline"),_["\u0275\u0275advance"](2),_["\u0275\u0275property"]("ngIf",r.isDisasterRecoveryExpanded),_["\u0275\u0275advance"](19),_["\u0275\u0275property"]("ngForOf",r.provisioningSourceTypeOptions)}}var Ne=function(){var e=function(){function e(t,n){c(this,e),this.wd365Service=t,this.cdr=n,this.destroyed$=new p.xQ,this.supportedRegions=[],this.prevFormValue=null,this.tenants=[],this.isDisasterRecoveryExpanded=!1,this.regionGroupOptions=[],this.regionNameOptions=[],this.CloudPcDisasterRecoveryNetworkType=Y,this.CloudPcDisasterRecoveryType=K,this.frequencyOptions=[{value:X.Hours4,label:"4 hours"},{value:X.Hours6,label:"6 hours"},{value:X.Hours12,label:"12 hours"},{value:X.Hours16,label:"16 hours"},{value:X.Hours24,label:"24 hours"}],this.disasterRecoveryOptions=[{value:K.NotConfigured,label:"None"},{value:K.CrossRegion,label:"Cross Region Disaster Recovery"},{value:K.Premium,label:"Disaster Recovery Plus"}],this.networkTypeOptions=[{value:Y.MicrosoftHostedNetwork,label:"Microsoft Hosted Network"},{value:Y.AzureNetworkConnection,label:"Azure Network Connection (An upcoming feature - stay tuned)"}],this.provisioningSourceTypeOptions=[{value:"",label:"Default"},{value:J.Image,label:"Image"},{value:J.Snapshot,label:"Snapshot"}]}return d(e,[{key:"setupFormSubscriptions",value:function(){var e,t,n=this;this.prevFormValue=null===(e=this.form)||void 0===e?void 0:e.getRawValue(),null===(t=this.form)||void 0===t||t.valueChanges.pipe((0,P.R)(this.destroyed$)).subscribe(function(e){var t,r,o,i;(null===(t=n.prevFormValue)||void 0===t?void 0:t.tenant)!==e.tenant&&n.onTenantChange(),(null===(r=n.prevFormValue)||void 0===r?void 0:r.regionGroup)!==e.regionGroup&&n.onRegionGroupChange(e.regionGroup),(null===(o=n.prevFormValue)||void 0===o?void 0:o.disasterRecoveryType)!==e.disasterRecoveryType&&n.onDisasterRecoveryTypeChange(),(null===(i=n.prevFormValue)||void 0===i?void 0:i.networkType)!==e.networkType&&n.onNetworkTypeChange(),n.prevFormValue=e}),this.initializeFormState()}},{key:"onTenantChange",value:function(){this.loadRegionsIfNeeded(),this.updateRegionDisabledState()}},{key:"onRegionGroupChange",value:function(e){var t,n;this.updateRegionNameOptions(e),null===(n=null===(t=this.form)||void 0===t?void 0:t.get("regionName"))||void 0===n||n.reset("",{emitEvent:!1}),this.updateRegionDisabledState()}},{key:"onDisasterRecoveryTypeChange",value:function(){var e,t,n,r,o,i;null===(t=null===(e=this.form)||void 0===e?void 0:e.get("networkType"))||void 0===t||t.reset(Y.MicrosoftHostedNetwork,{emitEvent:!1}),null===(r=null===(n=this.form)||void 0===n?void 0:n.get("regionGroup"))||void 0===r||r.reset("",{emitEvent:!1}),null===(i=null===(o=this.form)||void 0===o?void 0:o.get("regionName"))||void 0===i||i.reset("",{emitEvent:!1}),this.updateRegionValidators(),this.updateRegionDisabledState(),this.loadRegionsIfNeeded()}},{key:"onNetworkTypeChange",value:function(){this.updateRegionValidators()}},{key:"initializeFormState",value:function(){var e,t;this.cloudPcUserSettings&&(null===(t=null===(e=this.form)||void 0===e?void 0:e.get("tenant"))||void 0===t||t.disable({emitEvent:!1})),this.updateRegionValidators(),this.updateRegionDisabledState(),this.loadRegionsIfNeeded()}},{key:"updateRegionDisabledState",value:function(){var e,t,n,r,o,i,l=null===(e=this.form)||void 0===e?void 0:e.get("regionGroup"),a=null===(t=this.form)||void 0===t?void 0:t.get("regionName"),s=!!(null===(r=null===(n=this.form)||void 0===n?void 0:n.get("tenant"))||void 0===r?void 0:r.value),c=!!(null===(i=null===(o=this.form)||void 0===o?void 0:o.get("regionGroup"))||void 0===i?void 0:i.value);s?null==l||l.enable({emitEvent:!1}):null==l||l.disable({emitEvent:!1}),c?null==a||a.enable({emitEvent:!1}):null==a||a.disable({emitEvent:!1})}},{key:"loadRegionsIfNeeded",value:function(){var e,t,n,r,o=null===(t=null===(e=this.form)||void 0===e?void 0:e.get("tenant"))||void 0===t?void 0:t.value,i=null===(r=null===(n=this.form)||void 0===n?void 0:n.get("disasterRecoveryType"))||void 0===r?void 0:r.value;o&&i!==K.NotConfigured&&0===this.regionGroupOptions.length&&this.loadSupportedRegions(o)}},{key:"ngOnInit",value:function(){this.setupFormSubscriptions(),this.expandDRSectionIfConfigured()}},{key:"expandDRSectionIfConfigured",value:function(){var e,t;(null===(t=null===(e=this.form)||void 0===e?void 0:e.get("disasterRecoveryType"))||void 0===t?void 0:t.value)!==K.NotConfigured&&(this.isDisasterRecoveryExpanded=!0)}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"loadSupportedRegions",value:function(e){var t=this;this.wd365Service.getSupportedRegions(e).pipe((0,P.R)(this.destroyed$)).subscribe(function(e){var n,r;t.supportedRegions=e,t.regionGroupOptions=e.map(function(e){return{value:e.GeographyName,label:e.GeographyName}}),t.cdr.markForCheck();var o=null===(r=null===(n=t.form)||void 0===n?void 0:n.get("regionGroup"))||void 0===r?void 0:r.value;o&&t.updateRegionNameOptions(o)})}},{key:"updateRegionNameOptions",value:function(e){var t,n=this.supportedRegions.find(function(t){return t.GeographyName===e});this.regionNameOptions=null!==(t=null==n?void 0:n.Regions.map(function(e){return{value:e.Name,label:e.Name}}))&&void 0!==t?t:[],this.cdr.markForCheck()}},{key:"updateRegionValidators",value:function(){var e,t,n,r,o,i,l=null===(t=null===(e=this.form)||void 0===e?void 0:e.get("disasterRecoveryType"))||void 0===t?void 0:t.value,a=null===(r=null===(n=this.form)||void 0===n?void 0:n.get("networkType"))||void 0===r?void 0:r.value,s=null===(o=this.form)||void 0===o?void 0:o.get("regionGroup"),c=null===(i=this.form)||void 0===i?void 0:i.get("regionName");l!==K.NotConfigured&&a===Y.MicrosoftHostedNetwork?(null==s||s.setValidators(z.kI.required),null==c||c.setValidators(z.kI.required)):(null==s||s.clearValidators(),null==c||c.clearValidators()),null==s||s.updateValueAndValidity({emitEvent:!1}),null==c||c.updateValueAndValidity({emitEvent:!1})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(_["\u0275\u0275directiveInject"](D.G),_["\u0275\u0275directiveInject"](_.ChangeDetectorRef))},e.\u0275cmp=_["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-settings-tab"]],inputs:{form:"form",tenants:"tenants",cloudPcUserSettings:"cloudPcUserSettings"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"section-title"],[1,"form-group","row"],[1,"col-md-3","d-flex","align-items-center"],["for","tenant",1,"label"],[1,"asterisk"],[1,"col-md-9"],["id","tenant","fullWidth","","placeholder","Select Tenant","formControlName","tenant",3,"nbSpinner"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["for","displayName",1,"label"],["id","displayName","type","text","nbInput","","fullWidth","","formControlName","displayName","placeholder","Enter a name"],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],[1,"label"],["icon","info-outline","nbTooltip","Makes the end user a local administrator on all of their Cloud PCs."],[1,"col-md-9","d-flex","align-items-center"],["formControlName","localAdminEnabled"],["icon","info-outline","nbTooltip","Allows targeted users to reprovision their Cloud PC from the Windows 365 app or web app."],["formControlName","resetEnabled"],[1,"label","section-description"],["href","https://learn.microsoft.com/en-us/windows-365/enterprise/restore-overview","target","_blank","rel","noopener"],["icon","info-outline","nbTooltip","Allow users to start their own point-in-time restore for supported Cloud PCs."],["formControlName","userRestoreEnabled"],["for","frequencyInHours",1,"label"],["icon","info-outline","nbTooltip","Choose how often Windows 365 creates restore points for eligible Cloud PCs."],["id","frequencyInHours","fullWidth","","formControlName","frequencyInHours"],[1,"section-divider"],[1,"section-title","collapsible-title",3,"click"],[3,"icon"],["for","provisioningSourceType",1,"label"],["id","provisioningSourceType","fullWidth","","formControlName","provisioningSourceType"],[3,"value"],[1,"form-control-error"],["href","https://learn.microsoft.com/en-us/windows-365/enterprise/cross-region-disaster-recovery","target","_blank","rel","noopener"],["for","disasterRecoveryType",1,"label"],["icon","info-outline","nbTooltip","Adds extra resilience for Cloud PCs. Additional licenses may be required."],["id","disasterRecoveryType","fullWidth","","formControlName","disasterRecoveryType"],["class","form-group row",4,"ngIf"],["for","networkType",1,"label"],["icon","info-outline","nbTooltip","Select the network type for disaster recovery."],["id","networkType","fullWidth","","formControlName","networkType"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],["for","regionGroup",1,"label"],["id","regionGroup","fullWidth","","formControlName","regionGroup",3,"nbSpinner","placeholder"],["for","regionName",1,"label"],["id","regionName","fullWidth","","formControlName","regionName",3,"nbSpinner","placeholder"],["formControlName","userInitiatedDisasterRecoveryAllowed"]],template:function(e,t){1&e&&_["\u0275\u0275template"](0,Ie,84,9,"ng-container",0),2&e&&_["\u0275\u0275property"]("ngIf",t.form)},directives:[u.O5,z.JL,z.sg,A.rs,z.JJ,z.u,A.Q7R,u.sg,A.h8i,z.Fj,A.fMN,A.jNv,A.NTf,A.q51],styles:["[_nghost-%COMP%]   .label[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   .asterisk[_ngcontent-%COMP%]{color:var(--danger);margin-right:.5em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:.8125rem;font-weight:600;color:#101426}[_nghost-%COMP%]   .collapsible-title[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;grid-gap:.5rem;gap:.5rem}[_nghost-%COMP%]   .collapsible-title[_ngcontent-%COMP%]:hover{opacity:.8}[_nghost-%COMP%]   .collapsible-title[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:1rem}[_nghost-%COMP%]   .section-description[_ngcontent-%COMP%]{margin-bottom:1rem;line-height:1.5rem}[_nghost-%COMP%]   .section-description[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary)}[_nghost-%COMP%]   .section-divider[_ngcontent-%COMP%]{border:none;border-top:1px solid #edf1f7;margin:1rem 0}"],changeDetection:0}),e}(),Te=l(5992),Fe=l(54904);function Ae(e,t){1&e&&(_["\u0275\u0275elementStart"](0,"nb-alert",2),_["\u0275\u0275text"](1," Select a tenant before assigning groups.\n"),_["\u0275\u0275elementEnd"]())}function De(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"span",16),_["\u0275\u0275text"](1),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"]().$implicit;_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate"](n.value.Upn)}}function Me(e,t){if(1&e){var n=_["\u0275\u0275getCurrentView"]();_["\u0275\u0275elementStart"](0,"nb-list-item",14),_["\u0275\u0275elementStart"](1,"nb-checkbox",15),_["\u0275\u0275listener"]("checkedChange",function(e){var t=_["\u0275\u0275restoreView"](n).$implicit;return _["\u0275\u0275nextContext"](3).selectOne(t,e)}),_["\u0275\u0275elementStart"](2,"span",16),_["\u0275\u0275text"](3),_["\u0275\u0275elementEnd"](),_["\u0275\u0275template"](4,De,2,1,"span",17),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](5,"button",18),_["\u0275\u0275listener"]("click",function(){var e=_["\u0275\u0275restoreView"](n).index;return _["\u0275\u0275nextContext"](3).remove(e)}),_["\u0275\u0275element"](6,"nb-icon",6),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("checked",r.value.checked),_["\u0275\u0275advance"](2),_["\u0275\u0275textInterpolate"](r.value.DisplayName),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",r.value.Upn)}}function Ge(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"nb-list",12),_["\u0275\u0275template"](1,Me,7,3,"nb-list-item",13),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"](2);_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngForOf",n.assignmentGroupsFormArray.controls)("ngForTrackBy",n.trackByIndex)}}function Ue(e,t){1&e&&(_["\u0275\u0275elementStart"](0,"div",19),_["\u0275\u0275elementStart"](1,"span",20),_["\u0275\u0275text"](2,"No groups selected"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]())}function _e(e,t){if(1&e){var n=_["\u0275\u0275getCurrentView"]();_["\u0275\u0275elementStart"](0,"div",3),_["\u0275\u0275elementStart"](1,"ngx-directory-object-typehead",4),_["\u0275\u0275listener"]("selectionChanged",function(e){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"]().selectionChanged(e)}),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](2,"button",5),_["\u0275\u0275listener"]("click",function(){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"]().removeSelected()}),_["\u0275\u0275element"](3,"nb-icon",6),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](4,"div",7),_["\u0275\u0275elementStart"](5,"nb-checkbox",8),_["\u0275\u0275listener"]("checkedChange",function(e){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"]().selectAll(e)}),_["\u0275\u0275text"](6),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](7,"div",9),_["\u0275\u0275template"](8,Ge,2,2,"nb-list",10),_["\u0275\u0275elementEnd"](),_["\u0275\u0275template"](9,Ue,3,0,"ng-template",null,11,_["\u0275\u0275templateRefExtractor"]),_["\u0275\u0275elementEnd"]()}if(2&e){var r=_["\u0275\u0275reference"](10),o=_["\u0275\u0275nextContext"]();_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("tenantViewSceneId",o.tenantId)("multi",!0)("type",o.DirectoryObjectTypeEnum.Groups),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("disabled",!o.isIndeterminate&&!o.areAllSelected),_["\u0275\u0275advance"](3),_["\u0275\u0275property"]("disabled",!o.assignmentGroupsFormArray.length)("checked",o.areAllSelected)("indeterminate",o.isIndeterminate),_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate1"](" ",o.areAllSelected?"Deselect all":"Select all"," "),_["\u0275\u0275advance"](2),_["\u0275\u0275property"]("ngIf",o.assignmentGroupsFormArray.length)("ngIfElse",r)}}var Ve,je=function(){var e=function(){function e(){c(this,e),this.DirectoryObjectTypeEnum=Te.W,this.trackByIndex=function(e){return e}}return d(e,[{key:"assignmentGroupsFormArray",get:function(){var e;return null===(e=this.form)||void 0===e?void 0:e.get("groups")}},{key:"areAllSelected",get:function(){var e,t=this.assignmentGroupsFormArray.controls.every(function(e){return e.value.checked});return!(!(null===(e=this.assignmentGroupsFormArray)||void 0===e?void 0:e.length)||!t)}},{key:"isIndeterminate",get:function(){var e;if(!(null===(e=this.assignmentGroupsFormArray)||void 0===e?void 0:e.length))return!1;var t=this.assignmentGroupsFormArray.controls.filter(function(e){return e.value.checked}).length;return t>0&&t<this.assignmentGroupsFormArray.length}},{key:"selectionChanged",value:function(e){var t=this,n=new Set(this.assignmentGroupsFormArray.value.map(function(e){return e.Id}));e.filter(function(e){return!n.has(e.Id)}).forEach(function(e){return t.assignmentGroupsFormArray.push(new z.NI(a(a({},e),{},{checked:!1})))})}},{key:"removeSelected",value:function(){for(var e=this.assignmentGroupsFormArray.length-1;e>=0;e--)this.assignmentGroupsFormArray.at(e).value.checked&&this.remove(e)}},{key:"selectAll",value:function(e){this.assignmentGroupsFormArray.controls.forEach(function(t){return t.setValue(a(a({},t.value),{},{checked:e}),{emitEvent:!1})})}},{key:"selectOne",value:function(e,t){e.setValue(a(a({},e.value),{},{checked:t}),{emitEvent:!1})}},{key:"remove",value:function(e){this.assignmentGroupsFormArray.removeAt(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=_["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-assignments-tab"]],inputs:{tenantId:"tenantId",form:"form"},decls:3,vars:2,consts:[["status","danger",4,"ngIf","ngIfElse"],["viewTpl",""],["status","danger"],[1,"assignments-tab-header"],["label","Search for groups by name (min. 3 characters)","placeholder","Start typing to assign groups to the selected tenant.","multiSelectButtonLabel","Add groups",3,"tenantViewSceneId","multi","type","selectionChanged"],["nbButton","",3,"disabled","click"],["icon","trash-2-outline"],[1,"assignments-tab-body","mt-4"],[1,"select-all-checkbox",3,"disabled","checked","indeterminate","checkedChange"],[1,"scrollable-container"],["class","mt-2",4,"ngIf","ngIfElse"],["noDataTpl",""],[1,"mt-2"],["class","d-flex justify-content-between",4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex","justify-content-between"],[1,"d-flex","flex-column",3,"checked","checkedChange"],[1,"d-flex"],["class","d-flex",4,"ngIf"],["nbButton","","size","tiny","status","danger",3,"click"],[1,"no-data-container","d-flex","align-items-center","justify-content-center","mt-5"],[1,"text-muted"]],template:function(e,t){if(1&e&&(_["\u0275\u0275template"](0,Ae,2,0,"nb-alert",0),_["\u0275\u0275template"](1,_e,11,10,"ng-template",null,1,_["\u0275\u0275templateRefExtractor"])),2&e){var n=_["\u0275\u0275reference"](2);_["\u0275\u0275property"]("ngIf",!t.tenantId)("ngIfElse",n)}},directives:[u.O5,A.$9b,Fe.B,A.DPz,A.fMN,A.NTf,A.zP_,u.sg,A.qBV],styles:["[_nghost-%COMP%]{display:block;height:100%;overflow:hidden}[_nghost-%COMP%]   .assignments-tab-header[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-between;grid-gap:1em;gap:1em}[_nghost-%COMP%]   .assignments-tab-body[_ngcontent-%COMP%]{height:calc(100% - 5rem)}[_nghost-%COMP%]   .assignments-tab-body[_ngcontent-%COMP%]   .select-all-checkbox[_ngcontent-%COMP%]{padding:.5em}[_nghost-%COMP%]   .assignments-tab-body[_ngcontent-%COMP%]   .scrollable-container[_ngcontent-%COMP%]{height:calc(100% - 3rem);overflow:auto}[_nghost-%COMP%]   .assignments-tab-body[_ngcontent-%COMP%]   nb-list[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{padding:.5em;min-height:4.063em}"],changeDetection:0}),e}(),He=l(77194),$e=((Ve=function e(){c(this,e)}).\u0275fac=function(e){return new(e||Ve)},Ve.\u0275mod=_["\u0275\u0275defineNgModule"]({type:Ve}),Ve.\u0275inj=_["\u0275\u0275defineInjector"]({imports:[[u.ez,me,A.MAY,A.zyh,A.uuI,A.T2N,A.KdK,A.rgH,A.spT,fe.tA,pe.H,ge.Z,A.EoG,z.UX,He.e7,A.MfT,A.PYG,A.COg,A.IIj,A.nKr]]}),Ve);_["\u0275\u0275setComponentScope"](Z,[A.Asz,A.Q7R,A.ndF,A.yKW,A.kyn,z.JL,z.sg,A.TR4,Ne,je,A.XWE,A.DPz],[u.Ov])}}])}();