!function(){function e(e,o){return n(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(s){l=!0,r=s}finally{try{a||null==n.return||n.return()}finally{if(l)throw r}}return i}(e,o)||s(e,o)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e){if(Array.isArray(e))return e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function l(e){return function(e){if(Array.isArray(e))return d(e)}(e)||c(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}(self.webpackChunkngx_admin=self.webpackChunkngx_admin||[]).push([[710],{76897:function(e,t,n){"use strict";n.d(t,{XU:function(){return o},cc:function(){return r},e5:function(){return i}});var o=400,r=3,i=5e3},30110:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var o=n(37716),r=n(14625),i=n(38583);function a(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",2),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().close()}),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()}if(2&e){var r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](r.cancelButtonText)}}function l(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",2),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().confirm()}),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()}if(2&e){var r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](r.confirmButtonText)}}var s=function(){var e=function(){function e(t){p(this,e),this.dialogRef=t}return m(e,[{key:"close",value:function(){this.dialogRef.close()}},{key:"confirm",value:function(){this.dialogRef.close(!0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](r.X4l))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-confirmation-dialog"]],inputs:{headerTitle:"headerTitle",bodyText:"bodyText",confirmButtonText:"confirmButtonText",cancelButtonText:"cancelButtonText"},decls:8,vars:4,consts:[[1,"d-flex","justify-content-between"],["nbButton","",3,"click",4,"ngIf"],["nbButton","",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-header"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"nb-card-body"),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"nb-card-footer",0),o["\u0275\u0275template"](6,a,2,1,"button",1),o["\u0275\u0275template"](7,l,2,1,"button",1),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](t.headerTitle),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](t.bodyText),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.cancelButtonText),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.confirmButtonText))},directives:[r.Asz,r.ndF,r.yKW,r.XWE,i.O5,r.DPz],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-footer[_ngcontent-%COMP%]{grid-gap:1rem;gap:1rem}"]}),e}()},26970:function(o,d,u){"use strict";u.r(d),u.d(d,{VirtualDesktopModule:function(){return sr}});var f=u(38583),v=u(14625),h=u(10264),g=u(79765),y=u(68307),C=u(43190),b=u(46782),S=u(39538),w=u(47349),x=u(92340),I=u(37716),k=u(91841),P=function(){var e=function(){function e(t){p(this,e),this.httpClient=t,this.apiUrl="".concat(x.N.apiUrl,"/data/scenes")}return m(e,[{key:"getAvdResourceOverview",value:function(e){return this.httpClient.get("".concat(this.apiUrl,"/").concat(e,"/avdresources/overview")).pipe((0,w.d)({refCount:!0,bufferSize:1}))}},{key:"getRemoteApplications",value:function(e,t){return this.httpClient.get("".concat(this.apiUrl,"/").concat(e,"/avdresources/remoteapps").concat(t)).pipe((0,w.d)({refCount:!0,bufferSize:1}))}},{key:"getAvdResourcesForCreation",value:function(e){return this.httpClient.get("".concat(this.apiUrl,"/").concat(e,"/avdresources/resources")).pipe((0,w.d)({refCount:!0,bufferSize:1}))}},{key:"getAvdResourceFor",value:function(e,t){return this.httpClient.get("".concat(this.apiUrl,"/").concat(e,"/avdresources").concat(t)).pipe((0,w.d)({refCount:!0,bufferSize:1}))}},{key:"getAvdSubscriptions",value:function(e){return this.httpClient.get("".concat(this.apiUrl,"/").concat(e,"/subscriptions")).pipe((0,w.d)({refCount:!0,bufferSize:1}))}},{key:"manageAvdResourceEntity",value:function(e,t){return this.httpClient.post("".concat(this.apiUrl,"/").concat(e,"/avdresources").concat(t.Id),t,{observe:"response",responseType:"text"}).pipe((0,w.d)({refCount:!0,bufferSize:1}))}},{key:"deleteAvdResourceEntity",value:function(e,t){return this.httpClient.delete("".concat(this.apiUrl,"/").concat(e,"/avdresources").concat(t),{observe:"response",responseType:"text"}).pipe((0,w.d)({refCount:!0,bufferSize:1}))}},{key:"getAssignedUsersToApplicationGroup",value:function(e,t){return this.httpClient.get("".concat(this.apiUrl,"/").concat(e,"/avdresources").concat(t,"/permissions")).pipe((0,w.d)({refCount:!0,bufferSize:1}))}},{key:"setUserToApplicationGroup",value:function(e,t,n){return this.httpClient.post("".concat(this.apiUrl,"/").concat(e,"/avdresources").concat(t,"/permissions"),n,{observe:"response",responseType:"text"}).pipe((0,w.d)({refCount:!0,bufferSize:1}))}},{key:"getStartMenuApplicationsFor",value:function(e,t){return this.httpClient.get("".concat(this.apiUrl,"/").concat(e,"/avdresources").concat(t,"/startMenuItems")).pipe((0,w.d)({refCount:!0,bufferSize:1}))}},{key:"manageRemoteApplication",value:function(e,t,n){return this.httpClient.post("".concat(this.apiUrl,"/").concat(e,"/avdresources").concat(t,"/applications/").concat(n.Name),n,{observe:"response",responseType:"text"}).pipe((0,w.d)({refCount:!0,bufferSize:1}))}},{key:"deleteRemoteApplication",value:function(e,t,n){return this.httpClient.delete("".concat(this.apiUrl,"/").concat(e,"/avdresources").concat(t,"/applications/").concat(n),{observe:"response",responseType:"text"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(I["\u0275\u0275inject"](k.eN))},e.\u0275prov=I["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),E={HostPools:[],AppGroups:[],WorkSpaces:[],LogAnalyticsWorkspaces:[]},A=u(15257),T=u(45435),N=u(88002),O=u(34794);function M(e){return e.split("/").pop()}var V=(function(e){e.HostPoolsNodeId="--host-pools-tree-view-root-node--",e.SubscriptionNodeId="--host-pools-tree-view-subscription-node--",e.HostPoolNodeId="--host-pools-tree-view-host-pool-node--",e.AppGroupsNodeId="--host-pools-tree-view-app-groups-parent-node--",e.AppGroupNodeId="--host-pools-tree-view-app-group-node--",e.RemoteAppNodeId="--host-pools-tree-view-remote-app-node--"}(V||(V={})),V),R=function(){function e(){p(this,e)}return m(e,null,[{key:"hostPoolsTreeViewConfig",value:function(e,t,n,o){return{rootNodeBuilder:function(t){return{id:V.HostPoolsNodeId,title:"Host Pools",iconPath:"assets/icons/host-pools.svg",expanded:!0,children:t,contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:n,title:"Add",action:e.hostPoolsAddAction}]}},subscriptionNodeBuilder:function(t,o){return{id:"".concat(V.SubscriptionNodeId).concat(t.SubscriptionName),title:t.SubscriptionName,iconPath:"assets/icons/subscription.svg",expanded:!0,children:o,contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:n,title:"Add",data:{subscriptionName:t.SubscriptionName,subscriptionId:t.Id},action:e.hostPoolsAddSubscriptionAction}]}},hostPoolNodeBuilder:function(t,o,r){return{id:"".concat(V.HostPoolNodeId).concat(r.Id),title:t,iconPath:r.Properties.HostPoolType===O.Bs.Pooled?"assets/icons/pooled-host-pool.svg":"assets/icons/personal-host-pool.svg",children:o,contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:n,title:"Properties",data:r,action:e.hostPoolOpenPropertiesAction},{contextMenuId:n,title:"Delete",data:r,action:e.hostPoolDeleteAction}]}},appGroupsParentNodeBuilder:function(t,o){return{id:"".concat(V.AppGroupsNodeId).concat(o.Id),title:"App Groups",iconPath:"assets/icons/app-groups.svg",children:t,contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:n,title:"Add remote app-group",data:o,action:e.hostPoolAddRemoteAppGroupAction},{contextMenuId:n,title:"Add desktop app-group",data:o,action:e.hostPoolAddDesktopAppGroupAction}]}},appGroupNodeBuilder:function(r,i,a){var l=i.Properties.ApplicationGroupType===O.Vh.RemoteApp,s={id:"".concat(V.AppGroupNodeId).concat(i.Id),title:r,iconPath:l?"assets/icons/remote-app-group.svg":"assets/icons/desktop-app-group.svg",contextMenuPlacement:"left",contextMenuItems:l?[{contextMenuId:n,title:"Add app from start menu",data:{appGroup:i,hostPool:a},action:e.remoteAppGroupStartFromMenuAction},{contextMenuId:n,title:"Add app manually",data:i,action:e.remoteAppGroupAddManuallyAction},{contextMenuId:n,title:"Properties",data:i,action:e.remoteAppGroupOpenPropertiesAction},{contextMenuId:n,title:"Assign",data:i,action:e.remoteAppGroupAssignAction},{contextMenuId:n,title:"Delete",data:i,action:e.remoteAppGroupDeleteAction}]:[{contextMenuId:n,title:"Properties",data:i,action:e.desktopAppGroupOpenPropertiesAction},{contextMenuId:n,title:"Assign",data:i,action:e.desktopAppGroupAssignAction},{contextMenuId:n,title:"Delete",data:i,action:e.desktopAppGroupDeleteAction}]};return s.reloadChildren=o===s.id,l&&(s.childrenLoader=function(){return t(i.Id).pipe((0,N.U)(function(t){return t.map(function(t){return{id:"".concat(V.RemoteAppNodeId).concat(t.Id),title:M(t.Name),iconPath:"data:image/png;base64,".concat(t.Properties.IconContent),contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:n,title:"Properties",data:{appGroup:i,application:t},action:e.remoteApplicationOpenPropertiesAction},{contextMenuId:n,title:"Delete",data:{appGroup:i,application:t,node:s},action:e.remoteApplicationDeleteAction}]}})}))}),s}}}},{key:"workspacesTreeViewConfig",value:function(e,t){return{rootNodeBuilder:function(n){return{id:"--workspaces-tree-view-root-node--",title:"Workspaces",iconPath:"assets/icons/workspaces.svg",expanded:!0,children:n,contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:t,title:"Add",action:e.workspacesAddAction}]}},subscriptionNodeBuilder:function(n,o,r){return{id:"--workspaces-tree-view-subscription-node--".concat(n.SubscriptionName),title:n.SubscriptionName,iconPath:"assets/icons/subscription.svg",expanded:!0,children:o,contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:t,title:"Add",data:{subscriptionName:n.SubscriptionName,subscriptionId:n.Id},action:e.workspacesSubscriptionAddAction}]}},workspaceNodeBuilder:function(n,o,r){return{id:"--workspaces-tree-view-workspace-node--".concat(r.Id),title:n,iconPath:"assets/icons/workspace.svg",children:o,contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:t,title:"Link application group",data:r,action:e.workspaceLinkApplicationGroupAction},{contextMenuId:t,title:"Properties",data:r,action:e.workspaceEditAction},{contextMenuId:t,title:"Delete",data:r,action:e.workspaceDeleteAction}]}},appGroupNodeBuilder:function(n,o){return{id:"--workspaces-tree-view-app-group-node--".concat(o.Id),title:n,iconPath:o.Properties.ApplicationGroupType===O.Vh.RemoteApp?"assets/icons/remote-app-group.svg":"assets/icons/desktop-app-group.svg",contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:t,title:"Unlink",data:o,action:e.workspaceAppGroupUnlinkAction}]}}}}},{key:"collectExpandedIds",value:function(t){return t?t.reduce(function(t,n){var o;return n.expanded&&n.id&&t.push(n.id),(null===(o=n.children)||void 0===o?void 0:o.length)&&t.push.apply(t,l(e.collectExpandedIds(n.children))),t},[]):[]}},{key:"setExpandedByIds",value:function(t,n){var o;if(t){var r,i=a(t);try{for(i.s();!(r=i.n()).done;){var l=r.value;n&&n.length&&(l.expanded=!(!l.id||!n.includes(l.id))),(null===(o=l.children)||void 0===o?void 0:o.length)&&e.setExpandedByIds(l.children,n)}}catch(s){i.e(s)}finally{i.f()}}}}]),e}();R.buildWorkspaceTreeView$=new g.xQ;var F=u(3679),_=u(9112),D=u(36123),G=u(30110);function U(e){if("object"==typeof e&&null!==e){if("error"in e&&"object"==typeof e.error){var t=e.error;return{code:t.code||"Unknown",message:t.message||"Unknown error",details:Array.isArray(t.details)?t.details:[]}}if("code"in e&&"message"in e)return{code:e.code||"Unknown",message:e.message||"Unknown error",details:Array.isArray(e.details)?e.details:[]}}if("string"==typeof e){var n=e.indexOf("{");if(-1!==n){var o=e.substring(n);try{var r=JSON.parse(o);if(r&&r.error){var i=r.error;return{code:i.code||"Unknown",message:i.message||"Unknown error",details:Array.isArray(i.details)?i.details:[]}}if("code"in r&&"message"in r)return{code:r.code||"Unknown",message:r.message||"Unknown error",details:Array.isArray(r.details)?r.details:[]}}catch(a){console.warn("Failed to parse Azure Portal error JSON",a)}}return{code:"Unknown",message:e,details:[]}}return{code:"Unknown",message:"Something went wrong on our end. Please try again later.",details:[]}}function L(e){var t;return"null"===e?"null":""===e?"":null===(t=e)||void 0===t?void 0:t.Id}function z(e){if(!e)return null;var t=e.split("/"),n=t.findIndex(function(e){return"resourceGroups"===e});return-1!==n&&t.length>n+1?t[n+1]:null}var W=u(78086),B=u(46250);function $(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275text"](1),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"]("Update: ",null==n.hostPoolToUpdate?null:n.hostPoolToUpdate.Name," host pool")}}function j(e,t){1&e&&I["\u0275\u0275text"](0,"Add new host pool")}function q(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-card",8),I["\u0275\u0275elementStart"](1,"nb-card-body"),I["\u0275\u0275element"](2,"nb-icon",9),I["\u0275\u0275element"](3,"p",10),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("innerHTML",null==n.unregisterSubscriptionErrorMessage?null:n.unregisterSubscriptionErrorMessage.message,I["\u0275\u0275sanitizeHtml"])}}function H(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"nb-tabset",11),I["\u0275\u0275elementStart"](1,"nb-tab",12,13),I["\u0275\u0275elementStart"](3,"ngx-configuration-tab",14),I["\u0275\u0275listener"]("formControlsInitialized",function(e){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"]().childFormControlsInitialized(e,"configuration")}),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](4,"nb-tab",15,16),I["\u0275\u0275elementStart"](6,"ngx-rdp-props-tab",17),I["\u0275\u0275listener"]("rdpPropertiesChanged",function(e){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"]().rdpPropertiesChanged(e)})("isRdpFormValid",function(e){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"]().isRdpFormValid=e})("rdpFormHasChanges",function(e){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"]().hasFormChanges=!!e}),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](7,"nb-tab",18),I["\u0275\u0275elementStart"](8,"ngx-rdp-short-path-tab",19),I["\u0275\u0275listener"]("formControlsInitialized",function(e){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"]().childFormControlsInitialized(e,"rdpShortPath")}),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](9,"nb-tab",20,21),I["\u0275\u0275elementStart"](11,"ngx-tags-tab",22),I["\u0275\u0275listener"]("formControlsInitialized",function(e){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"]().childFormControlsInitialized(e,"tags")}),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()}if(2&e){var o=t.ngIf,r=I["\u0275\u0275reference"](2),i=I["\u0275\u0275reference"](5),a=I["\u0275\u0275reference"](10),l=I["\u0275\u0275nextContext"]();I["\u0275\u0275property"]("formGroup",l.form),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("badgeDot",!r.active&&(null==l.form.controls||null==l.form.controls.configuration?null:l.form.controls.configuration.invalid)),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("form",l.form.controls.configuration)("avdResourcesData",o[0])("hostPoolToUpdate",l.hostPoolToUpdate)("preselectSubscriptionId",l.preselectSubscriptionId),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("badgeDot",!i.active&&!l.isRdpFormValid),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("rdpProperties",null==l.hostPoolToUpdate||null==l.hostPoolToUpdate.Properties?null:l.hostPoolToUpdate.Properties.CustomRdpProperty),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("form",l.form.controls.rdpShortPath)("hostPoolToUpdate",l.hostPoolToUpdate),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("badgeDot",!a.active&&(null==l.form.controls||null==l.form.controls.tags?null:l.form.controls.tags.invalid)),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("form",l.form.controls.tags)("tagsToUpdate",null==l.hostPoolToUpdate?null:l.hostPoolToUpdate.Tags)}}var J=function(){var t=function(){function t(e,n,o,r,i){p(this,t),this.dialogService=e,this.dialogRef=n,this.azureVirtualDesktopService=o,this.toastrService=r,this.messageService=i,this.destroyed$=new g.xQ,this.internalLoadedSubscriptionsList=[],this.hostPoolModel=new O.f7,this.form=new F.cw({configuration:new F.cw({}),tags:new F.Oe([]),rdpShortPath:new F.cw({})}),this.hasFormChanges=!1,this.isSaving=!1,this.isRdpFormValid=!1}return m(t,[{key:"ngOnInit",value:function(){var e=this;this.avdResourcesData$=this.tenantViewSceneId&&!this.hostPoolToUpdate?this.initCreateHostPoolMode():this.initUpdateHostPoolMode(),this.form.valueChanges.pipe((0,b.R)(this.destroyed$)).subscribe(function(t){e.hasFormChanges=(0,D.xF)(e.initialFormValues,t).hasDifference})}},{key:"close",value:function(){var e=this;this.hasFormChanges?this.dialogService.open(G.z,{context:{headerTitle:"Warning",bodyText:"You are about to exit without saving your changes. Are you sure you want to leave?",cancelButtonText:"Close without saving",confirmButtonText:"Stay"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1}).onClose.pipe((0,b.R)(this.destroyed$)).subscribe(function(t){!0!==t&&e.dialogRef.close()}):this.dialogRef.close()}},{key:"save",value:function(){var e,t,n,o,a,l,s;this.isSaving=!0,this.unregisterSubscriptionErrorMessage=void 0;var c=this.form.getRawValue(),d=c.configuration,p=c.tags,u=c.rdpShortPath,m=d.subscription.Id,f=this.internalLoadedSubscriptionsList.find(function(e){return m.toLowerCase().includes(e.id.toLowerCase())});this.hostPoolModel=r(r({},this.hostPoolModel),{},{Id:"".concat(m,"/providers/Microsoft.DesktopVirtualization/hostpools/").concat(d.hostPoolName),ResourceGroup:z(m),SubscriptionName:this.subscriptionName?this.subscriptionName:"".concat(null==f?void 0:f.displayName),Name:d.hostPoolName,Location:d.location.Id,LogAnalyticsId:L(d.logAnalyticWorkspace),LogAnalyticsName:null!==(t=null===(e=d.logAnalyticWorkspace)||void 0===e?void 0:e.Name)&&void 0!==t?t:"",Properties:r(r({},this.hostPoolModel.Properties),{},{ApplicationGroupReferences:[],HostPoolType:null===(n=d.hostPoolType)||void 0===n?void 0:n.value,PersonalDesktopAssignmentType:null===(o=d.assignmentType)||void 0===o?void 0:o.value,PreferredAppGroupType:null===(a=d.preferredAppGroup)||void 0===a?void 0:a.value,StartVmOnConnect:d.startVMOnConnect,ValidationEnvironment:d.validationEnvironment,FriendlyName:d.friendlyName,Description:d.description,LoadBalancerType:(null===(l=d.hostPoolType)||void 0===l?void 0:l.value)===O.Bs.Personal?O.rQ.Persistent:null===(s=d.loadBalancingAlgorithm)||void 0===s?void 0:s.value,MaxSessionLimit:d.maxSessionsLimit,ManagedPrivateUdp:u.managedPrivateUdp.value,DirectUdp:u.directUdp.value,PublicUdp:u.publicUdp.value,RelayUdp:u.relayUdp.value}),Tags:r(r({},this.hostPoolModel.Tags),p.reduce(function(e,t){return r(i({},t.key,t.value),e)},{}))}),this.handleSaving(this.hostPoolModel)}},{key:"childFormControlsInitialized",value:function(e,t){this.initialFormValues=r(r({},this.initialFormValues),{},i({},t,e))}},{key:"rdpPropertiesChanged",value:function(e){this.hostPoolModel=r(r({},this.hostPoolModel),{},{Properties:r(r({},this.hostPoolModel.Properties),{},{CustomRdpProperty:e})})}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"initCreateHostPoolMode",value:function(){var t=this;return(0,_.aj)([this.azureVirtualDesktopService.getAvdResourcesForCreation(this.tenantViewSceneId),this.azureVirtualDesktopService.getAvdSubscriptions(this.tenantViewSceneId)]).pipe((0,N.U)(function(n){var o=e(n,2),r=o[0],i=o[1];return t.internalLoadedSubscriptionsList=l(i),[r]}))}},{key:"initUpdateHostPoolMode",value:function(){var t=this;return(0,_.aj)([this.azureVirtualDesktopService.getAvdResourcesForCreation(this.tenantViewSceneId),this.azureVirtualDesktopService.getAvdResourceFor(this.tenantViewSceneId,this.hostPoolToUpdate.Id),this.azureVirtualDesktopService.getAvdSubscriptions(this.tenantViewSceneId)]).pipe((0,N.U)(function(n){var o=e(n,3),i=o[0],a=o[1],s=o[2];return t.hostPoolToUpdate=r({},a),t.internalLoadedSubscriptionsList=l(s),[i,a]}))}},{key:"handleSaving",value:function(e){var t=this,n=new W.lE(this.hostPoolToUpdate?"Host pool update":"Host pool creation",e.Name);this.messageService.addActionMessages(n),this.toastrService.primary(e.Name,this.hostPoolToUpdate?"Start host pool update":"Start host pool creation"),this.azureVirtualDesktopService.manageAvdResourceEntity(this.tenantViewSceneId,e).pipe((0,b.R)(this.destroyed$)).subscribe({next:function(o){200===o.status&&(t.isSaving=!1,t.dialogRef.close({hostPool:e}),t.toastrService.success(t.hostPoolToUpdate?"Host pool updated successfully":"Host pool created successfully","Success"),n.State=W.$W.Completed,n.Result=o.body,t.messageService.addActionMessages(n))},error:function(e){t.isSaving=!1,t.unregisterSubscriptionErrorMessage=U(e.error),n.State=W.$W.Failed,n.Result=t.unregisterSubscriptionErrorMessage.message,t.messageService.addActionMessages(n)}})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(I["\u0275\u0275directiveInject"](v.Gln),I["\u0275\u0275directiveInject"](v.X4l),I["\u0275\u0275directiveInject"](P),I["\u0275\u0275directiveInject"](v.quB),I["\u0275\u0275directiveInject"](B.e))},t.\u0275cmp=I["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-manage-host-pool-dialog"]],inputs:{tenantViewSceneId:"tenantViewSceneId",subscriptionName:"subscriptionName",preselectSubscriptionId:"preselectSubscriptionId",hostPoolToUpdate:"hostPoolToUpdate"},decls:15,vars:12,consts:[[3,"nbSpinner","nbSpinnerMessage"],[4,"ngIf","ngIfElse"],["addHostPoolTitle",""],["class","error-card",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"d-flex","justify-content-between"],["nbButton","",3,"click"],["nbButton","",3,"disabled","click"],[1,"error-card"],["icon","alert-triangle-outline"],[3,"innerHTML"],[3,"formGroup"],["tabTitle","Configuration","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["configurationTab",""],[3,"form","avdResourcesData","hostPoolToUpdate","preselectSubscriptionId","formControlsInitialized"],["tabTitle","RDP properties","badgePosition","center start","badgeStatus","danger",1,"rdp-props-tab",3,"badgeDot"],["rdpPropsTab",""],[3,"rdpProperties","rdpPropertiesChanged","isRdpFormValid","rdpFormHasChanges"],["tabTitle","RDP shortpath"],[3,"form","hostPoolToUpdate","formControlsInitialized"],["tabTitle","Tags","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["tagsTab",""],[3,"form","tagsToUpdate","formControlsInitialized"]],template:function(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-card",0),I["\u0275\u0275pipe"](1,"async"),I["\u0275\u0275elementStart"](2,"nb-card-header"),I["\u0275\u0275template"](3,$,2,1,"ng-container",1),I["\u0275\u0275template"](4,j,1,0,"ng-template",null,2,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](6,"nb-card-body"),I["\u0275\u0275template"](7,q,4,1,"nb-card",3),I["\u0275\u0275template"](8,H,12,13,"nb-tabset",4),I["\u0275\u0275pipe"](9,"async"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](10,"nb-card-footer",5),I["\u0275\u0275elementStart"](11,"button",6),I["\u0275\u0275listener"]("click",function(){return t.close()}),I["\u0275\u0275text"](12,"Close"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](13,"button",7),I["\u0275\u0275listener"]("click",function(){return t.save()}),I["\u0275\u0275text"](14),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275reference"](5);I["\u0275\u0275propertyInterpolate"]("nbSpinnerMessage",t.isSaving?t.hostPoolToUpdate?"Updating...":"Saving...":"Loading..."),I["\u0275\u0275property"]("nbSpinner",!I["\u0275\u0275pipeBind1"](1,8,t.avdResourcesData$)||t.isSaving),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngIf",t.hostPoolToUpdate)("ngIfElse",n),I["\u0275\u0275advance"](4),I["\u0275\u0275property"]("ngIf",t.unregisterSubscriptionErrorMessage),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",I["\u0275\u0275pipeBind1"](9,10,t.avdResourcesData$)),I["\u0275\u0275advance"](5),I["\u0275\u0275property"]("disabled",t.form.invalid||t.isSaving||!t.hasFormChanges||!t.isRdpFormValid),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",t.hostPoolToUpdate?"Update":"Add"," ")}},styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:1em;gap:1em}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{color:var(--danger);font-size:3em}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;margin:0;font-size:.8em;color:var(--danger)}"]}),t}(),K=u(68939),X=u(25917),Q=u(5992),Y=u(54904);function Z(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"nb-list-item",2),I["\u0275\u0275elementStart"](1,"span"),I["\u0275\u0275text"](2),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](3,"button",10),I["\u0275\u0275listener"]("click",function(){var e=I["\u0275\u0275restoreView"](n).index;return I["\u0275\u0275nextContext"](3).remove(e)}),I["\u0275\u0275element"](4,"nb-icon",11),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit;I["\u0275\u0275advance"](2),I["\u0275\u0275textInterpolate"](o.value.DisplayName)}}function ee(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-list"),I["\u0275\u0275template"](1,Z,5,1,"nb-list-item",9),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",n.directoryObjectsFormArray.controls)}}function te(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"div",12),I["\u0275\u0275elementStart"](1,"span",13),I["\u0275\u0275text"](2,"No assigned users or groups found"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]())}function ne(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"div"),I["\u0275\u0275elementStart"](2,"ngx-directory-object-typehead",5),I["\u0275\u0275listener"]("selectionChanged",function(e){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"]().selectionChange(e)}),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](3,"div"),I["\u0275\u0275elementStart"](4,"span",6),I["\u0275\u0275text"](5,"Selected users and groups"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275template"](6,ee,2,1,"nb-list",7),I["\u0275\u0275template"](7,te,3,0,"ng-template",null,8,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=I["\u0275\u0275reference"](8),r=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("tenantViewSceneId",r.tenantViewSceneId)("type",r.DirectoryObjectTypeEnum.UsersAndGroups),I["\u0275\u0275advance"](4),I["\u0275\u0275property"]("ngIf",r.directoryObjectsFormArray.length)("ngIfElse",o)}}var oe=function(){var e=function(){function e(t,n,o,r,i){p(this,e),this.azureVirtualDesktopService=t,this.dialogRef=n,this.dialogService=o,this.toastrService=r,this.messageService=i,this.destroyed$=new g.xQ,this.initialFromArrayValue=[],this.form=new F.cw({directoryObjects:new F.Oe([])}),this.DirectoryObjectTypeEnum=Q.W,this.isSaving=!1,this.isLoaded=!1}return m(e,[{key:"resourceIdsLoaded",get:function(){return!(!this.tenantViewSceneId||!this.appGroupId)}},{key:"directoryObjectsFormArray",get:function(){return this.form.get("directoryObjects")}},{key:"ngOnInit",value:function(){var e=this;this.resourceIdsLoaded&&(this.directoryObjects$=this.azureVirtualDesktopService.getAssignedUsersToApplicationGroup(this.tenantViewSceneId,this.appGroupId).pipe((0,y.b)(function(t){return e.populateFormArray(t)}),(0,K.x)(function(){return e.isLoaded=!0})),this.initFormArrayValueChangesHandler())}},{key:"close",value:function(){(0,D.xF)(this.initialFromArrayValue,this.directoryObjectsFormArray.getRawValue()).hasDifference?this.showConfirmationDialog():this.dialogRef.close()}},{key:"selectionChange",value:function(e){e&&(this.directoryObjectsFormArray.controls.some(function(t){return t.value.Id===e.Id})||this.directoryObjectsFormArray.push(new F.NI(e)))}},{key:"remove",value:function(e){this.directoryObjectsFormArray.removeAt(e)}},{key:"save",value:function(){var e=this;this.isSaving=!0;var t=new W.lE("Assignment update","");this.messageService.addActionMessages(t),this.toastrService.primary("","Start assignment update"),this.azureVirtualDesktopService.setUserToApplicationGroup(this.tenantViewSceneId,this.appGroupId,this.directoryObjectsFormArray.getRawValue()).pipe((0,b.R)(this.destroyed$)).subscribe({next:function(n){e.isSaving=!1,e.toastrService.success("Assigned data successfully","Success"),e.dialogRef.close(),t.State=W.$W.Completed,t.Result=n.body,e.messageService.addActionMessages(t)},error:function(n){var o=U(n.error);e.isSaving=!1,e.toastrService.danger(o.message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"}),t.State=W.$W.Failed,t.Result=o.message,e.messageService.addActionMessages(t)}})}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"showConfirmationDialog",value:function(){var e=this;this.dialogService.open(G.z,{context:{headerTitle:"Warning",bodyText:"You are about to exit without saving your changes. Are you sure you want to leave?",cancelButtonText:"Close without saving",confirmButtonText:"Stay"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1}).onClose.pipe((0,b.R)(this.destroyed$)).subscribe(function(t){!0!==t&&e.dialogRef.close()})}},{key:"populateFormArray",value:function(e){var t=this;this.directoryObjectsFormArray.clear(),e.forEach(function(e){return t.directoryObjectsFormArray.push(new F.NI(e),{emitEvent:!1})}),this.initialFromArrayValue=this.directoryObjectsFormArray.getRawValue()}},{key:"initFormArrayValueChangesHandler",value:function(){var e=this;this.hasFormArrayChanges$=this.directoryObjectsFormArray.valueChanges.pipe((0,C.w)(function(t){return(0,X.of)((0,D.xF)(e.initialFromArrayValue,t).hasDifference)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(I["\u0275\u0275directiveInject"](P),I["\u0275\u0275directiveInject"](v.X4l),I["\u0275\u0275directiveInject"](v.Gln),I["\u0275\u0275directiveInject"](v.quB),I["\u0275\u0275directiveInject"](B.e))},e.\u0275cmp=I["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-assign-user-to-group-dialog"]],inputs:{tenantViewSceneId:"tenantViewSceneId",appGroupId:"appGroupId"},decls:12,vars:8,consts:[[3,"nbSpinner","nbSpinnerMessage"],[4,"ngIf"],[1,"d-flex","justify-content-between"],["nbButton","",3,"click"],["nbButton","",3,"disabled","click"],["label","Search users or groups by start typing the display name (3 chars. min)","placeholder","Start typing to assign users or groups",3,"tenantViewSceneId","type","selectionChanged"],[1,"label"],[4,"ngIf","ngIfElse"],["noDataTpl",""],["class","d-flex justify-content-between",4,"ngFor","ngForOf"],["nbButton","","size","tiny","status","danger",3,"click"],["icon","trash-outline"],[1,"no-data-container"],[1,"text-muted"]],template:function(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"nb-card",0),I["\u0275\u0275pipe"](1,"async"),I["\u0275\u0275elementStart"](2,"nb-card-header"),I["\u0275\u0275text"](3,"Select users or groups from Entra ID"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](4,"nb-card-body"),I["\u0275\u0275template"](5,ne,9,4,"ng-container",1),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](6,"nb-card-footer",2),I["\u0275\u0275elementStart"](7,"button",3),I["\u0275\u0275listener"]("click",function(){return t.close()}),I["\u0275\u0275text"](8,"Close"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](9,"button",4),I["\u0275\u0275listener"]("click",function(){return t.save()}),I["\u0275\u0275pipe"](10,"async"),I["\u0275\u0275text"](11," Save "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e&&(I["\u0275\u0275propertyInterpolate"]("nbSpinnerMessage",t.isSaving?"Saving...":"Loading..."),I["\u0275\u0275property"]("nbSpinner",!I["\u0275\u0275pipeBind1"](1,4,t.directoryObjects$)||t.isSaving),I["\u0275\u0275advance"](5),I["\u0275\u0275property"]("ngIf",t.isLoaded),I["\u0275\u0275advance"](4),I["\u0275\u0275property"]("disabled",!I["\u0275\u0275pipeBind1"](10,6,t.hasFormArrayChanges$)))},directives:[v.Asz,v.Q7R,v.ndF,v.yKW,f.O5,v.XWE,v.DPz,Y.B,v.zP_,f.sg,v.qBV,v.fMN],pipes:[f.Ov],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:45em;height:45em}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:hidden;display:grid;grid-template-rows:15% 80%;grid-gap:1em;gap:1em}[_nghost-%COMP%]   nb-list[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   nb-list[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]:last-of-type{border-bottom:none}[_nghost-%COMP%]   .no-data-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%}"]}),e}();function re(e){if(!e)return null;var t=e.split("/"),n=t.findIndex(function(e){return"subscriptions"===e.toLowerCase()});return n>=0&&t.length>n+1?"/subscriptions/".concat(t[n+1]):null}function ie(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",16),I["\u0275\u0275text"](2,"This field is required"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function ae(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",16),I["\u0275\u0275text"](2,"This field is required"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function le(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"tr"),I["\u0275\u0275elementStart"](1,"td",9),I["\u0275\u0275element"](2,"input",12),I["\u0275\u0275template"](3,ie,3,0,"ng-container",13),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](4,"td",9),I["\u0275\u0275element"](5,"input",12),I["\u0275\u0275template"](6,ae,3,0,"ng-container",13),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](7,"td",10),I["\u0275\u0275elementStart"](8,"button",14),I["\u0275\u0275listener"]("click",function(){var e=I["\u0275\u0275restoreView"](n).index;return I["\u0275\u0275nextContext"](2).remove(e)}),I["\u0275\u0275element"](9,"nb-icon",15),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()}if(2&e){var o,r,i=t.$implicit,a=t.index,l=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](2),I["\u0275\u0275propertyInterpolate1"]("id","tag_key_",a,""),I["\u0275\u0275property"]("formControl",l.tagsFormArray.controls[a].get("key")),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",null==(o=i.get("key"))||null==o.errors?null:o.errors.required),I["\u0275\u0275advance"](2),I["\u0275\u0275propertyInterpolate1"]("id","tag_value_",a,""),I["\u0275\u0275property"]("formControl",l.tagsFormArray.controls[a].get("value")),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",null==(r=i.get("value"))||null==r.errors?null:r.errors.required)}}function se(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"form",6),I["\u0275\u0275elementStart"](1,"div",7),I["\u0275\u0275elementStart"](2,"table",8),I["\u0275\u0275elementStart"](3,"thead"),I["\u0275\u0275elementStart"](4,"tr"),I["\u0275\u0275elementStart"](5,"th",9),I["\u0275\u0275text"](6,"Key"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](7,"th",9),I["\u0275\u0275text"](8,"Value"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](9,"th",10),I["\u0275\u0275text"](10,"Remove"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](11,"tbody"),I["\u0275\u0275template"](12,le,10,6,"tr",11),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275property"]("formGroup",n.form),I["\u0275\u0275advance"](12),I["\u0275\u0275property"]("ngForOf",n.tagsFormArray.controls)("ngForTrackBy",n.trackByIndex)}}var ce=function(){var t=function(){function t(e,n){p(this,t),this.dialogService=e,this.dialogRef=n,this.destroyed$=new g.xQ,this.form=new F.cw({tags:new F.Oe([])}),this.hasTagsFormChanges=!1}return m(t,[{key:"tagsToUpdate",set:function(e){e&&this.populateFormArray(e)}},{key:"tagsFormArray",get:function(){var e;return null===(e=this.form)||void 0===e?void 0:e.get("tags")}},{key:"close",value:function(){var e=this;this.hasTagsFormChanges?this.dialogService.open(G.z,{context:{headerTitle:"Warning",bodyText:"You are about to exit without saving your changes. Are you sure you want to leave?",cancelButtonText:"Close without saving",confirmButtonText:"Stay"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1}).onClose.pipe((0,b.R)(this.destroyed$)).subscribe(function(t){!0!==t&&e.dialogRef.close()}):this.dialogRef.close()}},{key:"add",value:function(){this.tagsFormArray.push(new F.cw({key:new F.NI("",[F.kI.required]),value:new F.NI("",[F.kI.required])}))}},{key:"save",value:function(){this.dialogRef.close({tags:this.tagsFormArray.getRawValue(),hasChanges:this.hasTagsFormChanges})}},{key:"remove",value:function(e){this.tagsFormArray.removeAt(e)}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"populateFormArray",value:function(t){var n=this;this.tagsFormArray.clear(),Object.entries(t).forEach(function(t){var o=e(t,2),r=o[0],i=o[1];return n.tagsFormArray.push(new F.cw({key:new F.NI(r),value:new F.NI(i)}))}),this.initFormValuesChangesHandler()}},{key:"initFormValuesChangesHandler",value:function(){var e=this,t=this.tagsFormArray.getRawValue();this.tagsFormArray.valueChanges.pipe((0,b.R)(this.destroyed$)).subscribe(function(n){return e.hasTagsFormChanges=(0,D.xF)(t,n).hasDifference})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(I["\u0275\u0275directiveInject"](v.Gln),I["\u0275\u0275directiveInject"](v.X4l))},t.\u0275cmp=I["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-remote-application-tags-dialog"]],inputs:{tagsToUpdate:"tagsToUpdate"},decls:13,vars:3,consts:[["class","row",3,"formGroup",4,"ngIf"],["type","button","nbButton","",3,"disabled","click"],["icon","plus-square"],[1,"d-flex","justify-content-between"],["nbButton","",3,"click"],["nbButton","",3,"disabled","click"],[1,"row",3,"formGroup"],[1,"col-md-12"],["formArrayName","tags",1,"table","table-bordered","table-striped"],[1,"w-50"],[1,"w-25"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","text","nbInput","","fullWidth","",3,"id","formControl"],[4,"ngIf"],["type","button","nbButton","","nbTooltip","Remove",3,"click"],["icon","close-square"],[1,"form-control-error"]],template:function(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"nb-card"),I["\u0275\u0275elementStart"](1,"nb-card-header"),I["\u0275\u0275text"](2,"MANAGE TAGS"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](3,"nb-card-body"),I["\u0275\u0275template"](4,se,13,3,"form",0),I["\u0275\u0275elementStart"](5,"button",1),I["\u0275\u0275listener"]("click",function(){return t.add()}),I["\u0275\u0275element"](6,"nb-icon",2),I["\u0275\u0275text"](7," Add "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](8,"nb-card-footer",3),I["\u0275\u0275elementStart"](9,"button",4),I["\u0275\u0275listener"]("click",function(){return t.close()}),I["\u0275\u0275text"](10,"Close"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](11,"button",5),I["\u0275\u0275listener"]("click",function(){return t.save()}),I["\u0275\u0275text"](12,"Save"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e&&(I["\u0275\u0275advance"](4),I["\u0275\u0275property"]("ngIf",t.form),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("disabled",t.tagsFormArray.invalid),I["\u0275\u0275advance"](6),I["\u0275\u0275property"]("disabled",t.tagsFormArray.invalid||!t.hasTagsFormChanges))},directives:[v.Asz,v.ndF,v.yKW,f.O5,v.DPz,v.fMN,v.XWE,F._Y,F.JL,F.sg,F.CE,f.sg,v.h8i,F.Fj,F.JJ,F.oH,v.jNv],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:50em;height:50em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}"]}),t}();function de(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275text"](1),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" Update: ",null==n.appGroupToUpdate?null:n.appGroupToUpdate.Name," application group ")}}function pe(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275text"](1,"remote application group"),I["\u0275\u0275elementContainerEnd"]())}function ue(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275text"](1,"desktop application group"),I["\u0275\u0275elementContainerEnd"]())}function me(e,t){if(1&e&&(I["\u0275\u0275text"](0," Add "),I["\u0275\u0275template"](1,pe,2,0,"ng-container",7),I["\u0275\u0275template"](2,ue,2,0,"ng-container",7)),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",n.appGroupType===n.AppGroupResourceEnum.RemoteApp),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",n.appGroupType===n.AppGroupResourceEnum.Desktop)}}function fe(e,t){1&e&&I["\u0275\u0275element"](0,"input",28)}function ve(e,t){if(1&e&&I["\u0275\u0275element"](0,"input",29),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275property"]("value",null==n.form.controls||null==n.form.controls.applicationGroupName?null:n.form.controls.applicationGroupName.value)}}function he(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",30),I["\u0275\u0275text"](2,"This field is required"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function ge(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",30),I["\u0275\u0275text"](2),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](2),I["\u0275\u0275textInterpolate2"](" Max name length is ",null==n.form.controls.friendlyName||null==n.form.controls.friendlyName.errors?null:n.form.controls.friendlyName.errors.maxlength.requiredLength," characters. Actual is ",null==n.form.controls.friendlyName||null==n.form.controls.friendlyName.errors?null:n.form.controls.friendlyName.errors.maxlength.actualLength," ")}}function ye(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",30),I["\u0275\u0275text"](2),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](3);I["\u0275\u0275advance"](2),I["\u0275\u0275textInterpolate2"](" Max name length is ",null==n.form.controls.friendlyName||null==n.form.controls.friendlyName.errors?null:n.form.controls.friendlyName.errors.maxlength.requiredLength," characters. Actual is ",null==n.form.controls.friendlyName||null==n.form.controls.friendlyName.errors?null:n.form.controls.friendlyName.errors.maxlength.actualLength," ")}}function Ce(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"div",9),I["\u0275\u0275elementStart"](1,"label",31),I["\u0275\u0275text"](2," Desktop friendly name "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](3,"div",12),I["\u0275\u0275element"](4,"input",32),I["\u0275\u0275template"](5,ye,3,2,"ng-container",7),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](5),I["\u0275\u0275property"]("ngIf",null==n.form.controls.friendlyName.errors?null:n.form.controls.friendlyName.errors.maxlength)}}function be(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",30),I["\u0275\u0275text"](2),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](2),I["\u0275\u0275textInterpolate2"](" Max description length is ",null==n.form.controls.description||null==n.form.controls.description.errors?null:n.form.controls.description.errors.maxlength.requiredLength," characters. Actual is ",null==n.form.controls.description||null==n.form.controls.description.errors?null:n.form.controls.description.errors.maxlength.actualLength," ")}}function Se(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",23),I["\u0275\u0275text"](1,"Unchanged"),I["\u0275\u0275elementEnd"]()),2&e&&I["\u0275\u0275property"]("value","null")}function we(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",23),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.Name," ")}}function xe(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementContainerStart"](0,8),I["\u0275\u0275elementStart"](1,"div",9),I["\u0275\u0275elementStart"](2,"label",10),I["\u0275\u0275elementStart"](3,"span",11),I["\u0275\u0275text"](4,"*"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](5,"span"),I["\u0275\u0275text"](6,"Application group name"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](7,"div",12),I["\u0275\u0275template"](8,fe,1,0,"input",13),I["\u0275\u0275template"](9,ve,1,1,"ng-template",null,14,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275template"](11,he,3,0,"ng-container",7),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](12,"div",9),I["\u0275\u0275elementStart"](13,"label",15),I["\u0275\u0275text"](14," Friendly name "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](15,"div",12),I["\u0275\u0275element"](16,"input",16),I["\u0275\u0275template"](17,ge,3,2,"ng-container",7),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275template"](18,Ce,6,1,"div",17),I["\u0275\u0275elementStart"](19,"div",9),I["\u0275\u0275elementStart"](20,"label",18),I["\u0275\u0275text"](21," Description "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](22,"div",12),I["\u0275\u0275element"](23,"textarea",19),I["\u0275\u0275template"](24,be,3,2,"ng-container",7),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](25,"div",9),I["\u0275\u0275elementStart"](26,"label",20),I["\u0275\u0275text"](27," Enable diagnostic logging "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](28,"div",12),I["\u0275\u0275elementStart"](29,"nb-select",21),I["\u0275\u0275template"](30,Se,2,1,"nb-option",22),I["\u0275\u0275elementStart"](31,"nb-option",23),I["\u0275\u0275text"](32,"No logging"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275template"](33,we,2,2,"nb-option",24),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](34,"div",25),I["\u0275\u0275elementStart"](35,"label",26),I["\u0275\u0275text"](36,"Tags"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](37,"div",12),I["\u0275\u0275elementStart"](38,"a",27),I["\u0275\u0275listener"]("click",function(e){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"]().openManageTagsDialog(e)}),I["\u0275\u0275text"](39,"Open manage tags dialog"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=t.ngIf,r=I["\u0275\u0275reference"](10),i=I["\u0275\u0275nextContext"]();I["\u0275\u0275property"]("formGroup",i.form),I["\u0275\u0275advance"](8),I["\u0275\u0275property"]("ngIf",!i.appGroupToUpdate)("ngIfElse",r),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngIf",(null==i.form.controls.applicationGroupName.errors?null:i.form.controls.applicationGroupName.errors.required)&&i.form.controls.applicationGroupName.touched),I["\u0275\u0275advance"](6),I["\u0275\u0275property"]("ngIf",null==i.form.controls.friendlyName.errors?null:i.form.controls.friendlyName.errors.maxlength),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",i.appGroupType===i.AppGroupResourceEnum.Desktop),I["\u0275\u0275advance"](6),I["\u0275\u0275property"]("ngIf",(null==i.form.controls.description||null==i.form.controls.description.errors?null:i.form.controls.description.errors.maxlength)&&i.form.controls.description.touched),I["\u0275\u0275advance"](6),I["\u0275\u0275property"]("ngIf",i.appGroupToUpdate),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("value",""),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngForOf",null==o?null:o.LogAnalyticsWorkspaces)}}var Ie=function(){var t=function(){function t(e,n,o,r,i){p(this,t),this.dialogService=e,this.dialogRef=n,this.azureVirtualDesktopService=o,this.toastrService=r,this.messageService=i,this.destroyed$=new g.xQ,this.appGroupModel=new O.NL,this.appGroupType=O.Vh.RemoteApp,this.AppGroupResourceEnum=O.Vh,this.form=new F.cw({applicationGroupName:new F.NI("",[F.kI.required,F.kI.maxLength(64)]),friendlyName:new F.NI("",[F.kI.maxLength(64)]),desktopFriendlyName:new F.NI("",[F.kI.maxLength(64)]),description:new F.NI("",[F.kI.maxLength(512)]),logAnalyticWorkspace:new F.NI(null)}),this.hasFormChanges=!1,this.isSaving=!1}return m(t,[{key:"ngOnInit",value:function(){this.avdResourceData$=this.tenantViewSceneId&&!this.appGroupToUpdate?this.initCreateAppGroupMode():this.initUpdateAppGroupMode()}},{key:"close",value:function(){var e=this;this.hasFormChanges?this.dialogService.open(G.z,{context:{headerTitle:"Warning",bodyText:"You are about to exit without saving your changes. Are you sure you want to leave?",cancelButtonText:"Close without saving",confirmButtonText:"Stay"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1}).onClose.pipe((0,b.R)(this.destroyed$)).subscribe(function(t){!0!==t&&e.dialogRef.close()}):this.dialogRef.close()}},{key:"openManageTagsDialog",value:function(e){var t,n=this;e.stopPropagation(),e.preventDefault(),this.dialogService.open(ce,{context:{tagsToUpdate:null===(t=this.hostPool)||void 0===t?void 0:t.Tags},autoFocus:!0,closeOnEsc:!1,closeOnBackdropClick:!1,hasScroll:!1,hasBackdrop:!1}).onClose.pipe((0,b.R)(this.destroyed$)).subscribe(function(e){e&&(n.hostPool.Tags=e.tags.reduce(function(e,t){return r(i({},t.key,t.value),e)},{}),n.hasFormChanges=e.hasChanges)})}},{key:"save",value:function(){var e,t,n,o,i,a,l,s;this.isSaving=!0;var c=this.form.getRawValue(),d=c.applicationGroupName,p=c.friendlyName,u=c.description,m=c.logAnalyticWorkspace,f=c.desktopFriendlyName,v=re(null===(e=this.hostPool)||void 0===e?void 0:e.Id);this.appGroupModel=r(r({},this.appGroupModel),{},{Name:d,SubscriptionName:null===(t=this.hostPool)||void 0===t?void 0:t.SubscriptionName,ResourceGroup:null===(n=this.hostPool)||void 0===n?void 0:n.ResourceGroup,LogAnalyticsId:L(m),LogAnalyticsName:null!==(i=null===(o=m)||void 0===o?void 0:o.Name)&&void 0!==i?i:"",Location:null===(a=this.hostPool)||void 0===a?void 0:a.Location,Kind:this.appGroupType===O.Vh.Desktop?"Desktop":"RemoteApp",DesktopFriendlyName:f,Tags:null===(l=this.hostPool)||void 0===l?void 0:l.Tags,Properties:r(r({},this.appGroupModel.Properties),{},{Description:u,FriendlyName:p,HostPoolArmPath:null===(s=this.hostPool)||void 0===s?void 0:s.Id,ApplicationGroupType:this.appGroupType,WorkspaceArmPath:null,ShowInFeed:null})}),this.handleSaving(v,this.appGroupModel)}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"initCreateAppGroupMode",value:function(){var e=this;return this.azureVirtualDesktopService.getAvdResourcesForCreation(this.tenantViewSceneId).pipe((0,y.b)(function(){return e.initFormValueChangesHandler()}))}},{key:"initUpdateAppGroupMode",value:function(){var t,n=this;return(0,_.aj)([this.azureVirtualDesktopService.getAvdResourcesForCreation(this.tenantViewSceneId),this.azureVirtualDesktopService.getAvdResourceFor(this.tenantViewSceneId,null===(t=this.appGroupToUpdate)||void 0===t?void 0:t.Id)]).pipe((0,N.U)(function(t){var o=e(t,2),i=o[0],a=o[1];return n.appGroupToUpdate=r({},a),n.populateForm(i),n.initFormValueChangesHandler(),i}))}},{key:"handleSaving",value:function(e,t){var n=this,o=new W.lE(this.appGroupToUpdate?"Application group update":"Application group creation",t.Name);this.messageService.addActionMessages(o),this.toastrService.primary(t.Name,this.appGroupToUpdate?"Start application group update":"Start application group creation"),t.Id="".concat(e,"/resourceGroups/").concat(t.ResourceGroup,"/providers/Microsoft.DesktopVirtualization/applicationgroups/").concat(t.Name),this.azureVirtualDesktopService.manageAvdResourceEntity(this.tenantViewSceneId,t).pipe((0,b.R)(this.destroyed$)).subscribe({next:function(e){200===e.status&&(n.isSaving=!1,n.dialogRef.close({appGroup:t,update:!(!n.tenantViewSceneId||!n.appGroupToUpdate)}),n.toastrService.success(n.appGroupToUpdate?"App group updated successfully":"App group created successfully","Success"),o.State=W.$W.Completed,o.Result=e.body,n.messageService.addActionMessages(o))},error:function(e){var t=U(e.error);n.isSaving=!1,n.toastrService.danger(t.message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"}),o.State=W.$W.Failed,o.Result=t.message,n.messageService.addActionMessages(o)}})}},{key:"initFormValueChangesHandler",value:function(){var e=this,t=this.form.getRawValue();this.form.valueChanges.pipe((0,b.R)(this.destroyed$)).subscribe(function(n){return e.hasFormChanges=(0,D.xF)(t,n).hasDifference})}},{key:"populateForm",value:function(e){this.form.patchValue({applicationGroupName:this.appGroupToUpdate.Name,friendlyName:this.appGroupToUpdate.Properties.FriendlyName,desktopFriendlyName:this.appGroupToUpdate.DesktopFriendlyName,logAnalyticWorkspace:this.getFormLogAnalyticWorkspaceItem(e),description:this.appGroupToUpdate.Properties.Description})}},{key:"getFormLogAnalyticWorkspaceItem",value:function(e){var t,n=this;return this.appGroupToUpdate.LogAnalyticsId&&""!==this.appGroupToUpdate.LogAnalyticsId?null!==(t=null==e?void 0:e.LogAnalyticsWorkspaces.find(function(e){return e.Id===n.appGroupToUpdate.LogAnalyticsId}))&&void 0!==t?t:"null":""===this.appGroupToUpdate.LogAnalyticsId?"":null===this.appGroupToUpdate.LogAnalyticsId?"null":void 0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(I["\u0275\u0275directiveInject"](v.Gln),I["\u0275\u0275directiveInject"](v.X4l),I["\u0275\u0275directiveInject"](P),I["\u0275\u0275directiveInject"](v.quB),I["\u0275\u0275directiveInject"](B.e))},t.\u0275cmp=I["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-manage-app-groups-dialog"]],inputs:{tenantViewSceneId:"tenantViewSceneId",hostPool:"hostPool",appGroupType:"appGroupType",appGroupToUpdate:"appGroupToUpdate"},decls:14,vars:11,consts:[[3,"nbSpinner","nbSpinnerMessage"],[4,"ngIf","ngIfElse"],["addAppGroupTitle",""],[3,"formGroup",4,"ngIf"],[1,"d-flex","justify-content-between"],["nbButton","",3,"click"],["nbButton","",3,"disabled","click"],[4,"ngIf"],[3,"formGroup"],[1,"form-group","row"],["for","application_group_name",1,"label","col-md-3","d-flex","align-items-center"],[1,"asterisk"],[1,"col-md-9"],["id","application_group_name","type","text","nbInput","","fullWidth","","placeholder","<host-pool-name>-AG-000","formControlName","applicationGroupName",4,"ngIf","ngIfElse"],["readOnlyApplicationGroupName",""],["for","friendly_name",1,"label","col-md-3","d-flex","align-items-center"],["id","friendly_name","type","text","nbInput","","fullWidth","","formControlName","friendlyName"],["class","form-group row",4,"ngIf"],["for","description",1,"label","col-md-3","d-flex","align-items-center"],["id","description","nbInput","","fullWidth","","formControlName","description"],["for","log_analytic_workspace",1,"label","col-md-3","d-flex","align-items-center"],["id","log_analytic_workspace","fullWidth","","formControlName","logAnalyticWorkspace"],[3,"value",4,"ngIf"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","row","mt-4"],["for","tags",1,"col-md-3","label"],["href","#",3,"click"],["id","application_group_name","type","text","nbInput","","fullWidth","","placeholder","<host-pool-name>-AG-000","formControlName","applicationGroupName"],["id","application_group_name","type","text","nbInput","","fullWidth","","disabled","",3,"value"],[1,"form-control-error"],["for","desktop_friendly_name",1,"label","col-md-3","d-flex","align-items-center"],["id","desktop_friendly_name","type","text","nbInput","","fullWidth","","formControlName","desktopFriendlyName"]],template:function(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-card",0),I["\u0275\u0275pipe"](1,"async"),I["\u0275\u0275elementStart"](2,"nb-card-header"),I["\u0275\u0275template"](3,de,2,1,"ng-container",1),I["\u0275\u0275template"](4,me,3,2,"ng-template",null,2,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](6,"nb-card-body"),I["\u0275\u0275template"](7,xe,40,10,"ng-container",3),I["\u0275\u0275pipe"](8,"async"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](9,"nb-card-footer",4),I["\u0275\u0275elementStart"](10,"button",5),I["\u0275\u0275listener"]("click",function(){return t.close()}),I["\u0275\u0275text"](11,"Close"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](12,"button",6),I["\u0275\u0275listener"]("click",function(){return t.save()}),I["\u0275\u0275text"](13),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275reference"](5);I["\u0275\u0275propertyInterpolate"]("nbSpinnerMessage",t.isSaving?t.appGroupToUpdate?"Updating...":"Saving...":"Loading..."),I["\u0275\u0275property"]("nbSpinner",!I["\u0275\u0275pipeBind1"](1,7,t.avdResourceData$)||t.isSaving),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngIf",t.appGroupToUpdate)("ngIfElse",n),I["\u0275\u0275advance"](4),I["\u0275\u0275property"]("ngIf",I["\u0275\u0275pipeBind1"](8,9,t.avdResourceData$)),I["\u0275\u0275advance"](5),I["\u0275\u0275property"]("disabled",t.form.invalid||t.isSaving||!t.hasFormChanges),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",t.appGroupToUpdate?"Update":"Save"," ")}},directives:[v.Asz,v.Q7R,v.ndF,f.O5,v.yKW,v.XWE,v.DPz,F.JL,F.sg,v.h8i,F.Fj,F.JJ,F.u,v.rs,v.q51,f.sg],pipes:[f.Ov],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:45em;height:45em}[_nghost-%COMP%]   .asterisk[_ngcontent-%COMP%]{color:var(--danger);margin-right:.5em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}"]}),t}(),ke=u(86115);function Pe(e,t){1&e&&I["\u0275\u0275elementContainer"](0)}function Ee(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"nb-card",6),I["\u0275\u0275pipe"](2,"async"),I["\u0275\u0275template"](3,Pe,1,0,"ng-container",7),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](),o=I["\u0275\u0275reference"](4);I["\u0275\u0275advance"](1),I["\u0275\u0275propertyInterpolate"]("nbSpinnerMessage",n.isSaving?n.applicationToUpdate?"Updating...":"Saving...":"Loading..."),I["\u0275\u0275property"]("nbSpinner",!I["\u0275\u0275pipeBind1"](2,3,n.startupMenuApps$)||n.isSaving),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngTemplateOutlet",o)}}function Ae(e,t){1&e&&I["\u0275\u0275elementContainer"](0)}function Te(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-card",6),I["\u0275\u0275template"](1,Ae,1,0,"ng-container",7),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](),o=I["\u0275\u0275reference"](4);I["\u0275\u0275propertyInterpolate"]("nbSpinnerMessage",n.isSaving&&n.applicationToUpdate?"Updating...":"Saving..."),I["\u0275\u0275property"]("nbSpinner",n.isSaving),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngTemplateOutlet",o)}}function Ne(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275text"](1),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" Add application to: ",null==n.appGroup?null:n.appGroup.Name," application group ")}}function Oe(e,t){if(1&e&&I["\u0275\u0275text"](0),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275textInterpolate1"]("Update: ",n.getClearApplicationName(null==n.applicationToUpdate?null:n.applicationToUpdate.Name),"application ")}}function Me(e,t){1&e&&I["\u0275\u0275elementContainer"](0)}function Ve(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275template"](1,Me,1,0,"ng-container",7),I["\u0275\u0275elementContainerEnd"]()),2&e){I["\u0275\u0275nextContext"](2);var n=I["\u0275\u0275reference"](8);I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngTemplateOutlet",n)}}function Re(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"nb-card-header"),I["\u0275\u0275template"](1,Ne,2,1,"ng-container",0),I["\u0275\u0275template"](2,Oe,1,1,"ng-template",null,8,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](4,"nb-card-body"),I["\u0275\u0275template"](5,Ve,2,1,"ng-container",0),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](6,"nb-card-footer",9),I["\u0275\u0275elementStart"](7,"button",10),I["\u0275\u0275listener"]("click",function(){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"]().close()}),I["\u0275\u0275text"](8,"Close"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](9,"button",11),I["\u0275\u0275listener"]("click",function(){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"]().save()}),I["\u0275\u0275text"](10),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()}if(2&e){var o=I["\u0275\u0275reference"](3),r=I["\u0275\u0275nextContext"](),i=I["\u0275\u0275reference"](6);I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",!r.applicationToUpdate)("ngIfElse",o),I["\u0275\u0275advance"](4),I["\u0275\u0275property"]("ngIf",r.withStartMenuItems)("ngIfElse",i),I["\u0275\u0275advance"](4),I["\u0275\u0275property"]("disabled",r.form.invalid||r.isSaving||!r.hasFormChanges),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",r.applicationToUpdate?"Update":"Save"," ")}}function Fe(e,t){1&e&&I["\u0275\u0275elementContainer"](0)}function _e(e,t){if(1&e&&I["\u0275\u0275template"](0,Fe,1,0,"ng-container",7),2&e){I["\u0275\u0275nextContext"]();var n=I["\u0275\u0275reference"](10);I["\u0275\u0275property"]("ngTemplateOutlet",n)}}function De(e,t){1&e&&I["\u0275\u0275elementContainer"](0)}var Ge=function(e){return{$implicit:e}};function Ue(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275template"](1,De,1,0,"ng-container",14),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]().ngIf;I["\u0275\u0275nextContext"](2);var o=I["\u0275\u0275reference"](10);I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngTemplateOutlet",o)("ngTemplateOutletContext",I["\u0275\u0275pureFunction1"](2,Ge,n))}}function Le(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"div",15),I["\u0275\u0275elementStart"](1,"p"),I["\u0275\u0275text"](2,"Session hosts are not available"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](3,"p"),I["\u0275\u0275text"](4,"Please make sure to have at least one running"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](5,"div",16),I["\u0275\u0275elementStart"](6,"a",17),I["\u0275\u0275listener"]("click",function(e){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"](3).redirectTo(e)}),I["\u0275\u0275text"](7," Go to "),I["\u0275\u0275elementStart"](8,"b"),I["\u0275\u0275text"](9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](10," host pool settings to start a session host "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](11,"button",18),I["\u0275\u0275listener"]("click",function(){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"](3).initStartupMenuApps()}),I["\u0275\u0275element"](12,"nb-icon",19),I["\u0275\u0275text"](13," Update "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()}if(2&e){var o=I["\u0275\u0275nextContext"](3);I["\u0275\u0275advance"](9),I["\u0275\u0275textInterpolate"](null==o.hostPool?null:o.hostPool.Name)}}function ze(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275template"](1,Ue,2,4,"ng-container",0),I["\u0275\u0275template"](2,Le,14,1,"ng-template",null,13,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.ngIf,o=I["\u0275\u0275reference"](3);I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",null==n?null:n.length)("ngIfElse",o)}}function We(e,t){if(1&e&&(I["\u0275\u0275template"](0,ze,4,2,"ng-container",12),I["\u0275\u0275pipe"](1,"async")),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275property"]("ngIf",I["\u0275\u0275pipeBind1"](1,1,n.startupMenuApps$))}}function Be(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",48),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.Name," ")}}function $e(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"span",49),I["\u0275\u0275text"](1," This field is required "),I["\u0275\u0275elementEnd"]())}function je(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"div",22),I["\u0275\u0275elementStart"](1,"div",23),I["\u0275\u0275elementStart"](2,"label",45),I["\u0275\u0275elementStart"](3,"span",25),I["\u0275\u0275text"](4,"*"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](5,"span"),I["\u0275\u0275text"](6,"Application"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](7,"div",26),I["\u0275\u0275elementStart"](8,"nb-select",46),I["\u0275\u0275listener"]("selectedChange",function(e){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"](2).applicationChange(e)}),I["\u0275\u0275template"](9,Be,2,2,"nb-option",47),I["\u0275\u0275elementEnd"](),I["\u0275\u0275template"](10,$e,2,0,"span",29),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()}if(2&e){var o=I["\u0275\u0275nextContext"]().$implicit,r=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](9),I["\u0275\u0275property"]("ngForOf",o)("ngForTrackBy",r.trackByFn),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",(null==r.form.controls.application.errors?null:r.form.controls.application.errors.required)&&r.form.controls.application.touched)}}function qe(e,t){1&e&&I["\u0275\u0275element"](0,"input",50)}function He(e,t){if(1&e&&I["\u0275\u0275element"](0,"input",51),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275property"]("value",null==n.form.controls||null==n.form.controls.name?null:n.form.controls.name.value)}}function Je(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"span",49),I["\u0275\u0275text"](1," This field is required "),I["\u0275\u0275elementEnd"]())}function Ke(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"span",49),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate2"](" Max display name length is ",null==n.form.controls.name||null==n.form.controls.name.errors?null:n.form.controls.name.errors.maxlength.requiredLength," characters. Actual is ",null==n.form.controls.name||null==n.form.controls.name.errors?null:n.form.controls.name.errors.maxlength.actualLength," ")}}function Xe(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"span",49),I["\u0275\u0275text"](1," This field is required "),I["\u0275\u0275elementEnd"]())}function Qe(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"span",49),I["\u0275\u0275text"](1,' Enter a Windows or universal app rooted absolute path, e.g. "C:\\app.exe" or "shell:AppsFolder\\appname!App". File names can\'t contain any of the following characters : * ? " < > | / '),I["\u0275\u0275elementEnd"]())}function Ye(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"span",49),I["\u0275\u0275text"](1," This field is required "),I["\u0275\u0275elementEnd"]())}function Ze(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"span",49),I["\u0275\u0275text"](1," Enter a rooted absolute app path. File names can't contain any of the following characters : * ? \" < > | / "),I["\u0275\u0275elementEnd"]())}function et(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"span",49),I["\u0275\u0275text"](1," This field is required "),I["\u0275\u0275elementEnd"]())}function tt(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"span",49),I["\u0275\u0275text"](1," This field is required "),I["\u0275\u0275elementEnd"]())}function nt(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"div",22),I["\u0275\u0275elementStart"](1,"div",52),I["\u0275\u0275elementStart"](2,"label",53),I["\u0275\u0275elementStart"](3,"span",25),I["\u0275\u0275text"](4,"*"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](5,"span"),I["\u0275\u0275text"](6,"Command line"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](7,"div",26),I["\u0275\u0275element"](8,"textarea",54),I["\u0275\u0275template"](9,tt,2,0,"span",29),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](9),I["\u0275\u0275property"]("ngIf",(null==n.form.controls.commandLine.errors?null:n.form.controls.commandLine.errors.required)&&n.form.controls.commandLine.touched)}}function ot(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-radio",48),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n.value),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function rt(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"span",49),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate2"](" Max description length is ",null==n.form.controls.description||null==n.form.controls.description.errors?null:n.form.controls.description.errors.maxlength.requiredLength," characters. Actual is ",null==n.form.controls.description||null==n.form.controls.description.errors?null:n.form.controls.description.errors.maxlength.actualLength," ")}}function it(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementContainerStart"](0,20),I["\u0275\u0275template"](1,je,11,3,"div",21),I["\u0275\u0275elementStart"](2,"div",22),I["\u0275\u0275elementStart"](3,"div",23),I["\u0275\u0275elementStart"](4,"label",24),I["\u0275\u0275elementStart"](5,"span",25),I["\u0275\u0275text"](6,"*"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](7,"span"),I["\u0275\u0275text"](8,"Name"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](9,"div",26),I["\u0275\u0275template"](10,qe,1,0,"input",27),I["\u0275\u0275template"](11,He,1,1,"ng-template",null,28,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275template"](13,Je,2,0,"span",29),I["\u0275\u0275template"](14,Ke,2,2,"span",29),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](15,"div",22),I["\u0275\u0275elementStart"](16,"div",23),I["\u0275\u0275elementStart"](17,"label",30),I["\u0275\u0275elementStart"](18,"span",25),I["\u0275\u0275text"](19,"*"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](20,"span"),I["\u0275\u0275text"](21,"Application path"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](22,"nb-icon",31),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](23,"div",26),I["\u0275\u0275element"](24,"input",32),I["\u0275\u0275template"](25,Xe,2,0,"span",29),I["\u0275\u0275template"](26,Qe,2,0,"span",29),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](27,"div",22),I["\u0275\u0275elementStart"](28,"div",23),I["\u0275\u0275elementStart"](29,"label",33),I["\u0275\u0275elementStart"](30,"span",25),I["\u0275\u0275text"](31,"*"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](32,"span"),I["\u0275\u0275text"](33,"Icon path"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](34,"div",26),I["\u0275\u0275element"](35,"input",34),I["\u0275\u0275template"](36,Ye,2,0,"span",29),I["\u0275\u0275template"](37,Ze,2,0,"span",29),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](38,"div",22),I["\u0275\u0275elementStart"](39,"div",23),I["\u0275\u0275elementStart"](40,"label",35),I["\u0275\u0275elementStart"](41,"span",25),I["\u0275\u0275text"](42,"*"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](43,"span"),I["\u0275\u0275text"](44,"Icon index"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](45,"div",26),I["\u0275\u0275element"](46,"input",36),I["\u0275\u0275template"](47,et,2,0,"span",29),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275template"](48,nt,10,1,"div",21),I["\u0275\u0275elementStart"](49,"div",22),I["\u0275\u0275elementStart"](50,"div",37),I["\u0275\u0275elementStart"](51,"label",38),I["\u0275\u0275text"](52,"Require command line"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](53,"div",26),I["\u0275\u0275elementStart"](54,"nb-radio-group",39),I["\u0275\u0275listener"]("valueChange",function(e){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"]().requireCommandLineChange(e)}),I["\u0275\u0275template"](55,ot,2,2,"nb-radio",40),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](56,"div",22),I["\u0275\u0275elementStart"](57,"label",41),I["\u0275\u0275text"](58," Friendly name "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](59,"div",26),I["\u0275\u0275element"](60,"input",42),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](61,"div",22),I["\u0275\u0275elementStart"](62,"label",43),I["\u0275\u0275text"](63,"Description"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](64,"div",26),I["\u0275\u0275element"](65,"textarea",44),I["\u0275\u0275template"](66,rt,2,2,"span",29),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=t.$implicit,r=I["\u0275\u0275reference"](12),i=I["\u0275\u0275nextContext"]();I["\u0275\u0275property"]("formGroup",i.form),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",i.withStartMenuItems&&o),I["\u0275\u0275advance"](9),I["\u0275\u0275property"]("ngIf",!i.applicationToUpdate)("ngIfElse",r),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngIf",(null==i.form.controls.name.errors?null:i.form.controls.name.errors.required)&&i.form.controls.name.touched),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",null==i.form.controls.name.errors?null:i.form.controls.name.errors.maxlength),I["\u0275\u0275advance"](11),I["\u0275\u0275property"]("ngIf",(null==i.form.controls.applicationPath.errors?null:i.form.controls.applicationPath.errors.required)&&i.form.controls.applicationPath.touched),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",null==i.form.controls.applicationPath.errors?null:i.form.controls.applicationPath.errors.invalidPath),I["\u0275\u0275advance"](10),I["\u0275\u0275property"]("ngIf",(null==i.form.controls.iconPath.errors?null:i.form.controls.iconPath.errors.required)&&i.form.controls.iconPath.touched),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",null==i.form.controls.iconPath.errors?null:i.form.controls.iconPath.errors.invalidIconPath),I["\u0275\u0275advance"](10),I["\u0275\u0275property"]("ngIf",(null==i.form.controls.iconIndex.errors?null:i.form.controls.iconIndex.errors.required)&&i.form.controls.iconIndex.touched),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",i.showCommandLine===i.CommandLineSettingEnum.Require),I["\u0275\u0275advance"](6),I["\u0275\u0275property"]("value",i.showCommandLine),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",i.requireCommandLineTypes),I["\u0275\u0275advance"](11),I["\u0275\u0275property"]("ngIf",null==i.form.controls.description||null==i.form.controls.description.errors?null:i.form.controls.description.errors.maxlength)}}var at=/^[a-zA-Z]:\\(?:[^\\:*?"<>|/]+\\)*[^\\:*?"<>|/]+(\.[^\\:*?"<>|/]+)?$/,lt=/^shell:AppsFolder\\[^*?"<>|/]+!App$/,st=/^[a-zA-Z]:\\(?:[^\\:*?"<>|/]+\\)*[^\\:*?"<>|/]+(\.[^\\:*?"<>|/]+)?$/i,ct=function(){var e=function(){function e(t,n,o,r,i,a,l){p(this,e),this.dialogService=t,this.dialogRef=n,this.azureVirtualDesktopService=o,this.hostPoolsService=r,this.router=i,this.toastrService=a,this.messageService=l,this.destroyed$=new g.xQ,this.withStartMenuItems=!1,this.getClearApplicationName=M,this.CommandLineSettingEnum=O.HJ,this.form=new F.cw({name:new F.NI("",[F.kI.required,F.kI.maxLength(64)]),applicationPath:new F.NI("",[F.kI.required,function(e){var t=(e.value||"").trim();return t?lt.test(t)||at.test(t)?null:{invalidPath:!0}:null}]),iconPath:new F.NI("",[F.kI.required,function(e){var t=(e.value||"").trim();return t?st.test(t)?null:{invalidIconPath:!0}:null}]),iconIndex:new F.NI(null,[F.kI.required]),displayName:new F.NI(""),description:new F.NI("",[F.kI.maxLength(512)])}),this.applicationModel=new O.VC,this.isSaving=!1,this.hasFormChanges=!1,this.showCommandLine=O.HJ.DoNotAllow,this.requireCommandLineTypes=[{title:"No",value:O.HJ.DoNotAllow},{title:"Yes",value:O.HJ.Require}],this.trackByFn=function(e){return e}}return m(e,[{key:"ngOnInit",value:function(){this.withStartMenuItems&&(this.initStartupMenuApps(),this.form.addControl("application",new F.NI(null,[F.kI.required]))),this.applicationToUpdate&&this.populateForm(),this.initFormValueChangesHandler()}},{key:"initStartupMenuApps",value:function(){var e;this.startupMenuApps$=this.azureVirtualDesktopService.getStartMenuApplicationsFor(this.tenantViewSceneId,null===(e=this.appGroup)||void 0===e?void 0:e.Id).pipe((0,N.U)(function(e){return null!=e?e:[]}))}},{key:"close",value:function(){var e=this;this.hasFormChanges?this.dialogService.open(G.z,{context:{headerTitle:"Warning",bodyText:"You are about to exit without saving your changes. Are you sure you want to leave?",cancelButtonText:"Close without saving",confirmButtonText:"Stay"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1}).onClose.pipe((0,b.R)(this.destroyed$)).subscribe(function(t){!0!==t&&e.dialogRef.close()}):this.dialogRef.close()}},{key:"applicationChange",value:function(e){var t;this.form.patchValue({name:null!==(t=M(e.Name))&&void 0!==t?t:"",applicationPath:e.Properties.FilePath,iconPath:e.Properties.IconPath,iconIndex:e.Properties.IconIndex})}},{key:"requireCommandLineChange",value:function(e){this.showCommandLine=e,e===O.HJ.Require?this.form.addControl("commandLine",new F.NI(null,[F.kI.required])):this.form.removeControl("commandLine")}},{key:"redirectTo",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.hostPoolsService.getData().pipe((0,b.R)(this.destroyed$)).subscribe(function(e){var n=e.find(function(e){var n;return e.V2HostPool.Id.toLowerCase()===(null===(n=t.hostPool)||void 0===n?void 0:n.Id.toLowerCase())});n&&(t.close(),t.router.navigate(["/pages/hostpools/".concat(n.Id,"/statistic")]))})}},{key:"save",value:function(){this.withStartMenuItems?this.handleRemoteApplicationWithStartMenuItems():this.handleRemoteApplication()}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"initFormValueChangesHandler",value:function(){var e=this,t=this.form.getRawValue();this.form.valueChanges.pipe((0,b.R)(this.destroyed$)).subscribe(function(n){return e.hasFormChanges=(0,D.xF)(t,n).hasDifference})}},{key:"populateForm",value:function(){this.form.patchValue({name:M(this.applicationToUpdate.Name),applicationPath:this.applicationToUpdate.Properties.FilePath,displayName:this.applicationToUpdate.Properties.FriendlyName,description:this.applicationToUpdate.Properties.Description,iconPath:this.applicationToUpdate.Properties.IconPath,iconIndex:this.applicationToUpdate.Properties.IconIndex}),this.applicationToUpdate.Properties.CommandLineSetting===O.HJ.Require&&(this.showCommandLine=this.applicationToUpdate.Properties.CommandLineSetting,this.form.addControl("commandLine",new F.NI(this.applicationToUpdate.Properties.CommandLineArguments,[F.kI.required])))}},{key:"handleRemoteApplicationWithStartMenuItems",value:function(){var e=this.form.getRawValue(),t=e.application,n=e.name,o=e.applicationPath,r=e.iconPath,i=e.iconIndex,a=e.displayName,l=e.description,s=e.commandLine;this.applicationModel=t,this.applicationModel.Name=n,this.applicationModel.Properties.FilePath=o,this.applicationModel.Properties.IconPath=r,this.applicationModel.Properties.IconIndex=i,this.applicationModel.Properties.FriendlyName=a,this.applicationModel.Properties.Description=l,this.applicationModel.Properties.CommandLineSetting=this.showCommandLine,this.applicationModel.Properties.CommandLineArguments=this.showCommandLine===O.HJ.Require?s:"",this.handleSaving()}},{key:"handleRemoteApplication",value:function(){var e=this.form.getRawValue(),t=e.name,n=e.applicationPath,o=e.iconPath,r=e.iconIndex,i=e.displayName,a=e.description,l=e.commandLine;this.applicationModel={Id:"",Type:"",Name:t,Properties:{ApplicationType:O.lg.InBuilt,CommandLineArguments:this.showCommandLine===O.HJ.Require?l:"",CommandLineSetting:this.showCommandLine,Description:a,FilePath:n,FriendlyName:i,IconContent:null,IconHash:null,IconIndex:r,IconPath:o,MsixPackageApplicationId:null,MsixPackageFamilyName:null,ShowInPortal:!1}},this.handleSaving()}},{key:"handleSaving",value:function(){var e,t,n,o,r=this;this.isSaving=!0;var i=new W.lE(this.applicationToUpdate?"Update ".concat(this.applicationToUpdate.Name," application for"):"Add ".concat(this.applicationModel.Name," application for"),null===(e=this.appGroup)||void 0===e?void 0:e.Name);this.messageService.addActionMessages(i),this.toastrService.primary(this.applicationModel.Name,this.applicationToUpdate?"Start updating application for ".concat(null===(t=this.appGroup)||void 0===t?void 0:t.Name):"Start adding application for ".concat(null===(n=this.appGroup)||void 0===n?void 0:n.Name)),this.azureVirtualDesktopService.manageRemoteApplication(this.tenantViewSceneId,null===(o=this.appGroup)||void 0===o?void 0:o.Id,this.applicationModel).pipe((0,b.R)(this.destroyed$)).subscribe({next:function(){r.isSaving=!1,r.dialogRef.close({rebuildTreeView:!0}),r.toastrService.success(r.applicationToUpdate?"Application updated successfully":"Application created successfully","Success"),i.State=W.$W.Completed,i.Result="Done",r.messageService.addActionMessages(i)},error:function(e){var t=U(e.error);r.isSaving=!1,r.toastrService.danger(t.message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"}),i.State=W.$W.Failed,i.Result=t.message,r.messageService.addActionMessages(i)}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(I["\u0275\u0275directiveInject"](v.Gln),I["\u0275\u0275directiveInject"](v.X4l),I["\u0275\u0275directiveInject"](P),I["\u0275\u0275directiveInject"](ke.lJ),I["\u0275\u0275directiveInject"](h.F0),I["\u0275\u0275directiveInject"](v.quB),I["\u0275\u0275directiveInject"](B.e))},e.\u0275cmp=I["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-manage-remote-application"]],inputs:{tenantViewSceneId:"tenantViewSceneId",appGroup:"appGroup",applicationToUpdate:"applicationToUpdate",withStartMenuItems:"withStartMenuItems",hostPool:"hostPool"},decls:11,vars:2,consts:[[4,"ngIf","ngIfElse"],["withoutStartMenuItemsTpl",""],["cardTpl",""],["formWithoutApplicationControlTpl",""],["formWithApplicationControlTpl",""],["formControlsTpl",""],[3,"nbSpinner","nbSpinnerMessage"],[4,"ngTemplateOutlet"],["updateHeaderTpl",""],[1,"d-flex","justify-content-between"],["nbButton","",3,"click"],["nbButton","",3,"disabled","click"],[4,"ngIf"],["virtualMachineNotRunningTpl",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"error-container","d-flex","h-100","flex-column","justify-content-center","align-items-center"],[1,"d-flex","flex-column","mt-4"],["href","#",3,"click"],["nbButton","",1,"mt-4",3,"click"],["icon","refresh-outline"],[3,"formGroup"],["class","form-group row",4,"ngIf"],[1,"form-group","row"],[1,"col-md-3","d-flex","justify-content-between","align-items-center"],["for","name",1,"label"],[1,"asterisk"],[1,"col-md-9"],["id","name","type","text","nbInput","","fullWidth","","formControlName","name",4,"ngIf","ngIfElse"],["readOnlyName",""],["class","form-control-error",4,"ngIf"],["for","application_path",1,"label","application-path-label"],["icon","info-outline","nbTooltip","Windows application local drive absolute path. Universal apps are also supported. e.g. shell:AppsFolder\\appname!App"],["type","text","id","application_path","nbInput","","fullWidth","","formControlName","applicationPath"],["for","icon_path",1,"label"],["type","text","id","icon_path","nbInput","","fullWidth","","formControlName","iconPath"],["for","icon_index",1,"label"],["type","number","id","icon_index","nbInput","","fullWidth","","formControlName","iconIndex"],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],["for","require_command_line",1,"label"],["id","require_command_line","name","require_command_line",1,"d-flex",3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],["for","friendly_name",1,"label","col-md-3","d-flex","justify-content-between","align-items-center"],["id","friendly_name","type","text","nbInput","","fullWidth","","formControlName","displayName"],["for","description",1,"label","col-md-3"],["id","description","nbInput","","fullWidth","","formControlName","description"],["for","application",1,"label"],["id","application","fullWidth","","formControlName","application",3,"selectedChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],[1,"form-control-error"],["id","name","type","text","nbInput","","fullWidth","","formControlName","name"],["id","name","type","text","nbInput","","fullWidth","","disabled","",3,"value"],[1,"col-md-3"],["for","command_line",1,"label"],["id","command_line","nbInput","","fullWidth","","formControlName","commandLine"]],template:function(e,t){if(1&e&&(I["\u0275\u0275template"](0,Ee,4,5,"ng-container",0),I["\u0275\u0275template"](1,Te,2,3,"ng-template",null,1,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275template"](3,Re,11,6,"ng-template",null,2,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275template"](5,_e,1,1,"ng-template",null,3,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275template"](7,We,2,3,"ng-template",null,4,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275template"](9,it,67,15,"ng-template",null,5,I["\u0275\u0275templateRefExtractor"])),2&e){var n=I["\u0275\u0275reference"](2);I["\u0275\u0275property"]("ngIf",t.withStartMenuItems)("ngIfElse",n)}},directives:[f.O5,v.Asz,v.Q7R,f.tP,v.ndF,v.yKW,v.XWE,v.DPz,v.fMN,F.JL,F.sg,v.jNv,v.h8i,F.Fj,F.JJ,F.u,F.wV,v.MFI,f.sg,v.rs,v.q51,v.r3g],pipes:[f.Ov],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:50em;height:55em}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .asterisk[_ngcontent-%COMP%]{color:var(--danger);margin-right:.5em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}[_nghost-%COMP%]   .application-path-label[_ngcontent-%COMP%]{margin-top:.6em}[_nghost-%COMP%]   .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--danger)}"]}),e}();function dt(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"button",9),I["\u0275\u0275element"](1,"nb-icon",10),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275property"]("nbContextMenu",null==n.treeViewItem?null:n.treeViewItem.contextMenuItems)("nbContextMenuPlacement",(null==n.treeViewItem?null:n.treeViewItem.contextMenuPlacement)||"right")}}function pt(e,t){if(1&e&&I["\u0275\u0275element"](0,"nb-icon",11),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275styleProp"]("visibility",null!=n.treeViewItem&&null!=n.treeViewItem.children&&n.treeViewItem.children.length?"visible":"hidden"),I["\u0275\u0275propertyInterpolate1"]("icon","chevron-",null!=n.treeViewItem&&n.treeViewItem.expanded?"down-outline":"right-outline","")}}function ut(e,t){if(1&e&&I["\u0275\u0275element"](0,"nb-icon",11),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275styleProp"]("visibility",null!=n.treeViewItem&&n.treeViewItem.childrenLoader?"visible":"hidden"),I["\u0275\u0275propertyInterpolate1"]("icon","chevron-",null!=n.treeViewItem&&n.treeViewItem.expanded?"down-outline":"right-outline","")}}function mt(e,t){if(1&e&&I["\u0275\u0275element"](0,"img",12),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275styleProp"]("visibility",null!=n.treeViewItem&&n.treeViewItem.iconPath?"visible":"hidden"),I["\u0275\u0275property"]("src",null==n.treeViewItem?null:n.treeViewItem.iconPath,I["\u0275\u0275sanitizeUrl"])("alt",null==n.treeViewItem?null:n.treeViewItem.title)}}function ft(e,t){1&e&&I["\u0275\u0275element"](0,"ngx-tree-view-item",18),2&e&&I["\u0275\u0275property"]("item",t.$implicit)}function vt(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275template"](1,ft,1,1,"ngx-tree-view-item",17),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](3);I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",null==n.treeViewItem?null:n.treeViewItem.children)("ngForTrackBy",n.treeViewItemIndex)}}function ht(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"ul",16),I["\u0275\u0275template"](2,vt,2,2,"ng-container",13),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){I["\u0275\u0275nextContext"]();var n=I["\u0275\u0275reference"](5),o=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngIf",null==o.treeViewItem||null==o.treeViewItem.children?null:o.treeViewItem.children.length)("ngIfElse",n)}}function gt(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"li",19),I["\u0275\u0275element"](1,"div",20),I["\u0275\u0275text"](2," Loading data. Please wait... "),I["\u0275\u0275elementEnd"]())}function yt(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"li",22),I["\u0275\u0275text"](1," No data available for "),I["\u0275\u0275elementStart"](2,"b"),I["\u0275\u0275text"](3),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](3);I["\u0275\u0275advance"](3),I["\u0275\u0275textInterpolate"](null==n.treeViewItem?null:n.treeViewItem.title)}}function Ct(e,t){if(1&e&&I["\u0275\u0275template"](0,yt,4,1,"li",21),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275property"]("ngIf",!(null!=n.treeViewItem&&n.treeViewItem.hasLoadingError))}}function bt(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275template"](1,ht,3,2,"ng-container",13),I["\u0275\u0275template"](2,gt,3,0,"ng-template",null,14,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275template"](4,Ct,1,1,"ng-template",null,15,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275reference"](3),o=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",!(null!=o.treeViewItem&&o.treeViewItem.isLoading))("ngIfElse",n)}}function St(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"div",23),I["\u0275\u0275element"](1,"nb-icon",24),I["\u0275\u0275text"](2," Something went wrong while loading data. "),I["\u0275\u0275elementStart"](3,"a",25),I["\u0275\u0275listener"]("click",function(){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"]().loadChildren()}),I["\u0275\u0275text"](4,"Try again"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()}}var wt=function(e,t){return{expanded:e,"restrict-hover":t}},xt=function(){var e=function(){function e(){p(this,e),this.destroyed$=new g.xQ,this.treeViewItemIndex=function(e){return e}}return m(e,[{key:"item",set:function(e){e&&(this.cachedTreeViewItem&&this.cachedTreeViewItem.id===e.id&&this.cachedTreeViewItem.childrenCache&&(e.childrenCache=this.cachedTreeViewItem.childrenCache),this.treeViewItem=e,this.cachedTreeViewItem=e,e.childrenCache&&(e.children=e.childrenCache),this.treeViewItem.reloadChildren?this.loadChildren(this.treeViewItem.reloadChildren):e.childrenLoader&&e.expanded&&!e.childrenCache&&this.loadChildren())}},{key:"toggle",value:function(){var e,t,n;(null===(t=null===(e=this.treeViewItem)||void 0===e?void 0:e.children)||void 0===t?void 0:t.length)?this.treeViewItem.expanded=!this.treeViewItem.expanded:!(null===(n=this.treeViewItem)||void 0===n?void 0:n.childrenLoader)||this.treeViewItem.hasLoadingError||this.treeViewItem.isLoading||this.loadChildren()}},{key:"loadChildren",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.treeViewItem){if(this.treeViewItem.childrenCache&&!t)return this.treeViewItem.children=this.treeViewItem.childrenCache,void(this.treeViewItem.expanded=!0);this.treeViewItem.isLoading=!0,this.treeViewItem.expanded=!0,this.treeViewItem.hasLoadingError=!1,this.treeViewItem.childrenLoader().pipe((0,b.R)(this.destroyed$)).subscribe({next:function(t){e.treeViewItem.children=l(t),e.treeViewItem.childrenCache=l(t),e.treeViewItem.isLoading=!1,e.treeViewItem.reloadChildren=!1},error:function(){e.treeViewItem.children=[],e.treeViewItem.hasLoadingError=!0,e.treeViewItem.isLoading=!1},complete:function(){return e.treeViewItem.isLoading=!1}})}}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=I["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-tree-view-item"]],inputs:{item:"item"},decls:12,vars:15,consts:[[1,"tree-view-item"],[1,"tree-view-item-row"],["class","context-menu-btn","nbButton","","size","tiny",3,"nbContextMenu","nbContextMenuPlacement",4,"ngIf"],[1,"tree-view-item-content",3,"ngClass","click"],[3,"visibility","icon",4,"ngIf"],["class","display-icon",3,"visibility","src","alt",4,"ngIf"],[1,"title"],[4,"ngIf"],["class","loading-error",4,"ngIf"],["nbButton","","size","tiny",1,"context-menu-btn",3,"nbContextMenu","nbContextMenuPlacement"],["icon","more-vertical-outline"],[3,"icon"],[1,"display-icon",3,"src","alt"],[4,"ngIf","ngIfElse"],["loading",""],["noChildren",""],[1,"tree-view-child"],[3,"item",4,"ngFor","ngForOf","ngForTrackBy"],[3,"item"],[1,"spinner-container"],[1,"loader"],["class","no-data-message",4,"ngIf"],[1,"no-data-message"],[1,"loading-error"],["icon","alert-triangle-outline"],[3,"click"]],template:function(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"li"),I["\u0275\u0275elementStart"](1,"div",0),I["\u0275\u0275elementStart"](2,"div",1),I["\u0275\u0275template"](3,dt,2,2,"button",2),I["\u0275\u0275elementStart"](4,"div",3),I["\u0275\u0275listener"]("click",function(){return t.toggle()}),I["\u0275\u0275template"](5,pt,1,3,"nb-icon",4),I["\u0275\u0275template"](6,ut,1,3,"nb-icon",4),I["\u0275\u0275template"](7,mt,1,4,"img",5),I["\u0275\u0275elementStart"](8,"span",6),I["\u0275\u0275text"](9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275template"](10,bt,6,2,"ng-container",7),I["\u0275\u0275template"](11,St,5,0,"div",8),I["\u0275\u0275elementEnd"]()),2&e&&(I["\u0275\u0275advance"](2),I["\u0275\u0275styleProp"]("cursor",null!=t.treeViewItem&&null!=t.treeViewItem.children&&t.treeViewItem.children.length||null!=t.treeViewItem&&t.treeViewItem.childrenLoader&&(null==t.treeViewItem||!t.treeViewItem.isLoading)?"pointer":"default"),I["\u0275\u0275classProp"]("has-context-menu",null==t.treeViewItem||null==t.treeViewItem.contextMenuItems?null:t.treeViewItem.contextMenuItems.length),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",null==t.treeViewItem||null==t.treeViewItem.contextMenuItems?null:t.treeViewItem.contextMenuItems.length),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngClass",I["\u0275\u0275pureFunction2"](12,wt,null==t.treeViewItem?null:t.treeViewItem.expanded,!(null!=t.treeViewItem&&null!=t.treeViewItem.children&&t.treeViewItem.children.length||null!=t.treeViewItem&&t.treeViewItem.childrenLoader))),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",!(null!=t.treeViewItem&&t.treeViewItem.childrenLoader)),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",null==t.treeViewItem?null:t.treeViewItem.childrenLoader),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",null==t.treeViewItem?null:t.treeViewItem.iconPath),I["\u0275\u0275advance"](2),I["\u0275\u0275textInterpolate"](null==t.treeViewItem?null:t.treeViewItem.title),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",((null==t.treeViewItem||null==t.treeViewItem.children?null:t.treeViewItem.children.length)||(null==t.treeViewItem?null:t.treeViewItem.childrenLoader))&&(null==t.treeViewItem?null:t.treeViewItem.expanded)),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",null==t.treeViewItem?null:t.treeViewItem.hasLoadingError))},directives:[f.O5,f.mk,v.DPz,v.SrF,v.fMN,f.sg,e],styles:["[_nghost-%COMP%]   .tree-view-child[_ngcontent-%COMP%]{padding:0 0 0 1.5rem}[_nghost-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;justify-content:space-between;border-bottom:.063em solid #e4e9f2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row[_ngcontent-%COMP%]   .context-menu-btn[_ngcontent-%COMP%]{margin-left:1.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row[_ngcontent-%COMP%]   .tree-view-item-content[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0;grid-gap:.5em;gap:.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row[_ngcontent-%COMP%]   .tree-view-item-content[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{color:#8f9bb3}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row[_ngcontent-%COMP%]   .tree-view-item-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:.8125rem;font-weight:600;line-height:1.5rem;padding:.75rem 0}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row[_ngcontent-%COMP%]   .tree-view-item-content[_ngcontent-%COMP%]   .display-icon[_ngcontent-%COMP%]{width:1.5em;height:1.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row[_ngcontent-%COMP%]   .tree-view-item-content.expanded[_ngcontent-%COMP%]{color:#36f}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row[_ngcontent-%COMP%]   .tree-view-item-content[_ngcontent-%COMP%]:hover:not(.restrict-hover){color:#598bff}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row.has-context-menu[_ngcontent-%COMP%]{width:100%;justify-content:space-between}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]:last-child{border-bottom:none}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]:hover{border-bottom:.063em solid #e4e9f2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]:hover   .tree-view-item-content[_ngcontent-%COMP%]{color:#598bff}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .loading-error[_ngcontent-%COMP%], [_nghost-%COMP%]   li.spinner-container[_ngcontent-%COMP%]{height:3em}[_nghost-%COMP%]   li.spinner-container[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.8rem;grid-gap:.5em;gap:.5em}[_nghost-%COMP%]   li.spinner-container[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{position:relative;width:1.5em;height:1.5em;border:.125em solid;border-color:#36f #36f transparent;border-radius:50%;-webkit-animation:rotation 1s linear infinite;animation:rotation 1s linear infinite}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .loading-error[_ngcontent-%COMP%]{display:flex;align-items:center;color:var(--red);font-size:.8rem;grid-gap:.5em;gap:.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .loading-error[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;color:initial;text-decoration:underline;cursor:pointer}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.8rem;grid-gap:.5em;gap:.5em;height:3em}@-webkit-keyframes rotation{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes rotation{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}"]}),e}();function It(e,t){1&e&&I["\u0275\u0275element"](0,"ngx-tree-view-item",2),2&e&&I["\u0275\u0275property"]("item",t.$implicit)}var kt=function(){var e=function(){function e(t){p(this,e),this.menuService=t,this.destroyed$=new g.xQ,this.treeViewItems=[],this.treeViewItemIndex=function(e){return e},e.instanceCount=e.instanceCount+1}return m(e,[{key:"items",set:function(e){if(!e)throw new Error("TreeView: items are required");this.treeViewItems=e}},{key:"ngOnInit",value:function(){var t=this;if(this.contextMenuId||(e.missingContextMenuCount=e.missingContextMenuCount+1),e.instanceCount>1&&e.missingContextMenuCount>0)throw new Error("\n          TreeViewComponent: Multiple instances detected, but one or more of them is missing a contextMenuId.\n          Ensure each tree-view instance has a unique contextMenuId.\n        ");this.menuService.onItemClick().pipe((0,T.h)(function(e){var n;return(null===(n=e.item)||void 0===n?void 0:n.contextMenuId)===t.contextMenuId}),(0,b.R)(this.destroyed$)).subscribe(function(e){var t,n,o;return null===(n=(t=e.item).action)||void 0===n?void 0:n.call(t,null===(o=e.item)||void 0===o?void 0:o.data)})}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete(),e.instanceCount=e.instanceCount-1,this.contextMenuId||(e.missingContextMenuCount=e.missingContextMenuCount-1)}}]),e}();return e.instanceCount=0,e.missingContextMenuCount=0,e.\u0275fac=function(t){return new(t||e)(I["\u0275\u0275directiveInject"](v.kkI))},e.\u0275cmp=I["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-tree-view"]],inputs:{items:"items",contextMenuId:"contextMenuId"},decls:2,vars:2,consts:[[1,"tree-view"],[3,"item",4,"ngFor","ngForOf","ngForTrackBy"],[3,"item"]],template:function(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"ul",0),I["\u0275\u0275template"](1,It,1,1,"ngx-tree-view-item",1),I["\u0275\u0275elementEnd"]()),2&e&&(I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",t.treeViewItems)("ngForTrackBy",t.treeViewItemIndex))},directives:[f.sg,xt],styles:["[_nghost-%COMP%]   .tree-view[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}"]}),e}(),Pt={autoFocus:!0,closeOnEsc:!1,closeOnBackdropClick:!1,hasScroll:!1},Et=function(){var e=function(){function e(t,n,o,r){var i=this;p(this,e),this.azureVirtualDesktopService=t,this.dialogService=n,this.toastrService=o,this.messageService=r,this.destroyed$=new g.xQ,this.CONTEXT_MENU_ID="hostPoolsContextMenuItems",this.treeViewConfig=[],this.hostPoolsAddAction=function(){return i.openManageHostPoolDialog()},this.hostPoolsAddSubscriptionAction=function(e){return i.openManageHostPoolDialog(e.subscriptionName,e.subscriptionId)},this.hostPoolOpenPropertiesAction=function(e){return i.openManageHostPoolDialog(e.SubscriptionName,null,e)},this.hostPoolDeleteAction=function(e){e.Properties.ApplicationGroupReferences.length>0?i.showHostPoolApplicationGroupsWarning(e):i.showHostPoolRemoveConfirmationDialog(e)},this.hostPoolAddRemoteAppGroupAction=function(e){return i.openManageAppGroup(e,O.Vh.RemoteApp)},this.remoteAppGroupStartFromMenuAction=function(e){return i.openManageRemoteApplication(e.appGroup,void 0,e.hostPool,!0)},this.remoteAppGroupAddManuallyAction=function(e){return i.openManageRemoteApplication(e,void 0)},this.remoteAppGroupOpenPropertiesAction=function(e){var t=i.avdOverviewData.HostPools.find(function(t){return t.Properties.ApplicationGroupReferences.some(function(t){return t.toLowerCase()===e.Id.toLowerCase()})});t&&i.openManageAppGroup(t,O.Vh.RemoteApp,e)},this.remoteAppGroupAssignAction=function(e){return i.openAssignUserToApplicationGroupDialog(e)},this.remoteAppGroupDeleteAction=function(e){return i.showApplicationsGroupRemoveConfirmationDialog(e)},this.hostPoolAddDesktopAppGroupAction=function(e){return i.openManageAppGroup(e,O.Vh.Desktop)},this.desktopAppGroupOpenPropertiesAction=function(e){var t=i.avdOverviewData.HostPools.find(function(t){return t.Properties.ApplicationGroupReferences.some(function(t){return t.toLowerCase()===e.Id.toLowerCase()})});t&&i.openManageAppGroup(t,O.Vh.Desktop,e)},this.desktopAppGroupAssignAction=function(e){return i.openAssignUserToApplicationGroupDialog(e)},this.desktopAppGroupDeleteAction=function(e){return i.showApplicationsGroupRemoveConfirmationDialog(e)},this.remoteApplicationOpenPropertiesAction=function(e){return i.openManageRemoteApplication(e.appGroup,e.application)},this.remoteApplicationDeleteAction=function(e){return i.showRemoteApplicationRemoveConfirmationDialog(e.appGroup,e.application,e.node)}}return m(e,[{key:"overview",set:function(e){e&&(this.avdOverviewData=e,this.buildTreeView(e))}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"buildTreeView",value:function(e,t){var n,o,r,i=this,s=this.treeViewConfig?R.collectExpandedIds(this.treeViewConfig):[],c=e.HostPools,d=e.AppGroups,p=R.hostPoolsTreeViewConfig({hostPoolsAddAction:this.hostPoolsAddAction,hostPoolsAddSubscriptionAction:this.hostPoolsAddSubscriptionAction,hostPoolOpenPropertiesAction:this.hostPoolOpenPropertiesAction,hostPoolDeleteAction:this.hostPoolDeleteAction,hostPoolAddRemoteAppGroupAction:this.hostPoolAddRemoteAppGroupAction,remoteAppGroupStartFromMenuAction:this.remoteAppGroupStartFromMenuAction,remoteAppGroupAddManuallyAction:this.remoteAppGroupAddManuallyAction,remoteAppGroupOpenPropertiesAction:this.remoteAppGroupOpenPropertiesAction,remoteAppGroupAssignAction:this.remoteAppGroupAssignAction,remoteAppGroupDeleteAction:this.remoteAppGroupDeleteAction,hostPoolAddDesktopAppGroupAction:this.hostPoolAddDesktopAppGroupAction,desktopAppGroupOpenPropertiesAction:this.desktopAppGroupOpenPropertiesAction,desktopAppGroupAssignAction:this.desktopAppGroupAssignAction,desktopAppGroupDeleteAction:this.desktopAppGroupDeleteAction,remoteApplicationOpenPropertiesAction:this.remoteApplicationOpenPropertiesAction,remoteApplicationDeleteAction:this.remoteApplicationDeleteAction},function(e){return i.getRemoteApplicationsBy(e)},this.CONTEXT_MENU_ID,t);this.treeViewConfig=(n=d,o=p,r=function(e){return function(e,t){var n,o,r=new Map,i=a(e);try{for(i.s();!(o=i.n()).done;){var s=o.value,c=t(s),d=null!==(n=r.get(c))&&void 0!==n?n:[];r.set(c,[].concat(l(d),[s]))}}catch(p){i.e(p)}finally{i.f()}return Array.from(r.values())}(e.sort(function(e,t){var n=e.SubscriptionName.localeCompare(t.SubscriptionName);return 0!==n?n:e.Name.localeCompare(t.Name)}),function(e){var t=e.Id.split("/"),n="";if(t.length>=3){var o=t.findIndex(function(e){return"subscriptions"===e.toLowerCase()});o>=0&&t.length>o+1&&(n=t[o+1])}return"".concat(n,"|").concat(e.SubscriptionName)})}(c).map(function(e){return function(e,t,n){var o=e.map(function(e){return function(e,t,n){var o=function(e,t,n,o){return e.map(function(e){var r=t.find(function(t){return t.Id.toLowerCase()===e.toLowerCase()});return r?n.appGroupNodeBuilder(r.Name,r,o):null}).filter(Boolean)}(e.Properties.ApplicationGroupReferences,t,n,e),r=n.appGroupsParentNodeBuilder(o,e);return n.hostPoolNodeBuilder(e.Name,[r],e)}(e,t,n)}).filter(Boolean);return n.subscriptionNodeBuilder(e[0],o)}(e,n,o)}),[o.rootNodeBuilder(r)]),R.setExpandedByIds(this.treeViewConfig,s)}},{key:"getRemoteApplicationsBy",value:function(e){var t;return this.azureVirtualDesktopService.getRemoteApplications(null===(t=this.selectedViewScene)||void 0===t?void 0:t.Id,e)}},{key:"openManageHostPoolDialog",value:function(e,t,n){var o,i=this;this.dialogService.open(J,r({dialogClass:"avd-manage-resources-dialog",hasScroll:!1,context:{tenantViewSceneId:null===(o=this.selectedViewScene)||void 0===o?void 0:o.Id,subscriptionName:e,preselectSubscriptionId:t,hostPoolToUpdate:n}},Pt)).onClose.pipe((0,b.R)(this.destroyed$)).subscribe(function(e){if(e){var t=i.avdOverviewData.HostPools,n=i.avdOverviewData.HostPools.find(function(t){return t.Id===e.hostPool.Id});e.hostPool.Properties.ApplicationGroupReferences=n?n.Properties.ApplicationGroupReferences:[],i.avdOverviewData=r(r({},i.avdOverviewData),{},{HostPools:[].concat(l(t.filter(function(t){return t.Id!==e.hostPool.Id})),[e.hostPool])}),i.buildTreeView(i.avdOverviewData)}})}},{key:"showHostPoolApplicationGroupsWarning",value:function(e){var t=this.dialogService.open(G.z,r({context:{headerTitle:"Warning",bodyText:"".concat(e.Name," host pool has application groups assigned to it. Remove them first and try again after"),cancelButtonText:"Close"}},Pt));t.onClose.pipe((0,A.q)(1),(0,b.R)(this.destroyed$)).subscribe(function(e){if(!0!==e)return t.close()})}},{key:"showHostPoolRemoveConfirmationDialog",value:function(e){var t=this,n=new W.lE("Host pool deletion",e.Name),o=this.dialogService.open(G.z,r({context:{headerTitle:"Warning",bodyText:"You are about to remove ".concat(e.Name," host pool. Are you sure you want to proceed?"),cancelButtonText:"Cancel",confirmButtonText:"Yes, remove it"}},Pt)).onClose,i=l(this.avdOverviewData.HostPools);o.pipe((0,A.q)(1),(0,T.h)(function(e){return!0===e}),(0,y.b)(function(){t.messageService.addActionMessages(n),t.toastrService.primary(e.Name,"Start host pool deletion"),t.avdOverviewData=r(r({},t.avdOverviewData),{},{HostPools:l(t.avdOverviewData.HostPools.filter(function(t){return t.Id!==e.Id}))}),t.buildTreeView(t.avdOverviewData)}),(0,C.w)(function(){var n;return t.azureVirtualDesktopService.deleteAvdResourceEntity(null===(n=t.selectedViewScene)||void 0===n?void 0:n.Id,e.Id)}),(0,b.R)(this.destroyed$)).subscribe({next:function(e){t.toastrService.success("Host pool removed successfully","Success"),n.State=W.$W.Completed,n.Result=e.body,t.messageService.addActionMessages(n)},error:function(e){var o=U(e.error);t.avdOverviewData=r(r({},t.avdOverviewData),{},{HostPools:i}),t.buildTreeView(t.avdOverviewData),t.toastrService.danger(o.message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"}),n.State=W.$W.Failed,n.Result=o.message,t.messageService.addActionMessages(n)}})}},{key:"openManageAppGroup",value:function(e){var t,n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.Vh.RemoteApp,i=arguments.length>2?arguments[2]:void 0,a=this.dialogService.open(Ie,r({context:{tenantViewSceneId:null===(t=this.selectedViewScene)||void 0===t?void 0:t.Id,hostPool:e,appGroupType:o,appGroupToUpdate:i}},Pt)),s=a.onClose;s.pipe((0,b.R)(this.destroyed$)).subscribe(function(t){if(t){var o=n.avdOverviewData,a=o.HostPools,s=o.AppGroups;if(!t.update)return e.Properties.ApplicationGroupReferences=[].concat(l(e.Properties.ApplicationGroupReferences),[t.appGroup.Id]),n.avdOverviewData=r(r({},n.avdOverviewData),{},{HostPools:[].concat(l(a.filter(function(t){return t.Id!==e.Id})),[e]),AppGroups:[].concat(l(s),[t.appGroup])}),n.buildTreeView(n.avdOverviewData),void R.buildWorkspaceTreeView$.next(n.avdOverviewData);if(t.update){var c=a.find(function(e){return e.Properties.ApplicationGroupReferences.some(function(e){return e.toLowerCase()===i.Id.toLowerCase()})}),d=c.Properties.ApplicationGroupReferences.findIndex(function(e){return e.toLowerCase()===i.Id.toLowerCase()});if(-1!==d)return c.Properties.ApplicationGroupReferences[d]=t.appGroup.Id,n.avdOverviewData=r(r({},n.avdOverviewData),{},{HostPools:[].concat(l(a.filter(function(t){return t.Id!==e.Id})),[c]),AppGroups:[].concat(l(s.filter(function(e){return e.Id!==i.Id})),[t.appGroup])}),void n.buildTreeView(n.avdOverviewData)}}})}},{key:"showApplicationsGroupRemoveConfirmationDialog",value:function(e){var t=this,n=new W.lE("Application group deletion",e.Name),o=this.dialogService.open(G.z,r({context:{headerTitle:"Warning",bodyText:"You are about to remove ".concat(e.Name," applications group. Are you sure you want to proceed?"),cancelButtonText:"Cancel",confirmButtonText:"Yes, remove it"}},Pt)).onClose,i=l(this.avdOverviewData.AppGroups),a=this.avdOverviewData.HostPools.map(function(e){return r(r({},e),{},{Properties:r(r({},e.Properties),{},{ApplicationGroupReferences:l(e.Properties.ApplicationGroupReferences)})})});o.pipe((0,A.q)(1),(0,T.h)(function(e){return!0===e}),(0,y.b)(function(){var o=t.avdOverviewData.HostPools.map(function(t){return t.Properties.ApplicationGroupReferences=l(t.Properties.ApplicationGroupReferences.filter(function(t){return t.toLowerCase()!==e.Id.toLowerCase()})),t});t.messageService.addActionMessages(n),t.toastrService.primary(e.Name,"Start application group deletion"),t.avdOverviewData=r(r({},t.avdOverviewData),{},{HostPools:l(o),AppGroups:l(t.avdOverviewData.AppGroups.filter(function(t){return t.Id!==e.Id}))}),t.buildTreeView(t.avdOverviewData),R.buildWorkspaceTreeView$.next(t.avdOverviewData)}),(0,C.w)(function(){var n;return t.azureVirtualDesktopService.deleteAvdResourceEntity(null===(n=t.selectedViewScene)||void 0===n?void 0:n.Id,e.Id)}),(0,b.R)(this.destroyed$)).subscribe({next:function(e){t.toastrService.success("Applications group removed successfully","Success"),n.State=W.$W.Completed,n.Result=e.body,t.messageService.addActionMessages(n)},error:function(e){var o=U(e.error);t.avdOverviewData=r(r({},t.avdOverviewData),{},{AppGroups:i,HostPools:a}),t.buildTreeView(t.avdOverviewData),t.toastrService.danger(o.message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"}),n.State=W.$W.Failed,n.Result=o.message,t.messageService.addActionMessages(n)}})}},{key:"openAssignUserToApplicationGroupDialog",value:function(e){var t;this.dialogService.open(oe,r({context:{tenantViewSceneId:null===(t=this.selectedViewScene)||void 0===t?void 0:t.Id,appGroupId:e.Id}},Pt))}},{key:"openManageRemoteApplication",value:function(e,t,n){var o,i=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=this.dialogService.open(ct,r({context:{tenantViewSceneId:null===(o=this.selectedViewScene)||void 0===o?void 0:o.Id,appGroup:e,applicationToUpdate:t,withStartMenuItems:a,hostPool:n}},Pt)),s=l.onClose;s.pipe((0,b.R)(this.destroyed$)).subscribe(function(t){t&&i.buildTreeView(i.avdOverviewData,"".concat(V.AppGroupNodeId).concat(e.Id))})}},{key:"showRemoteApplicationRemoveConfirmationDialog",value:function(e,t,n){var o=this,i=new W.lE("Application deletion",t.Name),a=this.dialogService.open(G.z,r({context:{headerTitle:"Warning",bodyText:"You are about to remove ".concat(M(t.Name)," applications. Are you sure you want to proceed?"),cancelButtonText:"Cancel",confirmButtonText:"Yes, remove it"}},Pt)).onClose,s=r({},n);a.pipe((0,A.q)(1),(0,T.h)(function(e){return!0===e}),(0,C.w)(function(){var r;return o.messageService.addActionMessages(i),o.toastrService.primary(t.Name,"Start application deletion"),n.children=l(n.children.filter(function(e){return e.id!=="".concat(V.RemoteAppNodeId).concat(t.Id)})),o.azureVirtualDesktopService.deleteRemoteApplication(null===(r=o.selectedViewScene)||void 0===r?void 0:r.Id,e.Id,M(t.Name))}),(0,b.R)(this.destroyed$)).subscribe({next:function(t){o.buildTreeView(o.avdOverviewData,"".concat(V.AppGroupNodeId).concat(e.Id)),o.toastrService.success("Applications group removed successfully","Success"),i.State=W.$W.Completed,i.Result=t.body,o.messageService.addActionMessages(i)},error:function(e){n.children=l(s.children);var t=U(e.error);o.toastrService.danger(t.message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"}),i.State=W.$W.Failed,i.Result=t.message,o.messageService.addActionMessages(i)}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(I["\u0275\u0275directiveInject"](P),I["\u0275\u0275directiveInject"](v.Gln),I["\u0275\u0275directiveInject"](v.quB),I["\u0275\u0275directiveInject"](B.e))},e.\u0275cmp=I["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-host-pools-tree-view"]],inputs:{overview:"overview",selectedViewScene:"selectedViewScene"},decls:3,vars:2,consts:[[3,"items","contextMenuId"]],template:function(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"nb-card"),I["\u0275\u0275elementStart"](1,"nb-card-body"),I["\u0275\u0275element"](2,"ngx-tree-view",0),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e&&(I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("items",t.treeViewConfig)("contextMenuId",t.CONTEXT_MENU_ID))},directives:[v.Asz,v.yKW,kt],styles:[""]}),e}();function At(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",20),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.Name," ")}}function Tt(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-select",18),I["\u0275\u0275template"](1,At,2,2,"nb-option",19),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",null==n.avdResourcesData?null:n.avdResourcesData.Subscriptions)("ngForTrackBy",n.trackByFn)}}function Nt(e,t){if(1&e&&I["\u0275\u0275element"](0,"input",21),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275property"]("value",null==n.form.controls||null==n.form.controls.subscription||null==n.form.controls.subscription.value?null:n.form.controls.subscription.value.Name)}}function Ot(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",22),I["\u0275\u0275text"](2,"This field is required"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function Mt(e,t){1&e&&I["\u0275\u0275element"](0,"input",23)}function Vt(e,t){if(1&e&&I["\u0275\u0275element"](0,"input",24),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275property"]("value",null==n.form.controls||null==n.form.controls.workSpaceName?null:n.form.controls.workSpaceName.value)}}function Rt(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",22),I["\u0275\u0275text"](2,"This field is required"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function Ft(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",22),I["\u0275\u0275text"](2),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](2),I["\u0275\u0275textInterpolate2"](" Max name length is ",null==n.form.controls.workSpaceName||null==n.form.controls.workSpaceName.errors?null:n.form.controls.workSpaceName.errors.maxlength.requiredLength," characters. Actual is ",null==n.form.controls.workSpaceName||null==n.form.controls.workSpaceName.errors?null:n.form.controls.workSpaceName.errors.maxlength.actualLength," ")}}function _t(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",20),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.Name," ")}}function Dt(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-select",25),I["\u0275\u0275template"](1,_t,2,2,"nb-option",19),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",null==n.avdResourcesData?null:n.avdResourcesData.Locations)("ngForTrackBy",n.trackByFn)}}function Gt(e,t){if(1&e&&I["\u0275\u0275element"](0,"input",26),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275property"]("value",null==n.form.controls||null==n.form.controls.location||null==n.form.controls.location.value?null:n.form.controls.location.value.Name)}}function Ut(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",22),I["\u0275\u0275text"](2,"This field is required"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function Lt(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",22),I["\u0275\u0275text"](2),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](2),I["\u0275\u0275textInterpolate2"](" Max name length is ",null==n.form.controls.friendlyName.errors?null:n.form.controls.friendlyName.errors.maxlength.requiredLength," characters. Actual is ",null==n.form.controls.friendlyName.errors?null:n.form.controls.friendlyName.errors.maxlength.actualLength," ")}}function zt(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",22),I["\u0275\u0275text"](2),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](2),I["\u0275\u0275textInterpolate2"](" Max description length is ",null==n.form.controls.description||null==n.form.controls.description.errors?null:n.form.controls.description.errors.maxlength.requiredLength," characters. Actual is ",null==n.form.controls.description||null==n.form.controls.description.errors?null:n.form.controls.description.errors.maxlength.actualLength," ")}}function Wt(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"div",1),I["\u0275\u0275elementStart"](2,"label",27),I["\u0275\u0275text"](3,"Friendly name"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](4,"div",6),I["\u0275\u0275element"](5,"input",28),I["\u0275\u0275template"](6,Lt,3,2,"ng-container",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](7,"div",1),I["\u0275\u0275elementStart"](8,"label",29),I["\u0275\u0275text"](9,"Description"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](10,"div",6),I["\u0275\u0275element"](11,"textarea",30),I["\u0275\u0275template"](12,zt,3,2,"ng-container",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](6),I["\u0275\u0275property"]("ngIf",null==n.form.controls.friendlyName.errors?null:n.form.controls.friendlyName.errors.maxlength),I["\u0275\u0275advance"](6),I["\u0275\u0275property"]("ngIf",(null==n.form.controls.description||null==n.form.controls.description.errors?null:n.form.controls.description.errors.maxlength)&&n.form.controls.description.touched)}}var Bt=function(){var e=function(){function e(){p(this,e),this.formControlsInitialized=new I.EventEmitter,this.trackByFn=function(e){return e}}return m(e,[{key:"ngOnInit",value:function(){this.addControls()}},{key:"getFormSubscriptionItem",value:function(){var e,t,n=this;if(this.preselectSubscriptionId){var o=re(this.preselectSubscriptionId);if(o)return null===(e=this.avdResourcesData)||void 0===e?void 0:e.Subscriptions.find(function(e){var t=re(e.Id);return(null==t?void 0:t.toLowerCase())===o.toLowerCase()})}if(this.workSpaceToUpdate)return null===(t=this.avdResourcesData)||void 0===t?void 0:t.Subscriptions.find(function(e){return n.workSpaceToUpdate.Id.toLowerCase().includes(e.Id.toLowerCase())})}},{key:"getFormLocationItem",value:function(){var e,t=this;return null===(e=this.avdResourcesData)||void 0===e?void 0:e.Locations.find(function(e){return e.Id===t.workSpaceToUpdate.Location})}},{key:"getFormLogAnalyticWorkspaceItem",value:function(){var e,t,n=this;return this.workSpaceToUpdate.LogAnalyticsId&&""!==this.workSpaceToUpdate.LogAnalyticsId?null!==(t=null===(e=this.avdResourcesData)||void 0===e?void 0:e.LogAnalyticsWorkspaces.find(function(e){return e.Id===n.workSpaceToUpdate.LogAnalyticsId}))&&void 0!==t?t:"null":""===this.workSpaceToUpdate.LogAnalyticsId?"":null===this.workSpaceToUpdate.LogAnalyticsId?"null":void 0}},{key:"addControls",value:function(){var e,t,n,o,r,i,a;this.form.addControl("subscription",new F.NI(null!==(e=this.getFormSubscriptionItem())&&void 0!==e?e:null,[F.kI.required]),{emitEvent:!1}),this.form.addControl("workSpaceName",new F.NI(this.workSpaceToUpdate?this.workSpaceToUpdate.Name:"",[F.kI.required,F.kI.maxLength(64)]),{emitEvent:!1}),this.form.addControl("location",new F.NI(this.workSpaceToUpdate?this.getFormLocationItem():null,[F.kI.required]),{emitEvent:!1}),this.form.addControl("logAnalyticWorkspace",new F.NI(this.workSpaceToUpdate?this.getFormLogAnalyticWorkspaceItem():null),{emitEvent:!1}),this.form.addControl("friendlyName",new F.NI(null!==(o=null===(n=null===(t=this.workSpaceToUpdate)||void 0===t?void 0:t.Properties)||void 0===n?void 0:n.FriendlyName)&&void 0!==o?o:"",[F.kI.maxLength(64)]),{emitEvent:!1}),this.form.addControl("description",new F.NI(null!==(a=null===(i=null===(r=this.workSpaceToUpdate)||void 0===r?void 0:r.Properties)||void 0===i?void 0:i.Description)&&void 0!==a?a:"",[F.kI.maxLength(512)]),{emitEvent:!1}),this.formControlsInitialized.emit(this.form.getRawValue())}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=I["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-workspace-configuration-tab"]],inputs:{form:"form",avdResourcesData:"avdResourcesData",workSpaceToUpdate:"workSpaceToUpdate",preselectSubscriptionId:"preselectSubscriptionId"},outputs:{formControlsInitialized:"formControlsInitialized"},decls:40,vars:12,consts:[[3,"formGroup"],[1,"form-group","row"],[1,"col-md-3","d-flex","justify-content-between","align-items-center"],["for","subscription",1,"label"],[1,"asterisk"],["icon","info-outline","nbTooltip","All charges for resources in an Azure subscription are billed as one."],[1,"col-md-9"],["id","subscription","fullWidth","","formControlName","subscription",4,"ngIf","ngIfElse"],["readOnlySubscription",""],[4,"ngIf"],["for","name",1,"label","col-md-3","d-flex","align-items-center"],["id","name","type","text","nbInput","","fullWidth","","formControlName","workSpaceName",4,"ngIf","ngIfElse"],["readOnlyWorkSpaceName",""],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],["for","location",1,"label"],["icon","info-outline","nbTooltip","Choose the region to create the Azure Virtual Desktop object. Its metadata is saved in the geography linked to that region."],["id","location","fullWidth","","formControlName","location",4,"ngIf","ngIfElse"],["readOnlyLocation",""],["id","subscription","fullWidth","","formControlName","subscription"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],["id","subscription","type","text","nbInput","","fullWidth","","disabled","",3,"value"],[1,"form-control-error"],["id","name","type","text","nbInput","","fullWidth","","formControlName","workSpaceName"],["id","name","type","text","nbInput","","fullWidth","","disabled","",3,"value"],["id","location","fullWidth","","formControlName","location"],["id","location","type","text","nbInput","","fullWidth","","disabled","",3,"value"],["for","friendly_name",1,"label","col-md-3"],["id","friendly_name","type","text","nbInput","","fullWidth","","formControlName","friendlyName"],["for","description",1,"label","col-md-3"],["id","description","nbInput","","fullWidth","","formControlName","description"]],template:function(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0,0),I["\u0275\u0275elementStart"](1,"div",1),I["\u0275\u0275elementStart"](2,"div",2),I["\u0275\u0275elementStart"](3,"label",3),I["\u0275\u0275elementStart"](4,"span",4),I["\u0275\u0275text"](5,"*"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](6,"span"),I["\u0275\u0275text"](7,"Subscription / Resource Group"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](8,"nb-icon",5),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](9,"div",6),I["\u0275\u0275template"](10,Tt,2,2,"nb-select",7),I["\u0275\u0275template"](11,Nt,1,1,"ng-template",null,8,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275template"](13,Ot,3,0,"ng-container",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](14,"div",1),I["\u0275\u0275elementStart"](15,"label",10),I["\u0275\u0275elementStart"](16,"span",4),I["\u0275\u0275text"](17,"*"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](18,"span"),I["\u0275\u0275text"](19,"Workspace name"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](20,"div",6),I["\u0275\u0275template"](21,Mt,1,0,"input",11),I["\u0275\u0275template"](22,Vt,1,1,"ng-template",null,12,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275template"](24,Rt,3,0,"ng-container",9),I["\u0275\u0275template"](25,Ft,3,2,"ng-container",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](26,"div",1),I["\u0275\u0275elementStart"](27,"div",13),I["\u0275\u0275elementStart"](28,"label",14),I["\u0275\u0275elementStart"](29,"span",4),I["\u0275\u0275text"](30,"*"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](31,"span"),I["\u0275\u0275text"](32,"Location"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](33,"nb-icon",15),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](34,"div",6),I["\u0275\u0275template"](35,Dt,2,2,"nb-select",16),I["\u0275\u0275template"](36,Gt,1,1,"ng-template",null,17,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275template"](38,Ut,3,0,"ng-container",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275template"](39,Wt,13,2,"ng-container",9),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275reference"](12),o=I["\u0275\u0275reference"](23),r=I["\u0275\u0275reference"](37);I["\u0275\u0275property"]("formGroup",t.form),I["\u0275\u0275advance"](10),I["\u0275\u0275property"]("ngIf",!t.workSpaceToUpdate)("ngIfElse",n),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngIf",(null==t.form.controls.subscription.errors?null:t.form.controls.subscription.errors.required)&&t.form.controls.subscription.touched),I["\u0275\u0275advance"](8),I["\u0275\u0275property"]("ngIf",!t.workSpaceToUpdate)("ngIfElse",o),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngIf",(null==t.form.controls.workSpaceName.errors?null:t.form.controls.workSpaceName.errors.required)&&t.form.controls.workSpaceName.touched),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",null==t.form.controls.workSpaceName.errors?null:t.form.controls.workSpaceName.errors.maxlength),I["\u0275\u0275advance"](10),I["\u0275\u0275property"]("ngIf",!t.workSpaceToUpdate)("ngIfElse",r),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngIf",(null==t.form.controls.location.errors?null:t.form.controls.location.errors.required)&&t.form.controls.location.touched),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",t.workSpaceToUpdate)}},directives:[F.JL,F.sg,v.fMN,v.jNv,f.O5,v.rs,F.JJ,F.u,f.sg,v.q51,v.h8i,F.Fj],styles:["[_nghost-%COMP%]   .asterisk[_ngcontent-%COMP%]{color:var(--danger);margin-right:.5em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}"]}),e}();function $t(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",13),I["\u0275\u0275text"](2,"This field is required"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function jt(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",13),I["\u0275\u0275text"](2,"This field is required"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function qt(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"tr"),I["\u0275\u0275elementStart"](1,"td",6),I["\u0275\u0275element"](2,"input",9),I["\u0275\u0275template"](3,$t,3,0,"ng-container",10),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](4,"td",6),I["\u0275\u0275element"](5,"input",9),I["\u0275\u0275template"](6,jt,3,0,"ng-container",10),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](7,"td",7),I["\u0275\u0275elementStart"](8,"button",11),I["\u0275\u0275listener"]("click",function(){var e=I["\u0275\u0275restoreView"](n).index;return I["\u0275\u0275nextContext"](2).remove(e)}),I["\u0275\u0275element"](9,"nb-icon",12),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()}if(2&e){var o,r,i=t.$implicit,a=t.index,l=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](2),I["\u0275\u0275propertyInterpolate1"]("id","tag_key_",a,""),I["\u0275\u0275property"]("formControl",l.form.controls[a].get("key")),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",null==(o=i.get("key"))||null==o.errors?null:o.errors.required),I["\u0275\u0275advance"](2),I["\u0275\u0275propertyInterpolate1"]("id","tag_value_",a,""),I["\u0275\u0275property"]("formControl",l.form.controls[a].get("value")),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",null==(r=i.get("value"))||null==r.errors?null:r.errors.required)}}function Ht(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"form",3),I["\u0275\u0275elementStart"](1,"div",4),I["\u0275\u0275elementStart"](2,"table",5),I["\u0275\u0275elementStart"](3,"thead"),I["\u0275\u0275elementStart"](4,"tr"),I["\u0275\u0275elementStart"](5,"th",6),I["\u0275\u0275text"](6,"Key"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](7,"th",6),I["\u0275\u0275text"](8,"Value"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](9,"th",7),I["\u0275\u0275text"](10,"Remove"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](11,"tbody"),I["\u0275\u0275template"](12,qt,10,6,"tr",8),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275property"]("formGroup",n.form),I["\u0275\u0275advance"](12),I["\u0275\u0275property"]("ngForOf",n.form.controls)("ngForTrackBy",n.trackByIndex)}}var Jt=function(){var t=function(){function t(){p(this,t),this.formControlsInitialized=new I.EventEmitter,this.trackByIndex=function(e){return e}}return m(t,[{key:"ngOnInit",value:function(){this.tagsToUpdate?this.populateFormArray(this.tagsToUpdate):this.formControlsInitialized.emit(this.form.getRawValue())}},{key:"add",value:function(){this.form.push(new F.cw({key:new F.NI("",[F.kI.required]),value:new F.NI("",[F.kI.required])}))}},{key:"remove",value:function(e){this.form.removeAt(e)}},{key:"populateFormArray",value:function(t){var n=this;this.form.clear(),Object.entries(t).forEach(function(t){var o=e(t,2),r=o[0],i=o[1];n.form.push(new F.cw({key:new F.NI(r),value:new F.NI(i)}),{emitEvent:!1})}),this.formControlsInitialized.emit(this.form.getRawValue())}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=I["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-tags-tab"]],inputs:{form:"form",tagsToUpdate:"tagsToUpdate"},outputs:{formControlsInitialized:"formControlsInitialized"},decls:4,vars:2,consts:[["class","row",3,"formGroup",4,"ngIf"],["type","button","nbButton","",3,"disabled","click"],["icon","plus-square"],[1,"row",3,"formGroup"],[1,"col-md-12"],[1,"table","table-bordered","table-striped"],[1,"w-50"],[1,"w-25"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","text","nbInput","","fullWidth","",3,"id","formControl"],[4,"ngIf"],["type","button","nbButton","","nbTooltip","Remove",3,"click"],["icon","close-square"],[1,"form-control-error"]],template:function(e,t){1&e&&(I["\u0275\u0275template"](0,Ht,13,3,"form",0),I["\u0275\u0275elementStart"](1,"button",1),I["\u0275\u0275listener"]("click",function(){return t.add()}),I["\u0275\u0275element"](2,"nb-icon",2),I["\u0275\u0275text"](3," Add\n"),I["\u0275\u0275elementEnd"]()),2&e&&(I["\u0275\u0275property"]("ngIf",t.form),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("disabled",t.form.invalid))},directives:[f.O5,v.DPz,v.fMN,F._Y,F.JL,F.sg,f.sg,v.h8i,F.Fj,F.JJ,F.oH,v.jNv],styles:["[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}"]}),t}();function Kt(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275text"](1),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" Update: ",null==n.workSpaceToUpdate?null:n.workSpaceToUpdate.Name," workspace ")}}function Xt(e,t){1&e&&I["\u0275\u0275text"](0,"Add new workspace")}function Qt(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"nb-tabset",7),I["\u0275\u0275elementStart"](1,"nb-tab",8,9),I["\u0275\u0275elementStart"](3,"ngx-workspace-configuration-tab",10),I["\u0275\u0275listener"]("formControlsInitialized",function(e){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"]().childFormControlsInitialized(e,"configuration")}),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](4,"nb-tab",11,12),I["\u0275\u0275elementStart"](6,"ngx-tags-tab",13),I["\u0275\u0275listener"]("formControlsInitialized",function(e){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"]().childFormControlsInitialized(e,"tags")}),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()}if(2&e){var o=t.ngIf,r=I["\u0275\u0275reference"](2),i=I["\u0275\u0275reference"](5),a=I["\u0275\u0275nextContext"]();I["\u0275\u0275property"]("formGroup",a.form),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("badgeDot",!r.active&&(null==a.form.controls||null==a.form.controls.configuration?null:a.form.controls.configuration.invalid)),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("form",a.form.controls.configuration)("avdResourcesData",o[0])("workSpaceToUpdate",a.workSpaceToUpdate)("preselectSubscriptionId",a.preselectSubscriptionId),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("badgeDot",!i.active&&(null==a.form.controls||null==a.form.controls.tags?null:a.form.controls.tags.invalid)),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("form",a.form.controls.tags)("tagsToUpdate",null==a.workSpaceToUpdate?null:a.workSpaceToUpdate.Tags)}}var Yt=function(){var t=function(){function t(e,n,o,r,i){p(this,t),this.dialogService=e,this.dialogRef=n,this.azureVirtualDesktopService=o,this.toastrService=r,this.messageService=i,this.destroyed$=new g.xQ,this.internalLoadedSubscriptionsList=[],this.workSpaceModel=new O.B5,this.form=new F.cw({configuration:new F.cw({}),tags:new F.Oe([])}),this.hasFormChanges=!1,this.isSaving=!1}return m(t,[{key:"ngOnInit",value:function(){this.avdResourcesData$=this.tenantViewSceneId&&!this.workSpaceToUpdate?this.initCreateWorkSpaceMode():this.initUpdateWorkSpacePoolMode(),this.initFormValueChangesHandler()}},{key:"close",value:function(){var e=this;this.hasFormChanges?this.dialogService.open(G.z,{context:{headerTitle:"Warning",bodyText:"You are about to exit without saving your changes. Are you sure you want to leave?",cancelButtonText:"Close without saving",confirmButtonText:"Stay"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1}).onClose.pipe((0,b.R)(this.destroyed$)).subscribe(function(t){!0!==t&&e.dialogRef.close()}):this.dialogRef.close()}},{key:"save",value:function(){var e,t;this.isSaving=!0;var n=this.form.getRawValue(),o=n.configuration,a=n.tags,l=o.subscription.Id,s=this.internalLoadedSubscriptionsList.find(function(e){return l.toLowerCase().includes(e.id.toLowerCase())});this.workSpaceModel=r(r({},this.workSpaceModel),{},{Id:"".concat(l,"/providers/Microsoft.DesktopVirtualization/workspaces/").concat(o.workSpaceName),SubscriptionName:this.subscriptionName?this.subscriptionName:"".concat(null==s?void 0:s.displayName),Name:o.workSpaceName,Location:o.location.Id,LogAnalyticsId:L(o.logAnalyticWorkspace),LogAnalyticsName:null!==(t=null===(e=o.logAnalyticWorkspace)||void 0===e?void 0:e.Name)&&void 0!==t?t:"",Properties:r(r({},this.workSpaceModel.Properties),{},{FriendlyName:o.friendlyName,Description:o.description,ApplicationGroupReferences:[]}),Tags:r(r({},this.workSpaceModel.Tags),a.reduce(function(e,t){return r(i({},t.key,t.value),e)},{}))}),this.handleSaving(this.workSpaceModel)}},{key:"childFormControlsInitialized",value:function(e,t){this.initialFormValues=r(r({},this.initialFormValues),{},i({},t,e))}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"initCreateWorkSpaceMode",value:function(){var t=this;return(0,_.aj)([this.azureVirtualDesktopService.getAvdResourcesForCreation(this.tenantViewSceneId),this.azureVirtualDesktopService.getAvdSubscriptions(this.tenantViewSceneId)]).pipe((0,N.U)(function(n){var o=e(n,2),r=o[0],i=o[1];return t.internalLoadedSubscriptionsList=l(i),[r]}))}},{key:"initUpdateWorkSpacePoolMode",value:function(){var t=this;return(0,_.aj)([this.azureVirtualDesktopService.getAvdResourcesForCreation(this.tenantViewSceneId),this.azureVirtualDesktopService.getAvdResourceFor(this.tenantViewSceneId,this.workSpaceToUpdate.Id),this.azureVirtualDesktopService.getAvdSubscriptions(this.tenantViewSceneId)]).pipe((0,N.U)(function(n){var o=e(n,3),i=o[0],a=o[1],s=o[2];return t.workSpaceToUpdate=r({},a),t.internalLoadedSubscriptionsList=l(s),[i,a]}))}},{key:"handleSaving",value:function(e){var t=this,n=new W.lE(this.workSpaceToUpdate?"Workspace update":"Workspace creation",e.Name);this.messageService.addActionMessages(n),this.toastrService.primary(e.Name,this.workSpaceToUpdate?"Start workspace update":"Start workspace creation"),this.azureVirtualDesktopService.manageAvdResourceEntity(this.tenantViewSceneId,e).pipe((0,b.R)(this.destroyed$)).subscribe({next:function(o){200===o.status&&(t.isSaving=!1,t.dialogRef.close({workspace:e}),t.toastrService.success(t.workSpaceToUpdate?"Workspace updated successfully":"Workspace created successfully","Success"),n.State=W.$W.Completed,n.Result=o.body,t.messageService.addActionMessages(n))},error:function(e){var o=U(e.error);t.isSaving=!1,t.toastrService.danger(o.message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"}),n.State=W.$W.Failed,n.Result=o.message,t.messageService.addActionMessages(n)}})}},{key:"initFormValueChangesHandler",value:function(){var e=this;this.form.valueChanges.pipe((0,b.R)(this.destroyed$)).subscribe(function(t){return e.hasFormChanges=(0,D.xF)(e.initialFormValues,t).hasDifference})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(I["\u0275\u0275directiveInject"](v.Gln),I["\u0275\u0275directiveInject"](v.X4l),I["\u0275\u0275directiveInject"](P),I["\u0275\u0275directiveInject"](v.quB),I["\u0275\u0275directiveInject"](B.e))},t.\u0275cmp=I["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-manage-workspace-dialog"]],inputs:{tenantViewSceneId:"tenantViewSceneId",subscriptionName:"subscriptionName",preselectSubscriptionId:"preselectSubscriptionId",workSpaceToUpdate:"workSpaceToUpdate"},decls:14,vars:11,consts:[[3,"nbSpinner","nbSpinnerMessage"],[4,"ngIf","ngIfElse"],["addWorkspaceTitle",""],[3,"formGroup",4,"ngIf"],[1,"d-flex","justify-content-between"],["nbButton","",3,"click"],["nbButton","",3,"disabled","click"],[3,"formGroup"],["tabTitle","Configuration","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["configurationTab",""],[3,"form","avdResourcesData","workSpaceToUpdate","preselectSubscriptionId","formControlsInitialized"],["tabTitle","Tags","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["tagsTab",""],[3,"form","tagsToUpdate","formControlsInitialized"]],template:function(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-card",0),I["\u0275\u0275pipe"](1,"async"),I["\u0275\u0275elementStart"](2,"nb-card-header"),I["\u0275\u0275template"](3,Kt,2,1,"ng-container",1),I["\u0275\u0275template"](4,Xt,1,0,"ng-template",null,2,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](6,"nb-card-body"),I["\u0275\u0275template"](7,Qt,7,9,"nb-tabset",3),I["\u0275\u0275pipe"](8,"async"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](9,"nb-card-footer",4),I["\u0275\u0275elementStart"](10,"button",5),I["\u0275\u0275listener"]("click",function(){return t.close()}),I["\u0275\u0275text"](11,"Close"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](12,"button",6),I["\u0275\u0275listener"]("click",function(){return t.save()}),I["\u0275\u0275text"](13),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275reference"](5);I["\u0275\u0275propertyInterpolate"]("nbSpinnerMessage",t.isSaving?t.workSpaceToUpdate?"Updating...":"Saving...":"Loading..."),I["\u0275\u0275property"]("nbSpinner",!I["\u0275\u0275pipeBind1"](1,7,t.avdResourcesData$)||t.isSaving),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngIf",t.workSpaceToUpdate)("ngIfElse",n),I["\u0275\u0275advance"](4),I["\u0275\u0275property"]("ngIf",I["\u0275\u0275pipeBind1"](8,9,t.avdResourcesData$)),I["\u0275\u0275advance"](5),I["\u0275\u0275property"]("disabled",t.form.invalid||t.isSaving||!t.hasFormChanges),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",t.workSpaceToUpdate?"Update":"Add"," ")}},directives:[v.Asz,v.Q7R,v.ndF,f.O5,v.yKW,v.XWE,v.DPz,v.kyn,F.JL,F.sg,v.TR4,Bt,Jt],pipes:[f.Ov],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:80em;height:60em}"]}),t}();function Zt(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275text"](1,"Select"),I["\u0275\u0275elementContainerEnd"]())}function en(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275text"](1,"Deselect"),I["\u0275\u0275elementContainerEnd"]())}function tn(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"nb-list-item"),I["\u0275\u0275elementStart"](1,"nb-checkbox",12),I["\u0275\u0275listener"]("checkedChange",function(e){return I["\u0275\u0275restoreView"](n).$implicit.checked=e})("checkedChange",function(e){var t=I["\u0275\u0275restoreView"](n).$implicit;return I["\u0275\u0275nextContext"](2).toggle(t,e)}),I["\u0275\u0275text"](2),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit;I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("checked",o.checked),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate"](o.appGroup.Name)}}function nn(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",7),I["\u0275\u0275text"](2,"Select the application groups you want to link to your workspace"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](3,"nb-checkbox",8),I["\u0275\u0275listener"]("checkedChange",function(e){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"]().selectAll(e)}),I["\u0275\u0275template"](4,Zt,2,0,"ng-container",9),I["\u0275\u0275template"](5,en,2,0,"ng-container",9),I["\u0275\u0275text"](6," all "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](7,"nb-list",10),I["\u0275\u0275template"](8,tn,3,2,"nb-list-item",11),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("checked",o.areAllChecked)("indeterminate",o.isIntermediateState),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",!o.areAllChecked),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",o.areAllChecked),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngForOf",o.selectableAppGroups)("ngForTrackBy",o.trackByIndex)}}function on(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"div",13),I["\u0275\u0275elementStart"](1,"span",14),I["\u0275\u0275text"](2,"No available application groups to link"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]())}var rn=function(){var e=function(){function e(t,n,o,r,i){p(this,e),this.azureVirtualDesktopService=t,this.dialogRef=n,this.dialogService=o,this.toastrService=r,this.messageService=i,this.destroyed$=new g.xQ,this.isSaving=!1,this.areAllChecked=!1,this.isIntermediateState=!1,this.selectableAppGroups=[],this.selectedAppGroupsToLink=[],this.trackByIndex=function(e){return e}}return m(e,[{key:"unlinkedAppGroups",set:function(e){e&&(this.selectableAppGroups=e.map(function(e){return{checked:!1,appGroup:e}}))}},{key:"close",value:function(){this.selectedAppGroupsToLink.length?this.showConfirmationDialog():this.dialogRef.close()}},{key:"selectAll",value:function(e){var t=this;this.selectableAppGroups.forEach(function(n){return t.toggle(n,e)}),this.updateCheckStates()}},{key:"toggle",value:function(e,t){e.checked=t,this.selectedAppGroupsToLink=e.checked?[].concat(l(this.selectedAppGroupsToLink),[e.appGroup]):this.selectedAppGroupsToLink.filter(function(t){return t.Id!==e.appGroup.Id}),this.updateCheckStates()}},{key:"save",value:function(){var e,t=this;this.isSaving=!0;var n=new W.lE("Update links to application groups in workspace",null===(e=this.workspace)||void 0===e?void 0:e.Name);this.messageService.addActionMessages(n),this.toastrService.primary("","Start update links to application groups in workspace"),this.workspace.Properties.ApplicationGroupReferences=[].concat(l(this.workspace.Properties.ApplicationGroupReferences),l(this.selectedAppGroupsToLink.map(function(e){return e.Id}))),this.azureVirtualDesktopService.manageAvdResourceEntity(this.tenantViewSceneId,this.workspace).pipe((0,b.R)(this.destroyed$)).subscribe({next:function(e){200===e.status&&(t.isSaving=!1,t.dialogRef.close({linkedAppGroupsIds:t.workspace.Properties.ApplicationGroupReferences}),t.toastrService.success("Application groups successfully linked to a workspace.","Success"),n.State=W.$W.Completed,n.Result=e.body,t.messageService.addActionMessages(n))},error:function(e){var o=U(e.error);t.isSaving=!1,t.toastrService.danger(o.message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"}),n.State=W.$W.Failed,n.Result=o.message,t.messageService.addActionMessages(n)}})}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"updateCheckStates",value:function(){var e=this.selectableAppGroups.length,t=this.selectableAppGroups.filter(function(e){return e.checked}).length;this.areAllChecked=t===e&&e>0,this.isIntermediateState=t>0&&t<e}},{key:"showConfirmationDialog",value:function(){var e=this;this.dialogService.open(G.z,{context:{headerTitle:"Warning",bodyText:"You are about to exit without saving your changes. Are you sure you want to leave?",cancelButtonText:"Close without saving",confirmButtonText:"Stay"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1}).onClose.pipe((0,b.R)(this.destroyed$)).subscribe(function(t){!0!==t&&e.dialogRef.close()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(I["\u0275\u0275directiveInject"](P),I["\u0275\u0275directiveInject"](v.X4l),I["\u0275\u0275directiveInject"](v.Gln),I["\u0275\u0275directiveInject"](v.quB),I["\u0275\u0275directiveInject"](B.e))},e.\u0275cmp=I["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-link-app-group-to-workspace-dialog"]],inputs:{tenantViewSceneId:"tenantViewSceneId",workspace:"workspace",unlinkedAppGroups:"unlinkedAppGroups"},decls:12,vars:4,consts:[["nbSpinnerMessage","Saving...",3,"nbSpinner"],[1,"d-flex","flex-column","overflow-hidden"],[4,"ngIf","ngIfElse"],["noAvailableAppGroupsToLinkTpl",""],[1,"d-flex","justify-content-between"],["nbButton","",3,"click"],["nbButton","",3,"disabled","click"],[1,"label"],[1,"select-all-checkbox",3,"checked","indeterminate","checkedChange"],[4,"ngIf"],["fullWidth",""],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"checked","checkedChange"],[1,"no-data-container"],[1,"text-muted"]],template:function(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-card",0),I["\u0275\u0275elementStart"](1,"nb-card-header"),I["\u0275\u0275text"](2,"Link app groups to a workspace"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](3,"nb-card-body",1),I["\u0275\u0275template"](4,nn,9,6,"ng-container",2),I["\u0275\u0275template"](5,on,3,0,"ng-template",null,3,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](7,"nb-card-footer",4),I["\u0275\u0275elementStart"](8,"button",5),I["\u0275\u0275listener"]("click",function(){return t.close()}),I["\u0275\u0275text"](9,"Close"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](10,"button",6),I["\u0275\u0275listener"]("click",function(){return t.save()}),I["\u0275\u0275text"](11," Save "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275reference"](6);I["\u0275\u0275property"]("nbSpinner",t.isSaving),I["\u0275\u0275advance"](4),I["\u0275\u0275property"]("ngIf",null==t.selectableAppGroups?null:t.selectableAppGroups.length)("ngIfElse",n),I["\u0275\u0275advance"](6),I["\u0275\u0275property"]("disabled",!(null!=t.selectedAppGroupsToLink&&t.selectedAppGroupsToLink.length)||t.isSaving)}},directives:[v.Asz,v.Q7R,v.ndF,v.yKW,f.O5,v.XWE,v.DPz,v.NTf,v.zP_,f.sg,v.qBV],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:45em;height:45em}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:hidden;display:grid;grid-template-rows:10% 90%;grid-gap:1em;gap:1em}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]   .select-all-checkbox[_ngcontent-%COMP%]{padding-left:1rem}[_nghost-%COMP%]   nb-list[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   nb-list[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]:last-of-type{border-bottom:none}[_nghost-%COMP%]   .no-data-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%}"]}),e}(),an={autoFocus:!0,closeOnEsc:!1,closeOnBackdropClick:!1,hasScroll:!1},ln=function(){var e=function(){function e(t,n,o,i){var a=this;p(this,e),this.azureVirtualDesktopService=t,this.dialogService=n,this.toastrService=o,this.messageService=i,this.destroyed$=new g.xQ,this.CONTEXT_MENU_ID="workspacesContextMenuItems",this.treeViewConfig=[],this.workspacesAddAction=function(){return a.openManageWorkspaceDialog()},this.workspacesSubscriptionAddAction=function(e){return a.openManageWorkspaceDialog(e.subscriptionName,e.subscriptionId)},this.workspaceLinkApplicationGroupAction=function(e){return a.openLinkAppGroupToWorkspaceDialog(e)},this.workspaceEditAction=function(e){return a.openManageWorkspaceDialog(void 0,null,e)},this.workspaceDeleteAction=function(e){return a.showWorkspaceRemoveConfirmationDialog(e)},this.workspaceAppGroupUnlinkAction=function(e){var t=new W.lE("Unlink application group",e.Name),n=a.dialogService.open(G.z,r({context:{headerTitle:"Warning",bodyText:"You are about to unlink ".concat(e.Name," from a workspace. Are you sure you want to proceed?"),cancelButtonText:"Cancel",confirmButtonText:"Yes, unlink it"}},an)).onClose,o=l(a.avdOverviewData.WorkSpaces),i=l(a.avdOverviewData.AppGroups),s=a.avdOverviewData.WorkSpaces.find(function(t){return t.Properties.ApplicationGroupReferences.includes(e.Id)});if(s){var c=a.avdOverviewData.WorkSpaces.map(function(t){return t.Id===s.Id?r(r({},t),{},{Properties:r(r({},t.Properties),{},{ApplicationGroupReferences:t.Properties.ApplicationGroupReferences.filter(function(t){return t!==e.Id})})}):t}),d=a.avdOverviewData.AppGroups.map(function(t){return t.Id===e.Id?r(r({},t),{},{Properties:r(r({},t.Properties),{},{WorkspaceArmPath:null})}):t});n.pipe((0,A.q)(1),(0,T.h)(function(e){return!0===e}),(0,y.b)(function(){a.messageService.addActionMessages(t),a.toastrService.primary(e.Name,"Start unlinking application group"),a.avdOverviewData=r(r({},a.avdOverviewData),{},{WorkSpaces:c,AppGroups:d}),a.buildTreeView(a.avdOverviewData)}),(0,C.w)(function(){var t;return a.azureVirtualDesktopService.manageAvdResourceEntity(null===(t=a.selectedViewScene)||void 0===t?void 0:t.Id,r(r({},s),{},{Properties:r(r({},s.Properties),{},{ApplicationGroupReferences:s.Properties.ApplicationGroupReferences.filter(function(t){return t!==e.Id})})}))}),(0,b.R)(a.destroyed$)).subscribe({next:function(e){a.toastrService.success("Application group unlinked successfully","Success"),t.State=W.$W.Completed,t.Result=e.body,a.messageService.addActionMessages(t)},error:function(e){var n=U(e.error);a.avdOverviewData=r(r({},a.avdOverviewData),{},{WorkSpaces:o,AppGroups:i}),a.buildTreeView(a.avdOverviewData),a.toastrService.danger(n.message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"}),t.State=W.$W.Failed,t.Result=n.message,a.messageService.addActionMessages(t)}})}}}return m(e,[{key:"overview",set:function(e){var t=this;e&&(this.avdOverviewData=e,this.buildTreeView(e),R.buildWorkspaceTreeView$.pipe((0,b.R)(this.destroyed$)).subscribe(function(e){t.avdOverviewData=e,t.buildTreeView(t.avdOverviewData)}))}},{key:"ngOnDestroy",value:function(){}},{key:"buildTreeView",value:function(e){var t,n,o,r=this.treeViewConfig?R.collectExpandedIds(this.treeViewConfig):[],i=e.AppGroups,s=e.WorkSpaces,c=R.workspacesTreeViewConfig({workspacesAddAction:this.workspacesAddAction,workspacesSubscriptionAddAction:this.workspacesSubscriptionAddAction,workspaceLinkApplicationGroupAction:this.workspaceLinkApplicationGroupAction,workspaceEditAction:this.workspaceEditAction,workspaceDeleteAction:this.workspaceDeleteAction,workspaceAppGroupUnlinkAction:this.workspaceAppGroupUnlinkAction},this.CONTEXT_MENU_ID);this.treeViewConfig=(t=i,n=c,o=function(e){return function(e,t){var n,o,r=new Map,i=a(e);try{for(i.s();!(o=i.n()).done;){var s=o.value,c=t(s),d=null!==(n=r.get(c))&&void 0!==n?n:[];r.set(c,[].concat(l(d),[s]))}}catch(p){i.e(p)}finally{i.f()}return Array.from(r.values())}(e.sort(function(e,t){var n=e.SubscriptionName.localeCompare(t.SubscriptionName);return 0!==n?n:e.Name.localeCompare(t.Name)}),function(e){var t=e.Id.split("/"),n="";if(t.length>=3){var o=t.findIndex(function(e){return"subscriptions"===e.toLowerCase()});o>=0&&t.length>o+1&&(n=t[o+1])}return"".concat(n,"|").concat(e.SubscriptionName)})}(s).map(function(e){return function(e,t,n){var o=e.map(function(e){return function(e,t,n){var o=function(e,t,n){return e&&0!==e.length?e.map(function(e){var o=t.find(function(t){return t.Id.toLowerCase()===e.toLowerCase()});return o?n.appGroupNodeBuilder(o.Name,o):null}).filter(Boolean):[]}(e.Properties.ApplicationGroupReferences,t,n);return n.workspaceNodeBuilder(e.Name,o,e)}(e,t,n)}).filter(Boolean);return n.subscriptionNodeBuilder(e[0],o,e)}(e,t,n)}),[n.rootNodeBuilder(o)]),R.setExpandedByIds(this.treeViewConfig,r)}},{key:"openManageWorkspaceDialog",value:function(e,t,n){var o,i=this;this.dialogService.open(Yt,r({dialogClass:"avd-manage-resources-dialog",hasScroll:!1,context:{tenantViewSceneId:null===(o=this.selectedViewScene)||void 0===o?void 0:o.Id,subscriptionName:e,preselectSubscriptionId:t,workSpaceToUpdate:n}},an)).onClose.pipe((0,b.R)(this.destroyed$)).subscribe(function(e){if(e){var t=i.avdOverviewData.WorkSpaces,n=i.avdOverviewData.WorkSpaces.find(function(t){return t.Id===e.workspace.Id});e.workspace.Properties.ApplicationGroupReferences=n?n.Properties.ApplicationGroupReferences:[],i.avdOverviewData=r(r({},i.avdOverviewData),{},{WorkSpaces:[].concat(l(t.filter(function(t){return t.Id!==e.workspace.Id})),[e.workspace])}),i.buildTreeView(i.avdOverviewData)}})}},{key:"showWorkspaceRemoveConfirmationDialog",value:function(e){var t=this,n=new W.lE("Workspace deletion",e.Name),o=this.dialogService.open(G.z,r({context:{headerTitle:"Warning",bodyText:"You are about to remove ".concat(e.Name," workspace. Are you sure you want to proceed?"),cancelButtonText:"Cancel",confirmButtonText:"Yes, remove it"}},an)).onClose,i=l(this.avdOverviewData.WorkSpaces);o.pipe((0,A.q)(1),(0,T.h)(function(e){return!0===e}),(0,y.b)(function(){t.messageService.addActionMessages(n),t.toastrService.primary(e.Name,"Start workspace deletion"),t.avdOverviewData=r(r({},t.avdOverviewData),{},{WorkSpaces:l(t.avdOverviewData.WorkSpaces.filter(function(t){return t.Id!==e.Id}))}),t.buildTreeView(t.avdOverviewData)}),(0,C.w)(function(){var n;return t.azureVirtualDesktopService.deleteAvdResourceEntity(null===(n=t.selectedViewScene)||void 0===n?void 0:n.Id,e.Id)}),(0,b.R)(this.destroyed$)).subscribe({next:function(e){t.toastrService.success("Workspace removed successfully","Success"),n.State=W.$W.Completed,n.Result=e.body,t.messageService.addActionMessages(n)},error:function(e){var o=U(e.error);t.avdOverviewData=r(r({},t.avdOverviewData),{},{WorkSpaces:i}),t.buildTreeView(t.avdOverviewData),t.toastrService.danger(o.message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"}),n.State=W.$W.Failed,n.Result=o.message,t.messageService.addActionMessages(n)}})}},{key:"openLinkAppGroupToWorkspaceDialog",value:function(e){var t,n=this,o=this.avdOverviewData.AppGroups.filter(function(t){return t.Location===(null==e?void 0:e.Location)&&!t.Properties.WorkspaceArmPath});this.dialogService.open(rn,r({context:{tenantViewSceneId:null===(t=this.selectedViewScene)||void 0===t?void 0:t.Id,workspace:e,unlinkedAppGroups:o}},an)).onClose.pipe((0,b.R)(this.destroyed$)).subscribe(function(t){t&&(e.Properties.ApplicationGroupReferences=t.linkedAppGroupsIds,n.avdOverviewData.AppGroups=n.avdOverviewData.AppGroups.map(function(n){return t.linkedAppGroupsIds.includes(n.Id)?r(r({},n),{},{Properties:r(r({},n.Properties),{},{WorkspaceArmPath:e.Id})}):n.Properties.WorkspaceArmPath===e.Id?r(r({},n),{},{Properties:r(r({},n.Properties),{},{WorkspaceArmPath:null})}):n}),n.avdOverviewData=r(r({},n.avdOverviewData),{},{WorkSpaces:[].concat(l(n.avdOverviewData.WorkSpaces.filter(function(t){return t.Id!==e.Id})),[e])}),n.buildTreeView(n.avdOverviewData))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(I["\u0275\u0275directiveInject"](P),I["\u0275\u0275directiveInject"](v.Gln),I["\u0275\u0275directiveInject"](v.quB),I["\u0275\u0275directiveInject"](B.e))},e.\u0275cmp=I["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-workspaces-tree-view"]],inputs:{overview:"overview",selectedViewScene:"selectedViewScene"},decls:3,vars:2,consts:[[3,"items","contextMenuId"]],template:function(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"nb-card"),I["\u0275\u0275elementStart"](1,"nb-card-body"),I["\u0275\u0275element"](2,"ngx-tree-view",0),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e&&(I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("items",t.treeViewConfig)("contextMenuId",t.CONTEXT_MENU_ID))},directives:[v.Asz,v.yKW,kt],styles:[""]}),e}();function sn(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",7),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.DisplayName," ")}}function cn(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-card"),I["\u0275\u0275element"](1,"nb-card-body",8),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("nbSpinner",n.isOverviewLoading)}}function dn(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"div",0),I["\u0275\u0275elementStart"](1,"div",9),I["\u0275\u0275element"](2,"ngx-host-pools-tree-view",10),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](3,"div",9),I["\u0275\u0275element"](4,"ngx-workspaces-tree-view",10),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("nbSpinner",n.isOverviewLoading)("overview",n.overviewData)("selectedViewScene",n.selectedViewScene),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("nbSpinner",n.isOverviewLoading)("overview",n.overviewData)("selectedViewScene",n.selectedViewScene)}}var pn,un=[{path:"**",redirectTo:"host-pools",pathMatch:"full"},{path:"",component:(pn=function(){function e(t,n){var o=this;p(this,e),this.viewSceneService=t,this.azureVirtualDesktopService=n,this.destroyed$=new g.xQ,this.viewScenes$=this.viewSceneService.getViewScenes().pipe((0,y.b)(function(e){return o.selectedViewScene=e[0]})),this.isOverviewLoading=!1,this.viewSceneIndex=function(e){return e}}return m(e,[{key:"ngOnInit",value:function(){this.initOverviewData()}},{key:"viewSceneChanged",value:function(e){this.selectedViewScene=e,this.initOverviewData()}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"initOverviewData",value:function(){var e=this;this.isOverviewLoading=!0,this.viewSceneService.getViewScenes().pipe((0,C.w)(function(t){var n,o;return e.azureVirtualDesktopService.getAvdResourceOverview(null!==(o=null===(n=e.selectedViewScene)||void 0===n?void 0:n.Id)&&void 0!==o?o:t[0].Id)}),(0,b.R)(this.destroyed$)).subscribe({next:function(t){e.overviewData=t,e.isOverviewLoading=!1},error:function(){e.overviewData=E,e.isOverviewLoading=!1}})}}]),e}(),pn.\u0275fac=function(e){return new(e||pn)(I["\u0275\u0275directiveInject"](S.E),I["\u0275\u0275directiveInject"](P))},pn.\u0275cmp=I["\u0275\u0275defineComponent"]({type:pn,selectors:[["ngx-virtual-desktop"]],decls:15,vars:10,consts:[[1,"form-group","row"],["for","tenant",1,"label","col-md-2","col-form-label"],[1,"col-md-10"],["id","tenant","fullWidth","","nbSpinnerMessage","Loading...",1,"form-control",3,"selected","nbSpinner","selectedChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["class","form-group row",4,"ngIf"],[3,"value"],["nbSpinnerMessage","Loading...",3,"nbSpinner"],[1,"col-md-6"],[3,"nbSpinner","overview","selectedViewScene"]],template:function(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"nb-card"),I["\u0275\u0275elementStart"](1,"nb-card-header"),I["\u0275\u0275elementStart"](2,"h1"),I["\u0275\u0275text"](3,"Virtual Desktop Infrastructure"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](4,"nb-card-body"),I["\u0275\u0275elementStart"](5,"div",0),I["\u0275\u0275elementStart"](6,"label",1),I["\u0275\u0275text"](7,"Tenant"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](8,"div",2),I["\u0275\u0275elementStart"](9,"nb-select",3),I["\u0275\u0275listener"]("selectedChange",function(e){return t.selectedViewScene=e})("selectedChange",function(e){return t.viewSceneChanged(e)}),I["\u0275\u0275pipe"](10,"async"),I["\u0275\u0275template"](11,sn,2,2,"nb-option",4),I["\u0275\u0275pipe"](12,"async"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275template"](13,cn,2,1,"nb-card",5),I["\u0275\u0275template"](14,dn,5,6,"div",6),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e&&(I["\u0275\u0275advance"](9),I["\u0275\u0275property"]("selected",t.selectedViewScene)("nbSpinner",!I["\u0275\u0275pipeBind1"](10,6,t.viewScenes$)),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngForOf",I["\u0275\u0275pipeBind1"](12,8,t.viewScenes$))("ngForTrackBy",t.viewSceneIndex),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngIf",!t.overviewData&&t.isOverviewLoading),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",t.overviewData))},directives:[v.Asz,v.ndF,v.yKW,v.rs,v.Q7R,f.sg,f.O5,v.q51,Et,ln],pipes:[f.Ov],styles:["[_nghost-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:0;border:0}[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{margin-bottom:0}"]}),pn)}],mn=function(){var e=function e(){p(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=I["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=I["\u0275\u0275defineInjector"]({imports:[[h.Bz.forChild(un)],h.Bz]}),e}(),fn=function(){var e=function e(){p(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=I["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=I["\u0275\u0275defineInjector"]({imports:[[f.ez,v.KdK,v.T2N,v.HKp]]}),e}();function vn(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",29),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.Name," ")}}function hn(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-select",31),I["\u0275\u0275template"](1,vn,2,2,"nb-option",30),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",null==n.avdResourcesData?null:n.avdResourcesData.Subscriptions)("ngForTrackBy",n.trackByFn)}}function gn(e,t){if(1&e&&I["\u0275\u0275element"](0,"input",32),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275property"]("value",null==n.form.controls||null==n.form.controls.subscription||null==n.form.controls.subscription.value?null:n.form.controls.subscription.value.Name)}}function yn(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",33),I["\u0275\u0275text"](2,"This field is required"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function Cn(e,t){1&e&&I["\u0275\u0275element"](0,"input",34)}function bn(e,t){if(1&e&&I["\u0275\u0275element"](0,"input",35),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275property"]("value",null==n.form.controls||null==n.form.controls.hostPoolName?null:n.form.controls.hostPoolName.value)}}function Sn(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",33),I["\u0275\u0275text"](2,"This field is required"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function wn(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",33),I["\u0275\u0275text"](2),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](2),I["\u0275\u0275textInterpolate2"](" Max name length is ",null==n.form.controls.hostPoolName||null==n.form.controls.hostPoolName.errors?null:n.form.controls.hostPoolName.errors.maxlength.requiredLength," characters. Actual is ",null==n.form.controls.hostPoolName||null==n.form.controls.hostPoolName.errors?null:n.form.controls.hostPoolName.errors.maxlength.actualLength," ")}}function xn(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",29),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.Name," ")}}function In(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-select",36),I["\u0275\u0275template"](1,xn,2,2,"nb-option",30),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",null==n.avdResourcesData?null:n.avdResourcesData.Locations)("ngForTrackBy",n.trackByFn)}}function kn(e,t){if(1&e&&I["\u0275\u0275element"](0,"input",37),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275property"]("value",null==n.form.controls||null==n.form.controls.location||null==n.form.controls.location.value?null:n.form.controls.location.value.Name)}}function Pn(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",33),I["\u0275\u0275text"](2,"This field is required"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function En(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",29),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function An(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"nb-select",38),I["\u0275\u0275listener"]("selectedChange",function(e){return I["\u0275\u0275restoreView"](n),I["\u0275\u0275nextContext"]().hostPoolTypeChanged(e)}),I["\u0275\u0275template"](1,En,2,2,"nb-option",24),I["\u0275\u0275elementEnd"]()}if(2&e){var o=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",o.hostPoolTypes)}}function Tn(e,t){if(1&e&&I["\u0275\u0275element"](0,"input",39),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275property"]("value",null==n.form.controls||null==n.form.controls.hostPoolType||null==n.form.controls.hostPoolType.value?null:n.form.controls.hostPoolType.value.title)}}function Nn(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",33),I["\u0275\u0275text"](2,"This field is required"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function On(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",29),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function Mn(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",33),I["\u0275\u0275text"](2,"This field is required"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function Vn(e,t){1&e&&I["\u0275\u0275elementContainer"](0)}function Rn(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275template"](1,Vn,1,0,"ng-container",46),I["\u0275\u0275elementContainerEnd"]()),2&e){I["\u0275\u0275nextContext"](2);var n=I["\u0275\u0275reference"](65);I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngTemplateOutlet",n)}}function Fn(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",29),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function _n(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",33),I["\u0275\u0275text"](2,"This field is required"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function Dn(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",33),I["\u0275\u0275text"](2),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](2),I["\u0275\u0275textInterpolate2"](" Sessions limit value must be in between ",n.MIN_SESSIONS_LIMIT," and ",n.MAX_SESSIONS_LIMIT,"")}}function Gn(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275template"](1,Rn,2,1,"ng-container",9),I["\u0275\u0275elementStart"](2,"div",1),I["\u0275\u0275elementStart"](3,"div",13),I["\u0275\u0275elementStart"](4,"label",40),I["\u0275\u0275elementStart"](5,"span",4),I["\u0275\u0275text"](6,"*"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](7,"span"),I["\u0275\u0275text"](8,"Load balancing algorithm"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](9,"nb-icon",41),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](10,"div",6),I["\u0275\u0275elementStart"](11,"nb-select",42),I["\u0275\u0275template"](12,Fn,2,2,"nb-option",24),I["\u0275\u0275elementEnd"](),I["\u0275\u0275template"](13,_n,3,0,"ng-container",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](14,"div",1),I["\u0275\u0275elementStart"](15,"div",13),I["\u0275\u0275elementStart"](16,"label",43),I["\u0275\u0275text"](17,"Max sessions limit"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](18,"nb-icon",44),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](19,"div",6),I["\u0275\u0275element"](20,"input",45),I["\u0275\u0275template"](21,Dn,3,2,"ng-container",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",n.hostPoolToUpdate),I["\u0275\u0275advance"](11),I["\u0275\u0275property"]("ngForOf",n.loadBalancingAlgorithmTypes),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",(null==n.form.controls.loadBalancingAlgorithm.errors?null:n.form.controls.loadBalancingAlgorithm.errors.required)&&n.form.controls.loadBalancingAlgorithm.touched),I["\u0275\u0275advance"](7),I["\u0275\u0275property"]("min",n.MIN_SESSIONS_LIMIT)("max",n.MAX_SESSIONS_LIMIT),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",(null==n.form.controls.maxSessionsLimit||null==n.form.controls.maxSessionsLimit.errors?null:n.form.controls.maxSessionsLimit.errors.required)||(null==n.form.controls.maxSessionsLimit||null==n.form.controls.maxSessionsLimit.errors?null:n.form.controls.maxSessionsLimit.errors.min)||(null==n.form.controls.maxSessionsLimit||null==n.form.controls.maxSessionsLimit.errors?null:n.form.controls.maxSessionsLimit.errors.max)&&n.form.controls.maxSessionsLimit.touched)}}function Un(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",29),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function Ln(e,t){1&e&&I["\u0275\u0275elementContainer"](0)}function zn(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275template"](1,Ln,1,0,"ng-container",46),I["\u0275\u0275elementContainerEnd"]()),2&e){I["\u0275\u0275nextContext"](2);var n=I["\u0275\u0275reference"](65);I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngTemplateOutlet",n)}}function Wn(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"div",1),I["\u0275\u0275elementStart"](2,"div",13),I["\u0275\u0275elementStart"](3,"label",47),I["\u0275\u0275text"](4,"Assignment type"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](5,"nb-icon",48),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](6,"div",6),I["\u0275\u0275elementStart"](7,"nb-select",49),I["\u0275\u0275template"](8,Un,2,2,"nb-option",24),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275template"](9,zn,2,1,"ng-container",9),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](8),I["\u0275\u0275property"]("ngForOf",n.assignmentTypes),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",n.hostPoolToUpdate)}}function Bn(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-radio",29),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n.value),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function $n(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-radio",29),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n.value),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function jn(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",33),I["\u0275\u0275text"](2),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](2),I["\u0275\u0275textInterpolate2"](" Max name length is ",null==n.form.controls.friendlyName.errors?null:n.form.controls.friendlyName.errors.maxlength.requiredLength," characters. Actual is ",null==n.form.controls.friendlyName.errors?null:n.form.controls.friendlyName.errors.maxlength.actualLength," ")}}function qn(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",33),I["\u0275\u0275text"](2),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](2),I["\u0275\u0275textInterpolate2"](" Max description length is ",null==n.form.controls.description||null==n.form.controls.description.errors?null:n.form.controls.description.errors.maxlength.requiredLength," characters. Actual is ",null==n.form.controls.description||null==n.form.controls.description.errors?null:n.form.controls.description.errors.maxlength.actualLength," ")}}function Hn(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"div",1),I["\u0275\u0275elementStart"](1,"div",13),I["\u0275\u0275elementStart"](2,"label",50),I["\u0275\u0275text"](3,"Start VM on connect"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](4,"nb-icon",51),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](5,"div",6),I["\u0275\u0275elementStart"](6,"nb-radio-group",52),I["\u0275\u0275template"](7,Bn,2,2,"nb-radio",24),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](8,"div",1),I["\u0275\u0275elementStart"](9,"div",13),I["\u0275\u0275elementStart"](10,"label",53),I["\u0275\u0275text"](11," Validation environment "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](12,"nb-icon",54),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](13,"div",6),I["\u0275\u0275elementStart"](14,"nb-radio-group",55),I["\u0275\u0275template"](15,$n,2,2,"nb-radio",24),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](16,"div",1),I["\u0275\u0275elementStart"](17,"label",56),I["\u0275\u0275text"](18,"Friendly name"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](19,"div",6),I["\u0275\u0275element"](20,"input",57),I["\u0275\u0275template"](21,jn,3,2,"ng-container",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](22,"div",1),I["\u0275\u0275elementStart"](23,"label",58),I["\u0275\u0275text"](24,"Description"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](25,"div",6),I["\u0275\u0275element"](26,"textarea",59),I["\u0275\u0275template"](27,qn,3,2,"ng-container",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](7),I["\u0275\u0275property"]("ngForOf",n.startVmOnConnectTypes),I["\u0275\u0275advance"](8),I["\u0275\u0275property"]("ngForOf",n.validationEnvironmentTypes),I["\u0275\u0275advance"](6),I["\u0275\u0275property"]("ngIf",null==n.form.controls.friendlyName.errors?null:n.form.controls.friendlyName.errors.maxlength),I["\u0275\u0275advance"](6),I["\u0275\u0275property"]("ngIf",(null==n.form.controls.description||null==n.form.controls.description.errors?null:n.form.controls.description.errors.maxlength)&&n.form.controls.description.touched)}}function Jn(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",29),I["\u0275\u0275text"](1,"Unchanged"),I["\u0275\u0275elementEnd"]()),2&e&&I["\u0275\u0275property"]("value","null")}function Kn(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",29),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.Name," ")}}var Xn=function(){var e=function(){function e(){p(this,e),this.formControlsInitialized=new I.EventEmitter,this.HostPoolTypeClass=O.Bs,this.MAX_SESSIONS_LIMIT=999999,this.MIN_SESSIONS_LIMIT=1,this.preferredAppGroups=[{title:"Desktop",value:O.s2.Desktop},{title:"Remote Apps",value:O.s2.RailApplications}],this.hostPoolTypes=[{title:"Personal",value:O.Bs.Personal},{title:"Pooled",value:O.Bs.Pooled}],this.startVmOnConnectTypes=[{title:"No",value:!1},{title:"Yes",value:!0}],this.validationEnvironmentTypes=[{title:"No",value:!1},{title:"Yes",value:!0}],this.loadBalancingAlgorithmTypes=[{title:"Breadth-first",value:O.rQ.BreadthFirst},{title:"Depth-first",value:O.rQ.DepthFirst}],this.assignmentTypes=[{title:"Automatic",value:O.s0.Automatic},{title:"Direct",value:O.s0.Direct}],this.trackByFn=function(e){return e}}return m(e,[{key:"ngOnInit",value:function(){this.addControls(),this.hostPoolToUpdate&&this.hostPoolToUpdate.Properties.PreferredAppGroupType===O.s2.None&&(this.preferredAppGroups=[{title:"None",value:O.s2.None}].concat(l(this.preferredAppGroups)))}},{key:"hostPoolTypeChanged",value:function(e){var t;this.selectedHostPoolType=e,(null===(t=this.selectedHostPoolType)||void 0===t?void 0:t.value)===O.Bs.Pooled?this.form.addControl("loadBalancingAlgorithm",new F.NI(null,[F.kI.required]),{emitEvent:!1}):this.form.removeControl("loadBalancingAlgorithm",{emitEvent:!1})}},{key:"getFormSubscriptionItem",value:function(){var e,t,n=this;if(this.preselectSubscriptionId){var o=re(this.preselectSubscriptionId);if(o)return null===(e=this.avdResourcesData)||void 0===e?void 0:e.Subscriptions.find(function(e){var t=re(e.Id);return(null==t?void 0:t.toLowerCase())===o.toLowerCase()})}if(this.hostPoolToUpdate)return null===(t=this.avdResourcesData)||void 0===t?void 0:t.Subscriptions.find(function(e){return n.hostPoolToUpdate.Id.toLowerCase().includes(e.Id.toLowerCase())})}},{key:"getFormLocationItem",value:function(){var e,t=this;return null===(e=this.avdResourcesData)||void 0===e?void 0:e.Locations.find(function(e){return e.Id===t.hostPoolToUpdate.Location})}},{key:"getFormPreferredAppGroupItem",value:function(){var e=this;return this.preferredAppGroups.find(function(t){var n;return t.value===(null===(n=e.hostPoolToUpdate.Properties)||void 0===n?void 0:n.PreferredAppGroupType)})}},{key:"getFormLogAnalyticWorkspaceItem",value:function(){var e,t,n=this;return this.hostPoolToUpdate.LogAnalyticsId&&""!==this.hostPoolToUpdate.LogAnalyticsId?null!==(t=null===(e=this.avdResourcesData)||void 0===e?void 0:e.LogAnalyticsWorkspaces.find(function(e){return e.Id===n.hostPoolToUpdate.LogAnalyticsId}))&&void 0!==t?t:"null":""===this.hostPoolToUpdate.LogAnalyticsId?"":null===this.hostPoolToUpdate.LogAnalyticsId?"null":void 0}},{key:"getFormLoadBalancingAlgorithmItem",value:function(){var e=this;return this.loadBalancingAlgorithmTypes.find(function(t){return t.value===e.hostPoolToUpdate.Properties.LoadBalancerType})}},{key:"getFormAssignmentTypeItem",value:function(){var e=this;return this.assignmentTypes.find(function(t){return t.value===e.hostPoolToUpdate.Properties.PersonalDesktopAssignmentType})}},{key:"addControls",value:function(){var e,t,n,o,r,i,a,l,s,c,d,p,u,m,f=this;this.form.addControl("subscription",new F.NI(null!==(e=this.getFormSubscriptionItem())&&void 0!==e?e:null,[F.kI.required]),{emitEvent:!1}),this.form.addControl("hostPoolName",new F.NI(this.hostPoolToUpdate?this.hostPoolToUpdate.Name:"",[F.kI.required,F.kI.maxLength(64)]),{emitEvent:!1}),this.form.addControl("location",new F.NI(this.hostPoolToUpdate?this.getFormLocationItem():null,[F.kI.required]),{emitEvent:!1}),this.selectedHostPoolType=this.hostPoolTypes.find(function(e){var t,n;return e.value===(null===(n=null===(t=f.hostPoolToUpdate)||void 0===t?void 0:t.Properties)||void 0===n?void 0:n.HostPoolType)}),this.form.addControl("hostPoolType",new F.NI(null!==(t=this.selectedHostPoolType)&&void 0!==t?t:null,[F.kI.required]),{emitEvent:!1}),this.form.addControl("preferredAppGroup",new F.NI(this.hostPoolToUpdate?this.getFormPreferredAppGroupItem():null,[F.kI.required]),{emitEvent:!1}),this.form.addControl("logAnalyticWorkspace",new F.NI(this.hostPoolToUpdate?this.getFormLogAnalyticWorkspaceItem():null),{emitEvent:!1}),this.form.addControl("startVMOnConnect",new F.NI(null!==(r=null===(o=null===(n=this.hostPoolToUpdate)||void 0===n?void 0:n.Properties)||void 0===o?void 0:o.StartVmOnConnect)&&void 0!==r&&r),{emitEvent:!1}),this.form.addControl("validationEnvironment",new F.NI(null!==(l=null===(a=null===(i=this.hostPoolToUpdate)||void 0===i?void 0:i.Properties)||void 0===a?void 0:a.ValidationEnvironment)&&void 0!==l&&l),{emitEvent:!1}),this.form.addControl("friendlyName",new F.NI(null!==(d=null===(c=null===(s=this.hostPoolToUpdate)||void 0===s?void 0:s.Properties)||void 0===c?void 0:c.FriendlyName)&&void 0!==d?d:"",[F.kI.maxLength(64)]),{emitEvent:!1}),this.form.addControl("description",new F.NI(null!==(m=null===(u=null===(p=this.hostPoolToUpdate)||void 0===p?void 0:p.Properties)||void 0===u?void 0:u.Description)&&void 0!==m?m:"",[F.kI.maxLength(512)]),{emitEvent:!1}),this.form.addControl("maxSessionsLimit",new F.NI(this.hostPoolToUpdate?this.hostPoolToUpdate.Properties.MaxSessionLimit:1,[F.kI.required,F.kI.min(1),F.kI.max(999999)]),{emitEvent:!1}),this.form.addControl("assignmentType",new F.NI(this.hostPoolToUpdate?this.getFormAssignmentTypeItem():null),{emitEvent:!1}),this.hostPoolToUpdate&&this.hostPoolToUpdate.Properties.HostPoolType===O.Bs.Pooled&&this.form.addControl("loadBalancingAlgorithm",new F.NI(this.hostPoolToUpdate?this.getFormLoadBalancingAlgorithmItem():null,[F.kI.required]),{emitEvent:!1}),this.formControlsInitialized.emit(this.form.getRawValue())}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=I["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-configuration-tab"]],inputs:{form:"form",avdResourcesData:"avdResourcesData",hostPoolToUpdate:"hostPoolToUpdate",preselectSubscriptionId:"preselectSubscriptionId"},outputs:{formControlsInitialized:"formControlsInitialized"},decls:75,vars:22,consts:[[3,"formGroup"],[1,"form-group","row"],[1,"col-md-3","d-flex","justify-content-between","align-items-center"],["for","subscription",1,"label"],[1,"asterisk"],["icon","info-outline","nbTooltip","All charges for resources in an Azure subscription are billed as one."],[1,"col-md-9"],["id","subscription","fullWidth","","formControlName","subscription",4,"ngIf","ngIfElse"],["readOnlySubscription",""],[4,"ngIf"],["for","name",1,"label","col-md-3","d-flex","align-items-center"],["id","name","type","text","nbInput","","fullWidth","","formControlName","hostPoolName",4,"ngIf","ngIfElse"],["readOnlyHostPoolName",""],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],["for","location",1,"label"],["icon","info-outline","nbTooltip","Choose the region to create the Azure Virtual Desktop object. Its metadata is saved in the geography linked to that region."],["id","location","fullWidth","","formControlName","location",4,"ngIf","ngIfElse"],["readOnlyLocation",""],["for","host_pool_type",1,"label","col-md-3","d-flex","align-items-center"],["id","host_pool_type","fullWidth","","formControlName","hostPoolType",3,"selectedChange",4,"ngIf","ngIfElse"],["readOnlyHostPoolType",""],["for","app_group_type",1,"label"],["icon","info-outline","nbTooltip","\n          Set the preferred app group type for this host pool.\n          If an end user has both RemoteApp and Desktop apps published to them on this host pool they\n          will only see the selected app type in their feed.\n        "],["id","app_group_type","fullWidth","","formControlName","preferredAppGroup"],[3,"value",4,"ngFor","ngForOf"],["hostPoolExtendedOptions",""],["for","log_analytic_workspace",1,"label","col-md-3","d-flex","align-items-center"],["id","log_analytic_workspace","fullWidth","","formControlName","logAnalyticWorkspace"],[3,"value",4,"ngIf"],[3,"value"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["id","subscription","fullWidth","","formControlName","subscription"],["id","subscription","type","text","nbInput","","fullWidth","","disabled","",3,"value"],[1,"form-control-error"],["id","name","type","text","nbInput","","fullWidth","","formControlName","hostPoolName"],["id","name","type","text","nbInput","","fullWidth","","disabled","",3,"value"],["id","location","fullWidth","","formControlName","location"],["id","location","type","text","nbInput","","fullWidth","","disabled","",3,"value"],["id","host_pool_type","fullWidth","","formControlName","hostPoolType",3,"selectedChange"],["id","host_pool_type","type","text","nbInput","","fullWidth","","disabled","",3,"value"],["for","load_balancing_alg",1,"label"],["icon","info-outline","nbTooltip","\n            Breadth-first load balancing distributes new user sessions across all available session hosts in the host pool.\n            Depth-first load balancing distributes new user sessions to an available session host with the\n            highest number of connections but has not reached its maximum session limit threshold.\n          "],["id","load_balancing_alg","fullWidth","","formControlName","loadBalancingAlgorithm"],["for","max_sessions-limit",1,"label"],["icon","info-outline","nbTooltip","\n            The maximum number of users that have concurrent sessions on a session host.\n            When setting a host pool to have depth first load balancing or planning to use Autoscaling,\n            you must set an appropriate max session limit according to the configuration of your deployment and capacity\n            of your VMs. Changing the max session limit will not affect existing user sessions.\n          "],["type","number","nbInput","","fullWidth","","formControlName","maxSessionsLimit",3,"min","max"],[4,"ngTemplateOutlet"],["for","assignment_type",1,"label"],["icon","info-outline","nbTooltip","\n            Automatic assignment \u2013 The service will select an available host and assign it to an user\n            Direct assignment \u2013 Admin selects a specific host to assign to an user\n          "],["id","assignment_type","fullWidth","","formControlName","assignmentType"],["for","start_vm_on_connect",1,"label"],["icon","info-outline","nbTooltip","\n            Enable Start VM on connect to allow users to start the virtual machine from a deallocated state.\n            Important: Custom RBAC role required to power manage VMs.\n          "],["id","start_vm_on_connect","name","start_vm_on_connect","formControlName","startVMOnConnect",1,"d-flex"],["for","validation_environment",1,"label"],["icon","info-outline","nbTooltip","Validation host pool allows you to test service changes before they are deployed to production."],["id","validation_environment","name","validation_environment","formControlName","validationEnvironment",1,"d-flex"],["for","friendly_name",1,"label","col-md-3"],["id","friendly_name","type","text","nbInput","","fullWidth","","formControlName","friendlyName"],["for","description",1,"label","col-md-3"],["id","description","nbInput","","fullWidth","","formControlName","description"]],template:function(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0,0),I["\u0275\u0275elementStart"](1,"div",1),I["\u0275\u0275elementStart"](2,"div",2),I["\u0275\u0275elementStart"](3,"label",3),I["\u0275\u0275elementStart"](4,"span",4),I["\u0275\u0275text"](5,"*"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](6,"span"),I["\u0275\u0275text"](7,"Subscription / Resource Group"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](8,"nb-icon",5),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](9,"div",6),I["\u0275\u0275template"](10,hn,2,2,"nb-select",7),I["\u0275\u0275template"](11,gn,1,1,"ng-template",null,8,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275template"](13,yn,3,0,"ng-container",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](14,"div",1),I["\u0275\u0275elementStart"](15,"label",10),I["\u0275\u0275elementStart"](16,"span",4),I["\u0275\u0275text"](17,"*"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](18,"span"),I["\u0275\u0275text"](19,"Host pool name"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](20,"div",6),I["\u0275\u0275template"](21,Cn,1,0,"input",11),I["\u0275\u0275template"](22,bn,1,1,"ng-template",null,12,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275template"](24,Sn,3,0,"ng-container",9),I["\u0275\u0275template"](25,wn,3,2,"ng-container",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](26,"div",1),I["\u0275\u0275elementStart"](27,"div",13),I["\u0275\u0275elementStart"](28,"label",14),I["\u0275\u0275elementStart"](29,"span",4),I["\u0275\u0275text"](30,"*"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](31,"span"),I["\u0275\u0275text"](32,"Location"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](33,"nb-icon",15),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](34,"div",6),I["\u0275\u0275template"](35,In,2,2,"nb-select",16),I["\u0275\u0275template"](36,kn,1,1,"ng-template",null,17,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275template"](38,Pn,3,0,"ng-container",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](39,"div",1),I["\u0275\u0275elementStart"](40,"label",18),I["\u0275\u0275elementStart"](41,"span",4),I["\u0275\u0275text"](42,"*"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](43,"span"),I["\u0275\u0275text"](44,"Host pool type"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](45,"div",6),I["\u0275\u0275template"](46,An,2,1,"nb-select",19),I["\u0275\u0275template"](47,Tn,1,1,"ng-template",null,20,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275template"](49,Nn,3,0,"ng-container",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](50,"div",1),I["\u0275\u0275elementStart"](51,"div",13),I["\u0275\u0275elementStart"](52,"label",21),I["\u0275\u0275elementStart"](53,"span",4),I["\u0275\u0275text"](54,"*"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](55,"span"),I["\u0275\u0275text"](56,"Preferred app-group type"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](57,"nb-icon",22),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](58,"div",6),I["\u0275\u0275elementStart"](59,"nb-select",23),I["\u0275\u0275template"](60,On,2,2,"nb-option",24),I["\u0275\u0275elementEnd"](),I["\u0275\u0275template"](61,Mn,3,0,"ng-container",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275template"](62,Gn,22,6,"ng-container",9),I["\u0275\u0275template"](63,Wn,10,2,"ng-container",9),I["\u0275\u0275template"](64,Hn,28,4,"ng-template",null,25,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275elementStart"](66,"div",1),I["\u0275\u0275elementStart"](67,"label",26),I["\u0275\u0275text"](68," Enable diagnostic logging "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](69,"div",6),I["\u0275\u0275elementStart"](70,"nb-select",27),I["\u0275\u0275template"](71,Jn,2,1,"nb-option",28),I["\u0275\u0275elementStart"](72,"nb-option",29),I["\u0275\u0275text"](73,"No logging"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275template"](74,Kn,2,2,"nb-option",30),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275reference"](12),o=I["\u0275\u0275reference"](23),r=I["\u0275\u0275reference"](37),i=I["\u0275\u0275reference"](48);I["\u0275\u0275property"]("formGroup",t.form),I["\u0275\u0275advance"](10),I["\u0275\u0275property"]("ngIf",!t.hostPoolToUpdate)("ngIfElse",n),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngIf",(null==t.form.controls.subscription.errors?null:t.form.controls.subscription.errors.required)&&t.form.controls.subscription.touched),I["\u0275\u0275advance"](8),I["\u0275\u0275property"]("ngIf",!t.hostPoolToUpdate)("ngIfElse",o),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngIf",(null==t.form.controls.hostPoolName.errors?null:t.form.controls.hostPoolName.errors.required)&&t.form.controls.hostPoolName.touched),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",null==t.form.controls.hostPoolName.errors?null:t.form.controls.hostPoolName.errors.maxlength),I["\u0275\u0275advance"](10),I["\u0275\u0275property"]("ngIf",!t.hostPoolToUpdate)("ngIfElse",r),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngIf",(null==t.form.controls.location.errors?null:t.form.controls.location.errors.required)&&t.form.controls.location.touched),I["\u0275\u0275advance"](8),I["\u0275\u0275property"]("ngIf",!t.hostPoolToUpdate)("ngIfElse",i),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngIf",(null==t.form.controls.hostPoolType.errors?null:t.form.controls.hostPoolType.errors.required)&&t.form.controls.hostPoolType.touched),I["\u0275\u0275advance"](11),I["\u0275\u0275property"]("ngForOf",t.preferredAppGroups),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",(null==t.form.controls.preferredAppGroup.errors?null:t.form.controls.preferredAppGroup.errors.required)&&t.form.controls.preferredAppGroup.touched),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",(null==t.selectedHostPoolType?null:t.selectedHostPoolType.value)===t.HostPoolTypeClass.Pooled),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",(null==t.selectedHostPoolType?null:t.selectedHostPoolType.value)===t.HostPoolTypeClass.Personal),I["\u0275\u0275advance"](8),I["\u0275\u0275property"]("ngIf",t.hostPoolToUpdate),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("value",""),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngForOf",null==t.avdResourcesData?null:t.avdResourcesData.LogAnalyticsWorkspaces)("ngForTrackBy",t.trackByFn)}},directives:[F.JL,F.sg,v.fMN,v.jNv,f.O5,v.rs,F.JJ,F.u,f.sg,v.q51,v.h8i,F.Fj,F.wV,F.qQ,F.Fd,f.tP,v.MFI,v.r3g],styles:["[_nghost-%COMP%]   .asterisk[_ngcontent-%COMP%]{color:var(--danger);margin-right:.5em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}"]}),e}(),Qn=function(){var e=function e(){p(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=I["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=I["\u0275\u0275defineInjector"]({imports:[[f.ez,v.zyh,v.T2N,v.KdK]]}),e}();function Yn(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",16),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate"](n.title)}}function Zn(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",16),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate"](n.title)}}function eo(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",16),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate"](n.title)}}function to(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",16),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate"](n.title)}}var no=function(){var e=function(){function e(){p(this,e),this.formControlsInitialized=new I.EventEmitter,this.rdpNetworkUdpTypes=[{title:"Default",value:O.Op.Default},{title:"Enabled",value:O.Op.Enabled},{title:"Disabled",value:O.Op.Disabled}]}return m(e,[{key:"ngOnInit",value:function(){this.addControls()}},{key:"getManagedPrivateUpdItem",value:function(){var e=this;return this.rdpNetworkUdpTypes.find(function(t){return t.value===e.hostPoolToUpdate.Properties.ManagedPrivateUdp})}},{key:"getDirectUpdItem",value:function(){var e=this;return this.rdpNetworkUdpTypes.find(function(t){return t.value===e.hostPoolToUpdate.Properties.DirectUdp})}},{key:"getPublicUpdItem",value:function(){var e=this;return this.rdpNetworkUdpTypes.find(function(t){return t.value===e.hostPoolToUpdate.Properties.PublicUdp})}},{key:"getRelayUpdItem",value:function(){var e=this;return this.rdpNetworkUdpTypes.find(function(t){return t.value===e.hostPoolToUpdate.Properties.RelayUdp})}},{key:"addControls",value:function(){this.form.addControl("managedPrivateUdp",new F.NI(this.hostPoolToUpdate?this.getManagedPrivateUpdItem():this.rdpNetworkUdpTypes[0]),{emitEvent:!1}),this.form.addControl("directUdp",new F.NI(this.hostPoolToUpdate?this.getDirectUpdItem():this.rdpNetworkUdpTypes[0]),{emitEvent:!1}),this.form.addControl("publicUdp",new F.NI(this.hostPoolToUpdate?this.getPublicUpdItem():this.rdpNetworkUdpTypes[0]),{emitEvent:!1}),this.form.addControl("relayUdp",new F.NI(this.hostPoolToUpdate?this.getRelayUpdItem():this.rdpNetworkUdpTypes[0]),{emitEvent:!1}),this.formControlsInitialized.emit(this.form.getRawValue())}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=I["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-rdp-short-path-tab"]],inputs:{form:"form",hostPoolToUpdate:"hostPoolToUpdate"},outputs:{formControlsInitialized:"formControlsInitialized"},decls:33,vars:5,consts:[[3,"formGroup"],[1,"form-group","row"],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],["for","managed_private_udp",1,"label"],["icon","info-outline","nbTooltip","\n          Establishes direct UDP connectivity between the client and\n          session host when connected through a private network, such as a VPN.\n        "],[1,"col-md-9"],["id","managed_private_udp","fullWidth","","formControlName","managedPrivateUdp"],[3,"value",4,"ngFor","ngForOf"],["for","direct_udp",1,"label"],["id","direct_udp","fullWidth","","formControlName","directUdp"],["for","public_udp",1,"label"],["icon","info-outline","nbTooltip","\n        Sets up direct UDP connectivity between the client and\n        session host over a public network using the STUN protocol.\n        "],["id","public_udp","fullWidth","","formControlName","publicUdp"],["for","relay_udp",1,"label"],["icon","info-outline","nbTooltip","\n          Uses indirect UDP connectivity between the client and\n          session host over a public network through the TURN protocol.\n        "],["id","relay_udp","fullWidth","","formControlName","relayUdp"],[3,"value"]],template:function(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0,0),I["\u0275\u0275elementStart"](1,"div",1),I["\u0275\u0275elementStart"](2,"div",2),I["\u0275\u0275elementStart"](3,"label",3),I["\u0275\u0275text"](4,"Managed networks"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](5,"nb-icon",4),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](6,"div",5),I["\u0275\u0275elementStart"](7,"nb-select",6),I["\u0275\u0275template"](8,Yn,2,2,"nb-option",7),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](9,"div",1),I["\u0275\u0275elementStart"](10,"div",2),I["\u0275\u0275elementStart"](11,"label",8),I["\u0275\u0275text"](12,"Managed networks (STUN)"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](13,"nb-icon",4),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](14,"div",5),I["\u0275\u0275elementStart"](15,"nb-select",9),I["\u0275\u0275template"](16,Zn,2,2,"nb-option",7),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](17,"div",1),I["\u0275\u0275elementStart"](18,"div",2),I["\u0275\u0275elementStart"](19,"label",10),I["\u0275\u0275text"](20,"Public networks (via STUN)"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](21,"nb-icon",11),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](22,"div",5),I["\u0275\u0275elementStart"](23,"nb-select",12),I["\u0275\u0275template"](24,eo,2,2,"nb-option",7),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](25,"div",1),I["\u0275\u0275elementStart"](26,"div",2),I["\u0275\u0275elementStart"](27,"label",13),I["\u0275\u0275text"](28,"Public networks (via TURN/Relay)"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](29,"nb-icon",14),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](30,"div",5),I["\u0275\u0275elementStart"](31,"nb-select",15),I["\u0275\u0275template"](32,to,2,2,"nb-option",7),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e&&(I["\u0275\u0275property"]("formGroup",t.form),I["\u0275\u0275advance"](8),I["\u0275\u0275property"]("ngForOf",t.rdpNetworkUdpTypes),I["\u0275\u0275advance"](8),I["\u0275\u0275property"]("ngForOf",t.rdpNetworkUdpTypes),I["\u0275\u0275advance"](8),I["\u0275\u0275property"]("ngForOf",t.rdpNetworkUdpTypes),I["\u0275\u0275advance"](8),I["\u0275\u0275property"]("ngForOf",t.rdpNetworkUdpTypes))},directives:[F.JL,F.sg,v.fMN,v.jNv,v.rs,F.JJ,F.u,f.sg,v.q51],styles:["[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),e}();function oo(e){if(!e)return[];for(var t=[],n="",o=!1,r=0;r<e.length;r++){var i=e[r];o?(n+=i,o=!1):"\\"===i?(o=!0,n+=i):";"!==i||o?n+=i:(n.trim()&&t.push(n.trim()),n="")}return n.trim()&&t.push(n.trim()),t}function ro(e){var t=new Map;return e?(oo(e).map(function(e){return e.trim()}).filter(Boolean).forEach(function(e){var n=e.split(":");if(!(n.length<3)){var o=n[0],r=n[1],i=n.slice(2).join(":");t.set(o,{type:r,value:i})}}),t):t}function io(t,n){var o=r(r({},ao(t)),ao(n));return Object.entries(o).map(function(t){var n=e(t,2),o=n[0],r=n[1];return"".concat(o,":").concat(r)}).join(";")}function ao(e){return oo(e).filter(Boolean).reduce(function(e,o){var r,i=o.split(":"),a=n(r=i)||c(r)||s(r)||t(),l=a[0],d=a.slice(1).join(":");return e[l.trim()]=d.trim(),e},{})}function lo(e){if(!e)return e;var t=new Set([":",";","\\"]),n=e.replace(/\\(.)/g,function(e,n){return t.has(n)?"\\".concat(n):"\\\\".concat(n)});return n.endsWith("\\")&&(n=n.slice(0,-1)),n}function so(e){return e.replace(/\\/g,"\\\\")}function co(e){var t,n=null===(t=e.value)||void 0===t?void 0:t.toString();return n?n.endsWith("\\")?{endsWithBackslash:!0}:/^(?:[^\\:;]|\\[\\:;])+$/.test(n)?null:{invalidPattern:!0}:null}var po=(function(e){e.NotSet="notset",e.NotConfigured="notconfigured",e.EmptyValue="",e.AllValues="*",e.DynamicDrives="dynamicdrives"}(po||(po={})),po),uo={title:"Not configured",value:po.NotSet},mo="drivestoredirect:s:;usbdevicestoredirect:s:;redirectclipboard:i:0;redirectprinters:i:0;audiomode:i:0;videoplaybackmode:i:1;devicestoredirect:s:*;redirectcomports:i:1;redirectsmartcards:i:1;enablecredsspsupport:i:1;redirectwebauthn:i:1;use multimon:i:1",fo=[{key:"enablerdsaadauth",type:"i",label:"Microsoft Entra single sign-on",uiType:"select",formControlName:"microsoft_entra_single_sign_on",tooltip:"\n      Specifies whether the connection uses Microsoft Entra authentication to sign in to Entra-joined session hosts and enable SSO.\n      For Hybrid Entra-joined hosts, a Kerberos Server object is required.\n    ",options:[uo,{title:"Connections will not use Microsoft Entra single sign-on",value:0},{title:"Connections will use Microsoft Entra authentication to provide single sign-on",value:1}]},{key:"enablecredsspsupport",type:"i",label:"Credential Security Support Provider",uiType:"select",formControlName:"credential_security_support_provider",tooltip:"Specifies whether Remote Desktop uses CredSSP for authentication when available.",options:[uo,{title:"RDP will not use CredSSP, even if the operating system supports CredSSP",value:0},{title:"RDP will use CredSSP if the operating system supports CredSSP (default)",value:1}]},{key:"alternate shell",type:"s",label:"Alternate shell",uiType:"text",tooltip:"\n      Starts a specified program automatically when you connect to a remote computer, using a valid executable path.\n      This option applies only to server connections.\n    ",formControlName:"alternate_shell",validators:[co],placeholder:"C\\:\\\\ProgramFiles\\\\Office\\\\word.exe"},{key:"kdcproxyname",type:"s",label:"KDC proxy name",uiType:"text",formControlName:"kdc_proxy_name",tooltip:"Enter the FQDN of the KDC Proxy to use.",placeholder:"kdc.contoso.com"}],vo=[{key:"autoreconnection enabled",type:"i",label:"Reconnection",uiType:"select",formControlName:"reconnection",tooltip:"\n      Specifies if the client computer automatically attempts to reconnect to the remote computer after a dropped connection.\n    ",options:[uo,{title:"Client does not automatically try to reconnect",value:0},{title:"Client automatically tries to reconnect",value:1}]},{key:"bandwidthautodetect",type:"i",label:"Bandwidth auto detect",uiType:"select",formControlName:"bandwidth_auto_detect",tooltip:"\n      Specifies whether automatic network bandwidth detection is used.\n      This requires the bandwidth autodetect option and applies to connection type 7.\n    ",options:[uo,{title:"Don't use automatic network bandwidth detection",value:0},{title:"Use automatic network bandwidth",value:1}]},{key:"networkautodetect",type:"i",label:"Network auto detect",uiType:"select",formControlName:"network_auto_detect",tooltip:"\n      Turns on automatic detection of the network type.\n      Works with network autodetect and relates to the connection type.\n    ",options:[uo,{title:"Disable automatic network type detection",value:0},{title:"Enable automatic network type connection",value:1}]},{key:"compression",type:"i",label:"Compression",uiType:"select",formControlName:"compression",tooltip:"Specifies whether bulk compression is applied to the connection.",options:[uo,{title:"Disable RDP bulk compression",value:0},{title:"Enable RDP bulk compression",value:1}]},{key:"videoplaybackmode",type:"i",label:"Video playback",uiType:"select",formControlName:"video_playback_mode",tooltip:"Specifies whether RDC uses RDP-efficient multimedia streaming for video playback.",options:[uo,{title:"Don't use RDP efficient multimedia streaming for video playback",value:0},{title:"Use RDP-efficient multimedia streaming for video playback when possible (default)",value:1}]}],ho=[{key:"audiocapturemode",type:"i",label:"Microphone redirection",uiType:"select",formControlName:"microphone_redirection",tooltip:"Specifies how audio recorded on the local computer is managed during a remote session.",uiSubGroupTitle:"Audio and video",options:[uo,{title:"Disable audio capture from the local device",value:0},{title:"Enable audio capture from the local device and redirection to an audio application in the remote session",value:1}]},{key:"encode redirected video capture",type:"i",label:"Redirect video encoding",uiType:"select",formControlName:"redirect_video_encoding",tooltip:"Turns redirected video encoding on or off.",uiSubGroupTitle:"Audio and video",options:[uo,{title:"Disable encoding of redirected video",value:0},{title:"Enable encoding of redirected video",value:1}]},{key:"redirected video capture encoding quality",type:"i",label:"Encoded video quality",uiType:"select",formControlName:"encoded_video_quality",tooltip:"Sets the quality level of encoded video.",uiSubGroupTitle:"Audio and video",options:[uo,{title:"High compression video. Quality may suffer when there is a lot of motion",value:0},{title:"Medium compression",value:1},{title:"Low compression video with high picture quality",value:2}]},{key:"audiomode",type:"i",label:"Audio output location",uiType:"select",formControlName:"audio_output_location",tooltip:"Defines how recorded audio from the local computer is handled in a remote session.",uiSubGroupTitle:"Audio and video",options:[uo,{title:"Play sounds on the local computer (default)",value:0},{title:"Play sounds on the remote computer",value:1},{title:"Do not play sounds",value:2}]},{key:"camerastoredirect",type:"s",label:"Camera redirection",uiType:"select",formControlName:"camera_redirection",tooltip:"\n      Configures which cameras to redirect. This setting uses a semicolon-delimited list of\n      KSCATEGORY_VIDEO_CAMERA interfaces of cameras enabled for redirection.\n    ",uiSubGroupTitle:"Local devices and resources",options:[uo,{title:"Don't redirect any cameras",value:po.EmptyValue},{title:"Redirect cameras",value:po.AllValues},{title:"Manually enter list of cameras",value:po.NotConfigured}],relatedControlForSelectedOption:{key:"camerastoredirect",placeholder:"Example: \\\\?\\\\usb#vid_0bda&pid_58b0&mi\\;\n\\\\?\\\\usb#vid_7cdd&pid_54a1&mi",validators:[co]}},{key:"drivestoredirect",type:"s",label:"Drive/storage redirection",uiType:"select",formControlName:"drive_storage_redirection",tooltip:"\n     Specifies which local disk drives from the client computer are redirected to the remote session.\n    ",uiSubGroupTitle:"Local devices and resources",options:[uo,{title:"Don't redirect any drives (default)",value:po.EmptyValue},{title:"Redirect all disk drives, including ones that are connected later",value:po.AllValues},{title:"Dynamic drives: redirect any drives that are connected later",value:po.DynamicDrives},{title:"Manually enter drives and labels",value:po.NotConfigured}],relatedControlForSelectedOption:{key:"drivestoredirect",placeholder:"Example: C\\:\\;E\\:\\;",validators:[co]}},{key:"usbdevicestoredirect",type:"s",label:"USB device redirection",uiType:"select",formControlName:"usb_device_redirection",tooltip:"\n      Specifies which supported RemoteFX USB devices on the client computer are\n      redirected and available in a session that supports RemoteFX USB redirection.\n    ",uiSubGroupTitle:"Local devices and resources",options:[uo,{title:"Don't redirect any USB devices (default)",value:po.EmptyValue},{title:"Redirect all USB devices that are not already redirected by another high-level redirection",value:po.AllValues},{title:"Redirect all devices that are members of the specified device setup class or devices defined by specific instance ID",value:po.NotConfigured}],relatedControlForSelectedOption:{key:"usbdevicestoredirect",placeholder:"Example: 72631e54-78a4-11d0-bcf7-00aa00b7b32a\\;53d29ef7-377c-4d14-864b-eb3a85769359",validators:[co]}},{key:"devicestoredirect",type:"s",label:"MTP and PTP device redirection",uiType:"select",formControlName:"mtp_and_ptp_device_redirection",tooltip:"Redirects MTP and PTP devices, such as media players and cameras, to the remote session.",uiSubGroupTitle:"Local devices and resources",options:[uo,{title:"Don't redirect any devices",value:po.EmptyValue},{title:"Redirect portable media players based on the Media Transfer Protocol(MTP) and digital cameras based on the Picture Transfer Protocol(PTP) (default)",value:po.AllValues}]},{key:"redirectclipboard",type:"i",label:"Clipboard redirection",uiType:"select",formControlName:"clipboard_redirection",tooltip:"Specifies whether clipboard content is shared between the client computer and the remote session.",uiSubGroupTitle:"Local devices and resources",options:[uo,{title:"Clipboard on local computer isn't available in remote session (default)",value:0},{title:"Clipboard on local computer is available in remote session",value:1}]},{key:"redirectcomports",type:"i",label:"COM ports redirection",uiType:"select",formControlName:"com_ports_redirection",tooltip:"Specifies whether COM (serial) ports on the client computer are redirected for use in the remote session.",uiSubGroupTitle:"Local devices and resources",options:[uo,{title:"COM ports on the local computer are not available in the remote session",value:0},{title:"COM ports on the local computer are available in the remote session (default)",value:1}]},{key:"keyboardhook",type:"i",label:"Keyboard redirection",uiType:"select",formControlName:"keyboard_redirection",tooltip:"\n      Specifies when Windows key combos (such as Windows and Alt+Tab)\n      apply to the remote session in desktop and RemoteApp connections.\n    ",uiSubGroupTitle:"Local devices and resources",options:[uo,{title:"Windows key combinations are applied on the local computer",value:0},{title:"(Desktop only) Windows key combinations are applied on the remote computer when in focus",value:1},{title:"(Desktop only) Windows key combinations are applied on the remote computer in full screen mode only",value:2},{title:"(RemoteApp only) Windows key combinations are applied on the RemoteApp when in focus",value:3}]},{key:"redirectlocation",type:"i",label:"Location service redirection",uiType:"select",formControlName:"location_service_redirection",tooltip:"Specifies whether location sharing is redirected between the client computer and the remote session.",uiSubGroupTitle:"Local devices and resources",options:[uo,{title:"Disable location sharing from the local device",value:0},{title:"Enable location sharing from the local device and redirection to apps in the remote session",value:1}]},{key:"redirectprinters",type:"i",label:"Printer redirection",uiType:"select",formControlName:"printer_redirection",tooltip:"Specifies whether printers on the client computer are redirected to the remote session.",uiSubGroupTitle:"Local devices and resources",options:[uo,{title:"The printers on the local computer are not available in the remote session (default)",value:0},{title:"The printers on the local computer are available in the remote session",value:1}]},{key:"redirectsmartcards",type:"i",label:"Smart card redirection",uiType:"select",formControlName:"smart_card_redirection",tooltip:"Specifies whether smart card devices on the client computer are available in the remote session.",uiSubGroupTitle:"Local devices and resources",options:[uo,{title:"The smart card device on the local computer is not available in the remote session",value:0},{title:"The smart card device on the local computer is available in the remote session (default)",value:1}]},{key:"redirectwebauthn",type:"i",label:"WebAuthn redirection",uiType:"select",formControlName:"web_authn_redirection",tooltip:"Specifies whether WebAuthn requests in the remote session are redirected to the local computer to use local authenticators,\n    such as Windows Hello for Business or security keys.",uiSubGroupTitle:"Local devices and resources",options:[uo,{title:"WebAuthn requests in the remote session are not redirected to the local computer",value:0},{title:"WebAuthn requests in the remote session are redirected to the local computer (default)",value:1}]}],go=[{key:"use multimon",type:"i",label:"Multiple displays",uiType:"select",formControlName:"multiple_displays",tooltip:"\n      Specifies whether the session uses true multiple monitor support when connecting to the remote computer.\n      ",options:[uo,{title:"Don't enable multiple display support",value:0},{title:"Enable multiple display support (default)",value:1}],disableRelatedKeys:["selectedmonitors","maximizetocurrentdisplays","singlemoninwindowedmode"]},{key:"selectedmonitors",type:"s",label:"Selected monitors",uiType:"select",formControlName:"selected_monitors",tooltip:"\n      Defines which local displays are used in the remote session.\n      Displays must be contiguous and require use multimon set to 1.\n    ",options:[uo,{title:"All displays",value:po.EmptyValue},{title:"Manually enter list of machine specific display IDs",value:po.NotConfigured}],relatedControlForSelectedOption:{key:"selectedmonitors",placeholder:"Example: ID0123, ID3456, ID23456",validators:[co]}},{key:"maximizetocurrentdisplays",type:"i",label:"Maximize to current displays",uiType:"select",formControlName:"maximize_to_current_displays",tooltip:"\n      Specifies which display the remote session uses for full screen when maximized.\n      Requires use multimon set to 1.\n      ",options:[uo,{title:"Session goes full screen on the displays initially selected when maximizing",value:0},{title:"Session dynamically goes full screen on the displays touched by the session window when maximizing",value:1}]},{key:"singlemoninwindowedmode",type:"i",label:"Multi to single display switch",uiType:"select",formControlName:"multi_to_single_display_switch",tooltip:"\n      Specifies whether a multi-monitor session switches to a single display when exiting full screen.\n      Requires use multimon set to 1.\n    ",options:[uo,{title:"Session retains all displays when exiting full screen",value:0},{title:"Session switches to single display when exiting full screen",value:1}]},{key:"screen mode id",type:"i",label:"Screen mode",uiType:"select",formControlName:"screen_mode",tooltip:"Specifies whether the remote session opens in full-screen mode when connecting.",options:[uo,{title:"The remote session will appear in a window",value:0},{title:"The remote session will appear full screen",value:1}]},{key:"smart sizing",type:"i",label:"Smart sizing",uiType:"select",formControlName:"smart_sizing",tooltip:"Specifies whether the client scales remote desktop content to fit the window when resized.",options:[uo,{title:"The local window content won't scale when resized",value:0},{title:"The local window content will scale when resized",value:1}]},{key:"dynamic resolution",type:"i",label:"Dynamic resolution",uiType:"select",formControlName:"dynamic_resolution",tooltip:"Specifies whether the remote session resolution updates automatically when the window is resized.",options:[uo,{title:"Session resolution remains static for the duration of the session",value:0},{title:"Session resolution updates as the local window resizes",value:1}]},{key:"desktop size id",type:"i",label:"Desktop size",uiType:"select",formControlName:"desktop_size",tooltip:"Defines preset dimensions for the remote desktop session.",options:[uo,{title:"0: 640 x 480",value:0},{title:"1: 800 x 600",value:1},{title:"2: 1024 x 768",value:2},{title:"3: 1280 x 1024",value:3},{title:"4: 1600 x 1200",value:4}]},{key:"desktopheight",type:"i",label:"Desktop height (pixels)",uiType:"number",formControlName:"desktop_height",tooltip:"Sets the remote session desktop height in pixels.",isRequired:!0,validators:[F.kI.required]},{key:"desktopwidth",type:"i",label:"Desktop width (pixels)",uiType:"number",formControlName:"desktop_width",tooltip:"Sets the remote session desktop width in pixels.",isRequired:!0,validators:[F.kI.required]}],yo=[].concat(fo,vo,ho,go).map(function(e){return e.key});function Co(e,t){var n={};return e.forEach(function(e){var o=function(e,t){var n=t.get(e.key);switch(e.uiType){case"select":return void 0!==n?""===n?po.EmptyValue:function(e){switch(e){case po.NotSet:case po.NotConfigured:case po.EmptyValue:case po.AllValues:case po.DynamicDrives:return e;default:return isNaN(Number(e))?e:+e}}(n):po.NotSet;case"text":return n||po.EmptyValue;case"number":return n?+n:"0";default:return null}}(e,t);n[e.formControlName]=new F.NI(o,e.validators)}),n}var bo=u(39761);function So(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",12),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n.value),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function wo(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-select",10),I["\u0275\u0275template"](1,So,2,2,"nb-option",11),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]().$implicit;I["\u0275\u0275property"]("id",n.key)("formControlName",n.formControlName),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",n.options)}}function xo(e,t){if(1&e&&I["\u0275\u0275element"](0,"input",13),2&e){var n,o=I["\u0275\u0275nextContext"]().$implicit;I["\u0275\u0275property"]("id",o.key)("placeholder",null!==(n=o.placeholder)&&void 0!==n?n:"")("formControlName",o.formControlName)}}function Io(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"div",14),I["\u0275\u0275text"](2," The characters \\ : ; must be escaped with a backslash character '\\', "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](3,"div",14),I["\u0275\u0275text"](4," and value cannot end with a backslash. e.g. 'C:' should be 'C\\:' "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function ko(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"div",2),I["\u0275\u0275elementStart"](1,"div",3),I["\u0275\u0275elementStart"](2,"label",4),I["\u0275\u0275text"](3),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](4,"nb-icon",5),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](5,"div",6),I["\u0275\u0275template"](6,wo,2,3,"nb-select",7),I["\u0275\u0275template"](7,xo,1,3,"input",8),I["\u0275\u0275template"](8,Io,5,0,"ng-container",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,o=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("for",n.key),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate"](n.label),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("nbTooltip",n.tooltip),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngIf","select"===n.uiType),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf","text"===n.uiType),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",(null==o.form.controls||null==o.form.controls[n.formControlName]||null==o.form.controls[n.formControlName].errors?null:o.form.controls[n.formControlName].errors.endsWithBackslash)||(null==o.form.controls||null==o.form.controls[n.formControlName]||null==o.form.controls[n.formControlName].errors?null:o.form.controls[n.formControlName].errors.invalidPattern))}}var Po=function(){var t=function(){function t(){p(this,t),this.formControlsInitialized=new I.EventEmitter,this.store=fo}return m(t,[{key:"ngOnInit",value:function(){this.rdpProps&&this.initializeControls()}},{key:"initializeControls",value:function(){var t,n=this,o=new Map(Array.from(ro(this.rdpProps).entries()).map(function(t){var n=e(t,2);return[n[0],lo(n[1].value)]}));Object.entries(Co(this.store,o)).forEach(function(t){var o,r=e(t,2),i=r[0],a=r[1];return null===(o=n.form)||void 0===o?void 0:o.addControl(i,a,{emitEvent:!1})}),this.formControlsInitialized.emit(null===(t=this.form)||void 0===t?void 0:t.getRawValue())}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=I["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-connection-information-tab"]],inputs:{form:"form",rdpProps:"rdpProps"},outputs:{formControlsInitialized:"formControlsInitialized"},decls:2,vars:2,consts:[[3,"formGroup"],["class","form-group row",4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],[1,"label",3,"for"],["icon","info-outline",3,"nbTooltip"],[1,"col-md-9"],["fullWidth","",3,"id","formControlName",4,"ngIf"],["type","text","nbInput","","fullWidth","",3,"id","placeholder","formControlName",4,"ngIf"],[4,"ngIf"],["fullWidth","",3,"id","formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","nbInput","","fullWidth","",3,"id","placeholder","formControlName"],[1,"form-control-error"]],template:function(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0,0),I["\u0275\u0275template"](1,ko,9,6,"div",1),I["\u0275\u0275elementContainerEnd"]()),2&e&&(I["\u0275\u0275property"]("formGroup",t.form),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",t.store))},directives:[F.JL,F.sg,f.sg,v.fMN,v.jNv,f.O5,v.rs,F.JJ,F.u,v.q51,v.h8i,F.Fj],styles:["[_nghost-%COMP%]   .asterisk[_ngcontent-%COMP%]{color:var(--danger);margin-right:.5em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),t}();function Eo(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",11),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n.value),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function Ao(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-select",9),I["\u0275\u0275template"](1,Eo,2,2,"nb-option",10),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]().$implicit;I["\u0275\u0275property"]("id",n.key)("formControlName",n.formControlName),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",n.options)}}function To(e,t){if(1&e&&I["\u0275\u0275element"](0,"input",12),2&e){var n,o=I["\u0275\u0275nextContext"]().$implicit;I["\u0275\u0275property"]("id",o.key)("placeholder",null!==(n=o.placeholder)&&void 0!==n?n:"")("formControlName",o.formControlName)}}function No(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"div",2),I["\u0275\u0275elementStart"](1,"div",3),I["\u0275\u0275elementStart"](2,"label",4),I["\u0275\u0275text"](3),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](4,"nb-icon",5),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](5,"div",6),I["\u0275\u0275template"](6,Ao,2,3,"nb-select",7),I["\u0275\u0275template"](7,To,1,3,"input",8),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("for",n.key),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate"](n.label),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("nbTooltip",n.tooltip),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngIf","select"===n.uiType),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf","text"===n.uiType)}}var Oo=function(){var t=function(){function t(){p(this,t),this.formControlsInitialized=new I.EventEmitter,this.store=vo}return m(t,[{key:"ngOnInit",value:function(){this.rdpProps&&this.initializeControls()}},{key:"initializeControls",value:function(){var t,n=this,o=new Map(Array.from(ro(this.rdpProps).entries()).map(function(t){var n=e(t,2);return[n[0],lo(n[1].value)]}));Object.entries(Co(this.store,o)).forEach(function(t){var o,r=e(t,2),i=r[0],a=r[1];return null===(o=n.form)||void 0===o?void 0:o.addControl(i,a,{emitEvent:!1})}),this.formControlsInitialized.emit(null===(t=this.form)||void 0===t?void 0:t.getRawValue())}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=I["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-session-behavior-tab"]],inputs:{form:"form",rdpProps:"rdpProps"},outputs:{formControlsInitialized:"formControlsInitialized"},decls:2,vars:2,consts:[[3,"formGroup"],["class","form-group row",4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],[1,"label",3,"for"],["icon","info-outline",3,"nbTooltip"],[1,"col-md-9"],["fullWidth","",3,"id","formControlName",4,"ngIf"],["type","text","nbInput","","fullWidth","",3,"id","placeholder","formControlName",4,"ngIf"],["fullWidth","",3,"id","formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","nbInput","","fullWidth","",3,"id","placeholder","formControlName"]],template:function(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0,0),I["\u0275\u0275template"](1,No,8,5,"div",1),I["\u0275\u0275elementContainerEnd"]()),2&e&&(I["\u0275\u0275property"]("formGroup",t.form),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",t.store))},directives:[F.JL,F.sg,f.sg,v.fMN,v.jNv,f.O5,v.rs,F.JJ,F.u,v.q51,v.h8i,F.Fj],styles:[""]}),t}();function Mo(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",12),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",null===n.value?null:n.value),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function Vo(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-select",10),I["\u0275\u0275template"](1,Mo,2,2,"nb-option",11),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]().$implicit;I["\u0275\u0275property"]("id",n.key)("formControlName",n.formControlName),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",n.options)}}function Ro(e,t){if(1&e&&I["\u0275\u0275element"](0,"input",13),2&e){var n,o=I["\u0275\u0275nextContext"]().$implicit;I["\u0275\u0275property"]("id",o.key)("placeholder",null!==(n=o.placeholder)&&void 0!==n?n:"")("formControlName",o.formControlName)}}function Fo(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"div",3),I["\u0275\u0275elementStart"](2,"div",4),I["\u0275\u0275elementStart"](3,"label",5),I["\u0275\u0275text"](4),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](5,"nb-icon",6),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](6,"div",7),I["\u0275\u0275template"](7,Vo,2,3,"nb-select",8),I["\u0275\u0275template"](8,Ro,1,3,"input",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("for",n.key),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate"](n.label),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("nbTooltip",n.tooltip),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngIf","select"===n.uiType),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf","text"===n.uiType)}}function _o(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",12),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n.value),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function Do(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"nb-select",17),I["\u0275\u0275listener"]("selectedChange",function(e){I["\u0275\u0275restoreView"](n);var t=I["\u0275\u0275nextContext"]().$implicit;return I["\u0275\u0275nextContext"]().selectedChangeHandler(e,t)}),I["\u0275\u0275template"](1,_o,2,2,"nb-option",11),I["\u0275\u0275elementEnd"]()}if(2&e){var o=I["\u0275\u0275nextContext"]().$implicit;I["\u0275\u0275property"]("id",o.key)("formControlName",o.formControlName),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",o.options)}}function Go(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"textarea",18),I["\u0275\u0275text"](1,"        "),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]().$implicit;I["\u0275\u0275property"]("formControlName",n.manualFormControlName)("placeholder",n.relatedControlForSelectedOption.placeholder)("id",n.relatedControlForSelectedOption.key)}}function Uo(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"div",19),I["\u0275\u0275text"](2," The characters \\ : ; must be escaped with a backslash character '\\', "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](3,"div",19),I["\u0275\u0275text"](4," and value cannot end with a backslash. e.g. 'C:' should be 'C\\:' "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function Lo(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275template"](1,Uo,5,0,"ng-container",16),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]().$implicit,o=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",(null==o.form.controls||null==o.form.controls[n.manualFormControlName]||null==o.form.controls[n.manualFormControlName].errors?null:o.form.controls[n.manualFormControlName].errors.endsWithBackslash)||(null==o.form.controls||null==o.form.controls[n.manualFormControlName]||null==o.form.controls[n.manualFormControlName].errors?null:o.form.controls[n.manualFormControlName].errors.invalidPattern))}}function zo(e,t){if(1&e&&I["\u0275\u0275element"](0,"input",13),2&e){var n,o=I["\u0275\u0275nextContext"]().$implicit;I["\u0275\u0275property"]("id",o.key)("placeholder",null!==(n=o.placeholder)&&void 0!==n?n:"")("formControlName",o.formControlName)}}function Wo(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"div",3),I["\u0275\u0275elementStart"](2,"div",4),I["\u0275\u0275elementStart"](3,"label",5),I["\u0275\u0275text"](4),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](5,"nb-icon",6),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](6,"div",7),I["\u0275\u0275template"](7,Do,2,3,"nb-select",14),I["\u0275\u0275template"](8,Go,2,3,"textarea",15),I["\u0275\u0275template"](9,Lo,2,1,"ng-container",16),I["\u0275\u0275template"](10,zo,1,3,"input",9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("for",n.key),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate"](n.label),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("nbTooltip",n.tooltip),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngIf","select"===n.uiType),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",n.selfReference&&n.relatedControlForSelectedOption.key===n.key),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",n.selfReference&&n.relatedControlForSelectedOption.key===n.key),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf","text"===n.uiType)}}var Bo=function(){var t=function(){function t(){p(this,t),this.formControlsInitialized=new I.EventEmitter,this.store=ho,this.audioAndVideoControlsGroup=this.store.filter(function(e){return"Audio and video"===e.uiSubGroupTitle}),this.localDevicesAndResourcesControlsGroup=this.store.filter(function(e){return"Local devices and resources"===e.uiSubGroupTitle})}return m(t,[{key:"cameraRedirectionControl",get:function(){return this.form.get("camera_redirection")}},{key:"driveStorageRedirectionControl",get:function(){return this.form.get("drive_storage_redirection")}},{key:"usbDevicesRedirectionControl",get:function(){return this.form.get("usb_device_redirection")}},{key:"ngOnInit",value:function(){var e,t=this;this.rdpProps&&(this.initializeControls(),this.cleanUpCustomControls(),this.initializeCustomControls(),this.formControlsInitialized.emit(null===(e=this.form)||void 0===e?void 0:e.getRawValue()),setTimeout(function(){t.cleanUpCameraRedirectionControl(),t.cleanUpDriveStorageRedirectionControl(),t.cleanUpUsbDevicesRedirectionControl()}))}},{key:"selectedChangeHandler",value:function(e,t){e!==po.NotConfigured?this.removeCustomControl(t):this.addCustomControl(t,"")}},{key:"ngOnDestroy",value:function(){this.cleanUpCustomControls()}},{key:"initializeControls",value:function(){var t,n=this,o=new Map(Array.from(ro(this.rdpProps).entries()).map(function(t){var n=e(t,2);return[n[0],lo(n[1].value)]}));Object.entries(Co(this.store,o)).forEach(function(t){var o,r=e(t,2),i=r[0],a=r[1];return null===(o=n.form)||void 0===o?void 0:o.addControl(i,a,{emitEvent:!1})}),this.formControlsInitialized.emit(null===(t=this.form)||void 0===t?void 0:t.getRawValue())}},{key:"initializeCustomControls",value:function(){var e=this;this.store.forEach(function(t){var n=e.form.get(t.formControlName),o=null==n?void 0:n.value;e.isCustomValue(o,t)&&e.addCustomControl(t,o)})}},{key:"cleanUpCustomControls",value:function(){var e=this;this.store.forEach(function(t){var n=t.manualFormControlName;n&&e.form.contains(n)&&(e.form.removeControl(n,{emitEvent:!1}),t.selfReference=void 0)})}},{key:"isCustomValue",value:function(e,t){return![po.NotConfigured,po.NotSet,po.EmptyValue,po.AllValues].includes(e)&&!!t.relatedControlForSelectedOption}},{key:"addCustomControl",value:function(e,t){var n,o,i;e.selfReference=r({},e),e.manualFormControlName="".concat(e.formControlName,"_manual"),this.form.contains(e.manualFormControlName)||this.form.addControl(e.manualFormControlName,new F.NI(t));var a=this.form.get(e.manualFormControlName);a&&(null===(o=null===(n=e.relatedControlForSelectedOption)||void 0===n?void 0:n.validators)||void 0===o?void 0:o.length)&&(a.setValidators(e.relatedControlForSelectedOption.validators),a.updateValueAndValidity({emitEvent:!1}),a.invalid&&a.markAsTouched()),null===(i=this.form.get(e.formControlName))||void 0===i||i.patchValue(po.NotConfigured,{emitEvent:!1})}},{key:"removeCustomControl",value:function(e){e.selfReference=void 0;var t=e.manualFormControlName;t&&this.form.contains(t)&&this.form.removeControl(t)}},{key:"cleanUpCameraRedirectionControl",value:function(){this.cleanUpCustomRedirectionControl(this.cameraRedirectionControl,"camera_redirection")}},{key:"cleanUpDriveStorageRedirectionControl",value:function(){this.cleanUpCustomRedirectionControl(this.driveStorageRedirectionControl,"drive_storage_redirection")}},{key:"cleanUpUsbDevicesRedirectionControl",value:function(){this.cleanUpCustomRedirectionControl(this.usbDevicesRedirectionControl,"usb_device_redirection")}},{key:"cleanUpCustomRedirectionControl",value:function(e,t){if(e.value===po.NotSet||e.value===po.EmptyValue){var n=this.store.find(function(e){return e.formControlName===t});n&&(n.selfReference=void 0)}}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=I["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-device-redirection-tab"]],inputs:{form:"form",rdpProps:"rdpProps"},outputs:{formControlsInitialized:"formControlsInitialized"},decls:8,vars:3,consts:[[3,"formGroup"],[1,"mb-3"],[4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],[1,"label",3,"for"],["icon","info-outline",3,"nbTooltip"],[1,"col-md-9"],["fullWidth","",3,"id","formControlName",4,"ngIf"],["type","text","nbInput","","fullWidth","",3,"id","placeholder","formControlName",4,"ngIf"],["fullWidth","",3,"id","formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","nbInput","","fullWidth","",3,"id","placeholder","formControlName"],["fullWidth","",3,"id","formControlName","selectedChange",4,"ngIf"],["class","mt-2","nbInput","","fullWidth","",3,"formControlName","placeholder","id",4,"ngIf"],[4,"ngIf"],["fullWidth","",3,"id","formControlName","selectedChange"],["nbInput","","fullWidth","",1,"mt-2",3,"formControlName","placeholder","id"],[1,"form-control-error"]],template:function(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0,0),I["\u0275\u0275elementStart"](1,"h6",1),I["\u0275\u0275text"](2,"Audio and video"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275template"](3,Fo,9,5,"ng-container",2),I["\u0275\u0275element"](4,"hr"),I["\u0275\u0275elementStart"](5,"h6",1),I["\u0275\u0275text"](6,"Local devices and resources"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275template"](7,Wo,11,7,"ng-container",2),I["\u0275\u0275elementContainerEnd"]()),2&e&&(I["\u0275\u0275property"]("formGroup",t.form),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngForOf",t.audioAndVideoControlsGroup),I["\u0275\u0275advance"](4),I["\u0275\u0275property"]("ngForOf",t.localDevicesAndResourcesControlsGroup))},directives:[F.JL,F.sg,f.sg,v.fMN,v.jNv,f.O5,v.rs,F.JJ,F.u,v.q51,v.h8i,F.Fj],styles:["[_nghost-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1rem}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}"]}),t}();function $o(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"span",12),I["\u0275\u0275text"](1,"*"),I["\u0275\u0275elementEnd"]())}function jo(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-option",15),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;I["\u0275\u0275property"]("value",n.value),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function qo(e,t){if(1&e){var n=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"nb-select",13),I["\u0275\u0275listener"]("selectedChange",function(e){I["\u0275\u0275restoreView"](n);var t=I["\u0275\u0275nextContext"]().$implicit;return I["\u0275\u0275nextContext"]().selectedChangeHandler(e,t)}),I["\u0275\u0275template"](1,jo,2,2,"nb-option",14),I["\u0275\u0275elementEnd"]()}if(2&e){var o=I["\u0275\u0275nextContext"]().$implicit;I["\u0275\u0275property"]("id",o.key)("formControlName",o.formControlName),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",o.options)}}function Ho(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"textarea",16),I["\u0275\u0275text"](1,"      "),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]().$implicit;I["\u0275\u0275property"]("formControlName",n.manualFormControlName)("placeholder",n.relatedControlForSelectedOption.placeholder)("id",n.relatedControlForSelectedOption.key)}}function Jo(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"div",17),I["\u0275\u0275text"](2," The characters \\ : ; must be escaped with a backslash character '\\', "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](3,"div",17),I["\u0275\u0275text"](4," and value cannot end with a backslash. e.g. 'C:' should be 'C\\:' "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function Ko(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275template"](1,Jo,5,0,"ng-container",10),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]().$implicit,o=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",(null==o.form.controls||null==o.form.controls[n.manualFormControlName]||null==o.form.controls[n.manualFormControlName].errors?null:o.form.controls[n.manualFormControlName].errors.endsWithBackslash)||(null==o.form.controls||null==o.form.controls[n.manualFormControlName]||null==o.form.controls[n.manualFormControlName].errors?null:o.form.controls[n.manualFormControlName].errors.invalidPattern))}}function Xo(e,t){if(1&e&&I["\u0275\u0275element"](0,"input",18),2&e){var n,o=I["\u0275\u0275nextContext"]().$implicit;I["\u0275\u0275property"]("id",o.key)("placeholder",null!==(n=o.placeholder)&&void 0!==n?n:"")("formControlName",o.formControlName)("type",o.uiType)}}function Qo(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"span",17),I["\u0275\u0275text"](2,"This field is required."),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]())}function Yo(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"div",2),I["\u0275\u0275elementStart"](1,"div",3),I["\u0275\u0275elementStart"](2,"label",4),I["\u0275\u0275template"](3,$o,2,0,"span",5),I["\u0275\u0275elementStart"](4,"span"),I["\u0275\u0275text"](5),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](6,"nb-icon",6),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](7,"div",7),I["\u0275\u0275template"](8,qo,2,3,"nb-select",8),I["\u0275\u0275template"](9,Ho,2,3,"textarea",9),I["\u0275\u0275template"](10,Ko,2,1,"ng-container",10),I["\u0275\u0275template"](11,Xo,1,4,"input",11),I["\u0275\u0275template"](12,Qo,3,0,"ng-container",10),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,o=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("for",n.key),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",n.isRequired),I["\u0275\u0275advance"](2),I["\u0275\u0275textInterpolate"](n.label),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("nbTooltip",n.tooltip),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngIf","select"===n.uiType),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",n.selfReference&&n.relatedControlForSelectedOption.key===n.key),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",n.selfReference&&n.relatedControlForSelectedOption.key===n.key),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf","select"!==n.uiType),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",(null==o.form.controls||null==o.form.controls[n.formControlName]||null==o.form.controls[n.formControlName].errors?null:o.form.controls[n.formControlName].errors.required)&&(null==o.form.controls||null==o.form.controls[n.formControlName]?null:o.form.controls[n.formControlName].touched))}}var Zo=function(){var t=function(){function t(){p(this,t),this.formControlsInitialized=new I.EventEmitter,this.store=go}return m(t,[{key:"selectedMonitorsControl",get:function(){return this.form.get("selected_monitors")}},{key:"ngOnInit",value:function(){var e,t=this;this.rdpProps&&(this.initializeControls(),this.cleanUpCustomControls(),this.initializeCustomControls(),this.formControlsInitialized.emit(null===(e=this.form)||void 0===e?void 0:e.getRawValue()),setTimeout(function(){t.initializeUseMultiMonitorsSettings(),t.cleanUpSelectedMonitorsControl()}))}},{key:"selectedChangeHandler",value:function(e,t){var n;(null===(n=null==t?void 0:t.disableRelatedKeys)||void 0===n?void 0:n.length)?1!==e?this.handleDisableControls(t):this.handleEnableControls(t):e!==po.NotConfigured?this.removeCustomControl(t):this.addCustomControl(t,"")}},{key:"ngOnDestroy",value:function(){this.cleanUpCustomControls()}},{key:"initializeControls",value:function(){var t,n=this,o=new Map(Array.from(ro(this.rdpProps).entries()).map(function(t){var n=e(t,2);return[n[0],lo(n[1].value)]}));Object.entries(Co(this.store,o)).forEach(function(t){var o,r=e(t,2),i=r[0],a=r[1];return null===(o=n.form)||void 0===o?void 0:o.addControl(i,a,{emitEvent:!1})}),this.formControlsInitialized.emit(null===(t=this.form)||void 0===t?void 0:t.getRawValue())}},{key:"initializeUseMultiMonitorsSettings",value:function(){var e=this.store.find(function(e){return"use multimon"===e.key});if(e){var t=this.form.get(e.formControlName),n=null==t?void 0:t.value;n===po.NotSet||0===n?this.handleDisableControls(e):this.handleEnableControls(e)}}},{key:"handleDisableControls",value:function(e){var t=this;this.processControls(e.disableRelatedKeys,function(e){var n,o;null===(n=t.form.get(e))||void 0===n||n.patchValue(po.NotSet),null===(o=t.form.get(e))||void 0===o||o.disable()}),this.updateRegistry(e.disableRelatedKeys,function(e){return e.selfReference=void 0,e})}},{key:"handleEnableControls",value:function(e){var t=this;this.processControls(e.disableRelatedKeys,function(e){var n;return null===(n=t.form.get(e))||void 0===n?void 0:n.enable()})}},{key:"initializeCustomControls",value:function(){var e=this;this.store.forEach(function(t){var n=e.form.get(t.formControlName),o=null==n?void 0:n.value;e.isCustomValue(o,t)&&e.addCustomControl(t,o)})}},{key:"cleanUpCustomControls",value:function(){var e=this;this.store.forEach(function(t){var n=t.manualFormControlName;n&&e.form.contains(n)&&(e.form.removeControl(n,{emitEvent:!1}),t.selfReference=void 0)})}},{key:"processControls",value:function(e,t){var n=this;null==e||e.forEach(function(e){var o,r=null===(o=n.store.find(function(t){return t.key===e}))||void 0===o?void 0:o.formControlName;r&&t(r)})}},{key:"updateRegistry",value:function(e,t){this.store=this.store.map(function(n){return e.includes(n.key)?t(n):n})}},{key:"isCustomValue",value:function(e,t){return![po.NotConfigured,po.NotSet,po.EmptyValue,po.AllValues].includes(e)&&!!t.relatedControlForSelectedOption}},{key:"addCustomControl",value:function(e,t){var n,o,i;e.selfReference=r({},e),e.manualFormControlName="".concat(e.formControlName,"_manual"),this.form.contains(e.manualFormControlName)||this.form.addControl(e.manualFormControlName,new F.NI(t));var a=this.form.get(e.manualFormControlName);a&&(null===(o=null===(n=e.relatedControlForSelectedOption)||void 0===n?void 0:n.validators)||void 0===o?void 0:o.length)&&(a.setValidators(e.relatedControlForSelectedOption.validators),a.updateValueAndValidity({emitEvent:!1}),a.invalid&&a.markAsTouched()),null===(i=this.form.get(e.formControlName))||void 0===i||i.patchValue(po.NotConfigured,{emitEvent:!1})}},{key:"removeCustomControl",value:function(e){e.selfReference=void 0;var t=e.manualFormControlName;t&&this.form.contains(t)&&this.form.removeControl(t)}},{key:"cleanUpSelectedMonitorsControl",value:function(){if(this.selectedMonitorsControl.value===po.NotSet||this.selectedMonitorsControl.value===po.EmptyValue){var e=this.store.find(function(e){return"selected_monitors"===e.formControlName});e&&(e.selfReference=void 0)}}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=I["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-display-settings-tab"]],inputs:{form:"form",rdpProps:"rdpProps"},outputs:{formControlsInitialized:"formControlsInitialized"},decls:2,vars:2,consts:[[3,"formGroup"],["class","form-group row",4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],[1,"label",3,"for"],["class","asterisk",4,"ngIf"],["icon","info-outline",3,"nbTooltip"],[1,"col-md-9"],["fullWidth","",3,"id","formControlName","selectedChange",4,"ngIf"],["class","mt-2","nbInput","","fullWidth","",3,"formControlName","placeholder","id",4,"ngIf"],[4,"ngIf"],["min","0","nbInput","","fullWidth","",3,"id","placeholder","formControlName","type",4,"ngIf"],[1,"asterisk"],["fullWidth","",3,"id","formControlName","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["nbInput","","fullWidth","",1,"mt-2",3,"formControlName","placeholder","id"],[1,"form-control-error"],["min","0","nbInput","","fullWidth","",3,"id","placeholder","formControlName","type"]],template:function(e,t){1&e&&(I["\u0275\u0275elementContainerStart"](0,0),I["\u0275\u0275template"](1,Yo,13,9,"div",1),I["\u0275\u0275elementContainerEnd"]()),2&e&&(I["\u0275\u0275property"]("formGroup",t.form),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",t.store))},directives:[F.JL,F.sg,f.sg,f.O5,v.fMN,v.jNv,v.rs,F.JJ,F.u,v.q51,v.h8i,F.Fj],styles:["[_nghost-%COMP%]   .asterisk[_ngcontent-%COMP%]{color:var(--danger);margin-right:.5em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}"]}),t}();function er(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275text"](1),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,o=t.last;I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate2"](" ",n,"",o?"":", "," ")}}function tr(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275text"](1," [ "),I["\u0275\u0275template"](2,er,2,2,"ng-container",9),I["\u0275\u0275text"](3," ] "),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngForOf",null==n.formControl.errors||null==n.formControl.errors.invalidRdp?null:n.formControl.errors.invalidRdp.invalidParts)}}function nr(e,t){if(1&e&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275elementStart"](1,"div",8),I["\u0275\u0275text"](2," These RDP properties are invalid, please fix them and try again. "),I["\u0275\u0275template"](3,tr,4,1,"ng-container",7),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementContainerEnd"]()),2&e){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngIf",null==n.formControl.errors||null==n.formControl.errors.invalidRdp||null==n.formControl.errors.invalidRdp.invalidParts?null:n.formControl.errors.invalidRdp.invalidParts.length)}}var or,rr=function(){var e=function(){function e(){p(this,e),this.destroyed$=new g.xQ,this.rdpPropsChanged=new I.EventEmitter,this.formControl=new F.NI("",[function(e){var t=e.value;if(!t)return null;for(var n=[],o="",r=!1,i=0;i<t.length;i++){var a=t[i];r?(o+="\\".concat(a),r=!1):"\\"===a?r=!0:";"===a?(o&&(n=[].concat(l(n),[o])),o=""):o+=a}o&&n.push(o);var s=n.filter(function(e){return!/^([^:]+):([a-z]):(.*)$/i.test(e)});return s.length>0?{invalidRdp:{invalidParts:s}}:null}])}return m(e,[{key:"rdpForAdvancedTab",set:function(e){e&&this.formControl.setValue(e,{emitEvent:!1})}},{key:"ngOnInit",value:function(){var e=this;this.formControl.setValue(this.rdpProps,{emitEvent:!1}),this.formControl.valueChanges.pipe((0,b.R)(this.destroyed$)).subscribe(function(t){return e.rdpPropsChanged.emit(t)})}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=I["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-advanced-tab"]],inputs:{rdpProps:"rdpProps",rdpForAdvancedTab:"rdpForAdvancedTab"},outputs:{rdpPropsChanged:"rdpPropsChanged"},decls:11,vars:2,consts:[[1,"form-group","row"],[1,"col-md-3","d-flex","justify-content-between"],["for","rdp_props",1,"label"],["icon","info-outline","nbTooltip","\n        Specifies custom RDP properties, such as multi-monitor support or audio redirection, to optimize user experience.\n        Use separators (;i; or ;s;) to avoid errors when adding properties, for example: audiocapturemode:i:1;audiomode:i:0;.\n      "],[1,"col-md-9"],["href","https://learn.microsoft.com/en-us/azure/virtual-desktop/rdp-properties","target","_blank",1,"d-flex","mb-3"],["id","rdp_props","nbInput","","fullWidth","",3,"formControl"],[4,"ngIf"],[1,"form-control-error"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(I["\u0275\u0275elementStart"](0,"div",0),I["\u0275\u0275elementStart"](1,"div",1),I["\u0275\u0275elementStart"](2,"label",2),I["\u0275\u0275text"](3,"RDP Properties"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](4,"nb-icon",3),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](5,"div",4),I["\u0275\u0275elementStart"](6,"a",5),I["\u0275\u0275text"](7," Learn more about RDP properties here "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](8,"hr"),I["\u0275\u0275element"](9,"textarea",6),I["\u0275\u0275template"](10,nr,4,1,"ng-container",7),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e&&(I["\u0275\u0275advance"](9),I["\u0275\u0275property"]("formControl",t.formControl),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",null==t.formControl.errors?null:t.formControl.errors.invalidRdp))},directives:[v.fMN,v.jNv,v.h8i,F.Fj,F.JJ,F.oH,f.O5,f.sg],styles:["[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none;min-height:20em;max-height:20em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}"]}),e}(),ir=function(){var t=function(){function t(){p(this,t),this.destroyed$=new g.xQ,this.isCreateMode=!1,this.isFormClearedByEmptyRdpProps=!1,this.customProps=new Map,this.rdpPropertiesChanged=new I.EventEmitter,this.rdpFormHasChanges=new I.EventEmitter,this.isRdpFormValid=new I.EventEmitter,this.form=new F.cw({connectionInformation:new F.cw({}),sessionBehavior:new F.cw({}),deviceRedirection:new F.cw({}),displaySettings:new F.cw({})}),this.hasFormChanges=!1}return m(t,[{key:"ngOnInit",value:function(){var e;this.isCreateMode=null===this.rdpProperties,this.rdpProperties=null!==(e=this.rdpProperties)&&void 0!==e?e:mo,this.extractCustomProps(ro(this.rdpProperties)),this.initFormValueChangesHandler(),this.initFormValidityChangeHandler()}},{key:"childFormControlsInitialized",value:function(e,t){this.initialFormValues=r(r({},this.initialFormValues),{},i({},t,e))}},{key:"tabChanged",value:function(){this.rdpForAdvancedTab=this.isFormClearedByEmptyRdpProps&&this.isCreateMode?io(this.rdpPropsCopy,this.serializeFormToRdp()):!this.isFormClearedByEmptyRdpProps||this.isCreateMode?this.rdpProperties:io(this.rdpProperties,mo)}},{key:"advancedRdpPropsChanged",value:function(e){e||!this.isCreateMode?e||this.isCreateMode?this.processUpdatedRdpString(e):this.handleEmptyRdpInEditMode():this.handleEmptyRdpInCreateMode()}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"initializeControls",value:function(t){this.removeControls();var n=new Map(Array.from(ro(t).entries()).map(function(t){var n=e(t,2);return[n[0],lo(n[1].value)]})),o=Co(fo,n),r=Co(vo,n),i=Co(ho,n),a=Co(go,n);this.form.addControl("connectionInformation",new F.cw(o)),this.form.addControl("sessionBehavior",new F.cw(r)),this.form.addControl("deviceRedirection",new F.cw(i)),this.form.addControl("displaySettings",new F.cw(a))}},{key:"removeControls",value:function(){this.form.removeControl("connectionInformation"),this.form.removeControl("sessionBehavior"),this.form.removeControl("deviceRedirection"),this.form.removeControl("displaySettings")}},{key:"serializeFormToRdp",value:function(){var t,n,o,r,i=[],l=function(e,t){t.forEach(function(t){var n=null==e?void 0:e.get(t.formControlName),o=null==e?void 0:e.get("".concat(t.formControlName,"_manual"));if(n){var r=n.value;if(o&&o.value&&o.value!==po.NotConfigured&&(r=o.value),r===po.NotSet)return;switch(t.type){case"i":i.push("".concat(t.key,":i:").concat(r));break;case"s":i.push("".concat(t.key,":s:").concat(r))}}})};l(null===(t=this.form.controls)||void 0===t?void 0:t.connectionInformation,fo),l(null===(n=this.form.controls)||void 0===n?void 0:n.sessionBehavior,vo),l(null===(o=this.form.controls)||void 0===o?void 0:o.deviceRedirection,ho),l(null===(r=this.form.controls)||void 0===r?void 0:r.displaySettings,go);var s,c=a(this.customProps.entries());try{for(c.s();!(s=c.n()).done;){var d=e(s.value,2),p=d[0],u=d[1],m=u.type,f=u.value;i.push("".concat(p,":").concat(m,":").concat(so(f)))}}catch(v){c.e(v)}finally{c.f()}return i.join(";")}},{key:"handleEmptyRdpInCreateMode",value:function(){this.isFormClearedByEmptyRdpProps=!0,this.rdpPropsCopy=this.serializeFormToRdp(),this.extractCustomProps(ro(po.EmptyValue)),this.initializeControls(po.EmptyValue)}},{key:"handleEmptyRdpInEditMode",value:function(){this.isFormClearedByEmptyRdpProps=!0,this.extractCustomProps(ro(po.EmptyValue)),this.initializeControls(po.EmptyValue)}},{key:"processUpdatedRdpString",value:function(e){this.extractCustomProps(ro(e)),this.initializeControls(e)}},{key:"initFormValueChangesHandler",value:function(){var e=this;this.form.valueChanges.pipe((0,b.R)(this.destroyed$)).subscribe(function(t){e.hasFormChanges=(0,D.xF)(e.initialFormValues,t).hasDifference,e.isFormClearedByEmptyRdpProps&&e.rdpPropsCopy?e.handleFormChangesWithBackup():e.updateRdpFromForm()})}},{key:"handleFormChangesWithBackup",value:function(){this.rdpPropertiesChanged.emit(this.rdpProperties),this.rdpFormHasChanges.emit(this.hasFormChanges)}},{key:"updateRdpFromForm",value:function(){this.rdpProperties=this.serializeFormToRdp(),this.rdpPropertiesChanged.emit(this.rdpProperties),this.rdpFormHasChanges.emit(this.hasFormChanges)}},{key:"extractCustomProps",value:function(t){this.customProps.clear();var n,o=a(t.entries());try{for(o.s();!(n=o.n()).done;){var r=e(n.value,2),i=r[0],l=r[1],s=l.type,c=l.value;yo.includes(i)||this.customProps.set(i,{type:s,value:c})}}catch(d){o.e(d)}finally{o.f()}}},{key:"initFormValidityChangeHandler",value:function(){var e=this;this.form.statusChanges.pipe((0,bo.O)("VALID"),(0,b.R)(this.destroyed$)).subscribe(function(t){return e.isRdpFormValid.emit("VALID"===t)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=I["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-rdp-props-tab"]],inputs:{rdpProperties:"rdpProperties"},outputs:{rdpPropertiesChanged:"rdpPropertiesChanged",rdpFormHasChanges:"rdpFormHasChanges",isRdpFormValid:"isRdpFormValid"},decls:15,vars:14,consts:[[3,"changeTab"],["tabTitle","Connection information","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["connectionInformationTab",""],[3,"form","rdpProps","formControlsInitialized"],["tabTitle","Session behaviour"],["tabTitle","Device redirection","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["deviceRedirectionTab",""],["tabTitle","Display settings","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["displaySettingsTab",""],["tabTitle","Advanced","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["advancedTab",""],[3,"rdpProps","rdpForAdvancedTab","rdpPropsChanged"]],template:function(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"nb-tabset",0),I["\u0275\u0275listener"]("changeTab",function(){return t.tabChanged()}),I["\u0275\u0275elementStart"](1,"nb-tab",1,2),I["\u0275\u0275elementStart"](3,"ngx-connection-information-tab",3),I["\u0275\u0275listener"]("formControlsInitialized",function(e){return t.childFormControlsInitialized(e,"connectionInformation")}),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](4,"nb-tab",4),I["\u0275\u0275elementStart"](5,"ngx-session-behavior-tab",3),I["\u0275\u0275listener"]("formControlsInitialized",function(e){return t.childFormControlsInitialized(e,"sessionBehavior")}),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](6,"nb-tab",5,6),I["\u0275\u0275elementStart"](8,"ngx-device-redirection-tab",3),I["\u0275\u0275listener"]("formControlsInitialized",function(e){return t.childFormControlsInitialized(e,"deviceRedirection")}),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](9,"nb-tab",7,8),I["\u0275\u0275elementStart"](11,"ngx-display-settings-tab",3),I["\u0275\u0275listener"]("formControlsInitialized",function(e){return t.childFormControlsInitialized(e,"displaySettings")}),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](12,"nb-tab",9,10),I["\u0275\u0275elementStart"](14,"ngx-advanced-tab",11),I["\u0275\u0275listener"]("rdpPropsChanged",function(e){return t.advancedRdpPropsChanged(e)}),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){var n=I["\u0275\u0275reference"](2),o=I["\u0275\u0275reference"](7),r=I["\u0275\u0275reference"](10),i=I["\u0275\u0275reference"](13);I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("badgeDot",!n.active&&(null==t.form.controls||null==t.form.controls.connectionInformation?null:t.form.controls.connectionInformation.invalid)),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("form",t.form.controls.connectionInformation)("rdpProps",t.rdpProperties),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("form",t.form.controls.sessionBehavior)("rdpProps",t.rdpProperties),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("badgeDot",!o.active&&(null==t.form.controls||null==t.form.controls.deviceRedirection?null:t.form.controls.deviceRedirection.invalid)),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("form",t.form.controls.deviceRedirection)("rdpProps",t.rdpProperties),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("badgeDot",!r.active&&(null==t.form.controls||null==t.form.controls.displaySettings?null:t.form.controls.displaySettings.invalid)),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("form",t.form.controls.displaySettings)("rdpProps",t.rdpProperties),I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("badgeDot",!i.active&&(null==t.form.controls||null==t.form.controls.advanced?null:t.form.controls.advanced.invalid)),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("rdpProps",t.rdpProperties)("rdpForAdvancedTab",t.rdpForAdvancedTab)}},directives:[v.kyn,v.TR4,Po,Oo,Bo,Zo,rr],styles:[""]}),t}(),ar=u(73556),lr=u(77194),sr=((or=function e(){p(this,e)}).\u0275fac=function(e){return new(e||or)},or.\u0275mod=I["\u0275\u0275defineNgModule"]({type:or}),or.\u0275inj=I["\u0275\u0275defineInjector"]({imports:[[f.ez,mn,v.zyh,v.IIj,v.uuI,fn,v.KdK,v.T2N,v.EoG,F.UX,v.nKr,v.MfT,v.rgH,Qn,v.YNG,F.u5,v.CG_,v.COg,v.AE1,v.V7y,ar.A0,lr.e7]]}),or);I["\u0275\u0275setComponentScope"](J,[v.Asz,v.Q7R,v.ndF,f.O5,v.yKW,v.fMN,v.kyn,F.JL,F.sg,v.TR4,Xn,ir,no,Jt,v.XWE,v.DPz],[f.Ov])}}])}();