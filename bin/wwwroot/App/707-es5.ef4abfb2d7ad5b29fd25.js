!function(){function e(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}(self.webpackChunkngx_admin=self.webpackChunkngx_admin||[]).push([[707],{41707:function(n,r,i){"use strict";i.r(r),i.d(r,{SnapshotImportsModule:function(){return Pe}});var o=i(38583),s=i(99763),u=i(79765),p=i(46797),d=i(40205),h=i(25917),m=i(94402),f=i(45435),g=i(46782),S=i(39761),v=i(5304),y=i(54395),C=i(87519),b=i(68307),x=i(11627),I=i(43190),P=i(19773),k=i(68939),w=i(67666),E=i(11173),O=i(9857),T=i(3679),F=i(34681),A=i(27861),N=i(30110),j=(function(e){e.TenantName="SceneName",e.AssignedUserPrincipalName="AssignedUserPrincipalNameResolved",e.UsageStatus="UsageStatus",e.ImportStatus="ImportStatus",e.StartDate="StartDateTime",e.EndDate="EndDateTime"}(j||(j={})),j),M=i(76897),z=i(37716),D=i(47010),V=["popoverRef"];function _(e,t){if(1&e){var n=z["\u0275\u0275getCurrentView"]();z["\u0275\u0275elementStart"](0,"ngx-table-filter-popover",4),z["\u0275\u0275listener"]("filtersChanges",function(e){return z["\u0275\u0275restoreView"](n),z["\u0275\u0275nextContext"]().filtersChanged(e)}),z["\u0275\u0275elementEnd"]()}if(2&e){var r=z["\u0275\u0275nextContext"]();z["\u0275\u0275property"]("filters",r.filters)("filterName",r.filterName)}}var B=function(e){return{"filters-applied":e}},L=function(){var e=function(){function e(){l(this,e),this.dataSource=[],this.filtersChanges=new z.EventEmitter,this.filters=[],this.areFiltersApplied=!1,this.getObjectValueByResourcePath=function(e,t){return null==t?void 0:t.split(".").reduce(function(e,t){return e&&void 0!==e[t]?e[t]:void 0},e)}}return c(e,[{key:"ngOnInit",value:function(){this.buildFilters()}},{key:"filtersChanged",value:function(e){var t;this.areFiltersApplied=e[0].some(function(e){return e.checked}),this.filtersChanges.emit(e),null===(t=this.popoverRef)||void 0===t||t.hide()}},{key:"buildFilters",value:function(){var e,t=this;if((null===(e=this.dataSource)||void 0===e?void 0:e.length)&&this.resourcePath){var n=new Set(this.dataSource.map(function(e){return t.getObjectValueByResourcePath(e,t.resourcePath)})),r=Array.from(n);this.filters=r.map(function(e){return{label:e,checked:!1}})}}},{key:"resetAllFilters",value:function(){this.filters=this.filters.map(function(e){return a(a({},e),{},{checked:!1})}),this.areFiltersApplied=!1,this.filtersChanged([this.filters,this.filterName])}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=z["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-snapshot-imports-filter-trigger"]],viewQuery:function(e,t){var n;(1&e&&z["\u0275\u0275viewQuery"](V,7),2&e)&&(z["\u0275\u0275queryRefresh"](n=z["\u0275\u0275loadQuery"]())&&(t.popoverRef=n.first))},inputs:{resourcePath:"resourcePath",filterName:"filterName",dataSource:"dataSource"},outputs:{filtersChanges:"filtersChanges"},decls:5,vars:5,consts:[["nbButton","","size","tiny","nbPopoverTrigger","focus","nbPopoverPlacement","bottom",3,"ngClass","nbPopover","disabled","click"],["popoverRef","nbPopover"],["icon","funnel"],["tableFilterPopoverTpl",""],[3,"filters","filterName","filtersChanges"]],template:function(e,t){if(1&e&&(z["\u0275\u0275elementStart"](0,"button",0,1),z["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),z["\u0275\u0275element"](2,"nb-icon",2),z["\u0275\u0275elementEnd"](),z["\u0275\u0275template"](3,_,1,2,"ng-template",null,3,z["\u0275\u0275templateRefExtractor"])),2&e){var n=z["\u0275\u0275reference"](4);z["\u0275\u0275property"]("ngClass",z["\u0275\u0275pureFunction1"](3,B,t.areFiltersApplied))("nbPopover",n)("disabled",!t.dataSource.length&&!t.areFiltersApplied)}},directives:[O.DPz,o.mk,O.ydg,O.fMN,D.D],styles:['[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]   button.filters-applied[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-.188em;right:-.188em;width:.7em;height:.7em;border-radius:50%;background-color:var(--primary)}']}),e}(),R=i(1816),U=i(69517);function K(e,t){1&e&&z["\u0275\u0275element"](0,"nb-spinner")}function H(e,t){if(1&e){var n=z["\u0275\u0275getCurrentView"]();z["\u0275\u0275elementStart"](0,"button",27),z["\u0275\u0275listener"]("click",function(){return z["\u0275\u0275restoreView"](n),z["\u0275\u0275nextContext"](2).clearSearch()}),z["\u0275\u0275element"](1,"nb-icon",28),z["\u0275\u0275elementEnd"]()}}function $(e,t){1&e&&z["\u0275\u0275elementContainer"](0)}function Q(e,t){1&e&&z["\u0275\u0275elementContainer"](0)}function q(e,t){1&e&&z["\u0275\u0275elementContainer"](0)}function G(e,t){1&e&&z["\u0275\u0275elementContainer"](0)}function W(e,t){1&e&&z["\u0275\u0275elementContainer"](0)}function X(e,t){1&e&&z["\u0275\u0275elementContainer"](0)}function J(e,t){if(1&e){var n=z["\u0275\u0275getCurrentView"]();z["\u0275\u0275elementContainerStart"](0),z["\u0275\u0275elementStart"](1,"tr"),z["\u0275\u0275elementStart"](2,"td"),z["\u0275\u0275elementStart"](3,"nb-checkbox",30),z["\u0275\u0275listener"]("checkedChange",function(e){var t=z["\u0275\u0275restoreView"](n).$implicit;return z["\u0275\u0275nextContext"](3).selectionChanged(t,e)}),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](4,"td"),z["\u0275\u0275text"](5),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](6,"td"),z["\u0275\u0275text"](7),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](8,"td"),z["\u0275\u0275text"](9),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](10,"td"),z["\u0275\u0275text"](11),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](12,"td"),z["\u0275\u0275text"](13),z["\u0275\u0275pipe"](14,"date"),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](15,"td"),z["\u0275\u0275text"](16),z["\u0275\u0275pipe"](17,"date"),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementContainerEnd"]()}if(2&e){var r=t.$implicit;z["\u0275\u0275advance"](3),z["\u0275\u0275property"]("checked",r.IsSelected),z["\u0275\u0275advance"](2),z["\u0275\u0275textInterpolate"](r.SceneName),z["\u0275\u0275advance"](2),z["\u0275\u0275textInterpolate1"](" ",r.AssignedUserPrincipalNameResolved," "),z["\u0275\u0275advance"](2),z["\u0275\u0275textInterpolate"](r.UsageStatus),z["\u0275\u0275advance"](2),z["\u0275\u0275textInterpolate"](r.ImportStatus),z["\u0275\u0275advance"](2),z["\u0275\u0275textInterpolate"](z["\u0275\u0275pipeBind2"](14,7,r.StartDateTime,"medium")),z["\u0275\u0275advance"](3),z["\u0275\u0275textInterpolate"](z["\u0275\u0275pipeBind2"](17,10,r.EndDateTime,"medium"))}}function Y(e,t){if(1&e&&(z["\u0275\u0275elementContainerStart"](0),z["\u0275\u0275template"](1,J,18,13,"ng-container",29),z["\u0275\u0275pipe"](2,"slice"),z["\u0275\u0275elementContainerEnd"]()),2&e){var n=z["\u0275\u0275nextContext"](2);z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("ngForOf",z["\u0275\u0275pipeBind3"](2,2,n.snapshotImports,(n.paginationCurrentPage-1)*n.paginationPageSize,n.paginationCurrentPage*n.paginationPageSize))("ngForTrackBy",n.trackBySnapshotId)}}function Z(e,t){if(1&e){var n=z["\u0275\u0275getCurrentView"]();z["\u0275\u0275elementStart"](0,"tr"),z["\u0275\u0275elementStart"](1,"td",31),z["\u0275\u0275elementStart"](2,"ngx-table-empty-state",32),z["\u0275\u0275listener"]("clearSearchClick",function(){return z["\u0275\u0275restoreView"](n),z["\u0275\u0275nextContext"](2).clearSearch()})("clearFiltersClick",function(){return z["\u0275\u0275restoreView"](n),z["\u0275\u0275nextContext"](2).clearFilters()}),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"]()}if(2&e){z["\u0275\u0275nextContext"]();var r=z["\u0275\u0275reference"](16),i=z["\u0275\u0275nextContext"]();z["\u0275\u0275advance"](1),z["\u0275\u0275attribute"]("colspan",r.children.length),z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("filterState",i.filterState)}}function ee(e,t){if(1&e){var n=z["\u0275\u0275getCurrentView"]();z["\u0275\u0275elementStart"](0,"ngb-pagination",33),z["\u0275\u0275listener"]("pageChange",function(e){return z["\u0275\u0275restoreView"](n),z["\u0275\u0275nextContext"](2).paginationCurrentPage=e}),z["\u0275\u0275elementEnd"]()}if(2&e){var r=z["\u0275\u0275nextContext"](2);z["\u0275\u0275property"]("page",r.paginationCurrentPage)("collectionSize",r.snapshotImports.length)("maxSize",r.paginationMaxSize)("boundaryLinks",!0)("pageSize",r.paginationPageSize)}}function te(e,t){if(1&e&&(z["\u0275\u0275elementStart"](0,"nb-option",36),z["\u0275\u0275text"](1),z["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;z["\u0275\u0275property"]("value",n),z["\u0275\u0275advance"](1),z["\u0275\u0275textInterpolate1"](" ",n," ")}}function ne(e,t){if(1&e){var n=z["\u0275\u0275getCurrentView"]();z["\u0275\u0275elementStart"](0,"nb-select",34),z["\u0275\u0275listener"]("ngModelChange",function(e){return z["\u0275\u0275restoreView"](n),z["\u0275\u0275nextContext"](2).paginationPageSize=e})("selectedChange",function(){return z["\u0275\u0275restoreView"](n),z["\u0275\u0275nextContext"](2).saveLocalConfig()}),z["\u0275\u0275template"](1,te,2,2,"nb-option",35),z["\u0275\u0275elementEnd"]()}if(2&e){var r=z["\u0275\u0275nextContext"](2);z["\u0275\u0275property"]("ngModel",r.paginationPageSize),z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("ngForOf",r.rowsPerPageOptions)}}var re=function(e){return{"c-pointer":e}},ie=function(e){return{sortKey:e,label:"Tenant name",filterName:"SceneName"}},ae=function(e){return{sortKey:e,label:"User principal name",filterName:"AssignedUserPrincipalNameResolved"}},oe=function(e){return{sortKey:e,label:"Usage status",filterName:"UsageStatus"}},le=function(e){return{sortKey:e,label:"Import status",filterName:"ImportStatus"}},se=function(e){return{sortKey:e,label:"Start date",hideFilter:!0}},ce=function(e){return{sortKey:e,label:"End date",hideFilter:!0}};function ue(e,t){if(1&e){var n=z["\u0275\u0275getCurrentView"]();z["\u0275\u0275elementContainerStart"](0),z["\u0275\u0275elementStart"](1,"div",3),z["\u0275\u0275elementStart"](2,"div",4),z["\u0275\u0275elementStart"](3,"label",5),z["\u0275\u0275elementStart"](4,"div",6),z["\u0275\u0275elementStart"](5,"nb-form-field"),z["\u0275\u0275element"](6,"input",7),z["\u0275\u0275template"](7,H,2,0,"button",8),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](8,"div",9),z["\u0275\u0275elementStart"](9,"nb-actions",10),z["\u0275\u0275elementStart"](10,"nb-action",11),z["\u0275\u0275listener"]("click",function(){return z["\u0275\u0275restoreView"](n),z["\u0275\u0275nextContext"]().deleteSelectedSnapshots()}),z["\u0275\u0275element"](11,"nb-icon",12),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](12,"div",13),z["\u0275\u0275elementStart"](13,"table",14),z["\u0275\u0275elementStart"](14,"thead"),z["\u0275\u0275elementStart"](15,"tr",15,16),z["\u0275\u0275elementStart"](17,"th",17),z["\u0275\u0275elementStart"](18,"nb-checkbox",18),z["\u0275\u0275listener"]("checkedChange",function(e){return z["\u0275\u0275restoreView"](n),z["\u0275\u0275nextContext"]().selectAll(e)}),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275template"](19,$,1,0,"ng-container",19),z["\u0275\u0275template"](20,Q,1,0,"ng-container",19),z["\u0275\u0275template"](21,q,1,0,"ng-container",19),z["\u0275\u0275template"](22,G,1,0,"ng-container",19),z["\u0275\u0275template"](23,W,1,0,"ng-container",19),z["\u0275\u0275template"](24,X,1,0,"ng-container",19),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](25,"tbody"),z["\u0275\u0275template"](26,Y,3,6,"ng-container",0),z["\u0275\u0275template"](27,Z,3,2,"tr",0),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275template"](28,ee,1,5,"ngb-pagination",20),z["\u0275\u0275elementStart"](29,"div",21),z["\u0275\u0275template"](30,ne,2,2,"nb-select",22),z["\u0275\u0275elementStart"](31,"button",23),z["\u0275\u0275listener"]("click",function(){return z["\u0275\u0275restoreView"](n),z["\u0275\u0275nextContext"]().selectPage()}),z["\u0275\u0275element"](32,"nb-icon",24),z["\u0275\u0275text"](33," Select page "),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](34,"button",25),z["\u0275\u0275listener"]("click",function(){return z["\u0275\u0275restoreView"](n),z["\u0275\u0275nextContext"]().update()}),z["\u0275\u0275element"](35,"nb-icon",26),z["\u0275\u0275text"](36," Update "),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementContainerEnd"]()}if(2&e){var r=z["\u0275\u0275nextContext"](),i=z["\u0275\u0275reference"](8);z["\u0275\u0275advance"](6),z["\u0275\u0275property"]("formControl",r.searchFormControl),z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("ngIf",r.searchFormControl.value),z["\u0275\u0275advance"](3),z["\u0275\u0275propertyInterpolate"]("nbTooltip",r.hasSelectedSnapshots?"Delete":"Select at least one item in the table to delete migration snapshots"),z["\u0275\u0275property"]("disabled",!r.hasSelectedSnapshots)("ngClass",z["\u0275\u0275pureFunction1"](23,re,r.hasSelectedSnapshots)),z["\u0275\u0275advance"](8),z["\u0275\u0275property"]("checked",r.areAllChecked)("indeterminate",r.isIntermediateState),z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("ngTemplateOutlet",i)("ngTemplateOutletContext",z["\u0275\u0275pureFunction1"](25,ie,r.sortKeys.TenantName)),z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("ngTemplateOutlet",i)("ngTemplateOutletContext",z["\u0275\u0275pureFunction1"](27,ae,r.sortKeys.AssignedUserPrincipalName)),z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("ngTemplateOutlet",i)("ngTemplateOutletContext",z["\u0275\u0275pureFunction1"](29,oe,r.sortKeys.UsageStatus)),z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("ngTemplateOutlet",i)("ngTemplateOutletContext",z["\u0275\u0275pureFunction1"](31,le,r.sortKeys.ImportStatus)),z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("ngTemplateOutlet",i)("ngTemplateOutletContext",z["\u0275\u0275pureFunction1"](33,se,r.sortKeys.StartDate)),z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("ngTemplateOutlet",i)("ngTemplateOutletContext",z["\u0275\u0275pureFunction1"](35,ce,r.sortKeys.EndDate)),z["\u0275\u0275advance"](2),z["\u0275\u0275property"]("ngIf",r.snapshotImports.length),z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("ngIf",r.isEmptyStateVisible),z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("ngIf",r.snapshotImports.length>r.MAX_LENGTH_TO_SHOW_ELEMENT),z["\u0275\u0275advance"](2),z["\u0275\u0275property"]("ngIf",r.snapshotImports.length>r.MAX_LENGTH_TO_SHOW_ELEMENT)}}function pe(e,t){1&e&&z["\u0275\u0275elementContainer"](0)}function de(e,t){if(1&e){var n=z["\u0275\u0275getCurrentView"]();z["\u0275\u0275elementStart"](0,"ngx-snapshot-imports-filter-trigger",41),z["\u0275\u0275listener"]("filtersChanges",function(e){return z["\u0275\u0275restoreView"](n),z["\u0275\u0275nextContext"](2).populateFiltersSet(e)}),z["\u0275\u0275elementEnd"]()}if(2&e){var r=z["\u0275\u0275nextContext"](),i=r.sortKey,a=r.filterName,o=z["\u0275\u0275nextContext"]();z["\u0275\u0275property"]("resourcePath",i)("filterName",a)("dataSource",o.snapshotImports)}}var he=function(e){return{$implicit:e}};function me(e,t){if(1&e){var n=z["\u0275\u0275getCurrentView"]();z["\u0275\u0275elementStart"](0,"th",37),z["\u0275\u0275listener"]("click",function(){var e=z["\u0275\u0275restoreView"](n).sortKey;return z["\u0275\u0275nextContext"]().toggleSort(e)}),z["\u0275\u0275elementStart"](1,"div",38),z["\u0275\u0275elementStart"](2,"span"),z["\u0275\u0275text"](3),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](4,"div",39),z["\u0275\u0275template"](5,pe,1,0,"ng-container",19),z["\u0275\u0275template"](6,de,1,3,"ngx-snapshot-imports-filter-trigger",40),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"]()}if(2&e){var r=t.sortKey,i=t.label,a=t.hideFilter;z["\u0275\u0275nextContext"]();var o=z["\u0275\u0275reference"](10);z["\u0275\u0275advance"](3),z["\u0275\u0275textInterpolate"](i),z["\u0275\u0275advance"](2),z["\u0275\u0275property"]("ngTemplateOutlet",o)("ngTemplateOutletContext",z["\u0275\u0275pureFunction1"](4,he,r)),z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("ngIf",!a)}}function fe(e,t){if(1&e&&(z["\u0275\u0275elementContainerStart"](0),z["\u0275\u0275element"](1,"nb-icon",42),z["\u0275\u0275elementContainerEnd"]()),2&e){var n=z["\u0275\u0275nextContext"](2);z["\u0275\u0275advance"](1),z["\u0275\u0275propertyInterpolate"]("nbTooltip","asc"===n.sortDirection?"Sorted ascending":"Sorted descending"),z["\u0275\u0275propertyInterpolate1"]("icon","arrow-","asc"===n.sortDirection?"down":"up","")}}function ge(e,t){if(1&e&&z["\u0275\u0275template"](0,fe,2,2,"ng-container",0),2&e){var n=t.$implicit,r=z["\u0275\u0275nextContext"]();z["\u0275\u0275property"]("ngIf",r.sortColumn===n)}}var Se,ve,ye=[{path:"**",redirectTo:"migration-snapshots",pathMatch:"full"},{path:"",component:(Se=function(){function n(e,t,r,i){var a=this;l(this,n),this.wd365Service=e,this.toastrService=t,this.actionsService=r,this.dialogService=i,this.destroyed$=new u.xQ,this.filterState={searchQuery:"",columnFilters:{}},this.selectedSnapshotIds=new Set,this.selectedSnapshots=[],this.rowsPerPageOptions=[20,50,80,100,150,200],this.MAX_LENGTH_TO_SHOW_ELEMENT=20,this.isEmptyStateVisible=!1,this.snapshotImports$=new u.xQ,this.snapshotImports=[],this.snapshotImportsCache=[],this.isLoading=!1,this.searchFormControl=new T.NI(""),this.paginationCurrentPage=1,this.paginationPageSize=this.rowsPerPageOptions[0],this.paginationMaxSize=10,this.sortKeys=j,this.sortColumn="",this.sortDirection="asc",this.trackBySnapshotId=function(e,t){return t.SnapshotId},this.retryApiCallWithToastCallback=function(e){return e.pipe((0,b.b)(function(e){return a.showDangerToast("Failure accessing the API","Cannot read data from API. The message is: ".concat(e.message," with status ").concat(e.statusText))}),(0,x.j)(function(){return(0,p.H)(M.e5)}))},this.handleApiErrorCallback=function(e){return(0,d._)(function(){return a.showDangerToast("Failure accessing the API","Cannot read data from API. Reload this site to try it again. The message is: ".concat(e.message," with status ").concat(e.statusText)),(0,h.of)([])})}}return c(n,[{key:"hasSelectedSnapshots",get:function(){return this.selectedSnapshots.length>0}},{key:"areAllChecked",get:function(){return this.snapshotImports.length>0&&this.snapshotImports.every(function(e){return e.IsSelected})}},{key:"isIntermediateState",get:function(){var e=this.snapshotImports.filter(function(e){return e.IsSelected}).length;return e>0&&e<this.snapshotImports.length}},{key:"ngOnInit",value:function(){this.loadPageSizeFromLocalStorage(),this.initMigrationSnapshots(),this.initTableSearch()}},{key:"loadPageSizeFromLocalStorage",value:function(){var e=localStorage.getItem("Hydra.SnapshotImports.PageSize");e&&Number(e)&&(this.paginationPageSize=Number(e))}},{key:"toggleSort",value:function(e){this.sortColumn===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.applySorting()}},{key:"selectionChanged",value:function(e,t){e.IsSelected=t,t?this.selectedSnapshotIds.add(e.SnapshotId):this.selectedSnapshotIds.delete(e.SnapshotId),this.countSelected()}},{key:"deleteSelectedSnapshots",value:function(){var e=this;this.hasSelectedSnapshots&&this.dialogService.open(N.z,{context:{headerTitle:"Delete migration snapshot(s)",bodyText:"Please confirm deletion of ".concat(this.selectedSnapshots.length," migration snapshot(s)"),cancelButtonText:"Cancel",confirmButtonText:"Delete"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1}).onClose.pipe((0,f.h)(Boolean),(0,I.w)(function(){return(0,m.D)(e.selectedSnapshots).pipe((0,P.zg)(function(t){return e.actionsService.sendActionAsync("scenes/".concat(t.SceneId,"/win365/snapshotImports/").concat(t.SnapshotId,"/deletecloudpcsnapshotimport"),null,"Delete snapshot import",t.AssignedUserPrincipalNameResolved)},3))}),(0,k.x)(function(){return e.update()}),(0,g.R)(this.destroyed$)).subscribe()}},{key:"selectAll",value:function(e){e?this.selectAllOnPage(this.snapshotImports):this.deselectAllOnPage(this.snapshotImports),this.countSelected()}},{key:"selectPage",value:function(){var e=this.getSnapshotsPageSlice();e.every(function(e){return e.IsSelected})?this.deselectAllOnPage(e):this.selectAllOnPage(e),this.countSelected()}},{key:"clearSearch",value:function(){this.searchFormControl.setValue("")}},{key:"clearFilters",value:function(){var e;this.filterState=a(a({},this.filterState),{},{columnFilters:{}}),this.paginationCurrentPage=1,null===(e=this.filterTriggers)||void 0===e||e.forEach(function(e){return e.resetAllFilters()}),this.applyAllFilters()}},{key:"saveLocalConfig",value:function(){localStorage.setItem("Hydra.SnapshotImports.PageSize",this.paginationPageSize.toString())}},{key:"update",value:function(){this.snapshotImports$.next()}},{key:"populateFiltersSet",value:function(e){var n=t(e,2),r=n[0],i=n[1];this.filterState.columnFilters[i]=r.filter(function(e){return e.checked}).map(function(e){return e.label.toLowerCase()}),this.applyAllFilters()}},{key:"countSelected",value:function(){this.selectedSnapshots=this.snapshotImports.filter(function(e){return e.IsSelected})}},{key:"getSnapshotsPageSlice",value:function(){return this.snapshotImports.slice((this.paginationCurrentPage-1)*this.paginationPageSize,this.paginationCurrentPage*this.paginationPageSize)}},{key:"selectAllOnPage",value:function(e){var t=this;e.forEach(function(e){e.IsSelected=!0,t.selectedSnapshotIds.add(e.SnapshotId)})}},{key:"deselectAllOnPage",value:function(e){var t=this;e.forEach(function(e){e.IsSelected=!1,t.selectedSnapshotIds.delete(e.SnapshotId)})}},{key:"preserveSelection",value:function(e){var t=this;return e.map(function(e){return a(a({},e),{},{IsSelected:t.selectedSnapshotIds.has(e.SnapshotId)})})}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"initMigrationSnapshots",value:function(){var t=this;this.isLoading=!0,this.snapshotImports$.pipe((0,S.O)(0),(0,I.w)(function(){return(0,p.H)(0,E.tc.autoRefreshDefault)}),(0,I.w)(function(){return t.wd365Service.getClouPcMigrationSnapshots()}),(0,w.a)(this.retryApiCallWithToastCallback),(0,v.K)(this.handleApiErrorCallback),(0,g.R)(this.destroyed$)).subscribe(function(n){var r=t.preserveSelection(n);t.snapshotImportsCache=e(r),t.applyAllFilters(),t.isLoading=!1,t.updateEmptyStateVisibility()})}},{key:"updateEmptyStateVisibility",value:function(){this.isEmptyStateVisible=!this.isLoading&&0===this.snapshotImports.length}},{key:"initTableSearch",value:function(){var e=this;this.searchFormControl.valueChanges.pipe((0,y.b)(M.XU),(0,C.x)(),(0,g.R)(this.destroyed$)).subscribe(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.filterState.searchQuery=t.trim(),e.applyAllFilters()})}},{key:"applyAllFilters",value:function(){var t=this;this.paginationCurrentPage=1;var n=e(this.snapshotImportsCache);Object.keys(this.filterState.columnFilters).some(function(e){var n;return(null===(n=t.filterState.columnFilters[e])||void 0===n?void 0:n.length)>0})&&(n=this.applyColumnFilters(n)),this.filterState.searchQuery&&(n=this.applySearchFilter(n)),this.snapshotImports=n,this.updateEmptyStateVisibility(),this.applySorting()}},{key:"applySorting",value:function(){this.sortColumn&&this.sortByPropertyPath(this.sortColumn)}},{key:"applyColumnFilters",value:function(e){var t=this,n=Object.keys(this.filterState.columnFilters).filter(function(e){var n;return(null===(n=t.filterState.columnFilters[e])||void 0===n?void 0:n.length)>0});return n.length?e.filter(function(e){return n.every(function(n){var r,i=t.filterState.columnFilters[n],a=null===(r=function(e,t){switch(t){case"SceneName":return e.SceneName;case"AssignedUserPrincipalNameResolved":return e.AssignedUserPrincipalNameResolved;case"UsageStatus":return e.UsageStatus;case"ImportStatus":return e.ImportStatus;default:return""}}(e,n))||void 0===r?void 0:r.toLowerCase();return i.includes(a)})}):e}},{key:"applySearchFilter",value:function(e){var t,n=null===(t=this.filterState)||void 0===t?void 0:t.searchQuery.toLowerCase();return e.filter(function(e){var t,r,i,a,o,l,s=null!==(r=null===(t=e.SceneName)||void 0===t?void 0:t.toLowerCase())&&void 0!==r?r:"",c=null!==(a=null===(i=e.AssignedUserPrincipalNameResolved)||void 0===i?void 0:i.toLowerCase())&&void 0!==a?a:"",u=null!==(o=e.UsageStatus.toLowerCase())&&void 0!==o?o:"",p=null!==(l=e.ImportStatus.toLowerCase())&&void 0!==l?l:"";return(null==s?void 0:s.includes(n))||(null==c?void 0:c.includes(n))||(null==u?void 0:u.includes(n))||(null==p?void 0:p.includes(n))})}},{key:"sortByPropertyPath",value:function(e){var t=this,n=e.split(".");console.log(n),this.snapshotImports.sort(function(e,r){var i=t.getNestedProperty(e,n),a=t.getNestedProperty(r,n);return console.log(i),console.log(a),i=null==i?"":i,a=null==a?"":a,"asc"===t.sortDirection?i>a?1:i<a?-1:0:i<a?1:i>a?-1:0})}},{key:"getNestedProperty",value:function(e,t){return t.reduce(function(e,t){return e&&void 0!==e[t]?e[t]:void 0},e)}},{key:"showDangerToast",value:function(e,t){this.toastrService.danger(t,e,{destroyByClick:!0,duration:2e4,hasIcon:!0,position:O.fe3.TOP_RIGHT,preventDuplicates:!0})}}]),n}(),Se.\u0275fac=function(e){return new(e||Se)(z["\u0275\u0275directiveInject"](F.G),z["\u0275\u0275directiveInject"](O.quB),z["\u0275\u0275directiveInject"](A.c),z["\u0275\u0275directiveInject"](O.Gln))},Se.\u0275cmp=z["\u0275\u0275defineComponent"]({type:Se,selectors:[["ngx-snapshotImports"]],viewQuery:function(e,t){var n;1&e&&z["\u0275\u0275viewQuery"](L,5),2&e&&z["\u0275\u0275queryRefresh"](n=z["\u0275\u0275loadQuery"]())&&(t.filterTriggers=n)},decls:11,vars:2,consts:[[4,"ngIf"],["tableHeaderCellTpl",""],["sortTableIconTpl",""],[1,"row"],[1,"col-md-5"],["for","search_query",1,"w-100"],[1,"search-input-wrapper"],["id","search_query","type","text","placeholder","Search for tenant, user principal name, or status","nbInput","","fullWidth","",1,"search-input",3,"formControl"],["nbTooltip","Clear search","nbSuffix","","nbButton","","ghost","",3,"click",4,"ngIf"],[1,"col-md-7","d-flex","justify-content-end"],["size","small"],["nbTooltipPlacement","top",3,"disabled","ngClass","nbTooltip","click"],["icon","trash-2-outline"],[1,"table-responsive"],[1,"table","table-bordered","table-striped"],[1,"align-top"],["headerRow",""],[1,"align-top","skip-sorting"],[3,"checked","indeterminate","checkedChange"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","d-flex justify-content-center",3,"page","collectionSize","maxSize","boundaryLinks","pageSize","pageChange",4,"ngIf"],[1,"d-flex","justify-content-center","p-2"],["nbTooltip","How many rows to list on one page",3,"ngModel","ngModelChange","selectedChange",4,"ngIf"],["type","button","nbButton","","nbTooltip","Select all migration snapshots on this page",3,"click"],["icon","checkmark-square"],["type","button","nbButton","","status","semi-round",3,"click"],["icon","refresh"],["nbTooltip","Clear search","nbSuffix","","nbButton","","ghost","",3,"click"],["icon","close-outline"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"checked","checkedChange"],[1,"text-center","p-5"],[3,"filterState","clearSearchClick","clearFiltersClick"],[1,"d-flex","justify-content-center",3,"page","collectionSize","maxSize","boundaryLinks","pageSize","pageChange"],["nbTooltip","How many rows to list on one page",3,"ngModel","ngModelChange","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"align-top",3,"click"],[1,"d-flex","justify-content-between"],[1,"d-flex","align-items-center"],[3,"resourcePath","filterName","dataSource","filtersChanges",4,"ngIf"],[3,"resourcePath","filterName","dataSource","filtersChanges"],[1,"sort-direction-icon","mr-1",3,"nbTooltip","icon"]],template:function(e,t){1&e&&(z["\u0275\u0275elementStart"](0,"nb-card"),z["\u0275\u0275elementStart"](1,"nb-card-header"),z["\u0275\u0275elementStart"](2,"h1"),z["\u0275\u0275text"](3,"Migration snapshots"),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](4,"nb-card-body"),z["\u0275\u0275template"](5,K,1,0,"nb-spinner",0),z["\u0275\u0275template"](6,ue,37,37,"ng-container",0),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275template"](7,me,7,6,"ng-template",null,1,z["\u0275\u0275templateRefExtractor"]),z["\u0275\u0275template"](9,ge,1,1,"ng-template",null,2,z["\u0275\u0275templateRefExtractor"])),2&e&&(z["\u0275\u0275advance"](5),z["\u0275\u0275property"]("ngIf",t.isLoading),z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("ngIf",!t.isLoading))},directives:[O.Asz,O.ndF,O.yKW,o.O5,O.Tzq,O.jBG,O.h8i,T.Fj,T.JJ,T.oH,O.lYD,O.Bk3,o.mk,O.jNv,O.fMN,O.NTf,o.tP,O.DPz,O.yyc,o.sg,R.$,U.N9,O.rs,T.On,O.q51,L],pipes:[o.OU,o.uU],styles:["[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:not(.skip-sorting){-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}[_nghost-%COMP%]   .sort-direction-icon[_ngcontent-%COMP%]{font-size:1em;cursor:default}"]}),Se)}],Ce=function(){var e=function e(){l(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=z["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=z["\u0275\u0275defineInjector"]({imports:[[s.Bz.forChild(ye)],s.Bz]}),e}(),be=i(66911),xe=i(61367),Ie=i(88100),Pe=((ve=function e(){l(this,e)}).\u0275fac=function(e){return new(e||ve)},ve.\u0275mod=z["\u0275\u0275defineNgModule"]({type:ve}),ve.\u0275inj=z["\u0275\u0275defineInjector"]({imports:[[o.ez,Ce,be.m,T.u5,O.zyh,O.KdK,U.jF,O.T2N,O.uuI,O.MAY,O.MfT,O.nKr,O.rgH,T.UX,xe.H,Ie.Z,O.spT,O.x4g,O.IIj,O.V7y,Ie.Z]]}),ve)}}])}();