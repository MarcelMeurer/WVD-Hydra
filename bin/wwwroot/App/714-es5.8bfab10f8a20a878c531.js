!function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkngx_admin=self.webpackChunkngx_admin||[]).push([[714],{98714:function(e,r,o){"use strict";o.r(r),o.d(r,{TenantsModule:function(){return O}});var i=o(38583),l=o(99763),a=o(27861),d=function e(){n(this,e),this.Enabled=!0,this.UseManagedServiceIdentity=!1,this.AadEndpoints="Global",this.UseResForAad=!1,this.ResTenantId="00000000-0000-0000-0000-000000000000",this.ResApplicationId="00000000-0000-0000-0000-000000000000",this.ResApplication2Id="00000000-0000-0000-0000-000000000000",this.ResApplication3Id="00000000-0000-0000-0000-000000000000",this.ResApplication4Id="00000000-0000-0000-0000-000000000000",this.ResApplication5Id="00000000-0000-0000-0000-000000000000",this.ResEndpoints="Global",this.W365Enabled=!1,this.IntuneEnabled=!1},s=[{name:"Global",id:"Global"},{name:"US Government",id:"AzureUSGovernment"},{name:"China Cloud",id:"AzureChinaCloud"}],c=function e(){n(this,e),this.Endpoints="Global"},p=o(11173),m=o(79765),u=o(46782),v=o(92340),h=o(47349),f=o(37716),g=o(91841),S=function(){var e=function(){function e(t){n(this,e),this.httpClient=t,this.apiUrl="".concat(v.N.apiUrl,"/data/scenes")}return t(e,[{key:"getTenants",value:function(){return this.httpClient.get("".concat(this.apiUrl)).pipe((0,h.d)({refCount:!0,bufferSize:1}))}},{key:"getTenantSecretsFor",value:function(e){return this.httpClient.get("".concat(this.apiUrl,"/").concat(e,"/HydraAgentTenantKeys")).pipe((0,h.d)({refCount:!0,bufferSize:1}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275inject"](g.eN))},e.\u0275prov=f["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function y(e,t,n,r,o,i,l){try{var a=e[i](l),d=a.value}catch(s){return void n(s)}a.done?t(d):Promise.resolve(d).then(r,o)}var E=o(9857);function x(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"p"),f["\u0275\u0275text"](2,'The Hydra Agent provides you with insights into Cloud PCs, including real-time monitoring of key performance parameters, user processes, and latencies. Use a software deployment solution, such as Intune, to copy the Hydra Agent from the ZIP file to the "C:\\Program Files\\ITProCloud\\HydraAgent" directory. Run the following command in the Hydra Agent folder with administrative permissions to install it.'),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](3,"textarea",3),f["\u0275\u0275elementStart"](4,"button",4),f["\u0275\u0275listener"]("click",function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().copyToClipboard()}),f["\u0275\u0275element"](5,"nb-icon",5),f["\u0275\u0275text"](6," Copy "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](7,"p"),f["\u0275\u0275element"](8,"br"),f["\u0275\u0275text"](9,"Keep the keys from the installation command secure and don't share."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](10,"div",6),f["\u0275\u0275elementStart"](11,"a",7),f["\u0275\u0275text"](12,"Donwload the Hydra Agent ZIP file"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()}if(2&e){var r=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("value",r.commandWithSecrets),f["\u0275\u0275advance"](8),f["\u0275\u0275property"]("href",r.hydraAgentDownloadUrl,f["\u0275\u0275sanitizeUrl"])}}var b=function(){var e=function(){function e(t,r,o){n(this,e),this.tenantsService=t,this.dialogRef=r,this.toastrService=o,this.destroyed$=new m.xQ,this.apiUrl="".concat(v.N.apiUrl),this.isLoading=!1}return t(e,[{key:"ngOnInit",value:function(){this.initHydraAgentTenantKeys()}},{key:"copyToClipboard",value:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(t.commandWithSecrets);case 3:t.toastrService.success("Copied to clipboard","Success",{icon:"checkmark-circle-2-outline",preventDuplicates:!0}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t.toastrService.danger("Failed to copy to clipboard","Error",{icon:"alert-triangle-outline",preventDuplicates:!0});case 9:case"end":return e.stop()}},e,null,[[0,6]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function l(e){y(i,r,o,l,a,"next",e)}function a(e){y(i,r,o,l,a,"throw",e)}l(void 0)})})()}},{key:"close",value:function(){this.dialogRef.close()}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"initHydraAgentTenantKeys",value:function(){var e=this;this.isLoading=!0,this.tenantsService.getTenantSecretsFor(this.sceneId).pipe((0,u.R)(this.destroyed$)).subscribe({next:function(t){var n;e.commandWithSecrets='HydraAgent.exe -u "wss://'.concat(t.BaseUrl,'/wsx" -s "').concat(null!==(n=t.HydraInstanceKey)&&void 0!==n?n:"",'" -t "').concat(t.SceneKey,'" -i'),e.hydraAgentDownloadUrl="".concat(e.apiUrl,"/download/HydraAgent"),e.isLoading=!1},error:function(){return e.isLoading=!1}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](S),f["\u0275\u0275directiveInject"](E.X4l),f["\u0275\u0275directiveInject"](E.quB))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-tenants-hydra-agent-secrets-dialog"]],inputs:{sceneId:"sceneId"},decls:8,vars:2,consts:[[3,"nbSpinner"],[4,"ngIf"],["nbButton","",3,"click"],["nbInput","","fullWidth","","readonly","",3,"value"],["nbButton","","size","tiny","nbTooltip","Copy to clipboard",3,"click"],["icon","copy-outline"],[1,"mt-5"],[3,"href"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"nb-card",0),f["\u0275\u0275elementStart"](1,"nb-card-header"),f["\u0275\u0275text"](2,"Install Hydra Agent for Cloud PCs"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"nb-card-body"),f["\u0275\u0275template"](4,x,13,2,"ng-container",1),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"nb-card-footer"),f["\u0275\u0275elementStart"](6,"button",2),f["\u0275\u0275listener"]("click",function(){return t.close()}),f["\u0275\u0275text"](7,"Close"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e&&(f["\u0275\u0275property"]("nbSpinner",t.isLoading),f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("ngIf",!t.isLoading))},directives:[E.Asz,E.Q7R,E.ndF,E.yKW,i.O5,E.XWE,E.DPz,E.h8i,E.jNv,E.fMN],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:45rem;min-height:25rem}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{field-sizing:content;min-height:4em;resize:none}"]}),e}(),I=function(){var e=function(){function e(t){n(this,e),this.dialogRef=t}return t(e,[{key:"close",value:function(){this.dialogRef.close()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](E.X4l))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-tenants-reminder-dialog"]],decls:11,vars:0,consts:[["nbButton","",3,"click"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"nb-card"),f["\u0275\u0275elementStart"](1,"nb-card-header"),f["\u0275\u0275text"](2,"Set a Reminder"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"nb-card-body"),f["\u0275\u0275elementStart"](4,"p"),f["\u0275\u0275text"](5," Please regularly check that all secrets of service principals are not expiring over the next time and create a reminder to update the secrets early enough. "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"p"),f["\u0275\u0275text"](7,"Hydra will fail when the validity period has expired."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"nb-card-footer"),f["\u0275\u0275elementStart"](9,"button",0),f["\u0275\u0275listener"]("click",function(){return t.close()}),f["\u0275\u0275text"](10,"Got it"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]())},directives:[E.Asz,E.ndF,E.yKW,E.XWE,E.DPz],styles:[""]}),e}(),A=o(3679);function C(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",31),f["\u0275\u0275elementStart"](1,"button",32),f["\u0275\u0275listener"]("click",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"](2).$implicit;return f["\u0275\u0275nextContext"]().openHydraAgentTenantsKeysDialog(e,t.Id)}),f["\u0275\u0275text"](2," Get Hydra Agent "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}}function R(e,t){1&e&&f["\u0275\u0275element"](0,"div",14)}function M(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",0),f["\u0275\u0275elementStart"](1,"div",14),f["\u0275\u0275elementStart"](2,"div",10),f["\u0275\u0275elementStart"](3,"label",27),f["\u0275\u0275text"](4,"Enable Windows 365 management (read tool-tip)"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"nb-checkbox",28),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"]().index;return f["\u0275\u0275nextContext"]().model[t].W365Enabled=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](6,C,3,0,"div",29),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](7,R,1,0,"div",30),f["\u0275\u0275elementEnd"]()}if(2&e){var r=f["\u0275\u0275nextContext"]().index,o=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](5),f["\u0275\u0275propertyInterpolate1"]("name","W365Enabled",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].W365Enabled),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",o.model[r].W365Enabled),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",o.model[r].W365Enabled)}}function w(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"nb-option",48),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;f["\u0275\u0275property"]("value",n.id),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function T(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"nb-option",48),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;f["\u0275\u0275property"]("value",n.id),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function k(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",10),f["\u0275\u0275elementStart"](1,"label",50),f["\u0275\u0275text"](2,"Use resource principals also for Entra ID / Azure AD access (very large environments)"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"nb-checkbox",51),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"](3).index;return f["\u0275\u0275nextContext"]().model[t].UseResForAad=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){var r=f["\u0275\u0275nextContext"](3).index,o=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("name","UseResForAad",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].UseResForAad)}}var V=function(e){return{"is-invalid":e}};function D(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div"),f["\u0275\u0275elementStart"](1,"div",0),f["\u0275\u0275elementStart"](2,"div",14),f["\u0275\u0275elementStart"](3,"div",10),f["\u0275\u0275elementStart"](4,"label",17),f["\u0275\u0275text"](5,"Application id"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"div",18),f["\u0275\u0275elementStart"](7,"input",41),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"](2).index;return f["\u0275\u0275nextContext"]().model[t].ResApplication2Id=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"div",39),f["\u0275\u0275elementStart"](9,"div",10),f["\u0275\u0275elementStart"](10,"label",17),f["\u0275\u0275text"](11,"Secret"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](12,"div",18),f["\u0275\u0275elementStart"](13,"input",42),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"](2).index;return f["\u0275\u0275nextContext"]().model[t].ResApplication2SecretEncrypted=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](14,"div",43),f["\u0275\u0275elementStart"](15,"button",44),f["\u0275\u0275listener"]("click",function(){f["\u0275\u0275restoreView"](n);var e=f["\u0275\u0275nextContext"](2).index;return f["\u0275\u0275nextContext"]().testSecondary2(e)}),f["\u0275\u0275element"](16,"nb-icon",45),f["\u0275\u0275text"](17," Test "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](18,"div",0),f["\u0275\u0275elementStart"](19,"div",14),f["\u0275\u0275elementStart"](20,"div",10),f["\u0275\u0275elementStart"](21,"label",17),f["\u0275\u0275text"](22,"Application id"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](23,"div",18),f["\u0275\u0275elementStart"](24,"input",41),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"](2).index;return f["\u0275\u0275nextContext"]().model[t].ResApplication3Id=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](25,"div",39),f["\u0275\u0275elementStart"](26,"div",10),f["\u0275\u0275elementStart"](27,"label",17),f["\u0275\u0275text"](28,"Secret"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](29,"div",18),f["\u0275\u0275elementStart"](30,"input",42),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"](2).index;return f["\u0275\u0275nextContext"]().model[t].ResApplication3SecretEncrypted=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](31,"div",43),f["\u0275\u0275elementStart"](32,"button",44),f["\u0275\u0275listener"]("click",function(){f["\u0275\u0275restoreView"](n);var e=f["\u0275\u0275nextContext"](2).index;return f["\u0275\u0275nextContext"]().testSecondary3(e)}),f["\u0275\u0275element"](33,"nb-icon",45),f["\u0275\u0275text"](34," Test "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](35,"div",0),f["\u0275\u0275elementStart"](36,"div",14),f["\u0275\u0275elementStart"](37,"div",10),f["\u0275\u0275elementStart"](38,"label",17),f["\u0275\u0275text"](39,"Application id"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](40,"div",18),f["\u0275\u0275elementStart"](41,"input",41),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"](2).index;return f["\u0275\u0275nextContext"]().model[t].ResApplication4Id=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](42,"div",39),f["\u0275\u0275elementStart"](43,"div",10),f["\u0275\u0275elementStart"](44,"label",17),f["\u0275\u0275text"](45,"Secret"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](46,"div",18),f["\u0275\u0275elementStart"](47,"input",42),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"](2).index;return f["\u0275\u0275nextContext"]().model[t].ResApplication4SecretEncrypted=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](48,"div",43),f["\u0275\u0275elementStart"](49,"button",44),f["\u0275\u0275listener"]("click",function(){f["\u0275\u0275restoreView"](n);var e=f["\u0275\u0275nextContext"](2).index;return f["\u0275\u0275nextContext"]().testSecondary4(e)}),f["\u0275\u0275element"](50,"nb-icon",45),f["\u0275\u0275text"](51," Test "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](52,"div",0),f["\u0275\u0275elementStart"](53,"div",14),f["\u0275\u0275elementStart"](54,"div",10),f["\u0275\u0275elementStart"](55,"label",17),f["\u0275\u0275text"](56,"Application id"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](57,"div",18),f["\u0275\u0275elementStart"](58,"input",41),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"](2).index;return f["\u0275\u0275nextContext"]().model[t].ResApplication5Id=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](59,"div",39),f["\u0275\u0275elementStart"](60,"div",10),f["\u0275\u0275elementStart"](61,"label",17),f["\u0275\u0275text"](62,"Secret"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](63,"div",18),f["\u0275\u0275elementStart"](64,"input",42),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"](2).index;return f["\u0275\u0275nextContext"]().model[t].ResApplication5SecretEncrypted=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](65,"div",43),f["\u0275\u0275elementStart"](66,"button",44),f["\u0275\u0275listener"]("click",function(){f["\u0275\u0275restoreView"](n);var e=f["\u0275\u0275nextContext"](2).index;return f["\u0275\u0275nextContext"]().testSecondary5(e)}),f["\u0275\u0275element"](67,"nb-icon",45),f["\u0275\u0275text"](68," Test "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](69,k,4,2,"div",49),f["\u0275\u0275elementEnd"]()}if(2&e){var r=f["\u0275\u0275nextContext"](2).index,o=f["\u0275\u0275nextContext"](),i=f["\u0275\u0275reference"](3);f["\u0275\u0275advance"](4),f["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplication2Id",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplication2Id",r,""),f["\u0275\u0275propertyInterpolate1"]("name","ResApplication2Id",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].ResApplication2Id)("ngClass",f["\u0275\u0275pureFunction1"](41,V,o.submitted&&"INVALID"==(null==i.form.controls["ResApplication2Id"+r]?null:i.form.controls["ResApplication2Id"+r].status))),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplication2SecretEncrypted",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplication2SecretEncrypted",r,""),f["\u0275\u0275propertyInterpolate1"]("name","ResApplication2SecretEncrypted",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].ResApplication2SecretEncrypted)("ngClass",f["\u0275\u0275pureFunction1"](43,V,o.submitted&&"INVALID"==(null==i.form.controls["ResApplication2SecretEncrypted"+r]?null:i.form.controls["ResApplication2SecretEncrypted"+r].status))),f["\u0275\u0275advance"](8),f["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplication3Id",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplication3Id",r,""),f["\u0275\u0275propertyInterpolate1"]("name","ResApplication3Id",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].ResApplication3Id)("ngClass",f["\u0275\u0275pureFunction1"](45,V,o.submitted&&"INVALID"==(null==i.form.controls["ResApplication3Id"+r]?null:i.form.controls["ResApplication3Id"+r].status))),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplication3SecretEncrypted",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplication3SecretEncrypted",r,""),f["\u0275\u0275propertyInterpolate1"]("name","ResApplication3SecretEncrypted",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].ResApplication3SecretEncrypted)("ngClass",f["\u0275\u0275pureFunction1"](47,V,o.submitted&&"INVALID"==(null==i.form.controls["ResApplication3SecretEncrypted"+r]?null:i.form.controls["ResApplication3SecretEncrypted"+r].status))),f["\u0275\u0275advance"](8),f["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplication4Id",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplication4Id",r,""),f["\u0275\u0275propertyInterpolate1"]("name","ResApplication4Id",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].ResApplication4Id)("ngClass",f["\u0275\u0275pureFunction1"](49,V,o.submitted&&"INVALID"==(null==i.form.controls["ResApplication4Id"+r]?null:i.form.controls["ResApplication4Id"+r].status))),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplication4SecretEncrypted",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplication4SecretEncrypted",r,""),f["\u0275\u0275propertyInterpolate1"]("name","ResApplication4SecretEncrypted",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].ResApplication4SecretEncrypted)("ngClass",f["\u0275\u0275pureFunction1"](51,V,o.submitted&&"INVALID"==(null==i.form.controls["ResApplication4SecretEncrypted"+r]?null:i.form.controls["ResApplication4SecretEncrypted"+r].status))),f["\u0275\u0275advance"](8),f["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplication5Id",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplication5Id",r,""),f["\u0275\u0275propertyInterpolate1"]("name","ResApplication5Id",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].ResApplication5Id)("ngClass",f["\u0275\u0275pureFunction1"](53,V,o.submitted&&"INVALID"==(null==i.form.controls["ResApplication5Id"+r]?null:i.form.controls["ResApplication5Id"+r].status))),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplication5SecretEncrypted",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplication5SecretEncrypted",r,""),f["\u0275\u0275propertyInterpolate1"]("name","ResApplication5SecretEncrypted",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].ResApplication5SecretEncrypted)("ngClass",f["\u0275\u0275pureFunction1"](55,V,o.submitted&&"INVALID"==(null==i.form.controls["ResApplication5SecretEncrypted"+r]?null:i.form.controls["ResApplication5SecretEncrypted"+r].status))),f["\u0275\u0275advance"](5),f["\u0275\u0275property"]("ngIf",o.model[r].AadTenantId==o.model[r].ResTenantId)}}function z(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div"),f["\u0275\u0275element"](1,"hr"),f["\u0275\u0275elementStart"](2,"b"),f["\u0275\u0275text"](3,"Primary Service Principal"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"p"),f["\u0275\u0275text"](5,"The engine needs a service principal to access and manage Azure Virtual Desktop and Azure resources. Create the service principal in Entra ID / Azure AD and give the service principal access to the resource groups or subscriptions containing your resources."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"div",0),f["\u0275\u0275elementStart"](7,"div",14),f["\u0275\u0275elementStart"](8,"div",10),f["\u0275\u0275elementStart"](9,"label",17),f["\u0275\u0275text"](10,"Tenant id"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](11,"div",18),f["\u0275\u0275elementStart"](12,"input",33),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"]().index;return f["\u0275\u0275nextContext"]().model[t].AadTenantId=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](13,"div",14),f["\u0275\u0275elementStart"](14,"div",10),f["\u0275\u0275elementStart"](15,"label",17),f["\u0275\u0275text"](16,"Azure Cloud"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](17,"div",14),f["\u0275\u0275elementStart"](18,"nb-select",34),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"]().index;return f["\u0275\u0275nextContext"]().model[t].AadEndpoints=e}),f["\u0275\u0275template"](19,w,2,2,"nb-option",35),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](20,"div",0),f["\u0275\u0275elementStart"](21,"div",14),f["\u0275\u0275elementStart"](22,"div",10),f["\u0275\u0275elementStart"](23,"label",17),f["\u0275\u0275text"](24,"Application id"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](25,"div",18),f["\u0275\u0275elementStart"](26,"input",36),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"]().index;return f["\u0275\u0275nextContext"]().model[t].AadApplicationId=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](27,"div",14),f["\u0275\u0275elementStart"](28,"div",10),f["\u0275\u0275elementStart"](29,"label",17),f["\u0275\u0275text"](30,"Secret"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](31,"div",18),f["\u0275\u0275elementStart"](32,"input",37),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"]().index;return f["\u0275\u0275nextContext"]().model[t].AadApplicationSecretEncrypted=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](33,"nb-accordion",0),f["\u0275\u0275elementStart"](34,"nb-accordion-item"),f["\u0275\u0275elementStart"](35,"nb-accordion-item-header"),f["\u0275\u0275text"](36," Advanced settings "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](37,"nb-accordion-item-body"),f["\u0275\u0275elementStart"](38,"b"),f["\u0275\u0275text"](39,"Split-Tenant mode / Spread mode"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](40,"p"),f["\u0275\u0275text"](41,"Having different tenants for the Azure Virtual Desktop resources and the virtual machines, a second service principal must access the second tenant's virtual machine (split-tenant-mode). Provide the data for the service principal accessing the resource tenant (VMs, vnets, etc)."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](42,"p"),f["\u0275\u0275text"](43,"This mode can also be used to provide more service principals to access the Azure API in a large environment - spread mode. The Azure API throttles operations if a single service principal requests too many operations in a specific time. Using more service principals can work around this limitation."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](44,"div",0),f["\u0275\u0275elementStart"](45,"div",14),f["\u0275\u0275elementStart"](46,"div",10),f["\u0275\u0275elementStart"](47,"label",17),f["\u0275\u0275text"](48,"Tenant id"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](49,"div",18),f["\u0275\u0275elementStart"](50,"input",38),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"]().index;return f["\u0275\u0275nextContext"]().model[t].ResTenantId=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](51,"div",39),f["\u0275\u0275elementStart"](52,"div",10),f["\u0275\u0275elementStart"](53,"label",17),f["\u0275\u0275text"](54,"Azure Cloud"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](55,"div",14),f["\u0275\u0275elementStart"](56,"nb-select",40),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"]().index;return f["\u0275\u0275nextContext"]().model[t].ResEndpoints=e}),f["\u0275\u0275template"](57,T,2,2,"nb-option",35),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](58,"div",0),f["\u0275\u0275elementStart"](59,"div",14),f["\u0275\u0275elementStart"](60,"div",10),f["\u0275\u0275elementStart"](61,"label",17),f["\u0275\u0275text"](62,"Application id"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](63,"div",18),f["\u0275\u0275elementStart"](64,"input",41),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"]().index;return f["\u0275\u0275nextContext"]().model[t].ResApplicationId=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](65,"div",39),f["\u0275\u0275elementStart"](66,"div",10),f["\u0275\u0275elementStart"](67,"label",17),f["\u0275\u0275text"](68,"Secret"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](69,"div",18),f["\u0275\u0275elementStart"](70,"input",42),f["\u0275\u0275listener"]("ngModelChange",function(e){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"]().index;return f["\u0275\u0275nextContext"]().model[t].ResApplicationSecretEncrypted=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](71,"div",43),f["\u0275\u0275elementStart"](72,"button",44),f["\u0275\u0275listener"]("click",function(){f["\u0275\u0275restoreView"](n);var e=f["\u0275\u0275nextContext"]().index;return f["\u0275\u0275nextContext"]().testSecondary(e)}),f["\u0275\u0275element"](73,"nb-icon",45),f["\u0275\u0275text"](74," Test "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](75,"div",0),f["\u0275\u0275elementStart"](76,"div",12),f["\u0275\u0275elementStart"](77,"button",46),f["\u0275\u0275listener"]("click",function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"](2).showMorePrincipals()}),f["\u0275\u0275element"](78,"nb-icon",47),f["\u0275\u0275text"](79," Show more (Spread mode) "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](80,D,70,57,"div",23),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){var r=f["\u0275\u0275nextContext"]().index,o=f["\u0275\u0275nextContext"](),i=f["\u0275\u0275reference"](3);f["\u0275\u0275advance"](9),f["\u0275\u0275propertyInterpolate1"]("for","dc-AadTenantId",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-AadTenantId",r,""),f["\u0275\u0275propertyInterpolate1"]("name","AadTenantId",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].AadTenantId)("ngClass",f["\u0275\u0275pureFunction1"](43,V,o.submitted&&"INVALID"==(null==i.form.controls["AadTenantId"+r]?null:i.form.controls["AadTenantId"+r].status))),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("for","dc-AadEndpoints",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-AadEndpoints",r,""),f["\u0275\u0275propertyInterpolate1"]("name","AadEndpoints",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].AadEndpoints)("ngClass",f["\u0275\u0275pureFunction1"](45,V,o.submitted&&"INVALID"==(null==i.form.controls["AadEndpoints"+r]?null:i.form.controls["AadEndpoints"+r].status))),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",o.cloudLocationEnum),f["\u0275\u0275advance"](4),f["\u0275\u0275propertyInterpolate1"]("for","dc-AadApplicationId",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-AadApplicationId",r,""),f["\u0275\u0275propertyInterpolate1"]("name","AadApplicationId",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].AadApplicationId)("ngClass",f["\u0275\u0275pureFunction1"](47,V,o.submitted&&"INVALID"==(null==i.form.controls["AadApplicationId"+r]?null:i.form.controls["AadApplicationId"+r].status))),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("for","dc-AadApplicationSecretEncrypted",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-AadApplicationSecretEncrypted",r,""),f["\u0275\u0275propertyInterpolate1"]("name","AadApplicationSecretEncrypted",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].AadApplicationSecretEncrypted)("ngClass",f["\u0275\u0275pureFunction1"](49,V,o.submitted&&"INVALID"==(null==i.form.controls["AadApplicationSecretEncrypted"+r]?null:i.form.controls["AadApplicationSecretEncrypted"+r].status))),f["\u0275\u0275advance"](15),f["\u0275\u0275propertyInterpolate1"]("for","dc-ResTenantId",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-ResTenantId",r,""),f["\u0275\u0275propertyInterpolate1"]("name","ResTenantId",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].ResTenantId)("ngClass",f["\u0275\u0275pureFunction1"](51,V,o.submitted&&"INVALID"==(null==i.form.controls["ResTenantId"+r]?null:i.form.controls["ResTenantId"+r].status))),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("for","dc-ResEndpoints",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-ResEndpoints",r,""),f["\u0275\u0275propertyInterpolate1"]("name","ResEndpoints",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].ResEndpoints)("ngClass",f["\u0275\u0275pureFunction1"](53,V,o.submitted&&"INVALID"==(null==i.form.controls["ResEndpoints"+r]?null:i.form.controls["ResEndpoints"+r].status))),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",o.cloudLocationEnum),f["\u0275\u0275advance"](4),f["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplicationId",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplicationId",r,""),f["\u0275\u0275propertyInterpolate1"]("name","ResApplicationId",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].ResApplicationId)("ngClass",f["\u0275\u0275pureFunction1"](55,V,o.submitted&&"INVALID"==(null==i.form.controls["ResApplicationId"+r]?null:i.form.controls["ResApplicationId"+r].status))),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplicationSecretEncrypted",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplicationSecretEncrypted",r,""),f["\u0275\u0275propertyInterpolate1"]("name","ResApplicationSecretEncrypted",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].ResApplicationSecretEncrypted)("ngClass",f["\u0275\u0275pureFunction1"](57,V,o.submitted&&"INVALID"==(null==i.form.controls["ResApplicationSecretEncrypted"+r]?null:i.form.controls["ResApplicationSecretEncrypted"+r].status))),f["\u0275\u0275advance"](10),f["\u0275\u0275property"]("ngIf",o.showMorePrincipalsFlag)}}function N(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",44),f["\u0275\u0275listener"]("click",function(){f["\u0275\u0275restoreView"](n);var e=f["\u0275\u0275nextContext"]().index;return f["\u0275\u0275nextContext"]().testPrimary(e)}),f["\u0275\u0275element"](1,"nb-icon",45),f["\u0275\u0275text"](2," Test Primary "),f["\u0275\u0275elementEnd"]()}}function F(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-card"),f["\u0275\u0275elementStart"](1,"nb-card-header"),f["\u0275\u0275text"](2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"nb-card-body"),f["\u0275\u0275elementStart"](4,"div",0),f["\u0275\u0275elementStart"](5,"div",14),f["\u0275\u0275elementStart"](6,"div",10),f["\u0275\u0275elementStart"](7,"label",15),f["\u0275\u0275text"](8,"Enabled"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"nb-checkbox",16),f["\u0275\u0275listener"]("ngModelChange",function(e){var t=f["\u0275\u0275restoreView"](n).index;return f["\u0275\u0275nextContext"]().model[t].Enabled=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](10,"div",0),f["\u0275\u0275elementStart"](11,"div",14),f["\u0275\u0275elementStart"](12,"div",10),f["\u0275\u0275elementStart"](13,"label",17),f["\u0275\u0275text"](14,"Display name"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](15,"div",18),f["\u0275\u0275elementStart"](16,"input",19),f["\u0275\u0275listener"]("ngModelChange",function(e){var t=f["\u0275\u0275restoreView"](n).index;return f["\u0275\u0275nextContext"]().model[t].DisplayName=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](17,"div",14),f["\u0275\u0275elementStart"](18,"div",10),f["\u0275\u0275elementStart"](19,"label",20),f["\u0275\u0275text"](20,"Use Managed Service Identity (MSI)"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](21,"nb-checkbox",21),f["\u0275\u0275listener"]("ngModelChange",function(e){var t=f["\u0275\u0275restoreView"](n).index;return f["\u0275\u0275nextContext"]().model[t].UseManagedServiceIdentity=e}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](22,M,8,4,"div",22),f["\u0275\u0275template"](23,z,81,59,"div",23),f["\u0275\u0275element"](24,"hr"),f["\u0275\u0275elementStart"](25,"div",0),f["\u0275\u0275elementStart"](26,"div",12),f["\u0275\u0275elementStart"](27,"button",24),f["\u0275\u0275listener"]("click",function(){var e=f["\u0275\u0275restoreView"](n).index;return f["\u0275\u0275nextContext"]().tenantDelete(e)}),f["\u0275\u0275element"](28,"nb-icon",25),f["\u0275\u0275text"](29," Remove "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](30,"div",12),f["\u0275\u0275template"](31,N,3,0,"button",26),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){var r=t.index,o=f["\u0275\u0275nextContext"](),i=f["\u0275\u0275reference"](3);f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate"](o.model[r].DisplayName),f["\u0275\u0275advance"](7),f["\u0275\u0275propertyInterpolate1"]("name","Enabled",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].Enabled),f["\u0275\u0275advance"](4),f["\u0275\u0275propertyInterpolate1"]("for","dc-DisplayName",r,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("id","dc-DisplayName",r,""),f["\u0275\u0275propertyInterpolate1"]("name","DisplayName",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].DisplayName)("ngClass",f["\u0275\u0275pureFunction1"](13,V,o.submitted&&"INVALID"==(null==i.form.controls["DisplayName"+r]?null:i.form.controls["DisplayName"+r].status))),f["\u0275\u0275advance"](5),f["\u0275\u0275propertyInterpolate1"]("name","UseManagedServiceIdentity",r,""),f["\u0275\u0275property"]("ngModel",o.model[r].UseManagedServiceIdentity),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",o.GlobalConstants.EnableWindows365Management),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!o.model[r].UseManagedServiceIdentity),f["\u0275\u0275advance"](8),f["\u0275\u0275property"]("ngIf",!o.model[r].UseManagedServiceIdentity)}}var P,L,U=[{path:"",component:(P=function(){function e(t,r,o){n(this,e),this.tenantsService=t,this.actionService=r,this.dialogService=o,this.destroyed$=new m.xQ,this.ALL_TENANTS_ID="00000000-0000-0000-0000-000000000000",this.storeDirect=!0,this.GlobalConstants=p.tc,this.scenes=[],this.model=[],this.cloudLocationEnum=s,this.showMorePrincipalsFlag=!1,this.spinner1=!0,this.submitted=!1}return t(e,[{key:"ngOnInit",value:function(){this.initTenants()}},{key:"tenantDelete",value:function(e){this.submitted=!1,this.model.splice(e,1)}},{key:"tenantAdd",value:function(){this.submitted=!1,this.model.push(new d)}},{key:"testPrimary",value:function(e){this.testCredentials(this.model[e].AadTenantId,this.model[e].AadApplicationId,this.model[e].AadApplicationSecretEncrypted,this.model[e].AadEndpoints)}},{key:"testSecondary",value:function(e){this.testCredentials(this.model[e].ResTenantId,this.model[e].ResApplicationId,this.model[e].ResApplicationSecretEncrypted,this.model[e].ResEndpoints)}},{key:"testSecondary2",value:function(e){this.testCredentials(this.model[e].ResTenantId,this.model[e].ResApplication2Id,this.model[e].ResApplication2SecretEncrypted,this.model[e].ResEndpoints)}},{key:"testSecondary3",value:function(e){this.testCredentials(this.model[e].ResTenantId,this.model[e].ResApplication3Id,this.model[e].ResApplication3SecretEncrypted,this.model[e].ResEndpoints)}},{key:"testSecondary4",value:function(e){this.testCredentials(this.model[e].ResTenantId,this.model[e].ResApplication4Id,this.model[e].ResApplication4SecretEncrypted,this.model[e].ResEndpoints)}},{key:"testSecondary5",value:function(e){this.testCredentials(this.model[e].ResTenantId,this.model[e].ResApplication5Id,this.model[e].ResApplication5SecretEncrypted,this.model[e].ResEndpoints)}},{key:"showMorePrincipals",value:function(){this.showMorePrincipalsFlag=!0}},{key:"testCredentials",value:function(e,t,n,r){var o=new c;o.TenantId=e,o.ApplicationId=t,o.ApplicationSecret=n,o.Endpoints=r,this.actionService.sendAction("scenes/".concat(this.ALL_TENANTS_ID,"/TestServicePrincipal"),o,"Testing tenant connection","").pipe((0,u.R)(this.destroyed$)).subscribe()}},{key:"onSubmit",value:function(e){this.submitted=!0,e.valid?(this.storeDirect&&this.actionService.sendAction("scenes/".concat(this.ALL_TENANTS_ID,"/SetAllScenes"),this.model,"Storing tenants","").pipe((0,u.R)(this.destroyed$)).subscribe(),this.dialogService.open(I,{hasScroll:!1})):alert("Please check your configuration. Some properties or selections are not valid or missing. Check the red-cross-marked properties.")}},{key:"openHydraAgentTenantsKeysDialog",value:function(e,t){e.stopPropagation(),e.preventDefault(),this.dialogService.open(b,{context:{sceneId:t},hasScroll:!1})}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(!0),this.destroyed$.complete()}},{key:"initTenants",value:function(){var e=this;this.tenantsService.getTenants().pipe((0,u.R)(this.destroyed$)).subscribe({next:function(t){e.scenes=t,e.model=JSON.parse(JSON.stringify(e.scenes))||[],e.spinner1=!1,console.log("Got data about the scenes",e.scenes)}})}}]),e}(),P.\u0275fac=function(e){return new(e||P)(f["\u0275\u0275directiveInject"](S),f["\u0275\u0275directiveInject"](a.c),f["\u0275\u0275directiveInject"](E.Gln))},P.\u0275cmp=f["\u0275\u0275defineComponent"]({type:P,selectors:[["ngx-tenants"]],decls:37,vars:2,consts:[[1,"row"],[1,"col-md-12"],[3,"ngSubmit"],["f","ngForm"],["nbSpinnerSize","small",3,"nbSpinner"],["target","_blank","href","https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredApps"],["target","_blank","href","https://support.loginvsi.com/hc/en-us/articles/21486519515804-Adding-a-Tenant"],[4,"ngFor","ngForOf"],["type","button","nbButton","",3,"click"],["icon","plus-square"],[1,"form-group","row"],[1,"offset-sm-8","col-sm-2"],[1,"col-sm-2"],["type","submit","nbButton","","status","primary",2,"float","right"],[1,"col-sm-6"],["for","dc-Enabled",1,"label","col-sm-4","col-form-label"],["id","dc-Enabled","nbTooltip","Enable or disable this tenant",1,"col-sm-8",3,"ngModel","name","ngModelChange"],[1,"label","col-sm-4","col-form-label",3,"for"],[1,"col-sm-8"],["type","text","placeholder","Contoso.com","required","","nbInput","","fullWidth","","minlength","1",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],["for","dc-UseManagedServiceIdentity",1,"label","col-sm-4","col-form-label"],["id","dc-UseManagedServiceIdentity","nbTooltip","Use the MSI to access the Azure resources. Give the MSI of the app service (same name as the host name of the Hydra portal) permission to the resource groups or subscriptions.",1,"col-sm-8",3,"ngModel","name","ngModelChange"],["class","row",4,"ngIf"],[4,"ngIf"],["type","button","nbButton","","nbTooltip","Remove",3,"click"],["icon","close-square"],["type","button","nbButton","","nbTooltip","Test the connection",3,"click",4,"ngIf"],["for","dc-W365Enabled",1,"label","col-sm-4","col-form-label"],["id","dc-W365Enabled","nbTooltip","Enable Windows 365 management for this tenant. You\u2019ll also need to enable it in Global Settings.",1,"col-sm-2",3,"ngModel","name","ngModelChange"],["class","col-sm-4",4,"ngIf"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-4"],["nbButton","",3,"click"],["type","text","placeholder","00000000-0000-0000\u200b-0000-000000000000","required","","nbInput","","fullWidth","","minlength","36","nbTooltip","Enter the tenant id of the Azure application registration / service principal",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],["fullWidth","","nbTooltip","Select the Azure cloud environment. Select 'Global' for the typical Azure commercial environment","required","",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","00000000-0000-0000\u200b-0000-000000000000","required","","nbInput","","fullWidth","","minlength","36","nbTooltip","Enter the application id of the Azure application registration / service principal",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],["type","password","placeholder","**********************","required","","nbInput","","fullWidth","","minlength","1","nbTooltip","Enter the secret of he Azure application / service principal",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],["type","text","placeholder","00000000-0000-0000\u200b-0000-000000000000","required","","nbInput","","fullWidth","","minlength","0","nbTooltip","Enter the tenant id of the Azure application registration / service principal (resource tenant)",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],[1,"col-sm-5"],["fullWidth","","nbTooltip","Select the Azure cloud environment. Select 'Global' for the typical Azure commercial environment (resource tenant)","required","",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],["type","text","placeholder","00000000-0000-0000\u200b-0000-000000000000","required","","nbInput","","fullWidth","","minlength","0","nbTooltip","Enter the application id of the Azure application registration / service principal (resource tenant)",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],["type","password","placeholder","**********************","nbInput","","fullWidth","","nbTooltip","Enter the secret of he Azure application / service principal (resource tenant)",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],[1,"col-sm-1"],["type","button","nbButton","","nbTooltip","Test the connection",3,"click"],["icon","checkmark-circle"],["type","button","nbButton","","nbTooltip","Allow to enter more service principals (Spread mode)",3,"click"],["icon","more-horizontal-outline"],[3,"value"],["class","form-group row",4,"ngIf"],["for","dc-UseResForAad",1,"label","col-sm-4","col-form-label"],["id","dc-UseResForAad","nbTooltip","In huge environments, it can make sense to use multiple service principals to access the primary resources, like host pools, session hosts, and sessions. By selecting this option, all provided service accounts are also used to access the primary resources (round-robin). Please ensure to update secrets early enough for all principals. Otherwise, Hydra will fail if a secret expires.",1,"col-sm-8",3,"ngModel","name","ngModelChange"]],template:function(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",0),f["\u0275\u0275elementStart"](1,"div",1),f["\u0275\u0275elementStart"](2,"form",2,3),f["\u0275\u0275listener"]("ngSubmit",function(){f["\u0275\u0275restoreView"](n);var e=f["\u0275\u0275reference"](3);return t.onSubmit(e)}),f["\u0275\u0275elementStart"](4,"nb-card"),f["\u0275\u0275elementStart"](5,"nb-card-header",4),f["\u0275\u0275elementStart"](6,"h1"),f["\u0275\u0275text"](7,"Tenant Configuration"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"nb-card-body"),f["\u0275\u0275elementStart"](9,"p"),f["\u0275\u0275text"](10,"The engine needs permission to access and manage Azure Virtual Desktop, Azure resources and optionaly Windows 365. Add at least one tenant to start working and managing your environment. You can use the Hydra engine's managed service identity (MSI) or one or more service principals (app registration). The MSI is limited to the tenant where Hydra is installed and focuses on smaller environments (up to 2000 users and 100 hosts). Service principals can be used for larger environments or to integrate multiple tenants. Service principals can be created in "),f["\u0275\u0275elementStart"](11,"a",5),f["\u0275\u0275text"](12,"Entra Id"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](13,"br"),f["\u0275\u0275element"](14,"br"),f["\u0275\u0275text"](15," Independent of choosing the MSI or Service Principal(s), the MSI or the principals need permission to access the Azure resource groups or subscriptions containing the AVD-related resources and optionally the Windows 365 resources with a defined permissions set. Read "),f["\u0275\u0275elementStart"](16,"a",6),f["\u0275\u0275text"](17,"more"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](18,". "),f["\u0275\u0275element"](19,"br"),f["\u0275\u0275element"](20,"br"),f["\u0275\u0275text"](21," If you add or change a service principal for an existing tenant, please restart the engine to apply the new settings (wait until all deployments, imaging processes and automations are finished). "),f["\u0275\u0275element"](22,"br"),f["\u0275\u0275element"](23,"br"),f["\u0275\u0275text"](24,"Important regarding service principals: Please add yourself and your colleagues a reminder to renew the secrets of the service principals before they get invalid. Hydra cannot warn before secrets timed out. "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](25,F,32,15,"nb-card",7),f["\u0275\u0275elementStart"](26,"button",8),f["\u0275\u0275listener"]("click",function(){return t.tenantAdd()}),f["\u0275\u0275element"](27,"nb-icon",9),f["\u0275\u0275text"](28," Add "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](29,"hr"),f["\u0275\u0275element"](30,"br"),f["\u0275\u0275elementStart"](31,"div",10),f["\u0275\u0275element"](32,"div",11),f["\u0275\u0275elementStart"](33,"div",12),f["\u0275\u0275elementStart"](34,"button",13),f["\u0275\u0275text"](35,"Save"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](36,"br"),f["\u0275\u0275elementEnd"]()}2&e&&(f["\u0275\u0275advance"](5),f["\u0275\u0275property"]("nbSpinner",t.spinner1),f["\u0275\u0275advance"](20),f["\u0275\u0275property"]("ngForOf",t.model))},directives:[A._Y,A.JL,A.F,E.Asz,E.ndF,E.Q7R,E.yKW,i.sg,E.DPz,E.fMN,E.NTf,E.jNv,A.JJ,A.On,E.h8i,A.Fj,A.Q7,A.wO,i.mk,i.O5,E.rs,E.qCO,E.SaG,E.YZd,E.AvE,E.q51],styles:["[_nghost-%COMP%]     nb-checkbox{margin-bottom:1rem}[_nghost-%COMP%]     .form-inline [fullWidth]{flex:1}[_nghost-%COMP%]     .form-inline>*{margin:0 1.5rem 1.5rem 0}[_nghost-%COMP%]     nb-card.inline-form-card nb-card-body{padding-bottom:0}[_nghost-%COMP%]     .form-control{padding:0;border:0}"]}),P)}],W=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=f["\u0275\u0275defineInjector"]({imports:[[l.Bz.forChild(U)],l.Bz]}),e}(),O=((L=function e(){n(this,e)}).\u0275fac=function(e){return new(e||L)},L.\u0275mod=f["\u0275\u0275defineNgModule"]({type:L}),L.\u0275inj=f["\u0275\u0275defineInjector"]({imports:[[i.ez,W,A.u5,E.oGl,E.T2N,E.zyh,E.MfT,E.KdK,E.nKr,E.x4g,E.IIj,E.rgH,A.UX,E.uuI]]}),L)}}])}();