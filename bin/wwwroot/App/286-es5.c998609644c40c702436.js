!function(){var e=["checked"];function t(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}(self.webpackChunkngx_admin=self.webpackChunkngx_admin||[]).push([[286],{39538:function(e,t,n){"use strict";n.d(t,{E:function(){return a}});var r=n(92340),o=n(47349),i=n(37716),c=n(91841),a=function(){var e=function(){function e(t){p(this,e),this.httpClient=t,this.apiUrl="".concat(r.N.apiUrl,"/data/views/scenes")}return h(e,[{key:"getViewScenes",value:function(){return this.httpClient.get("".concat(this.apiUrl)).pipe((0,o.d)({refCount:!0,bufferSize:1}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](c.eN))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},36123:function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o(t,e,n),i=o(e,t,n);return{aToB:r,bToA:i,hasDifference:Object.keys(r).length>0||Object.keys(i).length>0}}function o(e,t,n){var r=n.comparators,c=new Set(Object.keys(r||{}));return null===e||null===t?e===t?{}:e:Array.isArray(e)&&Array.isArray(t)?i(e,t)?{}:e:Object.keys(e).reduce(function(i,a){if(!(a in t))return i[a]=e[a],i;if(c.has(a)){var u=null==r?void 0:r[a];return u&&!u(e[a],t[a])&&(i[a]=e[a]),i}if("object"==typeof e[a]&&"object"==typeof t[a]){var l=o(e[a],t[a],n);return(null===l||Object.keys(l).length||Array.isArray(l))&&(i[a]=l),i}return e[a]!==t[a]&&(i[a]=e[a]),i},{})}function i(e,t){return e.length===t.length&&e.every(function(e,n){return Array.isArray(e)&&Array.isArray(t[n])?i(e,t[n]):null===e||null===t[n]?e===t[n]:"object"==typeof e&&"object"==typeof t[n]?0===Object.keys(r(e,t[n]).aToB).length:e===t[n]})}n.d(t,{xF:function(){return r}})},5992:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});var r=(function(e){e[e.Users=1]="Users",e[e.Groups=2]="Groups",e[e.UsersAndGroups=3]="UsersAndGroups"}(r||(r={})),r)},17003:function(e,t,n){"use strict";n.d(t,{X:function(){return a}});var r=n(47349),o=n(92340),i=n(37716),c=n(91841),a=function(){var e=function(){function e(t){p(this,e),this.httpClient=t,this.apiUrl="".concat(o.N.apiUrl,"/data/scenes")}return h(e,[{key:"getDirectoryObjectBy",value:function(e,t){return this.httpClient.post("".concat(this.apiUrl,"/").concat(e,"/directoryobjects"),s({},t)).pipe((0,r.d)({refCount:!0,bufferSize:1}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](c.eN))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},54904:function(n,a,l){"use strict";l.d(a,{B:function(){return N}});var f=l(37716),d=l(3679),y=l(26215),b=l(46797),v=l(25917),g=l(85345),m=function(){function e(t){p(this,e),this.durationSelector=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new O(e,this.durationSelector))}}]),e}(),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=c(n);function n(e,r){var o;return p(this,n),(o=t.call(this,e)).durationSelector=r,o.hasValue=!1,o}return h(n,[{key:"_next",value:function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(n){this.destination.error(n)}}},{key:"_complete",value:function(){this.emitValue(),this.destination.complete()}},{key:"_tryNext",value:function(e,t){var n=this.durationSubscription;this.value=e,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=(0,g.ft)(t,new g.IY(this)))&&!n.closed&&this.add(this.durationSubscription=n)}},{key:"notifyNext",value:function(){this.emitValue()}},{key:"notifyComplete",value:function(){this.emitValue()}},{key:"emitValue",value:function(){if(this.hasValue){var e=this.value,t=this.durationSubscription;t&&(this.durationSubscription=void 0,t.unsubscribe(),this.remove(t)),this.value=void 0,this.hasValue=!1,o(u(n.prototype),"_next",this).call(this,e)}}}]),n}(g.Ds),j=l(43190),w=l(87519),C=l(68307),x=l(68939),k=l(76897),S=l(17003),I=l(5992),P=l(38583),_=l(14625);function D(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"label",8),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){var n=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",n.label," ")}}function A(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"nb-checkbox",16),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){var n=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275property"]("checked",n.checked),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",n.DisplayName," ")}}function M(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"span",17),f["\u0275\u0275listener"]("click",function(){f["\u0275\u0275restoreView"](n);var e=f["\u0275\u0275nextContext"]().$implicit;return f["\u0275\u0275nextContext"](4).singleSelectionChange(e)}),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()}if(2&e){var r=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",r.DisplayName," ")}}function E(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-option",13),f["\u0275\u0275listener"]("click",function(){var e=f["\u0275\u0275restoreView"](n).$implicit;return f["\u0275\u0275nextContext"](4).multiSelectionChange(e)}),f["\u0275\u0275template"](1,A,2,2,"nb-checkbox",14),f["\u0275\u0275template"](2,M,2,1,"span",15),f["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,o=f["\u0275\u0275nextContext"](4);f["\u0275\u0275property"]("value",r),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",o.multi),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!o.multi)}}function V(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",18),f["\u0275\u0275elementStart"](1,"button",19),f["\u0275\u0275listener"]("click",function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"](4).assign()}),f["\u0275\u0275text"](2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){var r,o=f["\u0275\u0275nextContext"](4);f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("disabled",!o.selectedDirectoryObjects.length),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",null!==(r=o.multiSelectButtonLabel)&&void 0!==r?r:"Add"," ")}}function $(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",10),f["\u0275\u0275elementStart"](1,"nb-option-list"),f["\u0275\u0275template"](2,E,3,3,"nb-option",11),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](3,V,3,2,"div",12),f["\u0275\u0275elementEnd"]()),2&e){var n=f["\u0275\u0275nextContext"]().ngIf;f["\u0275\u0275nextContext"]();var r=f["\u0275\u0275reference"](3),o=f["\u0275\u0275nextContext"]();f["\u0275\u0275styleProp"]("width",r.elementRef.nativeElement.offsetWidth+"px"),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",n),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",o.multi)}}function T(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,$,4,4,"div",9),f["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.ngIf;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",n.length)}}function U(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",2),f["\u0275\u0275template"](1,D,2,1,"label",3),f["\u0275\u0275elementStart"](2,"nb-form-field",4,5),f["\u0275\u0275pipe"](4,"async"),f["\u0275\u0275elementStart"](5,"input",6),f["\u0275\u0275listener"]("focus",function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().setDefaultSearchDebounceTime()}),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](6,T,2,1,"ng-container",7),f["\u0275\u0275pipe"](7,"async"),f["\u0275\u0275elementEnd"]()}if(2&e){var r,o=f["\u0275\u0275nextContext"]();f["\u0275\u0275classProp"]("has-opened-dropdown",o.filteredDirectoryObjectsAmount>0),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",o.label),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("nbSpinner",f["\u0275\u0275pipeBind1"](4,7,o.isSearching$)),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("placeholder",null!==(r=o.placeholder)&&void 0!==r?r:"Search")("formControl",o.searchFormControl),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",f["\u0275\u0275pipeBind1"](7,9,o.filteredDirectoryObjects$))}}function B(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",20),f["\u0275\u0275listener"]("click",function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().close()}),f["\u0275\u0275elementEnd"]()}}var N=function(){var n=function(){function n(e){p(this,n),this.directoryObjectTypeheadService=e,this.searchDebounce$=new y.X(k.XU),this.multi=!1,this.type=I.W.UsersAndGroups,this.selectionChanged=new f.EventEmitter,this.isSearching$=new y.X(!1),this.filteredDirectoryObjectsAmount=0,this.searchFormControl=new d.NI(""),this.selectedDirectoryObjects=[]}return h(n,[{key:"tenantViewSceneId",set:function(e){if(!e)throw new Error("Tenant View Scene Id must be provided");this.tenantId=e}},{key:"ngOnInit",value:function(){this.initSearchQueryHandler()}},{key:"setDefaultSearchDebounceTime",value:function(){this.searchDebounce$.next(k.XU)}},{key:"assign",value:function(){this.selectionChanged.emit(this.selectedDirectoryObjects.map(function(t){t.checked;return r(t,e)})),this.close()}},{key:"close",value:function(){this.selectedDirectoryObjects=[],this.filteredDirectoryObjectsAmount=0,this.searchFormControl.setValue(""),this.searchDebounce$.next(0)}},{key:"multiSelectionChange",value:function(e){e.checked=!e.checked,this.selectedDirectoryObjects=e.checked?[].concat(t(this.selectedDirectoryObjects),[s(s({},e),{},{checked:!0})]):this.selectedDirectoryObjects.filter(function(t){return t.Id!==e.Id})}},{key:"singleSelectionChange",value:function(e){this.selectionChanged.emit(e),this.close()}},{key:"initSearchQueryHandler",value:function(){var e,t=this;this.filteredDirectoryObjects$=this.searchFormControl.valueChanges.pipe((e=function(){return t.searchDebounce$.pipe((0,j.w)(function(e){return(0,b.H)(e)}))},function(t){return t.lift(new m(e))}),(0,w.x)(),(0,C.b)(function(){return t.isSearching$.next(!0)}),(0,j.w)(function(e){return!e||e.length<k.cc||"string"!=typeof e?(t.isSearching$.next(!1),(0,v.of)([])):t.getDirectoryObjects$(e)}))}},{key:"getDirectoryObjects$",value:function(e){var t=this;return this.directoryObjectTypeheadService.getDirectoryObjectBy(this.tenantId,{SearchPhrase:e,ObjectType:this.type}).pipe((0,C.b)(function(e){t.filteredDirectoryObjectsAmount=e.length,t.selectedDirectoryObjects=[]}),(0,x.x)(function(){return t.isSearching$.next(!1)}))}}]),n}();return n.\u0275fac=function(e){return new(e||n)(f["\u0275\u0275directiveInject"](S.X))},n.\u0275cmp=f["\u0275\u0275defineComponent"]({type:n,selectors:[["ngx-directory-object-typehead"]],inputs:{tenantViewSceneId:"tenantViewSceneId",multi:"multi",label:"label",placeholder:"placeholder",multiSelectButtonLabel:"multiSelectButtonLabel",type:"type"},outputs:{selectionChanged:"selectionChanged"},decls:2,vars:2,consts:[["class","directory-object-typehead-container",3,"has-opened-dropdown",4,"ngIf"],["class","directory-object-typehead-backdrop",3,"click",4,"ngIf"],[1,"directory-object-typehead-container"],["for","search_query","class","label",4,"ngIf"],["nbSpinnerMessage","Searching...",3,"nbSpinner"],["formFieldReference",""],["id","search_query","type","text","nbInput","","fullWidth","",3,"placeholder","formControl","focus"],[4,"ngIf"],["for","search_query",1,"label"],["class","dropdown mt-1",3,"width",4,"ngIf"],[1,"dropdown","mt-1"],[3,"value","click",4,"ngFor","ngForOf"],["class","dropdown-footer p-1",4,"ngIf"],[3,"value","click"],[3,"checked",4,"ngIf"],["class","c-pointer w-100 h-100",3,"click",4,"ngIf"],[3,"checked"],[1,"c-pointer","w-100","h-100",3,"click"],[1,"dropdown-footer","p-1"],["nbButton","","fullWidth","",3,"disabled","click"],[1,"directory-object-typehead-backdrop",3,"click"]],template:function(e,t){1&e&&(f["\u0275\u0275template"](0,U,8,11,"div",0),f["\u0275\u0275template"](1,B,1,0,"div",1)),2&e&&(f["\u0275\u0275property"]("ngIf",t.tenantId),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",t.filteredDirectoryObjectsAmount>0))},directives:[P.O5,_.jBG,_.Q7R,_.h8i,d.Fj,d.JJ,d.oH,_.Hcl,P.sg,_.q51,_.NTf,_.DPz],pipes:[P.Ov],styles:["[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   .directory-object-typehead-container[_ngcontent-%COMP%]{z-index:7198}[_nghost-%COMP%]   .directory-object-typehead-container.has-opened-dropdown[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .directory-object-typehead-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{position:fixed;border:.0625rem solid #e4e9f2;border-radius:.25rem;overflow:hidden}[_nghost-%COMP%]   .directory-object-typehead-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   nb-option-list[_ngcontent-%COMP%]{display:block;border-style:none}[_nghost-%COMP%]   .directory-object-typehead-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-footer[_ngcontent-%COMP%]{background-color:var(--white)}[_nghost-%COMP%]   .directory-object-typehead-container[_ngcontent-%COMP%]     nb-checkbox{height:100%;display:flex;align-items:center}[_nghost-%COMP%]   .directory-object-typehead-container[_ngcontent-%COMP%]     nb-checkbox label{cursor:pointer}[_nghost-%COMP%]   .directory-object-typehead-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:7087}"]}),n}()},77194:function(e,t,n){"use strict";n.d(t,{e7:function(){return a}});var r=n(38583),o=n(14625),i=n(3679),c=n(37716),a=function(){var e=function e(){p(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[r.ez,o.CG_,o.V7y,o.nKr,i.UX,o.uuI,o.MfT,o.T2N]]}),e}();n(17003),n(54904)}}])}();