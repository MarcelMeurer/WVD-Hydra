(self.webpackChunkngx_admin=self.webpackChunkngx_admin||[]).push([[414],{83414:function(e,t,n){"use strict";n.r(t),n.d(t,{CloudPcConfigurationModule:function(){return Ve}});var o=n(38583),r=n(3679),i=n(14625),a=n(10264),l=n(79765),s=n(46797),c=n(40205),d=n(25917),u=n(94402),m=n(47349),g=n(92340),p=n(37716),h=n(91841);let f=(()=>{class e{constructor(e){this.httpClient=e,this.apiUrl=`${g.N.apiUrl}/data/scenes`,this.ALL_TENANTS_ID="00000000-0000-0000-0000-000000000000"}getCloudPcConfigurations(){return this.httpClient.get(`${this.apiUrl}/${this.ALL_TENANTS_ID}/win365/configurations`).pipe((0,m.d)({refCount:!0,bufferSize:1}))}getCloudPcConfiguration(e,t){return this.httpClient.get(`${this.apiUrl}/${e}/win365/configurations/${t}`).pipe((0,m.d)({refCount:!0,bufferSize:1}))}saveCloudPcConfiguration(e,t){return this.httpClient.post(`${this.apiUrl}/${e}/win365/configurations`,t).pipe((0,m.d)({refCount:!0,bufferSize:1}))}removeCloudPcConfiguration(e,t){return this.httpClient.delete(`${this.apiUrl}/${e}/win365/configurations`,{body:t}).pipe((0,m.d)({refCount:!0,bufferSize:1}))}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275inject"](h.eN))},e.\u0275prov=p["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var C=n(68307),b=n(11627),v=n(45435),S=n(43190),y=n(39761),x=n(67666),P=n(5304),E=n(46782),I=n(94612),w=n(27716),k=n(11173),O=n(76897),T=(()=>(function(e){e.SceneName="SceneName",e.Name="DisplayName",e.Assigned="IsAssigned",e.LastUpdated="LastModifiedDateTime",e.Priority="Priority"}(T||(T={})),T))(),F=n(45880),A=n(88002),M=n(36123),_=n(30110),N=n(34681);let V=(()=>{class e{constructor(e,t,n,o,i,a){this.dialogRef=e,this.dialogService=t,this.wd365Service=n,this.cloudPcConfigurationService=o,this.toastrService=i,this.cdr=a,this.destroyed$=new l.xQ,this.cloudPcConfigurationToEdit=null,this.tenants$=this.wd365Service.getViewScenes(),this.isLoading=!1,this.isSaving=!1,this.form=new r.cw({settings:new r.cw({tenant:new r.NI(null,r.kI.required),displayName:new r.NI("",r.kI.required),description:new r.NI(""),isAiEnabled:new r.NI("")}),scopeTags:new r.cw({tags:new r.Oe([])}),assignments:new r.cw({groups:new r.Oe([])})})}get scopeTagsFormArray(){var e;return null===(e=this.form.get("scopeTags"))||void 0===e?void 0:e.get("tags")}get assignmentsFormArray(){var e;return null===(e=this.form.get("assignments"))||void 0===e?void 0:e.get("groups")}ngOnInit(){this.initialFormValues=this.form.getRawValue(),this.hasFormChanges$=this.form.valueChanges.pipe((0,A.U)(e=>(0,M.xF)(this.initialFormValues,e).hasDifference),(0,y.O)(!1)),this.cloudPcConfigurationToEdit&&this.loadConfiguration(this.cloudPcConfigurationToEdit)}loadConfiguration({SceneId:e,Id:t}){this.isLoading=!0,this.cloudPcConfigurationService.getCloudPcConfiguration(e,t).pipe((0,E.R)(this.destroyed$)).subscribe({next:e=>{var t,n;this.cloudPcConfig=e,this.populateSettingsForm(e),this.populateScopeTagsFormArray(null!==(t=e.RoleScopeTags)&&void 0!==t?t:[]),this.populateAssignmentsFormArray(null!==(n=e.Assignments)&&void 0!==n?n:[]),this.isLoading=!1,this.cdr.markForCheck()},error:e=>{this.isLoading=!1,this.toastrService.danger(e.message||"Failed to load configuration","Error"),this.dialogRef.close()}})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}close(){(0,M.xF)(this.initialFormValues,this.form.getRawValue()).hasDifference?this.showConfirmationDialog():this.dialogRef.close()}showConfirmationDialog(){const{onClose:e}=this.dialogService.open(_.z,{context:{headerTitle:"Warning",bodyText:"You are about to exit without saving your changes. Are you sure you want to leave?",cancelButtonText:"Close without saving",confirmButtonText:"Stay"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1});e.subscribe(e=>{!0!==e&&this.dialogRef.close()})}save(){var e;const{settings:t}=this.form.getRawValue(),n=t.tenant,o=this.scopeTagsFormArray.value.map(({Id:e})=>e),r=this.assignmentsFormArray.value.map(({checked:e,...t})=>t),i=null===(e=this.cloudPcConfig)||void 0===e?void 0:e.Id,a={...i&&{Id:i},SceneId:n,DisplayName:t.displayName,Description:t.description,RoleScopeTagIds:o,IsAiEnabled:""===t.isAiEnabled?null:t.isAiEnabled,Assignments:r};this.isSaving=!0,this.cdr.markForCheck(),this.cloudPcConfigurationService.saveCloudPcConfiguration(n,a).pipe((0,E.R)(this.destroyed$)).subscribe({next:()=>{this.toastrService.success(this.cloudPcConfig?"Cloud PC Configuration updated":"Cloud PC Configuration created","Success"),this.dialogRef.close({created:!0})},error:e=>{this.isSaving=!1,this.toastrService.danger(e.message||(this.cloudPcConfig?"Failed to update Cloud PC Configuration":"Failed to create Cloud PC Configuration"),"Error"),this.cdr.markForCheck()}})}populateSettingsForm(e){var t,n;this.form.patchValue({settings:{tenant:e.SceneId,displayName:e.DisplayName,description:null!==(t=e.Description)&&void 0!==t?t:"",isAiEnabled:null!==(n=e.IsAiEnabled)&&void 0!==n?n:""}})}populateScopeTagsFormArray(e){this.scopeTagsFormArray.clear(),e.map(e=>({Id:e.Id,Name:e.Name,checked:!1})).forEach(e=>this.scopeTagsFormArray.push(new r.NI(e),{emitEvent:!1})),this.initialFormValues=this.form.getRawValue()}populateAssignmentsFormArray(e){var t;this.assignmentsFormArray.clear(),null===(t=null==e?void 0:e.map(e=>({...e,checked:!1})))||void 0===t||t.forEach(e=>this.assignmentsFormArray.push(new r.NI(e),{emitEvent:!1})),this.initialFormValues=this.form.getRawValue()}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](i.X4l),p["\u0275\u0275directiveInject"](i.Gln),p["\u0275\u0275directiveInject"](N.G),p["\u0275\u0275directiveInject"](f),p["\u0275\u0275directiveInject"](i.quB),p["\u0275\u0275directiveInject"](p.ChangeDetectorRef))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-manage-cloud-pc-configuration-dialog"]],inputs:{cloudPcConfigurationToEdit:"cloudPcConfigurationToEdit"},decls:19,vars:19,consts:[["nbSpinnerMessage","Saving...",3,"nbSpinner"],["nbSpinnerMessage","Loading...",3,"nbSpinner"],[3,"formGroup"],["tabTitle","Settings","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["settingsTab",""],[3,"form","tenants","cloudPcConfiguration"],["tabTitle","Scope tags"],[3,"form","tenantId"],["tabTitle","Assignments"],[1,"d-flex","justify-content-between"],["type","button","nbButton","",3,"disabled","click"]],template:function(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"nb-card",0),p["\u0275\u0275elementStart"](1,"nb-card-header"),p["\u0275\u0275text"](2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](3,"nb-card-body",1),p["\u0275\u0275elementStart"](4,"nb-tabset",2),p["\u0275\u0275elementStart"](5,"nb-tab",3,4),p["\u0275\u0275element"](7,"ngx-cloud-pc-config-settings-tab",5),p["\u0275\u0275pipe"](8,"async"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](9,"nb-tab",6),p["\u0275\u0275element"](10,"ngx-scope-tags-tab",7),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](11,"nb-tab",8),p["\u0275\u0275element"](12,"ngx-assignments-tab",7),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](13,"nb-card-footer",9),p["\u0275\u0275elementStart"](14,"button",10),p["\u0275\u0275listener"]("click",function(){return t.close()}),p["\u0275\u0275text"](15,"Close"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](16,"button",10),p["\u0275\u0275listener"]("click",function(){return t.save()}),p["\u0275\u0275pipe"](17,"async"),p["\u0275\u0275text"](18),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275reference"](6);let n,o;p["\u0275\u0275property"]("nbSpinner",t.isSaving),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",t.cloudPcConfigurationToEdit?"Update Cloud PC Configuration":"Create Cloud PC Configuration"," "),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("nbSpinner",t.isLoading),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("formGroup",t.form),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("badgeDot",!e.active&&(null==t.form.controls||null==t.form.controls.settings?null:t.form.controls.settings.invalid)),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("form",null==t.form.controls?null:t.form.controls.settings)("tenants",p["\u0275\u0275pipeBind1"](8,15,t.tenants$))("cloudPcConfiguration",t.cloudPcConfigurationToEdit),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("form",null==t.form.controls?null:t.form.controls.scopeTags)("tenantId",null==(n=t.form.get("settings.tenant"))?null:n.value),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("form",null==t.form.controls?null:t.form.controls.assignments)("tenantId",null==(o=t.form.get("settings.tenant"))?null:o.value),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("disabled",t.isSaving),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("disabled",t.form.invalid||t.isSaving||t.cloudPcConfigurationToEdit&&!p["\u0275\u0275pipeBind1"](17,17,t.hasFormChanges$)),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",t.cloudPcConfigurationToEdit?"Update":"Save"," ")}},styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:80em;height:80vh}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]   nb-tabset[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]   nb-tabset[_ngcontent-%COMP%]   nb-tab[_ngcontent-%COMP%]{height:calc(100% - 2rem);overflow-y:auto}"],changeDetection:0}),e})();var D=n(60290),$=n(73544),j=n(84266);function B(e,t){1&e&&p["\u0275\u0275element"](0,"nb-spinner")}function R(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ngx-table-filter-trigger",19),p["\u0275\u0275listener"]("filtersChanges",function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](2).populateFiltersSet(t)}),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"](2);p["\u0275\u0275property"]("fieldPath",e.sortKeys.SceneName)("dataSource",e.cloudPcConfigurationsCache)}}function G(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ngx-table-filter-trigger",20),p["\u0275\u0275listener"]("filtersChanges",function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](2).populateFiltersSet(t)}),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"](2);p["\u0275\u0275property"]("fieldPath",e.sortKeys.Name)("dataSource",e.cloudPcConfigurationsCache)}}function L(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ngx-table-filter-trigger",21),p["\u0275\u0275listener"]("filtersChanges",function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](2).populateFiltersSet(t)}),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"](2);p["\u0275\u0275property"]("extractSpecificValue",e.isAssignedValue)("fieldPath",e.sortKeys.Assigned)("dataSource",e.cloudPcConfigurationsCache)}}function z(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"td"),p["\u0275\u0275text"](1),p["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate"](e.IsAssigned?"Yes":"No")}}function U(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"td"),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"date"),p["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind2"](2,1,e.LastModifiedDateTime,"short"))}}function q(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"td",22),p["\u0275\u0275elementStart"](1,"nb-action",23),p["\u0275\u0275listener"]("click",function(){const t=p["\u0275\u0275restoreView"](e).$implicit;return p["\u0275\u0275nextContext"](2).openManageCloudPcConfigurationDialog(t)}),p["\u0275\u0275element"](2,"nb-icon",24),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}}function W(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275elementStart"](1,"ngx-data-table",1,2),p["\u0275\u0275listener"]("clearFiltersClick",function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().clearFilters()})("selectionChange",function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().selectionChange(t)}),p["\u0275\u0275elementStart"](3,"div",3),p["\u0275\u0275elementStart"](4,"nb-actions",4),p["\u0275\u0275elementStart"](5,"nb-action",5),p["\u0275\u0275listener"]("click",function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().removeSelectedCloudPcConfigurations()}),p["\u0275\u0275element"](6,"nb-icon",6),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](7,"nb-action",7),p["\u0275\u0275listener"]("click",function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().openManageCloudPcConfigurationDialog()}),p["\u0275\u0275element"](8,"nb-icon",8),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](9,"ngx-table-column",9),p["\u0275\u0275template"](10,R,1,2,"ng-template",null,10,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](12,"ngx-table-column",11),p["\u0275\u0275template"](13,G,1,2,"ng-template",null,10,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](15,"ngx-table-column",12),p["\u0275\u0275template"](16,L,1,3,"ng-template",null,10,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275template"](18,z,2,1,"ng-template",null,13,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](20,"ngx-table-column",14),p["\u0275\u0275template"](21,U,3,4,"ng-template",null,13,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](23,"ngx-table-column",15),p["\u0275\u0275elementStart"](24,"ngx-table-column",16),p["\u0275\u0275template"](25,q,3,0,"ng-template",null,13,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](27,"button",17),p["\u0275\u0275listener"]("click",function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().update()}),p["\u0275\u0275element"](28,"nb-icon",18),p["\u0275\u0275text"](29," Update "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=p["\u0275\u0275reference"](2),t=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("data",t.cloudPcConfigurations)("config",t.tableConfig)("columnFilters",t.filterState.columnFilters),p["\u0275\u0275advance"](4),p["\u0275\u0275propertyInterpolate"]("nbTooltip",e.hasSelection?"Delete":"Select at least one item to delete"),p["\u0275\u0275property"]("disabled",!e.hasSelection),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("sortable",!0)("searchable",!0),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("sortable",!0)("searchable",!0),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("sortable",!0),p["\u0275\u0275advance"](5),p["\u0275\u0275property"]("sortable",!0),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("sortable",!0)}}const Q={autoFocus:!0,closeOnEsc:!1,closeOnBackdropClick:!1,hasScroll:!1},K=[{path:"",component:(()=>{class e{constructor(e,t,n,o){this.cloudPcConfigurationService=e,this.toastrService=t,this.cdr=n,this.dialogService=o,this.destroyed$=new l.xQ,this.selectedConfigurationsGroups={},this.cloudPcConfigurationsUpdate$=new l.xQ,this.tableConfig={id:"CloudPcConfigurations",search:{placeholder:"Search for Cloud PC configurations"},selectionKey:"IsSelected",sorting:{enabled:!0,defaultColumn:T.SceneName,defaultDirection:"asc"}},this.sortKeys=T,this.isAssignedValue=e=>e.IsAssigned?"Yes":"No",this.filterState={searchQuery:"",columnFilters:{}},this.cloudPcConfigurations=[],this.cloudPcConfigurationsCache=[],this.isLoading=!1,this.retryApiCallWithToastCallback=e=>e.pipe((0,C.b)(e=>this.showDangerToast("Failure accessing the API",`Cannot read data from API. The message is: ${e.message} with status ${e.statusText}`)),(0,b.j)(()=>(0,s.H)(O.e5))),this.handleApiErrorCallback=e=>(0,c._)(()=>(this.showDangerToast("Failure accessing the API",`Cannot read data from API. Reload this site to try it again. The message is: ${e.message} with status ${e.statusText}`),(0,d.of)([])))}ngOnInit(){this.initCloudPcConfigurations()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}update(){this.cloudPcConfigurationsUpdate$.next()}openManageCloudPcConfigurationDialog(e){this.dialogService.open(V,{context:{cloudPcConfigurationToEdit:null!=e?e:null},...Q}).onClose.subscribe(e=>{(null==e?void 0:e.created)&&this.update()})}populateFiltersSet([e,t]){const n=e.filter(e=>e.checked).map(e=>e.label.toLowerCase());this.filterState={...this.filterState,columnFilters:{...this.filterState.columnFilters,[t]:n}},this.applyAllFilters()}clearFilters(){var e;this.filterState={...this.filterState,columnFilters:{}},null===(e=this.filterTriggers)||void 0===e||e.forEach(e=>e.resetAllFilters()),this.applyAllFilters()}selectionChange(e){const t=this.cloudPcConfigurations.filter(t=>e.includes(t.Id));this.selectedConfigurationsGroups=t.reduce((e,t)=>{var n;return t.SceneId?{...e,[t.SceneId]:[...null!==(n=e[t.SceneId])&&void 0!==n?n:[],t.Id]}:e},{})}removeSelectedCloudPcConfigurations(){const e=Object.values(this.selectedConfigurationsGroups).flat().length;if(0===e)return;const{onClose:t}=this.dialogService.open(_.z,{context:{headerTitle:"Delete Cloud PC configurations?",bodyText:`Please confirm deletion of ${e} Cloud PC configuration(s)`,cancelButtonText:"Cancel",confirmButtonText:"Delete"},...Q});t.pipe((0,v.h)(Boolean),(0,S.w)(()=>this.processCloudPcConfigurationsRemoval())).subscribe({next:()=>{this.update(),this.toastrService.success(`${e} Cloud PC configuration(s) deleted`,"Cloud PC configuration deleted")},error:e=>this.toastrService.danger(e.message,"Error")})}initCloudPcConfigurations(){this.isLoading=!0,this.cloudPcConfigurationsUpdate$.pipe((0,y.O)(0),(0,S.w)(()=>(0,s.H)(0,k.tc.autoRefreshDefault)),(0,S.w)(()=>this.cloudPcConfigurationService.getCloudPcConfigurations()),(0,x.a)(this.retryApiCallWithToastCallback),(0,P.K)(this.handleApiErrorCallback),(0,E.R)(this.destroyed$)).subscribe(e=>{this.cloudPcConfigurationsCache=[...e],this.applyAllFilters(),this.isLoading=!1,this.cdr.markForCheck()})}showDangerToast(e,t){this.toastrService.danger(t,e,{destroyByClick:!0,duration:2e4,hasIcon:!0,position:i.fe3.TOP_RIGHT,preventDuplicates:!0})}applyAllFilters(){let e=[...this.cloudPcConfigurationsCache];Object.keys(this.filterState.columnFilters).some(e=>{var t;return(null===(t=this.filterState.columnFilters[e])||void 0===t?void 0:t.length)>0})&&(e=this.applyColumnFilters(e)),this.cloudPcConfigurations=e,this.cdr.markForCheck()}applyColumnFilters(e){const t=Object.keys(this.filterState.columnFilters).filter(e=>{var t;return(null===(t=this.filterState.columnFilters[e])||void 0===t?void 0:t.length)>0});return t.length?e.filter(e=>t.every(t=>{var n;const o=this.filterState.columnFilters[t],r=null===(n=this.getTableCellValue(e,t))||void 0===n?void 0:n.toLowerCase();return o.includes(r)})):e}getTableCellValue(e,t){switch(t){case"SceneName":return e.SceneName;case"DisplayName":return e.DisplayName;case"IsAssigned":return this.isAssignedValue(e);default:return""}}processCloudPcConfigurationsRemoval(){return(0,u.D)(Object.entries(this.selectedConfigurationsGroups)).pipe((0,I.b)(([e,t])=>this.cloudPcConfigurationService.removeCloudPcConfiguration(e,t)),(0,w.q)())}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](f),p["\u0275\u0275directiveInject"](i.quB),p["\u0275\u0275directiveInject"](p.ChangeDetectorRef),p["\u0275\u0275directiveInject"](i.Gln))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-cloud-pc-configuration"]],viewQuery:function(e,t){if(1&e&&p["\u0275\u0275viewQuery"](F.m4,5),2&e){let e;p["\u0275\u0275queryRefresh"](e=p["\u0275\u0275loadQuery"]())&&(t.filterTriggers=e)}},decls:7,vars:2,consts:[[4,"ngIf"],[3,"data","config","columnFilters","clearFiltersClick","selectionChange"],["dataTable",""],["data-table-actions","",1,"d-flex","align-items-center"],["size","small"],["nbTooltipPlacement","top",3,"disabled","nbTooltip","click"],["icon","trash-2-outline"],[3,"click"],["icon","plus-outline"],["key","SceneName","label","Tenant",3,"sortable","searchable"],["headerFilter",""],["key","DisplayName","label","Name",3,"sortable","searchable"],["key","IsAssigned","label","Assigned",3,"sortable"],["cell",""],["key","LastModifiedDateTime","label","Last updated",3,"sortable"],["key","Priority","label","Priority",3,"sortable"],["key","actions","label","Edit"],["type","button","nbButton","","status","semi-round",3,"click"],["icon","refresh"],["filterName","SceneName",3,"fieldPath","dataSource","filtersChanges"],["filterName","DisplayName",3,"fieldPath","dataSource","filtersChanges"],["filterName","IsAssigned",3,"extractSpecificValue","fieldPath","dataSource","filtersChanges"],[1,"text-center","align-middle"],["nbTooltip","Edit Cloud PC Configuration",1,"d-inline","c-pointer",3,"click"],["icon","settings-2-outline"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"nb-card"),p["\u0275\u0275elementStart"](1,"nb-card-header"),p["\u0275\u0275elementStart"](2,"h1"),p["\u0275\u0275text"](3,"Cloud PC Configuration"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"nb-card-body"),p["\u0275\u0275template"](5,B,1,0,"nb-spinner",0),p["\u0275\u0275template"](6,W,30,12,"ng-container",0),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](5),p["\u0275\u0275property"]("ngIf",t.isLoading),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",!t.isLoading))},directives:[i.Asz,i.ndF,i.yKW,o.O5,i.Tzq,D.Q,i.lYD,i.Bk3,i.jNv,i.fMN,$.U,i.DPz,j.m],pipes:[o.uU],styles:["[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   nb-actions[_ngcontent-%COMP%]   nb-action[_ngcontent-%COMP%]:not(.disabled){cursor:pointer}"],changeDetection:0}),e})()}];let H=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({imports:[[a.Bz.forChild(K)],a.Bz]}),e})();var X=n(14171);function J(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"nb-option",20),p["\u0275\u0275text"](1),p["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;p["\u0275\u0275property"]("value",e.Id),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",e.DisplayName," ")}}function Y(e,t){1&e&&(p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275elementStart"](1,"span",21),p["\u0275\u0275text"](2,"This field is required"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementContainerEnd"]())}function Z(e,t){1&e&&(p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275elementStart"](1,"span",21),p["\u0275\u0275text"](2,"This field is required"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementContainerEnd"]())}function ee(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"nb-option",20),p["\u0275\u0275text"](1),p["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;p["\u0275\u0275property"]("value",e.value),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",e.label," ")}}function te(e,t){if(1&e&&(p["\u0275\u0275elementContainerStart"](0,1),p["\u0275\u0275elementStart"](1,"h6",2),p["\u0275\u0275text"](2,"General"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](3,"div",3),p["\u0275\u0275elementStart"](4,"div",4),p["\u0275\u0275elementStart"](5,"label",5),p["\u0275\u0275elementStart"](6,"span",6),p["\u0275\u0275text"](7,"*"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](8,"span"),p["\u0275\u0275text"](9,"Tenant"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](10,"div",7),p["\u0275\u0275elementStart"](11,"nb-select",8),p["\u0275\u0275template"](12,J,2,2,"nb-option",9),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](13,Y,3,0,"ng-container",10),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](14,"div",3),p["\u0275\u0275elementStart"](15,"div",4),p["\u0275\u0275elementStart"](16,"label",11),p["\u0275\u0275elementStart"](17,"span",6),p["\u0275\u0275text"](18,"*"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](19,"span"),p["\u0275\u0275text"](20,"Name"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](21,"div",7),p["\u0275\u0275element"](22,"input",12),p["\u0275\u0275template"](23,Z,3,0,"ng-container",10),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](24,"div",3),p["\u0275\u0275elementStart"](25,"div",4),p["\u0275\u0275elementStart"](26,"label",13),p["\u0275\u0275text"](27,"Description"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](28,"div",7),p["\u0275\u0275elementStart"](29,"textarea",14),p["\u0275\u0275text"](30,"      "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](31,"h6",2),p["\u0275\u0275text"](32,"Configuration settings"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](33,"p",15),p["\u0275\u0275text"](34," Works for higher spec devices (8vCPU/32GB/256GB and higher). "),p["\u0275\u0275elementStart"](35,"a",16),p["\u0275\u0275text"](36,"Learn more"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](37,". "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](38,"div",3),p["\u0275\u0275elementStart"](39,"div",4),p["\u0275\u0275elementStart"](40,"label",17),p["\u0275\u0275text"](41,"AI-enabled features"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](42,"nb-icon",18),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](43,"div",7),p["\u0275\u0275elementStart"](44,"nb-select",19),p["\u0275\u0275template"](45,ee,2,2,"nb-option",9),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementContainerEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("formGroup",e.form),p["\u0275\u0275advance"](11),p["\u0275\u0275property"]("nbSpinner",!(e.cloudPcConfiguration||null!=e.tenants&&e.tenants.length)),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngForOf",e.tenants),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",(null==e.form||null==e.form.controls||null==e.form.controls.tenant||null==e.form.controls.tenant.errors?null:e.form.controls.tenant.errors.required)&&(null==e.form||null==e.form.controls||null==e.form.controls.tenant?null:e.form.controls.tenant.touched)),p["\u0275\u0275advance"](10),p["\u0275\u0275property"]("ngIf",(null==e.form||null==e.form.controls||null==e.form.controls.displayName||null==e.form.controls.displayName.errors?null:e.form.controls.displayName.errors.required)&&(null==e.form||null==e.form.controls||null==e.form.controls.displayName?null:e.form.controls.displayName.touched)),p["\u0275\u0275advance"](22),p["\u0275\u0275property"]("ngForOf",e.aiEnabledOptions)}}let ne=(()=>{class e{constructor(){this.tenants=[],this.cloudPcConfiguration=null,this.aiEnabledOptions=[{value:"",label:"Not configured (Default)"},{value:!0,label:"Enable"},{value:!1,label:"Disable"}]}ngOnChanges(e){var t,n,o;(null===(t=e.cloudPcConfiguration)||void 0===t?void 0:t.currentValue)&&(null===(o=null===(n=this.form)||void 0===n?void 0:n.get("tenant"))||void 0===o||o.disable({emitEvent:!1}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-cloud-pc-config-settings-tab"]],inputs:{form:"form",tenants:"tenants",cloudPcConfiguration:"cloudPcConfiguration"},features:[p["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"section-title"],[1,"form-group","row"],[1,"col-md-3","d-flex","align-items-center"],["for","tenant",1,"label"],[1,"asterisk"],[1,"col-md-9"],["id","tenant","fullWidth","","placeholder","Select Tenant","formControlName","tenant",3,"nbSpinner"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["for","displayName",1,"label"],["id","displayName","type","text","nbInput","","fullWidth","","formControlName","displayName","placeholder","Enter a name"],["for","description",1,"label"],["id","description","nbInput","","fullWidth","","formControlName","description","placeholder","Create a description","rows","3"],[1,"label","section-description"],["href","https://learn.microsoft.com/en-us/windows-365/enterprise/ai-enabled-cloud-pcs","target","_blank","rel","noopener"],["for","isAiEnabled",1,"label"],["icon","info-outline","nbTooltip","Hybrid compute framework will be installed and allow end user's device to use AI-enabled features."],["id","isAiEnabled","fullWidth","","formControlName","isAiEnabled"],[3,"value"],[1,"form-control-error"]],template:function(e,t){1&e&&p["\u0275\u0275template"](0,te,46,6,"ng-container",0),2&e&&p["\u0275\u0275property"]("ngIf",t.form)},directives:[o.O5,r.JL,r.sg,i.rs,r.JJ,r.u,i.Q7R,o.sg,i.h8i,r.Fj,i.fMN,i.jNv,i.q51],styles:["[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]   .col-md-3[_ngcontent-%COMP%]{grid-gap:.5rem;gap:.5rem}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   .asterisk[_ngcontent-%COMP%]{color:var(--danger);margin-right:.5em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:.8125rem;font-weight:600;color:#101426}[_nghost-%COMP%]   .section-description[_ngcontent-%COMP%]{margin-bottom:1rem;line-height:1.5rem}[_nghost-%COMP%]   .section-description[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary)}"],changeDetection:0}),e})(),oe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({imports:[[o.ez,i.V7y,i.nKr,i.uuI,r.UX,i.x4g,i.MfT,i.T2N]]}),e})(),re=(()=>{class e{constructor(e){this.httpClient=e,this.apiUrl=`${g.N.apiUrl}/data/scenes`}getScopeTags(e){return this.httpClient.get(`${this.apiUrl}/${e}/win365/roleScopeTags`).pipe((0,m.d)({refCount:!0,bufferSize:1}))}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275inject"](h.eN))},e.\u0275prov=p["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ie=n(26215),ae=n(28984),le=n(87519),se=n(68939);function ce(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"label",8),p["\u0275\u0275text"](1),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"](2);p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",e.label," ")}}function de(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"nb-checkbox",16),p["\u0275\u0275text"](1),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]().$implicit;p["\u0275\u0275property"]("checked",e.checked),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",e.Name," ")}}function ue(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"span",17),p["\u0275\u0275listener"]("click",function(){p["\u0275\u0275restoreView"](e);const t=p["\u0275\u0275nextContext"]().$implicit;return p["\u0275\u0275nextContext"](4).singleSelectionChange(t)}),p["\u0275\u0275text"](1),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"]().$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",e.Name," ")}}function me(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"nb-option",13),p["\u0275\u0275listener"]("click",function(){const t=p["\u0275\u0275restoreView"](e).$implicit;return p["\u0275\u0275nextContext"](4).multiSelectionChange(t)}),p["\u0275\u0275template"](1,de,2,2,"nb-checkbox",14),p["\u0275\u0275template"](2,ue,2,1,"span",15),p["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=p["\u0275\u0275nextContext"](4);p["\u0275\u0275property"]("value",e),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",n.multi),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",!n.multi)}}function ge(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",18),p["\u0275\u0275elementStart"](1,"button",19),p["\u0275\u0275listener"]("click",function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](4).assign()}),p["\u0275\u0275text"](2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"](4);let t;p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("disabled",!e.selectedScopeTags.length),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",null!==(t=e.multiSelectButtonLabel)&&void 0!==t?t:"Add"," ")}}function pe(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div",10),p["\u0275\u0275elementStart"](1,"nb-option-list"),p["\u0275\u0275template"](2,me,3,3,"nb-option",11),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](3,ge,3,2,"div",12),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]().ngIf;p["\u0275\u0275nextContext"]();const t=p["\u0275\u0275reference"](3),n=p["\u0275\u0275nextContext"]();p["\u0275\u0275styleProp"]("width",t.elementRef.nativeElement.offsetWidth+"px"),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngForOf",e),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",n.multi)}}function he(e,t){if(1&e&&(p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275template"](1,pe,4,4,"div",9),p["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngIf;p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",e.length)}}function fe(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",2),p["\u0275\u0275template"](1,ce,2,1,"label",3),p["\u0275\u0275elementStart"](2,"nb-form-field",4,5),p["\u0275\u0275pipe"](4,"async"),p["\u0275\u0275elementStart"](5,"input",6),p["\u0275\u0275listener"]("focus",function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().setDefaultSearchDebounceTime()}),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](6,he,2,1,"ng-container",7),p["\u0275\u0275pipe"](7,"async"),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"]();let t;p["\u0275\u0275classProp"]("has-opened-dropdown",e.filteredScopeTagsAmount>0),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",e.label),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("nbSpinner",p["\u0275\u0275pipeBind1"](4,7,e.isSearching$)),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("placeholder",null!==(t=e.placeholder)&&void 0!==t?t:"Search")("formControl",e.searchFormControl),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",p["\u0275\u0275pipeBind1"](7,9,e.filteredScopeTags$))}}function Ce(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",20),p["\u0275\u0275listener"]("click",function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().close()}),p["\u0275\u0275elementEnd"]()}}let be=(()=>{class e{constructor(e){this.scopeTagsTypeheadService=e,this.searchDebounce$=new ie.X(O.XU),this.multi=!1,this.selectionChanged=new p.EventEmitter,this.isSearching$=new ie.X(!1),this.filteredScopeTagsAmount=0,this.searchFormControl=new r.NI(""),this.selectedScopeTags=[]}set tenantViewSceneId(e){if(!e)throw new Error("Tenant View Scene Id must be provided");this.tenantId=e}ngOnInit(){this.initSearchQueryHandler()}setDefaultSearchDebounceTime(){this.searchDebounce$.next(O.XU)}assign(){this.selectionChanged.emit(this.selectedScopeTags.map(({Id:e,Name:t})=>({Id:e,Name:t}))),this.close()}close(){this.selectedScopeTags=[],this.filteredScopeTagsAmount=0,this.searchFormControl.setValue(""),this.searchDebounce$.next(0)}multiSelectionChange(e){e.checked=!e.checked,this.selectedScopeTags=e.checked?[...this.selectedScopeTags,{...e,checked:!0}]:this.selectedScopeTags.filter(t=>t.Id!==e.Id)}singleSelectionChange(e){this.selectionChanged.emit({Id:e.Id,Name:e.Name}),this.close()}initSearchQueryHandler(){this.filteredScopeTags$=this.searchFormControl.valueChanges.pipe((0,ae.D)(()=>this.searchDebounce$.pipe((0,S.w)(e=>(0,s.H)(e)))),(0,le.x)(),(0,C.b)(()=>this.isSearching$.next(!0)),(0,S.w)(e=>e&&"string"==typeof e?this.getScopeTags$(e):(this.isSearching$.next(!1),(0,d.of)([]))))}getScopeTags$(e){return this.scopeTagsTypeheadService.getScopeTags(this.tenantId).pipe((0,A.U)(t=>{const n=e.toLowerCase();return t.filter(e=>e.Name.toLowerCase().includes(n))}),(0,C.b)(e=>{this.filteredScopeTagsAmount=e.length,this.selectedScopeTags=[]}),(0,A.U)(e=>e.map(e=>({...e,checked:!1}))),(0,se.x)(()=>this.isSearching$.next(!1)))}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](re))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-scope-tags-typehead"]],inputs:{tenantViewSceneId:"tenantViewSceneId",multi:"multi",label:"label",placeholder:"placeholder",multiSelectButtonLabel:"multiSelectButtonLabel"},outputs:{selectionChanged:"selectionChanged"},decls:2,vars:2,consts:[["class","scope-tags-typehead-container",3,"has-opened-dropdown",4,"ngIf"],["class","scope-tags-typehead-backdrop",3,"click",4,"ngIf"],[1,"scope-tags-typehead-container"],["for","search_query","class","label",4,"ngIf"],["nbSpinnerMessage","Searching...",3,"nbSpinner"],["formFieldReference",""],["id","search_query","type","text","nbInput","","fullWidth","",3,"placeholder","formControl","focus"],[4,"ngIf"],["for","search_query",1,"label"],["class","dropdown mt-1",3,"width",4,"ngIf"],[1,"dropdown","mt-1"],[3,"value","click",4,"ngFor","ngForOf"],["class","dropdown-footer p-1",4,"ngIf"],[3,"value","click"],[3,"checked",4,"ngIf"],["class","c-pointer w-100 h-100",3,"click",4,"ngIf"],[3,"checked"],[1,"c-pointer","w-100","h-100",3,"click"],[1,"dropdown-footer","p-1"],["nbButton","","fullWidth","",3,"disabled","click"],[1,"scope-tags-typehead-backdrop",3,"click"]],template:function(e,t){1&e&&(p["\u0275\u0275template"](0,fe,8,11,"div",0),p["\u0275\u0275template"](1,Ce,1,0,"div",1)),2&e&&(p["\u0275\u0275property"]("ngIf",t.tenantId),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.filteredScopeTagsAmount>0))},directives:[o.O5,i.jBG,i.Q7R,i.h8i,r.Fj,r.JJ,r.oH,i.Hcl,o.sg,i.q51,i.NTf,i.DPz],pipes:[o.Ov],styles:["[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   .scope-tags-typehead-container[_ngcontent-%COMP%]{z-index:7198}[_nghost-%COMP%]   .scope-tags-typehead-container.has-opened-dropdown[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .scope-tags-typehead-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{position:fixed;border:.0625rem solid #e4e9f2;border-radius:.25rem;overflow:hidden}[_nghost-%COMP%]   .scope-tags-typehead-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   nb-option-list[_ngcontent-%COMP%]{display:block;border-style:none}[_nghost-%COMP%]   .scope-tags-typehead-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-footer[_ngcontent-%COMP%]{background-color:var(--white)}[_nghost-%COMP%]   .scope-tags-typehead-container[_ngcontent-%COMP%]     nb-checkbox{height:100%;display:flex;align-items:center}[_nghost-%COMP%]   .scope-tags-typehead-container[_ngcontent-%COMP%]     nb-checkbox label{cursor:pointer}[_nghost-%COMP%]   .scope-tags-typehead-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:7087}"],changeDetection:0}),e})();function ve(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"nb-alert",2),p["\u0275\u0275text"](1," Select a tenant before selecting scope tags.\n"),p["\u0275\u0275elementEnd"]())}function Se(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"nb-list-item",14),p["\u0275\u0275elementStart"](1,"nb-checkbox",15),p["\u0275\u0275listener"]("checkedChange",function(t){const n=p["\u0275\u0275restoreView"](e).$implicit;return p["\u0275\u0275nextContext"](3).selectOne(n,t)}),p["\u0275\u0275elementStart"](2,"span",16),p["\u0275\u0275text"](3),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"button",17),p["\u0275\u0275listener"]("click",function(){const t=p["\u0275\u0275restoreView"](e).index;return p["\u0275\u0275nextContext"](3).remove(t)}),p["\u0275\u0275element"](5,"nb-icon",6),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("checked",e.value.checked),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate"](e.value.Name)}}function ye(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"nb-list",12),p["\u0275\u0275template"](1,Se,6,2,"nb-list-item",13),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"](2);p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngForOf",e.scopeTagsFormArray.controls)("ngForTrackBy",e.trackByIndex)}}function xe(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div",18),p["\u0275\u0275elementStart"](1,"span",19),p["\u0275\u0275text"](2,"No scope tags selected"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]())}function Pe(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",3),p["\u0275\u0275elementStart"](1,"ngx-scope-tags-typehead",4),p["\u0275\u0275listener"]("selectionChanged",function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().selectionChanged(t)}),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](2,"button",5),p["\u0275\u0275listener"]("click",function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().removeSelected()}),p["\u0275\u0275element"](3,"nb-icon",6),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"div",7),p["\u0275\u0275elementStart"](5,"nb-checkbox",8),p["\u0275\u0275listener"]("checkedChange",function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().selectAll(t)}),p["\u0275\u0275text"](6),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](7,"div",9),p["\u0275\u0275template"](8,ye,2,2,"nb-list",10),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](9,xe,3,0,"ng-template",null,11,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275reference"](10),t=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("tenantViewSceneId",t.tenantId)("multi",!0),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("disabled",!t.isIndeterminate&&!t.areAllSelected),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("disabled",!t.scopeTagsFormArray.length)("checked",t.areAllSelected)("indeterminate",t.isIndeterminate),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",t.areAllSelected?"Deselect all":"Select all"," "),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf",t.scopeTagsFormArray.length)("ngIfElse",e)}}let Ee=(()=>{class e{constructor(){this.trackByIndex=e=>e}get scopeTagsFormArray(){var e;return null===(e=this.form)||void 0===e?void 0:e.get("tags")}get areAllSelected(){var e;const t=this.scopeTagsFormArray.controls.every(e=>e.value.checked);return!(!(null===(e=this.scopeTagsFormArray)||void 0===e?void 0:e.length)||!t)}get isIndeterminate(){var e;if(!(null===(e=this.scopeTagsFormArray)||void 0===e?void 0:e.length))return!1;const t=this.scopeTagsFormArray.controls.filter(e=>e.value.checked).length;return t>0&&t<this.scopeTagsFormArray.length}selectionChanged(e){const t=new Set(this.scopeTagsFormArray.value.map(e=>e.Id));e.filter(e=>!t.has(e.Id)).forEach(e=>this.scopeTagsFormArray.push(new r.NI({Id:e.Id,Name:e.Name,checked:!1})))}removeSelected(){for(let e=this.scopeTagsFormArray.length-1;e>=0;e--)this.scopeTagsFormArray.at(e).value.checked&&this.remove(e)}selectAll(e){this.scopeTagsFormArray.controls.forEach(t=>t.setValue({...t.value,checked:e},{emitEvent:!1}))}selectOne(e,t){e.setValue({...e.value,checked:t},{emitEvent:!1})}remove(e){this.scopeTagsFormArray.removeAt(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-scope-tags-tab"]],inputs:{tenantId:"tenantId",form:"form"},decls:3,vars:2,consts:[["status","danger",4,"ngIf","ngIfElse"],["viewTpl",""],["status","danger"],[1,"scope-tags-tab-header"],["label","Search for tags by name","placeholder","Start typing to select tags",3,"tenantViewSceneId","multi","selectionChanged"],["nbButton","",3,"disabled","click"],["icon","trash-2-outline"],[1,"scope-tags-tab-body","mt-4"],[1,"select-all-checkbox",3,"disabled","checked","indeterminate","checkedChange"],[1,"scrollable-container"],["class","mt-2",4,"ngIf","ngIfElse"],["noDataTpl",""],[1,"mt-2"],["class","d-flex justify-content-between",4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex","justify-content-between"],[1,"d-flex","flex-column",3,"checked","checkedChange"],[1,"d-flex"],["nbButton","","size","tiny","status","danger",3,"click"],[1,"no-data-container","d-flex","align-items-center","justify-content-center","mt-5"],[1,"text-muted"]],template:function(e,t){if(1&e&&(p["\u0275\u0275template"](0,ve,2,0,"nb-alert",0),p["\u0275\u0275template"](1,Pe,11,9,"ng-template",null,1,p["\u0275\u0275templateRefExtractor"])),2&e){const e=p["\u0275\u0275reference"](2);p["\u0275\u0275property"]("ngIf",!t.tenantId)("ngIfElse",e)}},directives:[o.O5,i.$9b,be,i.DPz,i.fMN,i.NTf,i.zP_,o.sg,i.qBV],styles:["[_nghost-%COMP%]{display:block;height:100%;overflow:hidden}[_nghost-%COMP%]   .scope-tags-tab-header[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-between;grid-gap:1em;gap:1em}[_nghost-%COMP%]   .scope-tags-tab-body[_ngcontent-%COMP%]{height:calc(100% - 5rem)}[_nghost-%COMP%]   .scope-tags-tab-body[_ngcontent-%COMP%]   .select-all-checkbox[_ngcontent-%COMP%]{padding:.5em}[_nghost-%COMP%]   .scope-tags-tab-body[_ngcontent-%COMP%]   .scrollable-container[_ngcontent-%COMP%]{height:calc(100% - 3rem);overflow:auto}[_nghost-%COMP%]   .scope-tags-tab-body[_ngcontent-%COMP%]   nb-list[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{padding:.5em;min-height:4.063em}"],changeDetection:0}),e})();var Ie=n(5992),we=n(20521);function ke(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"nb-alert",2),p["\u0275\u0275text"](1," Select a tenant before assigning groups.\n"),p["\u0275\u0275elementEnd"]())}function Oe(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"span",16),p["\u0275\u0275text"](1),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]().$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate"](e.value.Upn)}}function Te(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"nb-list-item",14),p["\u0275\u0275elementStart"](1,"nb-checkbox",15),p["\u0275\u0275listener"]("checkedChange",function(t){const n=p["\u0275\u0275restoreView"](e).$implicit;return p["\u0275\u0275nextContext"](3).selectOne(n,t)}),p["\u0275\u0275elementStart"](2,"span",16),p["\u0275\u0275text"](3),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](4,Oe,2,1,"span",17),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"button",18),p["\u0275\u0275listener"]("click",function(){const t=p["\u0275\u0275restoreView"](e).index;return p["\u0275\u0275nextContext"](3).remove(t)}),p["\u0275\u0275element"](6,"nb-icon",6),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("checked",e.value.checked),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate"](e.value.DisplayName),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",e.value.Upn)}}function Fe(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"nb-list",12),p["\u0275\u0275template"](1,Te,7,3,"nb-list-item",13),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"](2);p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngForOf",e.assignmentGroupsFormArray.controls)("ngForTrackBy",e.trackByIndex)}}function Ae(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div",19),p["\u0275\u0275elementStart"](1,"span",20),p["\u0275\u0275text"](2,"No groups selected"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]())}function Me(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",3),p["\u0275\u0275elementStart"](1,"ngx-directory-object-typehead",4),p["\u0275\u0275listener"]("selectionChanged",function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().selectionChanged(t)}),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](2,"button",5),p["\u0275\u0275listener"]("click",function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().removeSelected()}),p["\u0275\u0275element"](3,"nb-icon",6),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"div",7),p["\u0275\u0275elementStart"](5,"nb-checkbox",8),p["\u0275\u0275listener"]("checkedChange",function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().selectAll(t)}),p["\u0275\u0275text"](6),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](7,"div",9),p["\u0275\u0275template"](8,Fe,2,2,"nb-list",10),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](9,Ae,3,0,"ng-template",null,11,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275reference"](10),t=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("tenantViewSceneId",t.tenantId)("multi",!0)("type",t.DirectoryObjectTypeEnum.Groups),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("disabled",!t.isIndeterminate&&!t.areAllSelected),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("disabled",!t.assignmentGroupsFormArray.length)("checked",t.areAllSelected)("indeterminate",t.isIndeterminate),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",t.areAllSelected?"Deselect all":"Select all"," "),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf",t.assignmentGroupsFormArray.length)("ngIfElse",e)}}let _e=(()=>{class e{constructor(){this.DirectoryObjectTypeEnum=Ie.W,this.trackByIndex=e=>e}get assignmentGroupsFormArray(){var e;return null===(e=this.form)||void 0===e?void 0:e.get("groups")}get areAllSelected(){var e;const t=this.assignmentGroupsFormArray.controls.every(e=>e.value.checked);return!(!(null===(e=this.assignmentGroupsFormArray)||void 0===e?void 0:e.length)||!t)}get isIndeterminate(){var e;if(!(null===(e=this.assignmentGroupsFormArray)||void 0===e?void 0:e.length))return!1;const t=this.assignmentGroupsFormArray.controls.filter(e=>e.value.checked).length;return t>0&&t<this.assignmentGroupsFormArray.length}selectionChanged(e){const t=new Set(this.assignmentGroupsFormArray.value.map(e=>e.Id));e.filter(e=>!t.has(e.Id)).forEach(e=>this.assignmentGroupsFormArray.push(new r.NI({...e,checked:!1})))}removeSelected(){for(let e=this.assignmentGroupsFormArray.length-1;e>=0;e--)this.assignmentGroupsFormArray.at(e).value.checked&&this.remove(e)}selectAll(e){this.assignmentGroupsFormArray.controls.forEach(t=>t.setValue({...t.value,checked:e},{emitEvent:!1}))}selectOne(e,t){e.setValue({...e.value,checked:t},{emitEvent:!1})}remove(e){this.assignmentGroupsFormArray.removeAt(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-assignments-tab"]],inputs:{tenantId:"tenantId",form:"form"},decls:3,vars:2,consts:[["status","danger",4,"ngIf","ngIfElse"],["viewTpl",""],["status","danger"],[1,"assignments-tab-header"],["label","Search for groups by name (min. 3 characters)","placeholder","Start typing to assign groups to the selected tenant.","multiSelectButtonLabel","Add groups",3,"tenantViewSceneId","multi","type","selectionChanged"],["nbButton","",3,"disabled","click"],["icon","trash-2-outline"],[1,"assignments-tab-body","mt-4"],[1,"select-all-checkbox",3,"disabled","checked","indeterminate","checkedChange"],[1,"scrollable-container"],["class","mt-2",4,"ngIf","ngIfElse"],["noDataTpl",""],[1,"mt-2"],["class","d-flex justify-content-between",4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex","justify-content-between"],[1,"d-flex","flex-column",3,"checked","checkedChange"],[1,"d-flex"],["class","d-flex",4,"ngIf"],["nbButton","","size","tiny","status","danger",3,"click"],[1,"no-data-container","d-flex","align-items-center","justify-content-center","mt-5"],[1,"text-muted"]],template:function(e,t){if(1&e&&(p["\u0275\u0275template"](0,ke,2,0,"nb-alert",0),p["\u0275\u0275template"](1,Me,11,10,"ng-template",null,1,p["\u0275\u0275templateRefExtractor"])),2&e){const e=p["\u0275\u0275reference"](2);p["\u0275\u0275property"]("ngIf",!t.tenantId)("ngIfElse",e)}},directives:[o.O5,i.$9b,we.B,i.DPz,i.fMN,i.NTf,i.zP_,o.sg,i.qBV],styles:["[_nghost-%COMP%]{display:block;height:100%;overflow:hidden}[_nghost-%COMP%]   .assignments-tab-header[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-between;grid-gap:1em;gap:1em}[_nghost-%COMP%]   .assignments-tab-body[_ngcontent-%COMP%]{height:calc(100% - 5rem)}[_nghost-%COMP%]   .assignments-tab-body[_ngcontent-%COMP%]   .select-all-checkbox[_ngcontent-%COMP%]{padding:.5em}[_nghost-%COMP%]   .assignments-tab-body[_ngcontent-%COMP%]   .scrollable-container[_ngcontent-%COMP%]{height:calc(100% - 3rem);overflow:auto}[_nghost-%COMP%]   .assignments-tab-body[_ngcontent-%COMP%]   nb-list[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{padding:.5em;min-height:4.063em}"],changeDetection:0}),e})();var Ne=n(77194);let Ve=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({imports:[[o.ez,H,r.UX,i.zyh,i.uuI,i.T2N,i.KdK,i.nKr,i.IIj,i.EoG,X.tA,i.MAY,i.rgH,F.H8,oe,i.PYG,i.MfT,i.COg,Ne.e7]]}),e})();p["\u0275\u0275setComponentScope"](V,[i.Asz,i.Q7R,i.ndF,i.yKW,i.kyn,r.JL,r.sg,i.TR4,ne,Ee,_e,i.XWE,i.DPz],[o.Ov])}}]);