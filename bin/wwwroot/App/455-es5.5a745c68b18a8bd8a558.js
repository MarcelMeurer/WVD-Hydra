!function(){function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function e(e){for(var o=1;o<arguments.length;o++){var i=null!=arguments[o]?arguments[o]:{};o%2?t(Object(i),!0).forEach(function(t){n(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var o,i,l=[],r=!0,a=!1;try{for(n=n.call(t);!(r=(o=n.next()).done)&&(l.push(o.value),!e||l.length!==e);r=!0);}catch(s){a=!0,i=s}finally{try{r||null==n.return||n.return()}finally{if(a)throw i}}return l}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}(self.webpackChunkngx_admin=self.webpackChunkngx_admin||[]).push([[455],{76897:function(t,e,n){"use strict";n.d(e,{XU:function(){return o},cc:function(){return i},e5:function(){return l}});var o=400,i=3,l=5e3},46326:function(t,e,n){"use strict";n.d(e,{V:function(){return i}});var o=n(37716),i=function(){var t=function(){function t(){a(this,t)}return c(t,[{key:"getItem",value:function(t){return localStorage.getItem(t)}},{key:"setItem",value:function(t,e){localStorage.setItem(t,e)}},{key:"removeItem",value:function(t){localStorage.removeItem(t)}},{key:"clear",value:function(){localStorage.clear()}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},47010:function(t,e,n){"use strict";n.d(e,{D:function(){return y}});var o=n(37716),l=n(79765),r=n(3679),s=n(54395),u=n(87519),d=n(46782),p=n(76897),m=n(14625),f=n(38583);function h(t,e){if(1&t){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"nb-list-item"),o["\u0275\u0275elementStart"](1,"nb-checkbox",7),o["\u0275\u0275listener"]("checkedChange",function(t){return o["\u0275\u0275restoreView"](n).$implicit.checked=t})("checkedChange",function(t){var e=o["\u0275\u0275restoreView"](n).$implicit;return o["\u0275\u0275nextContext"]().toggle(e,t)}),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("checked",i.checked),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",i.label," ")}}var y=function(){var t=function(){function t(){var e=this;a(this,t),this.destroyed$=new l.xQ,this.filtersCache=[],this.filtersChanges=new o.EventEmitter,this.areAllChecked=!1,this.isIntermediateState=!1,this.searchQueryControl=new r.NI(""),this.internalFilters=[],this.trackByItemIndex=function(t,e){return"".concat(e.label,"-").concat(t)},this.searchInFiltersCallback=function(t){var n=t.toLowerCase().trim();e.internalFilters=n?e.filtersCache.filter(function(t){return t.label.toLowerCase().includes(n)}):i(e.filtersCache)}}return c(t,[{key:"filters",set:function(t){if(!t)throw new Error("Filters are required");this.internalFilters=t,this.filtersCache=i(t),this.initSearch(),this.updateCheckStates()}},{key:"selectAll",value:function(t){var e=this;this.internalFilters.forEach(function(n){return e.toggle(n,t)}),this.updateCheckStates()}},{key:"toggle",value:function(t,e){t.checked=e,this.updateCheckStates()}},{key:"applyFilters",value:function(){this.filtersChanges.emit([this.internalFilters,this.filterName])}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"initSearch",value:function(){this.searchQueryControl.valueChanges.pipe((0,s.b)(p.XU),(0,u.x)(),(0,d.R)(this.destroyed$)).subscribe(this.searchInFiltersCallback)}},{key:"updateCheckStates",value:function(){var t=this.filtersCache.length,e=this.filtersCache.filter(function(t){return t.checked}).length;this.areAllChecked=e===t,this.isIntermediateState=e>0&&e<t}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-table-filter-popover"]],inputs:{filters:"filters",filterName:"filterName"},outputs:{filtersChanges:"filtersChanges"},decls:12,vars:6,consts:[[1,"content-layout"],["for","filters_search",1,"w-100"],["id","filters_search","type","text","placeholder","Search","nbInput","","fullWidth","","fieldSize","small",3,"formControl"],[3,"checked","indeterminate","checkedChange"],[1,"scrollable-container"],[4,"ngFor","ngForOf","ngForTrackBy"],["nbButton","","size","small","fullWidth","",3,"click"],[3,"checked","checkedChange"]],template:function(t,e){1&t&&(o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-list",0),o["\u0275\u0275elementStart"](2,"nb-list-item"),o["\u0275\u0275elementStart"](3,"label",1),o["\u0275\u0275element"](4,"input",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"nb-checkbox",3),o["\u0275\u0275listener"]("checkedChange",function(t){return e.selectAll(t)}),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"nb-list",4),o["\u0275\u0275template"](8,h,3,2,"nb-list-item",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"nb-card-footer"),o["\u0275\u0275elementStart"](10,"button",6),o["\u0275\u0275listener"]("click",function(){return e.applyFilters()}),o["\u0275\u0275text"](11," Apply "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&t&&(o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("formControl",e.searchQueryControl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("checked",e.areAllChecked)("indeterminate",e.isIntermediateState),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.areAllChecked?"Deselect":"Select"," all "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",e.internalFilters)("ngForTrackBy",e.trackByItemIndex))},directives:[m.Asz,m.zP_,m.qBV,m.h8i,r.Fj,r.JJ,r.oH,m.NTf,f.sg,m.XWE,m.DPz],styles:["[_nghost-%COMP%]{display:block;width:18.75em;height:27em;overflow:hidden}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{margin:0;height:100%}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .content-layout[_ngcontent-%COMP%]{height:100%;overflow:hidden}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .content-layout[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{height:100%;align-items:start;flex-direction:column}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-list.scrollable-container[_ngcontent-%COMP%]{height:100%;width:100%;overflow:auto}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-list.scrollable-container[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{height:auto;padding:.5em 0}[_nghost-%COMP%]   nb-checkbox[_ngcontent-%COMP%]{padding:0 .5em}"]}),t}()},57455:function(t,n,l){"use strict";l.r(n),l.d(n,{DashboardModule:function(){return ke}});var r=l(38583),s=l(10264),u=l(37716),d=function(){var t=function t(){a(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-dashboard"]],decls:1,vars:0,template:function(t,e){1&t&&u["\u0275\u0275element"](0,"router-outlet")},directives:[s.lC],styles:[""]}),t}(),p=l(79765),m=l(46797),f=l(40205),h=l(25917),y=l(33866),v=l(34681),g=l(68307),S=l(11627),b=l(39761),P=l(43190),C=l(67666),H=l(5304),x=l(46782),T=l(87519),I=l(11173),A=l(14625),w=l(76897),E=l(3679);function k(t,e){return e.map(function(e){var n,o=t.find(function(t){return t.label===e});return{label:e,checked:null!==(n=null==o?void 0:o.checked)&&void 0!==n&&n}})}var D=l(46326),F=l(47010),O=["popoverRef"];function N(t,e){1&t&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1,"+"),u["\u0275\u0275elementContainerEnd"]())}function L(t,e){1&t&&u["\u0275\u0275element"](0,"nb-icon",9)}function B(t,e){1&t&&u["\u0275\u0275element"](0,"nb-icon",10)}function M(t,e){if(1&t){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ngx-table-filter-popover",11),u["\u0275\u0275listener"]("filtersChanges",function(t){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().filtersChanges(t)}),u["\u0275\u0275elementEnd"]()}if(2&t){var o=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("filters",o.filtersList)}}var V=function(){var t=function(){function t(){a(this,t),this.MAX_SELECTED_FILTERS_BADGE_AMOUNT=9,this.filtersChanged=new u.EventEmitter,this.filtersList=[],this.selectedFiltersAmount=0,this.label=""}return c(t,[{key:"filters",set:function(t){this.filtersList=t,this.selectedFiltersAmount=t.filter(function(t){return t.checked}).length,this.buildInputValue([t])}},{key:"filtersChanges",value:function(t){var e,n=o(t,1)[0];this.buildInputValue([n]),this.selectedFiltersAmount=n.filter(function(t){return t.checked}).length,this.filtersChanged.emit([n]),null===(e=this.popoverRef)||void 0===e||e.hide()}},{key:"buildInputValue",value:function(t){var e=o(t,1)[0];this.label=e.filter(function(t){return t.checked}).map(function(t){return t.label}).join(", ")}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-overview-popover-filter-trigger"]],viewQuery:function(t,e){var n;(1&t&&u["\u0275\u0275viewQuery"](O,7),2&t)&&(u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(e.popoverRef=n.first))},inputs:{filters:"filters"},outputs:{filtersChanged:"filtersChanged"},decls:11,vars:6,consts:[["nbPopoverTrigger","focus","nbPopoverPlacement","bottom",1,"c-pointer",3,"nbPopover"],["popoverRef","nbPopover"],["nbPrefix","","icon","funnel-outline"],["type","text","nbInput","","fullWidth","","readonly","","placeholder","Select tenant filter(s) to apply",1,"c-pointer",3,"value"],["nbSuffix","",1,"badge"],[4,"ngIf"],["nbSuffix","","icon","chevron-down-outline",4,"ngIf"],["nbSuffix","","icon","chevron-up-outline",4,"ngIf"],["hostPoolsFilterPopoverTpl",""],["nbSuffix","","icon","chevron-down-outline"],["nbSuffix","","icon","chevron-up-outline"],[3,"filters","filtersChanges"]],template:function(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"nb-form-field",0,1),u["\u0275\u0275element"](2,"nb-icon",2),u["\u0275\u0275element"](3,"input",3),u["\u0275\u0275elementStart"](4,"div",4),u["\u0275\u0275text"](5),u["\u0275\u0275template"](6,N,2,0,"ng-container",5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](7,L,1,0,"nb-icon",6),u["\u0275\u0275template"](8,B,1,0,"nb-icon",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](9,M,1,1,"ng-template",null,8,u["\u0275\u0275templateRefExtractor"])),2&t){var n=u["\u0275\u0275reference"](1),o=u["\u0275\u0275reference"](10);u["\u0275\u0275property"]("nbPopover",o),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("value",e.label),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",e.selectedFiltersAmount," "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.selectedFiltersAmount>e.MAX_SELECTED_FILTERS_BADGE_AMOUNT),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.isShown),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!n.isShown)}},directives:[A.jBG,A.ydg,A.fMN,A.t3q,A.h8i,A.yyc,r.O5,F.D],styles:["[_nghost-%COMP%]   input[nbInput][_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;padding-right:3rem!important}[_nghost-%COMP%]   .badge[_ngcontent-%COMP%]{border-radius:50%;color:var(--white);background-color:var(--primary);width:2em;height:2em;display:flex;align-items:center;justify-content:center}"]}),t}(),_=l(78352);function U(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"nb-card",10),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&t){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](' No results for "',n.searchFormControl.value,'".\n')}}var j=function(t){return{"filter-by":t}};function K(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"nb-card",16),u["\u0275\u0275elementStart"](1,"nb-card-header"),u["\u0275\u0275element"](2,"nb-icon",17),u["\u0275\u0275text"](3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"nb-card-body"),u["\u0275\u0275elementStart"](5,"div",11),u["\u0275\u0275elementStart"](6,"div",18),u["\u0275\u0275element"](7,"ngx-tacho",19),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"div",20),u["\u0275\u0275elementStart"](9,"div",21),u["\u0275\u0275element"](10,"div",4),u["\u0275\u0275elementStart"](11,"div",22),u["\u0275\u0275text"](12,"Active users:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"div",23),u["\u0275\u0275elementStart"](14,"font",24),u["\u0275\u0275elementStart"](15,"b"),u["\u0275\u0275text"](16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](17,"div",25),u["\u0275\u0275element"](18,"div",4),u["\u0275\u0275elementStart"](19,"div",22),u["\u0275\u0275text"](20,"Inactive users:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"div",23),u["\u0275\u0275text"](22),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](23,"div",26),u["\u0275\u0275elementStart"](24,"div",12),u["\u0275\u0275elementStart"](25,"b"),u["\u0275\u0275text"](26),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](27,"div",27),u["\u0275\u0275elementStart"](28,"div",28),u["\u0275\u0275elementStart"](29,"div"),u["\u0275\u0275element"](30,"nb-icon",29),u["\u0275\u0275text"](31),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](32,"div"),u["\u0275\u0275element"](33,"nb-icon",30),u["\u0275\u0275text"](34),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](35,"div"),u["\u0275\u0275element"](36,"nb-icon",31),u["\u0275\u0275text"](37),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](38,"nb-card-footer"),u["\u0275\u0275elementStart"](39,"div",32),u["\u0275\u0275elementStart"](40,"div",33),u["\u0275\u0275element"](41,"nb-action",34),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,o=u["\u0275\u0275nextContext"](2).$implicit;u["\u0275\u0275property"]("queryParams",u["\u0275\u0275pureFunction1"](10,j,o.scene+","+n.id)),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",n.name," "),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("chartValue",n.policyUsageRate),u["\u0275\u0275advance"](9),u["\u0275\u0275textInterpolate"](n.activeUsers),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate"](n.inactiveUsers),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate2"]("Cloud PCs (",n.runningCloudPcs," of ",n.cloudPCs.length,"):"),u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate1"](" ",n.provisionedCloudPcs," "),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",n.provisioningCloudPcs," "),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",n.deprovisioningCloudPcs," ")}}function $(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"div",14),u["\u0275\u0275template"](1,K,42,12,"nb-card",15),u["\u0275\u0275elementEnd"]()),2&t){var n=u["\u0275\u0275nextContext"]().$implicit,o=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",n.policies)("ngForTrackBy",o.trackByPolicyId)}}function R(t,e){if(1&t&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"div",11),u["\u0275\u0275elementStart"](2,"div",12),u["\u0275\u0275elementStart"](3,"h2"),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](5,$,2,2,"div",13),u["\u0275\u0275elementContainerEnd"]()),2&t){var n=e.$implicit;u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](n.sceneName),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.policies.length)}}var z=function(){var t=function(){function t(e,n,o){var i=this;a(this,t),this.wd365Service=e,this.toastrService=n,this.storageService=o,this.destroyed$=new p.xQ,this.cloudPcs$=new p.xQ,this.groupedCloudPCsCache=[],this.searchFormControl=new E.NI(""),this.groupedCloudPCs=[],this.filters=[],this.selectedFilters=[],this.trackByGroupSceneId=function(t,e){return e.scene},this.trackByPolicyId=function(t,e){return e.id},this.retryApiCallWithToastCallback=function(t){return t.pipe((0,g.b)(function(t){return i.showDangerToast("Failure accessing the API","Cannot read data from API. The message is: ".concat(t.message," with status ").concat(t.statusText))}),(0,S.j)(function(){return(0,m.H)(w.e5)}))},this.handleApiErrorCallback=function(t){return(0,f._)(function(){return i.showDangerToast("Failure accessing the API","Cannot read data from API. Reload this site to try it again. The message is: ".concat(t.message," with status ").concat(t.statusText)),(0,h.of)([])})}}return c(t,[{key:"ngOnInit",value:function(){localStorage.getItem("Hydra.CloudPCsPolicies.Filter")&&this.searchFormControl.setValue(localStorage.getItem("Hydra.CloudPCsPolicies.Filter")),this.initCloudPcs(),this.initTableSearch()}},{key:"update",value:function(){this.cloudPcs$.next()}},{key:"filtersChanges",value:function(t){var e=o(t,1)[0];this.selectedFilters=e.filter(function(t){return t.checked}).map(function(t){return t.label.toLowerCase()}),this.updateFilteredCloudPcs()}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"initCloudPcs",value:function(){var t=this;this.cloudPcs$.pipe((0,b.O)(0),(0,P.w)(function(){return(0,m.H)(0,I.tc.autoRefreshDefault)}),(0,P.w)(function(){return t.wd365Service.getAllCloudPCs()}),(0,C.a)(this.retryApiCallWithToastCallback),(0,H.K)(this.handleApiErrorCallback),(0,x.R)(this.destroyed$)).subscribe(function(n){var l,r=localStorage.getItem("Hydra.CloudPCsPolicies.Filter"),a=(l=function(t){return t.reduce(function(t,n){var o=n.Scene;return t[o]||(t[o]={sceneName:n.SceneName,items:[]}),t[o]=e(e({},t[o]),{},{items:[].concat(i(t[o].items),[n])}),t},{})}(n),Object.entries(l).map(function(t){var e=o(t,2),n=e[0],i=e[1];return{scene:n,sceneName:i.sceneName,policies:Q(i.items)}}));t.groupedCloudPCsCache=a,t.groupedCloudPCs=r?G(a,r):a,t.filters=t.buildFilters(Array.from(new Set(t.groupedCloudPCs.flatMap(function(t){return t.sceneName})))),t.updateFilteredCloudPcs()})}},{key:"initTableSearch",value:function(){var t=this;this.searchFormControl.valueChanges.pipe((0,T.x)(),(0,x.R)(this.destroyed$)).subscribe(function(e){var n=e.trim().toLowerCase();localStorage.setItem("Hydra.CloudPCsPolicies.Filter",n),t.groupedCloudPCs=G(t.groupedCloudPCsCache,n),t.updateFilteredCloudPcs()})}},{key:"buildFilters",value:function(t){var e=this;return this.filters.length?k(this.filters,t):t.map(function(t){return{label:t,checked:e.selectedFilters.includes(t.toLowerCase())}})}},{key:"updateFilteredCloudPcs",value:function(){var t,e=this,n=this.groupedCloudPCsCache;(null===(t=this.selectedFilters)||void 0===t?void 0:t.length)&&(n=n.filter(function(t){return e.selectedFilters.includes(t.sceneName.toLowerCase())}));var o=this.searchFormControl.value.trim().toLowerCase();o&&(n=G(n,o)),this.groupedCloudPCs=n}},{key:"showDangerToast",value:function(t,e){this.toastrService.danger(e,t,{destroyByClick:!0,duration:2e4,hasIcon:!0,position:A.fe3.TOP_RIGHT,preventDuplicates:!0})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275directiveInject"](v.G),u["\u0275\u0275directiveInject"](A.quB),u["\u0275\u0275directiveInject"](D.V))},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-w365-overview"]],decls:13,vars:5,consts:[[1,"row","mb-2"],[1,"col-md-7"],[1,"col-md-3"],["type","text","nbInput","","fullWidth","","placeholder","Search for provisioning policy name",3,"formControl"],[1,"col-md-2"],[3,"filters","filtersChanged"],["class","no-results-card",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","button","nbButton","","status","semi-round",3,"click"],["icon","refresh"],[1,"no-results-card"],[1,"row"],[1,"col-md-12"],["class","d-flex flex-wrap",4,"ngIf"],[1,"d-flex","flex-wrap"],["routerLink","/pages/wd365/all-cloud-pcs",3,"queryParams",4,"ngFor","ngForOf","ngForTrackBy"],["routerLink","/pages/wd365/all-cloud-pcs",3,"queryParams"],["icon","monitor","nbTooltip","Provisioning policy"],["nbTooltip","Percentage of provisioned Cloud PCs with an active user, as reported by the Hydra Agent","nbTooltipPlacement","left",1,"col-md-2"],[3,"chartValue"],[1,"col-md-10"],["nbTooltip","Cloud PCs with the Hydra Agent installed and currently importing activity","nbTooltipPlacement","right",1,"row"],[1,"col-md-5"],[1,"col-md-5","text-right"],["size","+2"],["nbTooltip","Cloud PCs with Hydra Agent installed, but currently there is no reported activity","nbTooltipPlacement","right",1,"row"],[1,"row","pt-3"],[1,"row","d-flex","mt-1"],[1,"col-md-12","d-flex","justify-content-between"],["icon","play-circle","nbTooltip","Provisioned Cloud PCs","nbTooltipPlacement","bottom"],["icon","navigation-2","nbTooltip","Cloud PCs being provisioned","nbTooltipPlacement","bottom"],["icon","trash-2","nbTooltip","Cloud PCs being deprovisioned","nbTooltipPlacement","bottom"],[1,"d-flex","justify-content-end"],[1,"col-sm-1"],["icon","activity","nbTooltipIcon","activity","nbTooltip","Show details","nbTooltipPlacement","bottom"]],template:function(t,e){1&t&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"h1"),u["\u0275\u0275text"](3,"Windows 365"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"div",2),u["\u0275\u0275element"](5,"input",3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"div",4),u["\u0275\u0275elementStart"](7,"ngx-overview-popover-filter-trigger",5),u["\u0275\u0275listener"]("filtersChanged",function(t){return e.filtersChanges(t)}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](8,U,2,1,"nb-card",6),u["\u0275\u0275template"](9,R,6,2,"ng-container",7),u["\u0275\u0275elementStart"](10,"button",8),u["\u0275\u0275listener"]("click",function(){return e.update()}),u["\u0275\u0275element"](11,"nb-icon",9),u["\u0275\u0275text"](12," Update\n"),u["\u0275\u0275elementEnd"]()),2&t&&(u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("formControl",e.searchFormControl),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("filters",e.filters),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.groupedCloudPCs.length&&e.searchFormControl.value),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.groupedCloudPCs)("ngForTrackBy",e.trackByGroupSceneId))},directives:[A.h8i,E.Fj,E.JJ,E.oH,V,r.O5,r.sg,A.DPz,A.fMN,A.Asz,s.rH,A.ndF,A.jNv,A.yKW,_.K,A.XWE,A.Bk3],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]:not(.no-results-card){width:26rem;height:17rem;margin-right:1rem}[_nghost-%COMP%]   nb-card.no-results-card[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:1rem}"]}),t}();function G(t,n){if(!n)return t;var o=t.find(function(t){return t.sceneName.toLowerCase().includes(n)});return o?[e(e({},o),{},{policies:i(o.policies)})]:t.map(function(t){var o=t.sceneName.toLowerCase().includes(n),i=t.policies.filter(function(t){var e;return o||(null===(e=t.name)||void 0===e?void 0:e.toLowerCase().includes(n))});return i.length>0?e(e({},t),{},{policies:i}):null}).filter(function(t){return null!==t})}function Q(t){var n={};t.forEach(function(t){var o,l,r=null===(o=t.Resource)||void 0===o?void 0:o.ProvisioningPolicyId,a=null===(l=t.Resource)||void 0===l?void 0:l.ProvisioningPolicyName,s="".concat(r,"|").concat(a);n[s]||(n[s]={id:r,name:a,policyUsageRate:0,activeUsers:0,inactiveUsers:0,unknownUsers:0,runningCloudPcs:0,cloudPCs:[],provisionedCloudPcs:0,provisioningCloudPcs:0,deprovisioningCloudPcs:0}),n[s]=e(e({},n[s]),{},{cloudPCs:[].concat(i(n[s].cloudPCs),[t.Resource])})});var o=function(t,n){return n.map(function(n){var o=t.filter(function(t){var e,o;return(null===(e=t.Resource)||void 0===e?void 0:e.ProvisioningPolicyId)===n.id&&(null===(o=t.Resource)||void 0===o?void 0:o.ProvisioningPolicyName)===n.name});return n=e(e({},n),{},{activeUsers:o.filter(function(t){return!0===t.Advanced.SessionActive}).length,inactiveUsers:o.filter(function(t){return!1===t.Advanced.SessionActive}).length,runningCloudPcs:n.cloudPCs.filter(function(t){return t.Status===y.vs.Provisioned}).length,provisionedCloudPcs:n.cloudPCs.filter(function(t){return t.Status===y.vs.Provisioned}).length,provisioningCloudPcs:n.cloudPCs.filter(function(t){return t.Status===y.vs.Provisioning}).length,deprovisioningCloudPcs:n.cloudPCs.filter(function(t){return t.Status===y.vs.Deprovisioning}).length}),n=e(e({},n),{},{policyUsageRate:n.runningCloudPcs>0?n.activeUsers/n.runningCloudPcs*100:0})})}(t,Object.values(n));return Object.values(o).sort(function(t,e){var n,o;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase()).localeCompare(null===(o=e.name)||void 0===o?void 0:o.toLowerCase())})}var W=l(86115),J=l(34794);function q(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"nb-card",2),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&t){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](' No results for "',n.searchQueryValue,'".\n')}}function X(t,e){1&t&&u["\u0275\u0275element"](0,"nb-icon",20)}function Y(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"nb-card-header",17),u["\u0275\u0275elementStart"](1,"div"),u["\u0275\u0275element"](2,"nb-icon",18),u["\u0275\u0275text"](3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](4,X,1,0,"nb-icon",19),u["\u0275\u0275elementEnd"]()),2&t){var n=u["\u0275\u0275nextContext"]().$implicit,o=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",n.V2HostPool.Name," "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.V2HostPool.Properties.ManagementType==o.ManagementTypeClass.Automated)}}function Z(t,e){1&t&&u["\u0275\u0275element"](0,"nb-icon",24)}function tt(t,e){1&t&&u["\u0275\u0275element"](0,"nb-icon",25)}function et(t,e){1&t&&u["\u0275\u0275element"](0,"nb-icon",20)}function nt(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"nb-card-header",17),u["\u0275\u0275elementStart"](1,"div"),u["\u0275\u0275element"](2,"nb-icon",21),u["\u0275\u0275text"](3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"div"),u["\u0275\u0275template"](5,Z,1,0,"nb-icon",22),u["\u0275\u0275template"](6,tt,1,0,"ng-template",null,23,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](8,et,1,0,"nb-icon",19),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&t){var n=u["\u0275\u0275reference"](7),o=u["\u0275\u0275nextContext"]().$implicit,i=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",o.V2HostPool.Name," "),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",o.V2HostPool.Properties.LoadBalancerType==i.LoadBalancerTypeClass.BreadthFirst)("ngIfElse",n),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",o.V2HostPool.Properties.ManagementType==i.ManagementTypeClass.Automated)}}function ot(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"nb-card-body"),u["\u0275\u0275elementStart"](1,"div",3),u["\u0275\u0275elementStart"](2,"div",26),u["\u0275\u0275element"](3,"ngx-tacho",27),u["\u0275\u0275pipe"](4,"number"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",28),u["\u0275\u0275elementStart"](6,"div",29),u["\u0275\u0275element"](7,"div",30),u["\u0275\u0275elementStart"](8,"div",31),u["\u0275\u0275text"](9,"Sessions:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"div",32),u["\u0275\u0275elementStart"](11,"font",33),u["\u0275\u0275elementStart"](12,"b"),u["\u0275\u0275text"](13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"div",34),u["\u0275\u0275element"](15,"div",30),u["\u0275\u0275elementStart"](16,"div",31),u["\u0275\u0275text"](17,"Capacity now:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](18,"div",32),u["\u0275\u0275text"](19),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"div",35),u["\u0275\u0275element"](21,"div",30),u["\u0275\u0275elementStart"](22,"div",31),u["\u0275\u0275text"](23,"Capacity soon:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](24,"div",32),u["\u0275\u0275text"](25),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](26,"div",36),u["\u0275\u0275elementStart"](27,"div",37),u["\u0275\u0275text"](28),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](29,"div",38),u["\u0275\u0275elementStart"](30,"div",39),u["\u0275\u0275elementStart"](31,"div"),u["\u0275\u0275element"](32,"nb-icon",40),u["\u0275\u0275text"](33),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](34,"div"),u["\u0275\u0275element"](35,"nb-icon",41),u["\u0275\u0275text"](36),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](37,"div"),u["\u0275\u0275element"](38,"nb-icon",42),u["\u0275\u0275text"](39),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](40,"div"),u["\u0275\u0275element"](41,"nb-icon",43),u["\u0275\u0275text"](42),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](43,"div"),u["\u0275\u0275element"](44,"nb-icon",44),u["\u0275\u0275text"](45),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](46,"div"),u["\u0275\u0275element"](47,"nb-icon",45),u["\u0275\u0275text"](48),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&t){var n=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("chartValue",u["\u0275\u0275pipeBind2"](4,12,n.HostPoolHistoryAndStatistic.StatisticDetail.Utilization,"1.1-1")),u["\u0275\u0275advance"](10),u["\u0275\u0275textInterpolate"](null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.UserSessions),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate1"](" ",null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.UserCapacityNow," "),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate1"](" ",null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.UserSessionsCapacitySoon," "),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate2"](" Session hosts (",null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsNotOff," of ",null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHosts,"): "),u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate1"](" ",null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsAvailable," "),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsStarting," "),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsStopping," "),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsInCreation," "),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsInDeletion," "),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsTemporarilyScaledAndAvailable," ")}}function it(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"div",46),u["\u0275\u0275element"](1,"nb-icon",47),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"number"),u["\u0275\u0275elementEnd"]()),2&t){var n=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind2"](3,1,null==n||null==n.HostPoolHistoryAndStatistic?null:n.HostPoolHistoryAndStatistic.DeltaUserSessionsPerMinute,"1.1-1")," s/min ")}}function lt(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"div",46),u["\u0275\u0275element"](1,"nb-icon",48),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"number"),u["\u0275\u0275elementEnd"]()),2&t){var n=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind2"](3,1,null==n||null==n.HostPoolHistoryAndStatistic?null:n.HostPoolHistoryAndStatistic.DeltaUserSessionsPerMinute,"1.1-1")," s/min ")}}function rt(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"div",46),u["\u0275\u0275element"](1,"nb-icon",49),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"number"),u["\u0275\u0275elementEnd"]()),2&t){var n=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind2"](3,1,null==n||null==n.HostPoolHistoryAndStatistic?null:n.HostPoolHistoryAndStatistic.DeltaUserSessionsPerMinute,"1.1-1")," s/min ")}}function at(t,e){if(1&t){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"nb-action",50),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](n);var t=u["\u0275\u0275nextContext"]().$implicit;return u["\u0275\u0275nextContext"](2).navigateTo("/pages/hostpools/"+t.Id+"/statistic","!failed")}),u["\u0275\u0275elementEnd"]()}if(2&t){var o=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275propertyInterpolate1"]("nbTooltip","Some session hosts are in an error state (",null==o||null==o.HostPoolHistoryAndStatistic||null==o.HostPoolHistoryAndStatistic.StatisticDetail?null:o.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsFailed,")")}}function st(t,e){if(1&t){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"nb-card",7),u["\u0275\u0275listener"]("click",function(){var t=u["\u0275\u0275restoreView"](n).$implicit;return u["\u0275\u0275nextContext"](2).navigateTo("/pages/hostpools/"+t.Id+"/statistic")}),u["\u0275\u0275template"](1,Y,5,2,"nb-card-header",8),u["\u0275\u0275template"](2,nt,9,4,"ng-template",null,9,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](4,ot,49,15,"nb-card-body",10),u["\u0275\u0275elementStart"](5,"nb-card-footer"),u["\u0275\u0275elementStart"](6,"div",3),u["\u0275\u0275template"](7,it,4,4,"div",11),u["\u0275\u0275template"](8,lt,4,4,"div",11),u["\u0275\u0275template"](9,rt,4,4,"div",11),u["\u0275\u0275element"](10,"div",12),u["\u0275\u0275elementStart"](11,"div",13),u["\u0275\u0275template"](12,at,1,1,"nb-action",14),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"div",13),u["\u0275\u0275elementStart"](14,"nb-action",15),u["\u0275\u0275listener"]("click",function(){var t=u["\u0275\u0275restoreView"](n).$implicit;return u["\u0275\u0275nextContext"](2).navigateTo("/pages/hostpools/"+t.Id+"/statistic")}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"div",13),u["\u0275\u0275elementStart"](16,"nb-action",16),u["\u0275\u0275listener"]("click",function(){var t=u["\u0275\u0275restoreView"](n).$implicit;return u["\u0275\u0275nextContext"](2).navigateTo("/pages/hostpools/"+t.Id+"/configuration")}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&t){var o=e.$implicit,i=u["\u0275\u0275reference"](3),l=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",o.V2HostPool.Properties.LoadBalancerType===l.LoadBalancerTypeClass.Persistent||o.V2HostPool.Properties.LoadBalancerType===l.LoadBalancerTypeClass.MultiplePersistent)("ngIfElse",i),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",null!=(null==o?null:o.HostPoolHistoryAndStatistic)&&null!=(null==o||null==o.HostPoolHistoryAndStatistic?null:o.HostPoolHistoryAndStatistic.StatisticDetail)),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",(null==o||null==o.HostPoolHistoryAndStatistic?null:o.HostPoolHistoryAndStatistic.DeltaUserSessionsPerMinute)>0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(null==o||null==o.HostPoolHistoryAndStatistic?null:o.HostPoolHistoryAndStatistic.DeltaUserSessionsPerMinute)<0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",0==(null==o||null==o.HostPoolHistoryAndStatistic?null:o.HostPoolHistoryAndStatistic.DeltaUserSessionsPerMinute)),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",((null==o||null==o.HostPoolHistoryAndStatistic||null==o.HostPoolHistoryAndStatistic.StatisticDetail?null:o.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsFailed)||0)>0)}}function ct(t,e){if(1&t&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"div",3),u["\u0275\u0275elementStart"](2,"div",4),u["\u0275\u0275elementStart"](3,"h2"),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",5),u["\u0275\u0275template"](6,st,17,7,"nb-card",6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&t){var n=e.$implicit,o=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](n.sceneDisplayName),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngForOf",n.hostPools)("ngForTrackBy",o.trackByHostPoolId)}}var ut=function(){var t=function(){function t(e){a(this,t),this.router=e,this.destroyed$=new p.xQ,this.hostPoolsGroupsCache=[],this.currentFilters=[],this.LoadBalancerTypeClass=J.rQ,this.ManagementTypeClass=J.a2,this.searchQueryValue="",this.hostPoolsGroups=[],this.trackBySceneId=function(t,e){return e.sceneDisplayName},this.trackByHostPoolId=function(t,e){return e.Id}}return c(t,[{key:"hostPools",set:function(t){t&&(this.hostPoolsGroupsCache=this.groupHostPools(t),this.updateHostPoolsGroups())}},{key:"searchQuery",set:function(t){var e=t.trim().toLowerCase();localStorage.setItem("Hydra.HostPools.Filter",e),this.currentSearchQuery=e,this.updateHostPoolsGroups()}},{key:"appliedFilters",set:function(t){this.currentFilters=t,this.updateHostPoolsGroups()}},{key:"navigateTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.router.navigate([t],{queryParams:{search:e}})}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"updateHostPoolsGroups",value:function(){var t,e=this,n=this.hostPoolsGroupsCache;(null===(t=this.currentFilters)||void 0===t?void 0:t.length)&&(n=n.filter(function(t){return e.currentFilters.includes(t.sceneDisplayName.toLowerCase())})),this.currentSearchQuery&&(n=this.filterHostPoolsGroups(n,this.currentSearchQuery)),this.hostPoolsGroups=n}},{key:"groupHostPools",value:function(t){return Array.from(new Set(t.map(function(t){return t.SceneDisplayName}))).map(function(e){return{sceneDisplayName:e,hostPools:t.filter(function(t){return t.SceneDisplayName===e})}})}},{key:"filterHostPoolsGroups",value:function(t,e){if(!e)return t;var n=e.substring(1);return e.startsWith("!")?"failed"===n?this.filterGroupsByFailed(t):this.filterGroupsByLocation(t,n):this.filterGroupsByTenantOrName(t,e)}},{key:"filterGroupsByFailed",value:function(t){var n=this;return t.map(function(t){return e(e({},t),{},{hostPools:t.hostPools.filter(n.isFailedHostPool)})}).filter(function(t){return t.hostPools.length>0})}},{key:"isFailedHostPool",value:function(t){var e,n,o;return(null!==(o=null===(n=null===(e=t.HostPoolHistoryAndStatistic)||void 0===e?void 0:e.StatisticDetail)||void 0===n?void 0:n.SessionHostsFailed)&&void 0!==o?o:0)>0}},{key:"filterGroupsByLocation",value:function(t,n){return t.map(function(t){return e(e({},t),{},{hostPools:t.hostPools.filter(function(t){return t.V2HostPool.Location.toLowerCase().includes(n)})})}).filter(function(t){return t.hostPools.length>0})}},{key:"filterGroupsByTenantOrName",value:function(t,n){var o=this.getMatchedTenants(t,n);return t.map(function(t){return e(e({},t),{},{hostPools:t.hostPools.filter(function(t){return o.has(t.Scene)||t.V2HostPool.Name.toLowerCase().includes(n)})})}).filter(function(t){return t.hostPools.length>0})}},{key:"getMatchedTenants",value:function(t,e){return new Set(t.flatMap(function(t){return t.hostPools}).filter(function(t){var n;return null===(n=t.SceneDisplayName)||void 0===n?void 0:n.toLowerCase().includes(e)}).map(function(t){return t.Scene}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275directiveInject"](s.F0))},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-host-pools-tiles-view"]],inputs:{hostPools:"hostPools",searchQuery:"searchQuery",appliedFilters:"appliedFilters"},decls:2,vars:3,consts:[["class","no-results-card",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"no-results-card"],[1,"row"],[1,"col-md-12"],[1,"d-flex","flex-wrap"],["class","tiles-view-card","size","tiny",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["size","tiny",1,"tiles-view-card",3,"click"],["class","d-flex justify-content-between",4,"ngIf","ngIfElse"],["elseBlockHostPoolType",""],[4,"ngIf"],["class","col-md-4",4,"ngIf"],[1,"col-md-5"],[1,"col-md-1"],["class","floated","icon","alert-triangle","nbTooltipIcon","alert-triangle","nbTooltipPlacement","bottom",3,"nbTooltip","click",4,"ngIf"],["icon","activity","nbTooltipIcon","activity","nbTooltip","Details","nbTooltipPlacement","bottom",1,"floated",3,"click"],["icon","menu","nbTooltipIcon","menu","nbTooltip","Configuration","nbTooltipPlacement","right",1,"floated",3,"click"],[1,"d-flex","justify-content-between"],["icon","person","nbTooltipIcon","person","nbTooltip","VDI host pool","nbTooltipPlacement","top"],["icon","lock-outline","nbTooltipIcon","lock-outline","nbTooltip","The session hosts deployments of this pool are auto-managed from the Azure Portal. You can still manage the pool but not create new hosts.","nbTooltipPlacement","top",4,"ngIf"],["icon","lock-outline","nbTooltipIcon","lock-outline","nbTooltip","The session hosts deployments of this pool are auto-managed from the Azure Portal. You can still manage the pool but not create new hosts.","nbTooltipPlacement","top"],["icon","people","nbTooltipIcon","people","nbTooltip","Multi-session host pool","nbTooltipPlacement","top"],["icon","repeat","nbTooltipIcon","repeat","nbTooltip","Load-balancer mode: Breadth first","nbTooltipPlacement","top",4,"ngIf","ngIfElse"],["elseBlockLbType",""],["icon","repeat","nbTooltipIcon","repeat","nbTooltip","Load-balancer mode: Breadth first","nbTooltipPlacement","top"],["icon","flip","nbTooltipIcon","flip","nbTooltip","Load-balancer mode: Depth first","nbTooltipPlacement","top"],["nbTooltip","% Load of the session host based on the number of sessions and the session capacity","nbTooltipPlacement","left",1,"col-md-2"],[3,"chartValue"],[1,"col-md-10"],["nbTooltip","Number of the connected and disconnected sessions","nbTooltipPlacement","right",1,"row"],[1,"col-sm-2"],[1,"col-sm-5"],[1,"col-sm-5","text-right"],["size","+2"],["nbTooltip","The current session capacity of the host pool","nbTooltipPlacement","right",1,"row"],["nbTooltip","The upcoming session capacity of the host pool, including free session capacity coming from the hosts currently starting or in the roll-out phase","nbTooltipPlacement","right",1,"row"],[1,"row","pt-3"],["nbTooltip","Number of host are running from the total number of hosts (running: all hosts, including hosts in drain-mode)",1,"col-md-12"],[1,"row","d-flex","mt-1"],[1,"col-md-12","d-flex","justify-content-between"],["icon","play-circle","nbTooltipIcon","play-circle","nbTooltip","Number of available session hosts, including temporary host created during the scale-out","nbTooltipPlacement","bottom"],["icon","rewind-right","nbTooltipIcon","rewind-right","nbTooltip","Number starting session hosts","nbTooltipPlacement","bottom"],["icon","stop-circle","nbTooltipIcon","stop-circle","nbTooltip","Number of deallocating session hosts","nbTooltipPlacement","bottom"],["icon","navigation-2","nbTooltipIcon","navigation-2","nbTooltip","Number of session hosts currently in the roll-out phase","nbTooltipPlacement","bottom"],["icon","trash-2","nbTooltipIcon","trash-2","nbTooltip","Number of session hosts deleting","nbTooltipPlacement","bottom"],["icon","swap-outline","nbTooltipIcon","repeat-outline","nbTooltip","Number of session host temporarly scaled-out (the number is included in the 'available session hosts' number)","nbTooltipPlacement","bottom"],[1,"col-md-4"],["icon","arrow-up","status","success","nbTooltip","Login rate in new sessions per minute","nbTooltipPlacement","bottom"],["icon","arrow-down","status","success","nbTooltip","Login rate in new sessions per minute","nbTooltipPlacement","bottom"],["icon","arrow-right","status","success","nbTooltip","Login rate in new sessions per minute","nbTooltipPlacement","bottom"],["icon","alert-triangle","nbTooltipIcon","alert-triangle","nbTooltipPlacement","bottom",1,"floated",3,"nbTooltip","click"]],template:function(t,e){1&t&&(u["\u0275\u0275template"](0,q,2,1,"nb-card",0),u["\u0275\u0275template"](1,ct,7,3,"ng-container",1)),2&t&&(u["\u0275\u0275property"]("ngIf",!e.hostPoolsGroups.length&&e.searchQueryValue),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.hostPoolsGroups)("ngForTrackBy",e.trackBySceneId))},directives:[r.O5,r.sg,A.Asz,A.XWE,A.Bk3,A.jNv,A.ndF,A.fMN,A.yKW,_.K],pipes:[r.JJ],styles:["[_nghost-%COMP%]   nb-card.tiles-view-card[_ngcontent-%COMP%]{width:26rem;height:17rem;margin-right:1rem}[_nghost-%COMP%]   nb-action.floated[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]   .no-results-card[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:1rem}"]}),t}();function dt(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function pt(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function mt(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function ft(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function ht(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function yt(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function vt(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function gt(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function St(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function bt(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function Pt(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function Ct(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function Ht(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function xt(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function Tt(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function It(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function At(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function wt(t,e){if(1&t){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"nb-action",15),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](n);var t=u["\u0275\u0275nextContext"]().$implicit;return u["\u0275\u0275nextContext"]().navigateTo("/pages/hostpools/"+t.Id+"/statistic","!failed")}),u["\u0275\u0275elementEnd"]()}if(2&t){var o=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275propertyInterpolate1"]("nbTooltip","Some session hosts are in an error state (",null==o||null==o.HostPoolHistoryAndStatistic||null==o.HostPoolHistoryAndStatistic.StatisticDetail?null:o.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsFailed,")")}}function Et(t,e){1&t&&u["\u0275\u0275element"](0,"nb-icon",16)}function kt(t,e){1&t&&u["\u0275\u0275element"](0,"nb-icon",17)}function Dt(t,e){1&t&&u["\u0275\u0275element"](0,"nb-icon",18)}function Ft(t,e){1&t&&u["\u0275\u0275element"](0,"nb-icon",19)}function Ot(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"tr"),u["\u0275\u0275elementStart"](1,"td"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"td"),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"td"),u["\u0275\u0275template"](6,wt,1,1,"nb-action",7),u["\u0275\u0275element"](7,"nb-action",8),u["\u0275\u0275element"](8,"nb-action",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"td"),u["\u0275\u0275template"](10,Et,1,0,"nb-icon",10),u["\u0275\u0275template"](11,kt,1,0,"nb-icon",11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"td"),u["\u0275\u0275template"](13,Dt,1,0,"nb-icon",12),u["\u0275\u0275template"](14,Ft,1,0,"nb-icon",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"td"),u["\u0275\u0275text"](16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](17,"td"),u["\u0275\u0275text"](18),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"td"),u["\u0275\u0275text"](20),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"td"),u["\u0275\u0275text"](22),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](23,"td"),u["\u0275\u0275text"](24),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"td"),u["\u0275\u0275text"](26),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](27,"td"),u["\u0275\u0275text"](28),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](29,"td"),u["\u0275\u0275text"](30),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](31,"td"),u["\u0275\u0275text"](32),u["\u0275\u0275pipe"](33,"number"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](34,"td"),u["\u0275\u0275text"](35),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](36,"td"),u["\u0275\u0275text"](37),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](38,"td"),u["\u0275\u0275text"](39),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](40,"td"),u["\u0275\u0275element"](41,"ngx-tacho",14),u["\u0275\u0275pipe"](42,"number"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,o=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](n.SceneDisplayName),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](n.V2HostPool.Name),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",((null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsFailed)||0)>0),u["\u0275\u0275advance"](1),u["\u0275\u0275propertyInterpolate1"]("link","/pages/hostpools/",n.Id,"/statistic"),u["\u0275\u0275advance"](1),u["\u0275\u0275propertyInterpolate1"]("link","/pages/hostpools/",n.Id,"/configuration"),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",n.V2HostPool.Properties.LoadBalancerType===o.LoadBalancerTypeClass.Persistent||n.V2HostPool.Properties.LoadBalancerType===o.LoadBalancerTypeClass.MultiplePersistent),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.V2HostPool.Properties.LoadBalancerType!=o.LoadBalancerTypeClass.Persistent&&n.V2HostPool.Properties.LoadBalancerType!=o.LoadBalancerTypeClass.MultiplePersistent),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",n.V2HostPool.Properties.LoadBalancerType===o.LoadBalancerTypeClass.BreadthFirst),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.V2HostPool.Properties.LoadBalancerType==o.LoadBalancerTypeClass.DepthFirst),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHosts),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsNotOff),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsAvailable),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsStarting),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsStopping),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsInCreation),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsInDeletion),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsTemporarilyScaledAndAvailable),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](33,22,null==n||null==n.HostPoolHistoryAndStatistic?null:n.HostPoolHistoryAndStatistic.DeltaUserSessionsPerMinute,"1.1-1")),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.UserSessions),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.UserCapacityNow),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](null==n||null==n.HostPoolHistoryAndStatistic||null==n.HostPoolHistoryAndStatistic.StatisticDetail?null:n.HostPoolHistoryAndStatistic.StatisticDetail.UserSessionsCapacitySoon),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("chartValue",u["\u0275\u0275pipeBind2"](42,25,n.HostPoolHistoryAndStatistic.StatisticDetail.Utilization,"1.1-1"))}}function Nt(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}var Lt=function(t,e){return{sortKey:t,label:e}};function Bt(t,e){if(1&t){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"th",21),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](n);var t=u["\u0275\u0275nextContext"]().sortKey;return u["\u0275\u0275nextContext"]().toggleSort(t)}),u["\u0275\u0275template"](2,Nt,1,0,"ng-container",2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()}if(2&t){var o=u["\u0275\u0275nextContext"](),i=o.tooltip,l=o.sortKey,r=o.label;u["\u0275\u0275nextContext"]();var a=u["\u0275\u0275reference"](31);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("nbTooltip",i),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",a)("ngTemplateOutletContext",u["\u0275\u0275pureFunction2"](3,Lt,l,r))}}function Mt(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function Vt(t,e){if(1&t){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"th",22),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](n);var t=u["\u0275\u0275nextContext"]().sortKey;return u["\u0275\u0275nextContext"]().toggleSort(t)}),u["\u0275\u0275template"](2,Mt,1,0,"ng-container",2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()}if(2&t){var o=u["\u0275\u0275nextContext"](),i=o.sortKey,l=o.label;u["\u0275\u0275nextContext"]();var r=u["\u0275\u0275reference"](31);u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngTemplateOutlet",r)("ngTemplateOutletContext",u["\u0275\u0275pureFunction2"](2,Lt,i,l))}}function _t(t,e){if(1&t&&(u["\u0275\u0275template"](0,Bt,3,6,"ng-container",20),u["\u0275\u0275template"](1,Vt,3,5,"ng-container",20)),2&t){var n=e.tooltip;u["\u0275\u0275property"]("ngIf",n),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!n)}}function Ut(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}var jt=function(t){return{$implicit:t}};function Kt(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"div",23),u["\u0275\u0275elementStart"](1,"span"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",24),u["\u0275\u0275template"](4,Ut,1,0,"ng-container",2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&t){var n=e.sortKey,o=e.label;u["\u0275\u0275nextContext"]();var i=u["\u0275\u0275reference"](33);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](o),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngTemplateOutlet",i)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](3,jt,n))}}function $t(t,e){if(1&t&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275element"](1,"nb-icon",25),u["\u0275\u0275elementContainerEnd"]()),2&t){var n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275propertyInterpolate1"]("icon","arrow-","asc"===n.sortDirection?"down":"up","")}}function Rt(t,e){if(1&t&&u["\u0275\u0275template"](0,$t,2,1,"ng-container",20),2&t){var n=e.$implicit,o=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("ngIf",o.sortColumn===n)}}var zt=function(t){return{sortKey:t,label:"Tenant"}},Gt=function(t){return{sortKey:t,label:"Host Pool Name"}},Qt=function(t){return{sortKey:t,label:"Type"}},Wt=function(t){return{sortKey:t,label:"LB"}},Jt=function(t){return{sortKey:t,label:"Hosts in pool",tooltip:"Number of hosts in the pool"}},qt=function(t){return{sortKey:t,label:"Hosts running",tooltip:"Number of host are running in the pool, including hosts in drain-mode"}},Xt=function(t){return{sortKey:t,label:"Available",tooltip:"Number of available session hosts, including temporary host created during the scale-out"}},Yt=function(t){return{sortKey:t,label:"Starting",tooltip:"Number starting session hosts"}},Zt=function(t){return{sortKey:t,label:"Stopping",tooltip:"Number of deallocating session hosts"}},te=function(t){return{sortKey:t,label:"Rollout",tooltip:"Number of session hosts currently in the roll-out phase"}},ee=function(t){return{sortKey:t,label:"Deleting",tooltip:"Number of session hosts deleting"}},ne=function(t){return{sortKey:t,label:"Temporary",tooltip:"Number of session host temporarly scaled-out (the number is included in the 'available session hosts' number)"}},oe=function(t){return{sortKey:t,label:"Login rate",tooltip:"Login rate in new sessions per minute"}},ie=function(t){return{sortKey:t,label:"Sessions"}},le=function(t){return{sortKey:t,label:"Capacity now",tooltip:"The current session capacity of the host pool"}},re=function(t){return{sortKey:t,label:"Capacity soon",tooltip:"The upcoming session capacity of the host pool, including free session capacity coming from the hosts currently starting or in the roll-out phase"}},ae=function(t){return{sortKey:t,label:"Utilization",tooltip:"% Load of the session host based on the number of sessions and the session capacity"}},se=(function(t){t.Tenant="SceneDisplayName",t.HostPoolName="V2HostPool.Name",t.Type="V2HostPool.Properties.LoadBalancerType",t.SessionsInHost="HostPoolHistoryAndStatistic.StatisticDetail.SessionHosts",t.HostsRunning="HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsNotOff",t.Available="HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsAvailable",t.Starting="HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsStarting",t.Stopping="HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsStopping",t.Rollout="HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsInCreation",t.Deleting="HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsInDeletion",t.Temporary="HostPoolHistoryAndStatistic.StatisticDetail.SessionHostsTemporarilyScaledAndAvailable",t.LoginRate="HostPoolHistoryAndStatistic.DeltaUserSessionsPerMinute",t.Sessions="HostPoolHistoryAndStatistic.StatisticDetail.UserSessions",t.CapacityNow="HostPoolHistoryAndStatistic.StatisticDetail.UserCapacityNow",t.CapacitySoon="HostPoolHistoryAndStatistic.StatisticDetail.UserSessionsCapacitySoon",t.Utilization="HostPoolHistoryAndStatistic.StatisticDetail.Utilization"}(se||(se={})),se),ce=function(){var t=function(){function t(e){a(this,t),this.router=e,this.destroyed$=new p.xQ,this.hostPoolsListCache=[],this.LoadBalancerTypeClass=J.rQ,this.searchQueryValue="",this.hostPoolsList=[],this.sortKeys=se,this.sortColumn="",this.sortDirection="asc",this.trackByHostPoolId=function(t,e){return e.Id}}return c(t,[{key:"hostPools",set:function(t){t&&(this.hostPoolsList=this.filterHostPools(t,localStorage.getItem("Hydra.HostPools.Filter")),this.hostPoolsListCache=t)}},{key:"searchQuery",set:function(t){var e=t.trim().toLowerCase();localStorage.setItem("Hydra.HostPools.Filter",e),this.searchQueryValue=e,this.hostPoolsList=this.filterHostPools(this.hostPoolsListCache,e)}},{key:"navigateTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.router.navigate([t],{queryParams:{search:e}})}},{key:"toggleSort",value:function(t){this.sortColumn===t?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=t,this.sortDirection="asc"),this.sortColumn&&this.sortByPropertyPath(this.sortColumn)}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"filterHostPools",value:function(t,e){if(!e)return t;var n=e.substring(1);if(e.startsWith("!"))return t.filter("failed"===n?function(t){var e,n,o;return(null!==(o=null===(n=null===(e=t.HostPoolHistoryAndStatistic)||void 0===e?void 0:e.StatisticDetail)||void 0===n?void 0:n.SessionHostsFailed)&&void 0!==o?o:0)>0}:function(t){return t.V2HostPool.Location.toLowerCase().includes(n)});var o=new Set(t.filter(function(t){var n;return null===(n=t.SceneDisplayName)||void 0===n?void 0:n.toLowerCase().includes(e)}).map(function(t){return t.Scene}));return t.filter(function(t){return o.has(t.Scene)||t.V2HostPool.Name.toLowerCase().includes(e)})}},{key:"sortByPropertyPath",value:function(t){var e=this,n=t.split(".");this.hostPoolsList.sort(function(t,o){var i=e.getNestedProperty(t,n),l=e.getNestedProperty(o,n);return i=null==i?"":i,l=null==l?"":l,"asc"===e.sortDirection?i>l?1:i<l?-1:0:i<l?1:i>l?-1:0})}},{key:"getNestedProperty",value:function(t,e){return e.reduce(function(t,e){return t&&void 0!==t[e]?t[e]:void 0},t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275directiveInject"](s.F0))},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-host-pools-table-view"]],inputs:{hostPools:"hostPools",searchQuery:"searchQuery"},decls:34,vars:70,consts:[[1,"table-responsive"],[1,"table","table-bordered","table-striped"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf","ngForTrackBy"],["tableHeaderCellTpl",""],["tableHeaderCellContentTpl",""],["sortTableIconTpl",""],["class","floated","icon","alert-triangle","nbTooltipIcon","alert-triangle","nbTooltipPlacement","bottom",3,"nbTooltip","click",4,"ngIf"],["icon","activity","nbTooltipIcon","activity","nbTooltip","Details","nbTooltipPlacement","bottom",1,"floated",3,"link"],["icon","settings-2-outline","nbTooltipIcon","settings-2-outline","nbTooltip","Configuration","nbTooltipPlacement","right",1,"floated",3,"link"],["icon","person","nbTooltipIcon","person","nbTooltip","VDI host pool","nbTooltipPlacement","top",4,"ngIf"],["icon","people","nbTooltipIcon","people","nbTooltip","Multi-session host pool","nbTooltipPlacement","top",4,"ngIf"],["class","floated","icon","repeat","nbTooltipIcon","repeat","nbTooltip","Load-balancer mode: Breadth first","nbTooltipPlacement","top",4,"ngIf"],["class","floated","icon","flip","nbTooltipIcon","flip","nbTooltip","Load-balancer mode: Depth first","nbTooltipPlacement","top",4,"ngIf"],[3,"chartValue"],["icon","alert-triangle","nbTooltipIcon","alert-triangle","nbTooltipPlacement","bottom",1,"floated",3,"nbTooltip","click"],["icon","person","nbTooltipIcon","person","nbTooltip","VDI host pool","nbTooltipPlacement","top"],["icon","people","nbTooltipIcon","people","nbTooltip","Multi-session host pool","nbTooltipPlacement","top"],["icon","repeat","nbTooltipIcon","repeat","nbTooltip","Load-balancer mode: Breadth first","nbTooltipPlacement","top",1,"floated"],["icon","flip","nbTooltipIcon","flip","nbTooltip","Load-balancer mode: Depth first","nbTooltipPlacement","top",1,"floated"],[4,"ngIf"],[3,"nbTooltip","click"],[3,"click"],[1,"d-flex","justify-content-between"],[1,"d-flex","align-items-center"],[1,"sort-direction-icon","mr-1",3,"icon"]],template:function(t,e){if(1&t&&(u["\u0275\u0275elementStart"](0,"nb-card"),u["\u0275\u0275element"](1,"nb-card-header"),u["\u0275\u0275elementStart"](2,"nb-card-body"),u["\u0275\u0275elementStart"](3,"div",0),u["\u0275\u0275elementStart"](4,"table",1),u["\u0275\u0275elementStart"](5,"thead"),u["\u0275\u0275elementStart"](6,"tr"),u["\u0275\u0275template"](7,dt,1,0,"ng-container",2),u["\u0275\u0275template"](8,pt,1,0,"ng-container",2),u["\u0275\u0275elementStart"](9,"th"),u["\u0275\u0275text"](10,"Action"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](11,mt,1,0,"ng-container",2),u["\u0275\u0275template"](12,ft,1,0,"ng-container",2),u["\u0275\u0275template"](13,ht,1,0,"ng-container",2),u["\u0275\u0275template"](14,yt,1,0,"ng-container",2),u["\u0275\u0275template"](15,vt,1,0,"ng-container",2),u["\u0275\u0275template"](16,gt,1,0,"ng-container",2),u["\u0275\u0275template"](17,St,1,0,"ng-container",2),u["\u0275\u0275template"](18,bt,1,0,"ng-container",2),u["\u0275\u0275template"](19,Pt,1,0,"ng-container",2),u["\u0275\u0275template"](20,Ct,1,0,"ng-container",2),u["\u0275\u0275template"](21,Ht,1,0,"ng-container",2),u["\u0275\u0275template"](22,xt,1,0,"ng-container",2),u["\u0275\u0275template"](23,Tt,1,0,"ng-container",2),u["\u0275\u0275template"](24,It,1,0,"ng-container",2),u["\u0275\u0275template"](25,At,1,0,"ng-container",2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](26,"tbody"),u["\u0275\u0275template"](27,Ot,43,28,"tr",3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](28,_t,2,2,"ng-template",null,4,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](30,Kt,5,5,"ng-template",null,5,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](32,Rt,1,1,"ng-template",null,6,u["\u0275\u0275templateRefExtractor"])),2&t){var n=u["\u0275\u0275reference"](29);u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](36,zt,e.sortKeys.Tenant)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](38,Gt,e.sortKeys.HostPoolName)),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](40,Qt,e.sortKeys.Type)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](42,Wt,e.sortKeys.Type)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](44,Jt,e.sortKeys.SessionsInHost)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](46,qt,e.sortKeys.HostsRunning)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](48,Xt,e.sortKeys.Available)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](50,Yt,e.sortKeys.Starting)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](52,Zt,e.sortKeys.Stopping)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](54,te,e.sortKeys.Rollout)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](56,ee,e.sortKeys.Deleting)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](58,ne,e.sortKeys.Temporary)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](60,oe,e.sortKeys.LoginRate)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](62,ie,e.sortKeys.Sessions)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](64,le,e.sortKeys.CapacityNow)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](66,re,e.sortKeys.CapacitySoon)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](68,ae,e.sortKeys.Utilization)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngForOf",e.hostPoolsList)("ngForTrackBy",e.trackByHostPoolId)}},directives:[A.Asz,A.ndF,A.yKW,r.tP,r.sg,r.O5,A.Bk3,A.jNv,_.K,A.fMN],pipes:[r.JJ],styles:["[_nghost-%COMP%]   nb-action.floated[_ngcontent-%COMP%]{float:right}"]}),t}();function ue(t,e){1&t&&(u["\u0275\u0275elementStart"](0,"nb-card"),u["\u0275\u0275elementStart"](1,"nb-card-header"),u["\u0275\u0275elementStart"](2,"h1"),u["\u0275\u0275text"](3,"Welcome"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"nb-card-body"),u["\u0275\u0275elementStart"](5,"p"),u["\u0275\u0275text"](6," You have successfully deployed the project into your Azure environment. There is only one single step to work with your Azure Virtual Desktop environment: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"li"),u["\u0275\u0275text"](8,"Add a tenant configuration (comparable to the #WVDAdmin configuration)"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](9,"br"),u["\u0275\u0275elementStart"](10,"p"),u["\u0275\u0275text"](11,"After adding a tenant configuration, the host pools, session hosts, and users are visible, and you can start managing your environment."),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](12,"br"),u["\u0275\u0275element"](13,"br"),u["\u0275\u0275elementStart"](14,"p"),u["\u0275\u0275text"](15," Documentation: "),u["\u0275\u0275elementStart"](16,"a",4),u["\u0275\u0275text"](17,"Adding a tenant"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](18,"br"),u["\u0275\u0275elementStart"](19,"p"),u["\u0275\u0275text"](20," Still not seeing your data? Write me a short note to check it together: "),u["\u0275\u0275elementStart"](21,"a",5),u["\u0275\u0275text"](22,"support@loginvsi.com"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function de(t,e){1&t&&(u["\u0275\u0275elementStart"](0,"span"),u["\u0275\u0275text"](1," - Filtered"),u["\u0275\u0275elementEnd"]())}function pe(t,e){if(1&t){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",14),u["\u0275\u0275elementStart"](1,"ngx-overview-popover-filter-trigger",15),u["\u0275\u0275listener"]("filtersChanged",function(t){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).filtersChanges(t)}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&t){var o=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("filters",o.filters)}}function me(t,e){1&t&&u["\u0275\u0275elementContainer"](0)}function fe(t,e){if(1&t&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,me,1,0,"ng-container",16),u["\u0275\u0275elementContainerEnd"]()),2&t){u["\u0275\u0275nextContext"](2);var n=u["\u0275\u0275reference"](6);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",n)}}var he=function(t,e){return{"col-md-5":t,"col-md-3":e}};function ye(t,e){if(1&t){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",6),u["\u0275\u0275elementStart"](1,"div",7),u["\u0275\u0275elementStart"](2,"h1"),u["\u0275\u0275text"](3," Azure Virtual Desktop Host Pools "),u["\u0275\u0275template"](4,de,2,0,"span",8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",9),u["\u0275\u0275element"](6,"input",10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](7,pe,2,1,"div",11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](8,fe,2,1,"ng-container",0),u["\u0275\u0275elementStart"](9,"button",12),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().update()}),u["\u0275\u0275element"](10,"nb-icon",13),u["\u0275\u0275text"](11," Update "),u["\u0275\u0275elementEnd"]()}if(2&t){var o=u["\u0275\u0275nextContext"](),i=u["\u0275\u0275reference"](4);u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngIf",o.searchFormControl.value),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngClass",u["\u0275\u0275pureFunction2"](6,he,o.GlobalConstants.ViewDashboardAsTable,!o.GlobalConstants.ViewDashboardAsTable)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("formControl",o.searchFormControl),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!o.GlobalConstants.ViewDashboardAsTable),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",o.GlobalConstants.ViewDashboardAsTable)("ngIfElse",i)}}function ve(t,e){if(1&t&&u["\u0275\u0275element"](0,"ngx-host-pools-tiles-view",17),2&t){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("hostPools",n.hostPools)("searchQuery",n.searchFormControl.value)("appliedFilters",n.selectedFilters)}}function ge(t,e){if(1&t&&u["\u0275\u0275element"](0,"ngx-host-pools-table-view",18),2&t){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("hostPools",n.hostPools)("searchQuery",n.searchFormControl.value)}}var Se,be,Pe=[{path:"",redirectTo:"avd-host-pools-overview",pathMatch:"full"},{path:"",component:d,children:[{path:"avd-host-pools-overview",component:(Se=function(){function t(e,n,o,i){var l=this;a(this,t),this.hostPoolsService=e,this.router=n,this.toastrService=o,this.storageService=i,this.destroyed$=new p.xQ,this.hostPools$=new p.xQ,this.GlobalConstants=I.tc,this.searchFormControl=new E.NI(""),this.hasNoTenants=!1,this.hostPools=[],this.filters=[],this.selectedFilters=[],this.retryApiCallWithToastCallback=function(t){return t.pipe((0,g.b)(function(t){return l.showDangerToast("Failure accessing the API","Cannot read data from API. The message is: ".concat(t.message," with status ").concat(t.statusText))}),(0,S.j)(function(){return(0,m.H)(w.e5)}))},this.handleApiErrorCallback=function(t){return(0,f._)(function(){return l.showDangerToast("Failure accessing the API","Cannot read data from API. Reload this site to try it again. The message is: ".concat(t.message," with status ").concat(t.statusText)),(0,h.of)([])})}}return c(t,[{key:"ngOnInit",value:function(){I.tc.userMode?this.router.navigate(["/pages/myresources"]):(localStorage.getItem("Hydra.HostPools.Filter")&&this.searchFormControl.setValue(this.storageService.getItem("Hydra.HostPools.Filter")),this.initHostPools())}},{key:"update",value:function(){this.hostPools$.next()}},{key:"filtersChanges",value:function(t){var e=o(t,1)[0];this.selectedFilters=e.filter(function(t){return t.checked}).map(function(t){return t.label.toLowerCase()})}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"initHostPools",value:function(){var t=this;this.hostPools$.pipe((0,b.O)(0),(0,P.w)(function(){return(0,m.H)(0,I.tc.autoRefreshDefault)}),(0,P.w)(function(){return t.hostPoolsService.getHostPools()}),(0,C.a)(this.retryApiCallWithToastCallback),(0,H.K)(this.handleApiErrorCallback),(0,x.R)(this.destroyed$)).subscribe(function(n){if(!n.length)return t.hasNoTenants=!0;t.hostPools=function(t){return t.map(function(t){return 0!==t.HostPoolHistoryAndStatistic.StatisticDetail.UserCapacityNow?e(e({},t),{},{HostPoolHistoryAndStatistic:e(e({},t.HostPoolHistoryAndStatistic),{},{StatisticDetail:e(e({},t.HostPoolHistoryAndStatistic.StatisticDetail),{},{Utilization:100*t.HostPoolHistoryAndStatistic.StatisticDetail.UserSessions/t.HostPoolHistoryAndStatistic.StatisticDetail.UserCapacityNow})})}):e(e({},t),{},{HostPoolHistoryAndStatistic:e(e({},t.HostPoolHistoryAndStatistic),{},{StatisticDetail:e(e({},t.HostPoolHistoryAndStatistic.StatisticDetail),{},{Utilization:0})})})})}(function(t){return t.filter(function(t){return null!=t.HostPoolHistoryAndStatistic&&null!=t.HostPoolHistoryAndStatistic.StatisticDetail})}(n)).sort(function(t,e){return t.V2HostPool.Name.localeCompare(e.V2HostPool.Name)}),t.filters=t.buildFilters(function(t){return Array.from(new Set(t.flatMap(function(t){return t.SceneDisplayName})))}(n))})}},{key:"buildFilters",value:function(t){var e=this;return this.filters.length?k(this.filters,t):t.map(function(t){return{label:t,checked:e.selectedFilters.includes(t.toLowerCase())}})}},{key:"showDangerToast",value:function(t,e){this.toastrService.danger(e,t,{destroyByClick:!0,duration:2e4,hasIcon:!0,position:A.fe3.TOP_RIGHT,preventDuplicates:!0})}}]),t}(),Se.\u0275fac=function(t){return new(t||Se)(u["\u0275\u0275directiveInject"](W.lJ),u["\u0275\u0275directiveInject"](s.F0),u["\u0275\u0275directiveInject"](A.quB),u["\u0275\u0275directiveInject"](D.V))},Se.\u0275cmp=u["\u0275\u0275defineComponent"]({type:Se,selectors:[["ngx-host-pools-overview"]],decls:7,vars:2,consts:[[4,"ngIf","ngIfElse"],["hostPoolsOverviewTpl",""],["tileViewTpl",""],["tableViewTpl",""],["target","_blank","href","https://support.loginvsi.com/hc/en-us/articles/21486519515804-Adding-a-Tenant"],["href","mailto:support@loginvsi.com"],[1,"row"],[1,"col-md-7"],[4,"ngIf"],[3,"ngClass"],["type","text","nbInput","","fullWidth","","placeholder","Search for a specific pool or for !failed, !region",3,"formControl"],["class","col-md-2",4,"ngIf"],["nbButton","","status","semi-round",3,"click"],["icon","refresh"],[1,"col-md-2"],[3,"filters","filtersChanged"],[4,"ngTemplateOutlet"],[3,"hostPools","searchQuery","appliedFilters"],[3,"hostPools","searchQuery"]],template:function(t,e){if(1&t&&(u["\u0275\u0275template"](0,ue,23,0,"nb-card",0),u["\u0275\u0275template"](1,ye,12,9,"ng-template",null,1,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](3,ve,1,3,"ng-template",null,2,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](5,ge,1,2,"ng-template",null,3,u["\u0275\u0275templateRefExtractor"])),2&t){var n=u["\u0275\u0275reference"](2);u["\u0275\u0275property"]("ngIf",e.hasNoTenants)("ngIfElse",n)}},directives:[r.O5,A.Asz,A.ndF,A.yKW,r.mk,A.h8i,E.Fj,E.JJ,E.oH,A.DPz,A.fMN,V,r.tP,ut,ce],styles:[""]}),Se)},{path:"w365-overview",component:z}]},{path:"**",redirectTo:"avd-host-pools-overview",pathMatch:"full"}],Ce=function(){var t=function t(){a(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[s.Bz.forChild(Pe)],s.Bz]}),t}(),He=l(70427),xe=l(66911),Te=l(69517),Ie=l(77310),Ae=l(61367),we=function(){var t=function t(){a(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[r.ez,A.zyh,A.nKr,E.u5,A.rgH,A.MAY,A.KdK,xe.m,A.T2N,A.uuI,A.spT,A.MfT,Te.IJ,A.IIj,He.PagesModule,A.EoG,A.oGl,E.UX,Ie._t,Ae.H,A.V7y]]}),t}(),Ee=l(47957),ke=((be=function t(){a(this,t)}).\u0275fac=function(t){return new(t||be)},be.\u0275mod=u["\u0275\u0275defineNgModule"]({type:be}),be.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[r.ez,Ce,He.PagesModule,we,Ee.Wd365Module]]}),be)},34681:function(t,e,n){"use strict";n.d(e,{G:function(){return s}});var o=n(47349),i=n(92340),l=n(37716),r=n(91841),s=function(){var t=function(){function t(e){a(this,t),this.httpClient=e,this.apiUrl="".concat(i.N.apiUrl,"/data/scenes"),this.ALL_TENANTS_ID="00000000-0000-0000-0000-000000000000"}return c(t,[{key:"getAllCloudPCs",value:function(){return this.httpClient.get("".concat(this.apiUrl,"/").concat(this.ALL_TENANTS_ID,"/win365/cloudpcs")).pipe((0,o.d)({refCount:!0,bufferSize:1}))}},{key:"getClouPcMigrationSnapshots",value:function(){return this.httpClient.get("".concat(this.apiUrl,"/").concat(this.ALL_TENANTS_ID,"/win365/snapshotImports")).pipe((0,o.d)({refCount:!0,bufferSize:1}))}},{key:"getCloudPcSnapshots",value:function(t,e){return this.httpClient.get("".concat(this.apiUrl,"/").concat(t,"/win365/cloudpcs/").concat(e,"/snapshots")).pipe((0,o.d)({refCount:!0,bufferSize:1}))}},{key:"getProvisioningPolicies",value:function(){return this.httpClient.get("".concat(this.apiUrl,"/").concat(this.ALL_TENANTS_ID,"/win365/provisioningpolicies")).pipe((0,o.d)({refCount:!0,bufferSize:1}))}},{key:"getUserSettings",value:function(){return this.httpClient.get("".concat(this.apiUrl,"/").concat(this.ALL_TENANTS_ID,"/win365/settings")).pipe((0,o.d)({refCount:!0,bufferSize:1}))}},{key:"saveUserSettings",value:function(t,e){return this.httpClient.post("".concat(this.apiUrl,"/").concat(t,"/win365/settings"),e).pipe((0,o.d)({refCount:!0,bufferSize:1}))}},{key:"removeUserSettings",value:function(t,e){return this.httpClient.delete("".concat(this.apiUrl,"/").concat(t,"/win365/settings"),{body:e}).pipe((0,o.d)({refCount:!0,bufferSize:1}))}},{key:"getSupportedRegions",value:function(t){return this.httpClient.get("".concat(this.apiUrl,"/").concat(t,"/win365/supportedRegions")).pipe((0,o.d)({refCount:!0,bufferSize:1}))}},{key:"getViewScenes",value:function(){return this.httpClient.get("".concat(i.N.apiUrl,"/data/views/win365/scenes")).pipe((0,o.d)({refCount:!0,bufferSize:1}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275inject"](r.eN))},t.\u0275prov=l["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();