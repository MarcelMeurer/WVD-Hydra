(self.webpackChunkngx_admin=self.webpackChunkngx_admin||[]).push([[505],{72505:function(e,t,n){"use strict";n.r(t),n.d(t,{VirtualDesktopModule:function(){return Zo}});var o=n(38583),r=n(9857),i=n(99763),a=n(79765),l=n(68307),s=n(43190),c=n(46782),d=n(39538),p=n(47349),m=n(92340),u=n(37716),h=n(91841),f=(()=>(function(e){e[e.Users=1]="Users",e[e.Groups=2]="Groups",e[e.UsersAndGroups=3]="UsersAndGroups"}(f||(f={})),f))();let v=(()=>{class e{constructor(e){this.httpClient=e,this.apiUrl=`${m.N.apiUrl}/data/scenes`}getAvdResourceOverview(e){return this.httpClient.get(`${this.apiUrl}/${e}/avdresources/overview`).pipe((0,p.d)({refCount:!0,bufferSize:1}))}getRemoteApplications(e,t){return this.httpClient.get(`${this.apiUrl}/${e}/avdresources/remoteapps${t}`).pipe((0,p.d)({refCount:!0,bufferSize:1}))}getAvdResourcesForCreation(e){return this.httpClient.get(`${this.apiUrl}/${e}/avdresources/resources`).pipe((0,p.d)({refCount:!0,bufferSize:1}))}getAvdResourceFor(e,t){return this.httpClient.get(`${this.apiUrl}/${e}/avdresources${t}`).pipe((0,p.d)({refCount:!0,bufferSize:1}))}getAvdSubscriptions(e){return this.httpClient.get(`${this.apiUrl}/${e}/subscriptions`).pipe((0,p.d)({refCount:!0,bufferSize:1}))}manageAvdResourceEntity(e,t){return this.httpClient.post(`${this.apiUrl}/${e}/avdresources${t.Id}`,t,{observe:"response",responseType:"text"}).pipe((0,p.d)({refCount:!0,bufferSize:1}))}deleteAvdResourceEntity(e,t){return this.httpClient.delete(`${this.apiUrl}/${e}/avdresources${t}`,{observe:"response",responseType:"text"}).pipe((0,p.d)({refCount:!0,bufferSize:1}))}getUsersAndAppApplicationGroupsBy(e,t){return this.httpClient.post(`${this.apiUrl}/${e}/directoryobjects`,{...t}).pipe((0,p.d)({refCount:!0,bufferSize:1}))}getAssignedUsersToApplicationGroup(e,t){return this.httpClient.get(`${this.apiUrl}/${e}/avdresources${t}/permissions`).pipe((0,p.d)({refCount:!0,bufferSize:1}))}setUserToApplicationGroup(e,t,n){return this.httpClient.post(`${this.apiUrl}/${e}/avdresources${t}/permissions`,n,{observe:"response",responseType:"text"}).pipe((0,p.d)({refCount:!0,bufferSize:1}))}getStartMenuApplicationsFor(e,t){return this.httpClient.get(`${this.apiUrl}/${e}/avdresources${t}/startMenuItems`).pipe((0,p.d)({refCount:!0,bufferSize:1}))}manageRemoteApplication(e,t,n){return this.httpClient.post(`${this.apiUrl}/${e}/avdresources${t}/applications/${n.Name}`,n,{observe:"response",responseType:"text"}).pipe((0,p.d)({refCount:!0,bufferSize:1}))}deleteRemoteApplication(e,t,n){return this.httpClient.delete(`${this.apiUrl}/${e}/avdresources${t}/applications/${n}`,{observe:"response",responseType:"text"})}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275inject"](h.eN))},e.\u0275prov=u["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const g={HostPools:[],AppGroups:[],WorkSpaces:[],LogAnalyticsWorkspaces:[]};var y=n(15257),C=n(45435),b=n(88002),S=n(34794);function w(e){return e.split("/").pop()}var x=(()=>(function(e){e.HostPoolsNodeId="--host-pools-tree-view-root-node--",e.SubscriptionNodeId="--host-pools-tree-view-subscription-node--",e.HostPoolNodeId="--host-pools-tree-view-host-pool-node--",e.AppGroupsNodeId="--host-pools-tree-view-app-groups-parent-node--",e.AppGroupNodeId="--host-pools-tree-view-app-group-node--",e.RemoteAppNodeId="--host-pools-tree-view-remote-app-node--"}(x||(x={})),x))();class I{static hostPoolsTreeViewConfig(e,t,n,o){return{rootNodeBuilder:t=>({id:x.HostPoolsNodeId,title:"Host Pools",iconPath:"assets/icons/host-pools.svg",expanded:!0,children:t,contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:n,title:"Add",action:e.hostPoolsAddAction}]}),subscriptionNodeBuilder:(t,o)=>({id:`${x.SubscriptionNodeId}${t.SubscriptionName}`,title:t.SubscriptionName,iconPath:"assets/icons/subscription.svg",expanded:!0,children:o,contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:n,title:"Add",data:{subscriptionName:t.SubscriptionName,subscriptionId:t.Id},action:e.hostPoolsAddSubscriptionAction}]}),hostPoolNodeBuilder:(t,o,r)=>({id:`${x.HostPoolNodeId}${r.Id}`,title:t,iconPath:r.Properties.HostPoolType===S.Bs.Pooled?"assets/icons/pooled-host-pool.svg":"assets/icons/personal-host-pool.svg",children:o,contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:n,title:"Properties",data:r,action:e.hostPoolOpenPropertiesAction},{contextMenuId:n,title:"Delete",data:r,action:e.hostPoolDeleteAction}]}),appGroupsParentNodeBuilder:(t,o)=>({id:`${x.AppGroupsNodeId}${o.Id}`,title:"App Groups",iconPath:"assets/icons/app-groups.svg",children:t,contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:n,title:"Add remote app-group",data:o,action:e.hostPoolAddRemoteAppGroupAction},{contextMenuId:n,title:"Add desktop app-group",data:o,action:e.hostPoolAddDesktopAppGroupAction}]}),appGroupNodeBuilder:(r,i,a)=>{const l=i.Properties.ApplicationGroupType===S.Vh.RemoteApp,s={id:`${x.AppGroupNodeId}${i.Id}`,title:r,iconPath:l?"assets/icons/remote-app-group.svg":"assets/icons/desktop-app-group.svg",contextMenuPlacement:"left",contextMenuItems:l?[{contextMenuId:n,title:"Add app from start menu",data:{appGroup:i,hostPool:a},action:e.remoteAppGroupStartFromMenuAction},{contextMenuId:n,title:"Add app manually",data:i,action:e.remoteAppGroupAddManuallyAction},{contextMenuId:n,title:"Properties",data:i,action:e.remoteAppGroupOpenPropertiesAction},{contextMenuId:n,title:"Assign",data:i,action:e.remoteAppGroupAssignAction},{contextMenuId:n,title:"Delete",data:i,action:e.remoteAppGroupDeleteAction}]:[{contextMenuId:n,title:"Properties",data:i,action:e.desktopAppGroupOpenPropertiesAction},{contextMenuId:n,title:"Assign",data:i,action:e.desktopAppGroupAssignAction},{contextMenuId:n,title:"Delete",data:i,action:e.desktopAppGroupDeleteAction}]};return s.reloadChildren=o===s.id,l&&(s.childrenLoader=()=>t(i.Id).pipe((0,b.U)(t=>t.map(t=>({id:`${x.RemoteAppNodeId}${t.Id}`,title:w(t.Name),iconPath:`data:image/png;base64,${t.Properties.IconContent}`,contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:n,title:"Properties",data:{appGroup:i,application:t},action:e.remoteApplicationOpenPropertiesAction},{contextMenuId:n,title:"Delete",data:{appGroup:i,application:t,node:s},action:e.remoteApplicationDeleteAction}]}))))),s}}}static workspacesTreeViewConfig(e,t){return{rootNodeBuilder:n=>({id:"--workspaces-tree-view-root-node--",title:"Workspaces",iconPath:"assets/icons/workspaces.svg",expanded:!0,children:n,contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:t,title:"Add",action:e.workspacesAddAction}]}),subscriptionNodeBuilder:(n,o,r)=>({id:`--workspaces-tree-view-subscription-node--${n.SubscriptionName}`,title:n.SubscriptionName,iconPath:"assets/icons/subscription.svg",expanded:!0,children:o,contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:t,title:"Add",data:{subscriptionName:n.SubscriptionName,subscriptionId:n.Id},action:e.workspacesSubscriptionAddAction}]}),workspaceNodeBuilder:(n,o,r)=>({id:`--workspaces-tree-view-workspace-node--${r.Id}`,title:n,iconPath:"assets/icons/workspace.svg",children:o,contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:t,title:"Link application group",data:r,action:e.workspaceLinkApplicationGroupAction},{contextMenuId:t,title:"Properties",data:r,action:e.workspaceEditAction},{contextMenuId:t,title:"Delete",data:r,action:e.workspaceDeleteAction}]}),appGroupNodeBuilder:(n,o)=>({id:`--workspaces-tree-view-app-group-node--${o.Id}`,title:n,iconPath:o.Properties.ApplicationGroupType===S.Vh.RemoteApp?"assets/icons/remote-app-group.svg":"assets/icons/desktop-app-group.svg",contextMenuPlacement:"left",contextMenuItems:[{contextMenuId:t,title:"Unlink",data:o,action:e.workspaceAppGroupUnlinkAction}]})}}static collectExpandedIds(e){return e?e.reduce((e,t)=>{var n;return t.expanded&&t.id&&e.push(t.id),(null===(n=t.children)||void 0===n?void 0:n.length)&&e.push(...I.collectExpandedIds(t.children)),e},[]):[]}static setExpandedByIds(e,t){var n;if(e)for(const o of e)t&&t.length&&(o.expanded=!(!o.id||!t.includes(o.id))),(null===(n=o.children)||void 0===n?void 0:n.length)&&I.setExpandedByIds(o.children,t)}}I.buildWorkspaceTreeView$=new a.xQ;var P=n(3679),E=n(9112);function k(e,t,n={}){const o=A(t,e,n),r=A(e,t,n);return{aToB:o,bToA:r,hasDifference:Object.keys(o).length>0||Object.keys(r).length>0}}function A(e,t,n){const{comparators:o}=n,r=new Set(Object.keys(o||{}));return null===e||null===t?e===t?{}:e:Array.isArray(e)&&Array.isArray(t)?T(e,t)?{}:e:Object.keys(e).reduce((i,a)=>{if(!(a in t))return i[a]=e[a],i;if(r.has(a)){const n=null==o?void 0:o[a];return n&&!n(e[a],t[a])&&(i[a]=e[a]),i}if("object"==typeof e[a]&&"object"==typeof t[a]){const o=A(e[a],t[a],n);return(null===o||Object.keys(o).length||Array.isArray(o))&&(i[a]=o),i}return e[a]!==t[a]&&(i[a]=e[a]),i},{})}function T(e,t){return e.length===t.length&&e.every((e,n)=>Array.isArray(e)&&Array.isArray(t[n])?T(e,t[n]):null===e||null===t[n]?e===t[n]:"object"==typeof e&&"object"==typeof t[n]?0===Object.keys(k(e,t[n]).aToB).length:e===t[n])}function N(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",2),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().close()}),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.cancelButtonText)}}function O(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",2),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().confirm()}),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.confirmButtonText)}}let M=(()=>{class e{constructor(e){this.dialogRef=e}close(){this.dialogRef.close()}confirm(){this.dialogRef.close(!0)}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](r.X4l))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-confirmation-dialog"]],inputs:{headerTitle:"headerTitle",bodyText:"bodyText",confirmButtonText:"confirmButtonText",cancelButtonText:"cancelButtonText"},decls:8,vars:4,consts:[[1,"d-flex","justify-content-end"],["nbButton","",3,"click",4,"ngIf"],["nbButton","",3,"click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"nb-card"),u["\u0275\u0275elementStart"](1,"nb-card-header"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"nb-card-body"),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"nb-card-footer",0),u["\u0275\u0275template"](6,N,2,1,"button",1),u["\u0275\u0275template"](7,O,2,1,"button",1),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](t.headerTitle),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](t.bodyText),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",t.cancelButtonText),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.confirmButtonText))},directives:[r.Asz,r.ndF,r.yKW,r.XWE,o.O5,r.DPz],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-footer[_ngcontent-%COMP%]{grid-gap:1rem;gap:1rem}"]}),e})();function V(e){if("object"==typeof e&&null!==e){if("error"in e&&"object"==typeof e.error){const t=e.error;return{code:t.code||"Unknown",message:t.message||"Unknown error",details:Array.isArray(t.details)?t.details:[]}}if("code"in e&&"message"in e)return{code:e.code||"Unknown",message:e.message||"Unknown error",details:Array.isArray(e.details)?e.details:[]}}if("string"==typeof e){const n=e.indexOf("{");if(-1!==n){const o=e.substring(n);try{const e=JSON.parse(o);if(e&&e.error){const t=e.error;return{code:t.code||"Unknown",message:t.message||"Unknown error",details:Array.isArray(t.details)?t.details:[]}}if("code"in e&&"message"in e)return{code:e.code||"Unknown",message:e.message||"Unknown error",details:Array.isArray(e.details)?e.details:[]}}catch(t){console.warn("Failed to parse Azure Portal error JSON",t)}}return{code:"Unknown",message:e,details:[]}}return{code:"Unknown",message:"Something went wrong on our end. Please try again later.",details:[]}}function _(e){var t;return"null"===e?"null":""===e?"":null===(t=e)||void 0===t?void 0:t.Id}function F(e){if(!e)return null;const t=e.split("/"),n=t.findIndex(e=>"resourceGroups"===e);return-1!==n&&t.length>n+1?t[n+1]:null}function R(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"]("Update: ",null==e.hostPoolToUpdate?null:e.hostPoolToUpdate.Name," host pool")}}function D(e,t){1&e&&u["\u0275\u0275text"](0,"Add new host pool")}function G(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-card",8),u["\u0275\u0275elementStart"](1,"nb-card-body"),u["\u0275\u0275element"](2,"nb-icon",9),u["\u0275\u0275element"](3,"p",10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("innerHTML",null==e.unregisterSubscriptionErrorMessage?null:e.unregisterSubscriptionErrorMessage.message,u["\u0275\u0275sanitizeHtml"])}}function U(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"nb-tabset",11),u["\u0275\u0275elementStart"](1,"nb-tab",12,13),u["\u0275\u0275elementStart"](3,"ngx-configuration-tab",14),u["\u0275\u0275listener"]("formControlsInitialized",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().childFormControlsInitialized(t,"configuration")}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"nb-tab",15,16),u["\u0275\u0275elementStart"](6,"ngx-rdp-props-tab",17),u["\u0275\u0275listener"]("rdpPropertiesChanged",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().rdpPropertiesChanged(t)})("isRdpFormValid",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().isRdpFormValid=t})("rdpFormHasChanges",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().hasFormChanges=!!t}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"nb-tab",18),u["\u0275\u0275elementStart"](8,"ngx-rdp-short-path-tab",19),u["\u0275\u0275listener"]("formControlsInitialized",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().childFormControlsInitialized(t,"rdpShortPath")}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"nb-tab",20,21),u["\u0275\u0275elementStart"](11,"ngx-tags-tab",22),u["\u0275\u0275listener"]("formControlsInitialized",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().childFormControlsInitialized(t,"tags")}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf,n=u["\u0275\u0275reference"](2),o=u["\u0275\u0275reference"](5),r=u["\u0275\u0275reference"](10),i=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("formGroup",i.form),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("badgeDot",!n.active&&(null==i.form.controls||null==i.form.controls.configuration?null:i.form.controls.configuration.invalid)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("form",i.form.controls.configuration)("avdResourcesData",e[0])("hostPoolToUpdate",i.hostPoolToUpdate)("preselectSubscriptionId",i.preselectSubscriptionId),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("badgeDot",!o.active&&!i.isRdpFormValid),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("rdpProperties",null==i.hostPoolToUpdate||null==i.hostPoolToUpdate.Properties?null:i.hostPoolToUpdate.Properties.CustomRdpProperty),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("form",i.form.controls.rdpShortPath)("hostPoolToUpdate",i.hostPoolToUpdate),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("badgeDot",!r.active&&(null==i.form.controls||null==i.form.controls.tags?null:i.form.controls.tags.invalid)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("form",i.form.controls.tags)("tagsToUpdate",null==i.hostPoolToUpdate?null:i.hostPoolToUpdate.Tags)}}let L=(()=>{class e{constructor(e,t,n,o){this.dialogService=e,this.dialogRef=t,this.azureVirtualDesktopService=n,this.toastrService=o,this.destroyed$=new a.xQ,this.internalLoadedSubscriptionsList=[],this.hostPoolModel=new S.f7,this.form=new P.cw({configuration:new P.cw({}),tags:new P.Oe([]),rdpShortPath:new P.cw({})}),this.hasFormChanges=!1,this.isSaving=!1,this.isRdpFormValid=!1}ngOnInit(){this.avdResourcesData$=this.tenantViewSceneId&&!this.hostPoolToUpdate?this.initCreateHostPoolMode():this.initUpdateHostPoolMode(),this.form.valueChanges.pipe((0,c.R)(this.destroyed$)).subscribe(e=>{this.hasFormChanges=k(this.initialFormValues,e).hasDifference})}close(){if(!this.hasFormChanges)return void this.dialogRef.close();const{onClose:e}=this.dialogService.open(M,{context:{headerTitle:"Warning",bodyText:"You are about to exit without saving your changes. Are you sure you want to leave?",cancelButtonText:"Close without saving",confirmButtonText:"Stay"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1});e.pipe((0,c.R)(this.destroyed$)).subscribe(e=>{!0!==e&&this.dialogRef.close()})}save(){var e,t,n,o,r,i,a;this.isSaving=!0,this.unregisterSubscriptionErrorMessage=void 0;const{configuration:l,tags:s,rdpShortPath:c}=this.form.getRawValue(),d=l.subscription.Id,p=this.internalLoadedSubscriptionsList.find(e=>d.toLowerCase().includes(e.id.toLowerCase()));this.hostPoolModel={...this.hostPoolModel,Id:`${d}/providers/Microsoft.DesktopVirtualization/hostpools/${l.hostPoolName}`,ResourceGroup:F(d),SubscriptionName:this.subscriptionName?this.subscriptionName:`${null==p?void 0:p.displayName}`,Name:l.hostPoolName,Location:l.location.Id,LogAnalyticsId:_(l.logAnalyticWorkspace),LogAnalyticsName:null!==(t=null===(e=l.logAnalyticWorkspace)||void 0===e?void 0:e.Name)&&void 0!==t?t:"",Properties:{...this.hostPoolModel.Properties,ApplicationGroupReferences:[],HostPoolType:null===(n=l.hostPoolType)||void 0===n?void 0:n.value,PersonalDesktopAssignmentType:null===(o=l.assignmentType)||void 0===o?void 0:o.value,PreferredAppGroupType:null===(r=l.preferredAppGroup)||void 0===r?void 0:r.value,StartVmOnConnect:l.startVMOnConnect,ValidationEnvironment:l.validationEnvironment,FriendlyName:l.friendlyName,Description:l.description,LoadBalancerType:(null===(i=l.hostPoolType)||void 0===i?void 0:i.value)===S.Bs.Personal?S.rQ.Persistent:null===(a=l.loadBalancingAlgorithm)||void 0===a?void 0:a.value,MaxSessionLimit:l.maxSessionsLimit,ManagedPrivateUdp:c.managedPrivateUdp.value,DirectUdp:c.directUdp.value,PublicUdp:c.publicUdp.value,RelayUdp:c.relayUdp.value},Tags:{...this.hostPoolModel.Tags,...s.reduce((e,t)=>({[t.key]:t.value,...e}),{})}},this.handleSaving(this.hostPoolModel)}childFormControlsInitialized(e,t){this.initialFormValues={...this.initialFormValues,[t]:e}}rdpPropertiesChanged(e){this.hostPoolModel={...this.hostPoolModel,Properties:{...this.hostPoolModel.Properties,CustomRdpProperty:e}}}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}initCreateHostPoolMode(){return(0,E.aj)([this.azureVirtualDesktopService.getAvdResourcesForCreation(this.tenantViewSceneId),this.azureVirtualDesktopService.getAvdSubscriptions(this.tenantViewSceneId)]).pipe((0,b.U)(([e,t])=>(this.internalLoadedSubscriptionsList=[...t],[e])))}initUpdateHostPoolMode(){return(0,E.aj)([this.azureVirtualDesktopService.getAvdResourcesForCreation(this.tenantViewSceneId),this.azureVirtualDesktopService.getAvdResourceFor(this.tenantViewSceneId,this.hostPoolToUpdate.Id),this.azureVirtualDesktopService.getAvdSubscriptions(this.tenantViewSceneId)]).pipe((0,b.U)(([e,t,n])=>(this.hostPoolToUpdate={...t},this.internalLoadedSubscriptionsList=[...n],[e,t])))}handleSaving(e){this.azureVirtualDesktopService.manageAvdResourceEntity(this.tenantViewSceneId,e).pipe((0,c.R)(this.destroyed$)).subscribe({next:t=>{200===t.status&&(this.isSaving=!1,this.dialogRef.close({hostPool:e}),this.toastrService.success(this.hostPoolToUpdate?"Host pool updated successfully":"Host pool created successfully","Success"))},error:e=>{this.isSaving=!1,this.unregisterSubscriptionErrorMessage=V(e.error)}})}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](r.Gln),u["\u0275\u0275directiveInject"](r.X4l),u["\u0275\u0275directiveInject"](v),u["\u0275\u0275directiveInject"](r.quB))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-manage-host-pool-dialog"]],inputs:{tenantViewSceneId:"tenantViewSceneId",subscriptionName:"subscriptionName",preselectSubscriptionId:"preselectSubscriptionId",hostPoolToUpdate:"hostPoolToUpdate"},decls:15,vars:12,consts:[[3,"nbSpinner","nbSpinnerMessage"],[4,"ngIf","ngIfElse"],["addHostPoolTitle",""],["class","error-card",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"d-flex","justify-content-between"],["nbButton","",3,"click"],["nbButton","",3,"disabled","click"],[1,"error-card"],["icon","alert-triangle-outline"],[3,"innerHTML"],[3,"formGroup"],["tabTitle","Configuration","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["configurationTab",""],[3,"form","avdResourcesData","hostPoolToUpdate","preselectSubscriptionId","formControlsInitialized"],["tabTitle","RDP properties","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["rdpPropsTab",""],[3,"rdpProperties","rdpPropertiesChanged","isRdpFormValid","rdpFormHasChanges"],["tabTitle","RDP shortpath"],[3,"form","hostPoolToUpdate","formControlsInitialized"],["tabTitle","Tags","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["tagsTab",""],[3,"form","tagsToUpdate","formControlsInitialized"]],template:function(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-card",0),u["\u0275\u0275pipe"](1,"async"),u["\u0275\u0275elementStart"](2,"nb-card-header"),u["\u0275\u0275template"](3,R,2,1,"ng-container",1),u["\u0275\u0275template"](4,D,1,0,"ng-template",null,2,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"nb-card-body"),u["\u0275\u0275template"](7,G,4,1,"nb-card",3),u["\u0275\u0275template"](8,U,12,13,"nb-tabset",4),u["\u0275\u0275pipe"](9,"async"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"nb-card-footer",5),u["\u0275\u0275elementStart"](11,"button",6),u["\u0275\u0275listener"]("click",function(){return t.close()}),u["\u0275\u0275text"](12,"Close"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"button",7),u["\u0275\u0275listener"]("click",function(){return t.save()}),u["\u0275\u0275text"](14),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275reference"](5);u["\u0275\u0275propertyInterpolate"]("nbSpinnerMessage",t.isSaving?t.hostPoolToUpdate?"Updating...":"Saving...":"Loading..."),u["\u0275\u0275property"]("nbSpinner",!u["\u0275\u0275pipeBind1"](1,8,t.avdResourcesData$)||t.isSaving),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",t.hostPoolToUpdate)("ngIfElse",e),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngIf",t.unregisterSubscriptionErrorMessage),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",u["\u0275\u0275pipeBind1"](9,10,t.avdResourcesData$)),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("disabled",t.form.invalid||t.isSaving||!t.hasFormChanges||!t.isRdpFormValid),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",t.hostPoolToUpdate?"Update":"Add"," ")}},styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]:not(.error-card){width:80em;height:60em}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:1em;gap:1em}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{color:var(--danger)}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;margin:0;font-size:.8em;color:var(--danger)}"]}),e})();var $=n(68939),z=n(54395),B=n(87519),W=n(26215),j=n(25917);function q(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",15),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.DisplayName," ")}}function H(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"nb-list-item",2),u["\u0275\u0275elementStart"](1,"span"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"button",17),u["\u0275\u0275listener"]("click",function(){const t=u["\u0275\u0275restoreView"](e).index;return u["\u0275\u0275nextContext"](3).remove(t)}),u["\u0275\u0275element"](4,"nb-icon",18),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](e.value.DisplayName)}}function J(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-list"),u["\u0275\u0275template"](1,H,5,1,"nb-list-item",16),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.directoryObjectsFormArray.controls)}}function Q(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",19),u["\u0275\u0275elementStart"](1,"span",20),u["\u0275\u0275text"](2,"No assigned users or groups found"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function K(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"div"),u["\u0275\u0275elementStart"](2,"label",5),u["\u0275\u0275text"](3," Search users or groups by start typing the display name (3 chars. min) "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"nb-form-field",6),u["\u0275\u0275pipe"](5,"async"),u["\u0275\u0275element"](6,"input",7,8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"nb-autocomplete",9,10),u["\u0275\u0275listener"]("selectedChange",function(t){u["\u0275\u0275restoreView"](e);const n=u["\u0275\u0275reference"](7);return u["\u0275\u0275nextContext"]().selectionChange(t),n.value=""}),u["\u0275\u0275template"](10,q,2,2,"nb-option",11),u["\u0275\u0275pipe"](11,"async"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"div"),u["\u0275\u0275elementStart"](13,"span",12),u["\u0275\u0275text"](14,"Selected users and groups"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](15,J,2,1,"nb-list",13),u["\u0275\u0275template"](16,Q,3,0,"ng-template",null,14,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=u["\u0275\u0275reference"](9),t=u["\u0275\u0275reference"](17),n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("nbSpinner",u["\u0275\u0275pipeBind1"](5,7,n.isSearching$)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("formControl",n.form.controls.searchQuery)("nbAutocomplete",e),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngForOf",u["\u0275\u0275pipeBind1"](11,9,n.filteredDirectoryObjects$))("ngForTrackBy",n.trackByFn),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngIf",n.directoryObjectsFormArray.length)("ngIfElse",t)}}let X=(()=>{class e{constructor(e,t,n,o){this.azureVirtualDesktopService=e,this.dialogRef=t,this.dialogService=n,this.toastrService=o,this.destroyed$=new a.xQ,this.initialFromArrayValue=[],this.isSearching$=new W.X(!1),this.form=new P.cw({searchQuery:new P.NI(""),directoryObjects:new P.Oe([])}),this.isSaving=!1,this.isLoaded=!1,this.trackByFn=e=>e}get resourceIdsLoaded(){return!(!this.tenantViewSceneId||!this.appGroupId)}get directoryObjectsFormArray(){return this.form.get("directoryObjects")}ngOnInit(){this.resourceIdsLoaded&&(this.directoryObjects$=this.azureVirtualDesktopService.getAssignedUsersToApplicationGroup(this.tenantViewSceneId,this.appGroupId).pipe((0,l.b)(e=>this.populateFormArray(e)),(0,$.x)(()=>{this.isLoaded=!0,this.initSearchQueryHandler()})),this.initFormArrayValueChangesHandler())}close(){k(this.initialFromArrayValue,this.directoryObjectsFormArray.getRawValue()).hasDifference?this.showConfirmationDialog():this.dialogRef.close()}selectionChange(e){e&&(this.directoryObjectsFormArray.controls.some(t=>t.value.Id===e.Id)||(this.form.controls.searchQuery.setValue(""),this.directoryObjectsFormArray.push(new P.NI(e)),this.initSearchQueryHandler()))}remove(e){this.directoryObjectsFormArray.removeAt(e)}save(){this.isSaving=!0,this.azureVirtualDesktopService.setUserToApplicationGroup(this.tenantViewSceneId,this.appGroupId,this.directoryObjectsFormArray.getRawValue()).pipe((0,c.R)(this.destroyed$)).subscribe({next:()=>{this.isSaving=!1,this.toastrService.success("Assigned data successfully","Success"),this.dialogRef.close()},error:e=>{this.isSaving=!1,this.toastrService.danger(V(e.error).message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"})}})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}initSearchQueryHandler(){this.filteredDirectoryObjects$=this.form.controls.searchQuery.valueChanges.pipe((0,z.b)(400),(0,B.x)(),(0,l.b)(()=>this.isSearching$.next(!0)),(0,s.w)(e=>!e||e.length<3||"string"!=typeof e?(this.isSearching$.next(!1),(0,j.of)([])):this.azureVirtualDesktopService.getUsersAndAppApplicationGroupsBy(this.tenantViewSceneId,{SearchPhrase:e,ObjectType:f.UsersAndGroups}).pipe((0,$.x)(()=>this.isSearching$.next(!1)))))}showConfirmationDialog(){const{onClose:e}=this.dialogService.open(M,{context:{headerTitle:"Warning",bodyText:"You are about to exit without saving your changes. Are you sure you want to leave?",cancelButtonText:"Close without saving",confirmButtonText:"Stay"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1});e.pipe((0,c.R)(this.destroyed$)).subscribe(e=>{!0!==e&&this.dialogRef.close()})}populateFormArray(e){this.directoryObjectsFormArray.clear(),e.forEach(e=>this.directoryObjectsFormArray.push(new P.NI(e),{emitEvent:!1})),this.initialFromArrayValue=this.directoryObjectsFormArray.getRawValue()}initFormArrayValueChangesHandler(){this.hasFormArrayChanges$=this.directoryObjectsFormArray.valueChanges.pipe((0,s.w)(e=>(0,j.of)(k(this.initialFromArrayValue,e).hasDifference)))}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](v),u["\u0275\u0275directiveInject"](r.X4l),u["\u0275\u0275directiveInject"](r.Gln),u["\u0275\u0275directiveInject"](r.quB))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-assign-user-to-group-dialog"]],inputs:{tenantViewSceneId:"tenantViewSceneId",appGroupId:"appGroupId"},decls:12,vars:8,consts:[[3,"nbSpinner","nbSpinnerMessage"],[4,"ngIf"],[1,"d-flex","justify-content-between"],["nbButton","",3,"click"],["nbButton","",3,"disabled","click"],["for","search_query",1,"label"],["nbSpinnerMessage","Searching...",3,"nbSpinner"],["id","search_query","type","text","nbInput","","fullWidth","",3,"formControl","nbAutocomplete"],["searchQueryInput",""],[3,"selectedChange"],["auto",""],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"label"],[4,"ngIf","ngIfElse"],["noDataTpl",""],[3,"value"],["class","d-flex justify-content-between",4,"ngFor","ngForOf"],["nbButton","","size","tiny","status","danger",3,"click"],["icon","trash-outline"],[1,"no-data-container"],[1,"text-muted"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"nb-card",0),u["\u0275\u0275pipe"](1,"async"),u["\u0275\u0275elementStart"](2,"nb-card-header"),u["\u0275\u0275text"](3,"Select users or groups from Azure VD"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"nb-card-body"),u["\u0275\u0275template"](5,K,18,11,"ng-container",1),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"nb-card-footer",2),u["\u0275\u0275elementStart"](7,"button",3),u["\u0275\u0275listener"]("click",function(){return t.close()}),u["\u0275\u0275text"](8,"Close"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"button",4),u["\u0275\u0275listener"]("click",function(){return t.save()}),u["\u0275\u0275pipe"](10,"async"),u["\u0275\u0275text"](11," Save "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275propertyInterpolate"]("nbSpinnerMessage",t.isSaving?"Saving...":"Loading..."),u["\u0275\u0275property"]("nbSpinner",!u["\u0275\u0275pipeBind1"](1,4,t.directoryObjects$)||t.isSaving),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngIf",t.isLoaded),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("disabled",!u["\u0275\u0275pipeBind1"](10,6,t.hasFormArrayChanges$)))},directives:[r.Asz,r.Q7R,r.ndF,r.yKW,o.O5,r.XWE,r.DPz,r.jBG,r.h8i,P.Fj,r.wNd,P.JJ,P.oH,r.Xh,o.sg,r.q51,r.zP_,r.qBV,r.fMN],pipes:[o.Ov],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:45em;height:45em}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:hidden;display:grid;grid-template-rows:15% 80%;grid-gap:1em;gap:1em}[_nghost-%COMP%]   nb-list[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   nb-list[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]:last-of-type{border-bottom:none}[_nghost-%COMP%]   .no-data-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%}"]}),e})();function Y(e){if(!e)return null;const t=e.split("/"),n=t.findIndex(e=>"subscriptions"===e.toLowerCase());return n>=0&&t.length>n+1?`/subscriptions/${t[n+1]}`:null}function Z(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",16),u["\u0275\u0275text"](2,"This field is required"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function ee(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",16),u["\u0275\u0275text"](2,"This field is required"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function te(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"tr"),u["\u0275\u0275elementStart"](1,"td",9),u["\u0275\u0275element"](2,"input",12),u["\u0275\u0275template"](3,Z,3,0,"ng-container",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"td",9),u["\u0275\u0275element"](5,"input",12),u["\u0275\u0275template"](6,ee,3,0,"ng-container",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"td",10),u["\u0275\u0275elementStart"](8,"button",14),u["\u0275\u0275listener"]("click",function(){const t=u["\u0275\u0275restoreView"](e).index;return u["\u0275\u0275nextContext"](2).remove(t)}),u["\u0275\u0275element"](9,"nb-icon",15),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=u["\u0275\u0275nextContext"](2);let r,i;u["\u0275\u0275advance"](2),u["\u0275\u0275propertyInterpolate1"]("id","tag_key_",n,""),u["\u0275\u0275property"]("formControl",o.tagsFormArray.controls[n].get("key")),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==(r=e.get("key"))||null==r.errors?null:r.errors.required),u["\u0275\u0275advance"](2),u["\u0275\u0275propertyInterpolate1"]("id","tag_value_",n,""),u["\u0275\u0275property"]("formControl",o.tagsFormArray.controls[n].get("value")),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==(i=e.get("value"))||null==i.errors?null:i.errors.required)}}function ne(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"form",6),u["\u0275\u0275elementStart"](1,"div",7),u["\u0275\u0275elementStart"](2,"table",8),u["\u0275\u0275elementStart"](3,"thead"),u["\u0275\u0275elementStart"](4,"tr"),u["\u0275\u0275elementStart"](5,"th",9),u["\u0275\u0275text"](6,"Key"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"th",9),u["\u0275\u0275text"](8,"Value"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"th",10),u["\u0275\u0275text"](10,"Remove"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"tbody"),u["\u0275\u0275template"](12,te,10,6,"tr",11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("formGroup",e.form),u["\u0275\u0275advance"](12),u["\u0275\u0275property"]("ngForOf",e.tagsFormArray.controls)("ngForTrackBy",e.trackByIndex)}}let oe=(()=>{class e{constructor(e,t){this.dialogService=e,this.dialogRef=t,this.destroyed$=new a.xQ,this.form=new P.cw({tags:new P.Oe([])}),this.hasTagsFormChanges=!1}set tagsToUpdate(e){e&&this.populateFormArray(e)}get tagsFormArray(){var e;return null===(e=this.form)||void 0===e?void 0:e.get("tags")}close(){if(!this.hasTagsFormChanges)return void this.dialogRef.close();const{onClose:e}=this.dialogService.open(M,{context:{headerTitle:"Warning",bodyText:"You are about to exit without saving your changes. Are you sure you want to leave?",cancelButtonText:"Close without saving",confirmButtonText:"Stay"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1});e.pipe((0,c.R)(this.destroyed$)).subscribe(e=>{!0!==e&&this.dialogRef.close()})}add(){this.tagsFormArray.push(new P.cw({key:new P.NI("",[P.kI.required]),value:new P.NI("",[P.kI.required])}))}save(){this.dialogRef.close({tags:this.tagsFormArray.getRawValue(),hasChanges:this.hasTagsFormChanges})}remove(e){this.tagsFormArray.removeAt(e)}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}populateFormArray(e){this.tagsFormArray.clear(),Object.entries(e).forEach(([e,t])=>this.tagsFormArray.push(new P.cw({key:new P.NI(e),value:new P.NI(t)}))),this.initFormValuesChangesHandler()}initFormValuesChangesHandler(){const e=this.tagsFormArray.getRawValue();this.tagsFormArray.valueChanges.pipe((0,c.R)(this.destroyed$)).subscribe(t=>this.hasTagsFormChanges=k(e,t).hasDifference)}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](r.Gln),u["\u0275\u0275directiveInject"](r.X4l))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-remote-application-tags-dialog"]],inputs:{tagsToUpdate:"tagsToUpdate"},decls:13,vars:3,consts:[["class","row",3,"formGroup",4,"ngIf"],["type","button","nbButton","",3,"disabled","click"],["icon","plus-square"],[1,"d-flex","justify-content-between"],["nbButton","",3,"click"],["nbButton","",3,"disabled","click"],[1,"row",3,"formGroup"],[1,"col-md-12"],["formArrayName","tags",1,"table","table-bordered","table-striped"],[1,"w-50"],[1,"w-25"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","text","nbInput","","fullWidth","",3,"id","formControl"],[4,"ngIf"],["type","button","nbButton","","nbTooltip","Remove",3,"click"],["icon","close-square"],[1,"form-control-error"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"nb-card"),u["\u0275\u0275elementStart"](1,"nb-card-header"),u["\u0275\u0275text"](2,"MANAGE TAGS"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"nb-card-body"),u["\u0275\u0275template"](4,ne,13,3,"form",0),u["\u0275\u0275elementStart"](5,"button",1),u["\u0275\u0275listener"]("click",function(){return t.add()}),u["\u0275\u0275element"](6,"nb-icon",2),u["\u0275\u0275text"](7," Add "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"nb-card-footer",3),u["\u0275\u0275elementStart"](9,"button",4),u["\u0275\u0275listener"]("click",function(){return t.close()}),u["\u0275\u0275text"](10,"Close"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"button",5),u["\u0275\u0275listener"]("click",function(){return t.save()}),u["\u0275\u0275text"](12,"Save"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngIf",t.form),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("disabled",t.tagsFormArray.invalid),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("disabled",t.tagsFormArray.invalid||!t.hasTagsFormChanges))},directives:[r.Asz,r.ndF,r.yKW,o.O5,r.DPz,r.fMN,r.XWE,P._Y,P.JL,P.sg,P.CE,o.sg,r.h8i,P.Fj,P.JJ,P.oH,r.jNv],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:50em;height:50em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}"]}),e})();function re(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" Update: ",null==e.appGroupToUpdate?null:e.appGroupToUpdate.Name," application group ")}}function ie(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1,"remote application group"),u["\u0275\u0275elementContainerEnd"]())}function ae(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1,"desktop application group"),u["\u0275\u0275elementContainerEnd"]())}function le(e,t){if(1&e&&(u["\u0275\u0275text"](0," Add "),u["\u0275\u0275template"](1,ie,2,0,"ng-container",7),u["\u0275\u0275template"](2,ae,2,0,"ng-container",7)),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.appGroupType===e.AppGroupResourceEnum.RemoteApp),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.appGroupType===e.AppGroupResourceEnum.Desktop)}}function se(e,t){1&e&&u["\u0275\u0275element"](0,"input",28)}function ce(e,t){if(1&e&&u["\u0275\u0275element"](0,"input",29),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("value",null==e.form.controls||null==e.form.controls.applicationGroupName?null:e.form.controls.applicationGroupName.value)}}function de(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",30),u["\u0275\u0275text"](2,"This field is required"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function pe(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",30),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" Max name length is ",null==e.form.controls.friendlyName||null==e.form.controls.friendlyName.errors?null:e.form.controls.friendlyName.errors.maxlength.requiredLength," characters. Actual is ",null==e.form.controls.friendlyName||null==e.form.controls.friendlyName.errors?null:e.form.controls.friendlyName.errors.maxlength.actualLength," ")}}function me(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",30),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" Max name length is ",null==e.form.controls.friendlyName||null==e.form.controls.friendlyName.errors?null:e.form.controls.friendlyName.errors.maxlength.requiredLength," characters. Actual is ",null==e.form.controls.friendlyName||null==e.form.controls.friendlyName.errors?null:e.form.controls.friendlyName.errors.maxlength.actualLength," ")}}function ue(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",9),u["\u0275\u0275elementStart"](1,"label",31),u["\u0275\u0275text"](2," Desktop friendly name "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",12),u["\u0275\u0275element"](4,"input",32),u["\u0275\u0275template"](5,me,3,2,"ng-container",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngIf",null==e.form.controls.friendlyName.errors?null:e.form.controls.friendlyName.errors.maxlength)}}function he(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",30),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" Max description length is ",null==e.form.controls.description||null==e.form.controls.description.errors?null:e.form.controls.description.errors.maxlength.requiredLength," characters. Actual is ",null==e.form.controls.description||null==e.form.controls.description.errors?null:e.form.controls.description.errors.maxlength.actualLength," ")}}function fe(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",23),u["\u0275\u0275text"](1,"Unchanged"),u["\u0275\u0275elementEnd"]()),2&e&&u["\u0275\u0275property"]("value","null")}function ve(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",23),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.Name," ")}}function ge(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementContainerStart"](0,8),u["\u0275\u0275elementStart"](1,"div",9),u["\u0275\u0275elementStart"](2,"label",10),u["\u0275\u0275elementStart"](3,"span",11),u["\u0275\u0275text"](4,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"span"),u["\u0275\u0275text"](6,"Application group name"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",12),u["\u0275\u0275template"](8,se,1,0,"input",13),u["\u0275\u0275template"](9,ce,1,1,"ng-template",null,14,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](11,de,3,0,"ng-container",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"div",9),u["\u0275\u0275elementStart"](13,"label",15),u["\u0275\u0275text"](14," Friendly name "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"div",12),u["\u0275\u0275element"](16,"input",16),u["\u0275\u0275template"](17,pe,3,2,"ng-container",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](18,ue,6,1,"div",17),u["\u0275\u0275elementStart"](19,"div",9),u["\u0275\u0275elementStart"](20,"label",18),u["\u0275\u0275text"](21," Description "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](22,"div",12),u["\u0275\u0275element"](23,"textarea",19),u["\u0275\u0275template"](24,he,3,2,"ng-container",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"div",9),u["\u0275\u0275elementStart"](26,"label",20),u["\u0275\u0275text"](27," Enable diagnostic logging "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](28,"div",12),u["\u0275\u0275elementStart"](29,"nb-select",21),u["\u0275\u0275template"](30,fe,2,1,"nb-option",22),u["\u0275\u0275elementStart"](31,"nb-option",23),u["\u0275\u0275text"](32,"No logging"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](33,ve,2,2,"nb-option",24),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](34,"div",25),u["\u0275\u0275elementStart"](35,"label",26),u["\u0275\u0275text"](36,"Tags"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](37,"div",12),u["\u0275\u0275elementStart"](38,"a",27),u["\u0275\u0275listener"]("click",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().openManageTagsDialog(t)}),u["\u0275\u0275text"](39,"Open manage tags dialog"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,n=u["\u0275\u0275reference"](10),o=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("formGroup",o.form),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngIf",!o.appGroupToUpdate)("ngIfElse",n),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",(null==o.form.controls.applicationGroupName.errors?null:o.form.controls.applicationGroupName.errors.required)&&o.form.controls.applicationGroupName.touched),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",null==o.form.controls.friendlyName.errors?null:o.form.controls.friendlyName.errors.maxlength),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",o.appGroupType===o.AppGroupResourceEnum.Desktop),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",(null==o.form.controls.description||null==o.form.controls.description.errors?null:o.form.controls.description.errors.maxlength)&&o.form.controls.description.touched),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",o.appGroupToUpdate),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("value",""),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngForOf",null==e?null:e.LogAnalyticsWorkspaces)}}let ye=(()=>{class e{constructor(e,t,n,o){this.dialogService=e,this.dialogRef=t,this.azureVirtualDesktopService=n,this.toastrService=o,this.destroyed$=new a.xQ,this.appGroupModel=new S.NL,this.appGroupType=S.Vh.RemoteApp,this.AppGroupResourceEnum=S.Vh,this.form=new P.cw({applicationGroupName:new P.NI("",[P.kI.required,P.kI.maxLength(64)]),friendlyName:new P.NI("",[P.kI.maxLength(64)]),desktopFriendlyName:new P.NI("",[P.kI.maxLength(64)]),description:new P.NI("",[P.kI.maxLength(512)]),logAnalyticWorkspace:new P.NI(null)}),this.hasFormChanges=!1,this.isSaving=!1}ngOnInit(){this.avdResourceData$=this.tenantViewSceneId&&!this.appGroupToUpdate?this.initCreateAppGroupMode():this.initUpdateAppGroupMode()}close(){if(!this.hasFormChanges)return void this.dialogRef.close();const{onClose:e}=this.dialogService.open(M,{context:{headerTitle:"Warning",bodyText:"You are about to exit without saving your changes. Are you sure you want to leave?",cancelButtonText:"Close without saving",confirmButtonText:"Stay"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1});e.pipe((0,c.R)(this.destroyed$)).subscribe(e=>{!0!==e&&this.dialogRef.close()})}openManageTagsDialog(e){var t;e.stopPropagation(),e.preventDefault();const{onClose:n}=this.dialogService.open(oe,{context:{tagsToUpdate:null===(t=this.hostPool)||void 0===t?void 0:t.Tags},autoFocus:!0,closeOnEsc:!1,closeOnBackdropClick:!1,hasScroll:!1,hasBackdrop:!1});n.pipe((0,c.R)(this.destroyed$)).subscribe(e=>{e&&(this.hostPool.Tags=e.tags.reduce((e,t)=>({[t.key]:t.value,...e}),{}),this.hasFormChanges=e.hasChanges)})}save(){var e,t,n,o,r,i,a,l;this.isSaving=!0;const{applicationGroupName:s,friendlyName:c,description:d,logAnalyticWorkspace:p,desktopFriendlyName:m}=this.form.getRawValue(),u=Y(null===(e=this.hostPool)||void 0===e?void 0:e.Id);this.appGroupModel={...this.appGroupModel,Name:s,SubscriptionName:null===(t=this.hostPool)||void 0===t?void 0:t.SubscriptionName,ResourceGroup:null===(n=this.hostPool)||void 0===n?void 0:n.ResourceGroup,LogAnalyticsId:_(p),LogAnalyticsName:null!==(r=null===(o=p)||void 0===o?void 0:o.Name)&&void 0!==r?r:"",Location:null===(i=this.hostPool)||void 0===i?void 0:i.Location,Kind:this.appGroupType===S.Vh.Desktop?"Desktop":"RemoteApp",DesktopFriendlyName:m,Tags:null===(a=this.hostPool)||void 0===a?void 0:a.Tags,Properties:{...this.appGroupModel.Properties,Description:d,FriendlyName:c,HostPoolArmPath:null===(l=this.hostPool)||void 0===l?void 0:l.Id,ApplicationGroupType:this.appGroupType,WorkspaceArmPath:null,ShowInFeed:null}},this.handleSaving(u,this.appGroupModel)}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}initCreateAppGroupMode(){return this.azureVirtualDesktopService.getAvdResourcesForCreation(this.tenantViewSceneId).pipe((0,l.b)(()=>this.initFormValueChangesHandler()))}initUpdateAppGroupMode(){var e;return(0,E.aj)([this.azureVirtualDesktopService.getAvdResourcesForCreation(this.tenantViewSceneId),this.azureVirtualDesktopService.getAvdResourceFor(this.tenantViewSceneId,null===(e=this.appGroupToUpdate)||void 0===e?void 0:e.Id)]).pipe((0,b.U)(([e,t])=>(this.appGroupToUpdate={...t},this.populateForm(e),this.initFormValueChangesHandler(),e)))}handleSaving(e,t){t.Id=`${e}/resourceGroups/${t.ResourceGroup}/providers/Microsoft.DesktopVirtualization/applicationgroups/${t.Name}`,this.azureVirtualDesktopService.manageAvdResourceEntity(this.tenantViewSceneId,t).pipe((0,c.R)(this.destroyed$)).subscribe({next:e=>{200===e.status&&(this.isSaving=!1,this.dialogRef.close({appGroup:t,update:!(!this.tenantViewSceneId||!this.appGroupToUpdate)}),this.toastrService.success(this.appGroupToUpdate?"App group updated successfully":"App group created successfully","Success"))},error:e=>{this.isSaving=!1,this.toastrService.danger(V(e.error).message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"})}})}initFormValueChangesHandler(){const e=this.form.getRawValue();this.form.valueChanges.pipe((0,c.R)(this.destroyed$)).subscribe(t=>this.hasFormChanges=k(e,t).hasDifference)}populateForm(e){this.form.patchValue({applicationGroupName:this.appGroupToUpdate.Name,friendlyName:this.appGroupToUpdate.Properties.FriendlyName,desktopFriendlyName:this.appGroupToUpdate.DesktopFriendlyName,logAnalyticWorkspace:this.getFormLogAnalyticWorkspaceItem(e),description:this.appGroupToUpdate.Properties.Description})}getFormLogAnalyticWorkspaceItem(e){var t;return this.appGroupToUpdate.LogAnalyticsId&&""!==this.appGroupToUpdate.LogAnalyticsId?null!==(t=null==e?void 0:e.LogAnalyticsWorkspaces.find(e=>e.Id===this.appGroupToUpdate.LogAnalyticsId))&&void 0!==t?t:"null":""===this.appGroupToUpdate.LogAnalyticsId?"":null===this.appGroupToUpdate.LogAnalyticsId?"null":void 0}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](r.Gln),u["\u0275\u0275directiveInject"](r.X4l),u["\u0275\u0275directiveInject"](v),u["\u0275\u0275directiveInject"](r.quB))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-manage-app-groups-dialog"]],inputs:{tenantViewSceneId:"tenantViewSceneId",hostPool:"hostPool",appGroupType:"appGroupType",appGroupToUpdate:"appGroupToUpdate"},decls:14,vars:11,consts:[[3,"nbSpinner","nbSpinnerMessage"],[4,"ngIf","ngIfElse"],["addAppGroupTitle",""],[3,"formGroup",4,"ngIf"],[1,"d-flex","justify-content-between"],["nbButton","",3,"click"],["nbButton","",3,"disabled","click"],[4,"ngIf"],[3,"formGroup"],[1,"form-group","row"],["for","application_group_name",1,"label","col-md-3","d-flex","align-items-center"],[1,"asterisk"],[1,"col-md-9"],["id","application_group_name","type","text","nbInput","","fullWidth","","placeholder","<host-pool-name>-AG-000","formControlName","applicationGroupName",4,"ngIf","ngIfElse"],["readOnlyApplicationGroupName",""],["for","friendly_name",1,"label","col-md-3","d-flex","align-items-center"],["id","friendly_name","type","text","nbInput","","fullWidth","","formControlName","friendlyName"],["class","form-group row",4,"ngIf"],["for","description",1,"label","col-md-3","d-flex","align-items-center"],["id","description","nbInput","","fullWidth","","formControlName","description"],["for","log_analytic_workspace",1,"label","col-md-3","d-flex","align-items-center"],["id","log_analytic_workspace","fullWidth","","formControlName","logAnalyticWorkspace"],[3,"value",4,"ngIf"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","row","mt-4"],["for","tags",1,"col-md-3","label"],["href","#",3,"click"],["id","application_group_name","type","text","nbInput","","fullWidth","","placeholder","<host-pool-name>-AG-000","formControlName","applicationGroupName"],["id","application_group_name","type","text","nbInput","","fullWidth","","disabled","",3,"value"],[1,"form-control-error"],["for","desktop_friendly_name",1,"label","col-md-3","d-flex","align-items-center"],["id","desktop_friendly_name","type","text","nbInput","","fullWidth","","formControlName","desktopFriendlyName"]],template:function(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-card",0),u["\u0275\u0275pipe"](1,"async"),u["\u0275\u0275elementStart"](2,"nb-card-header"),u["\u0275\u0275template"](3,re,2,1,"ng-container",1),u["\u0275\u0275template"](4,le,3,2,"ng-template",null,2,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"nb-card-body"),u["\u0275\u0275template"](7,ge,40,10,"ng-container",3),u["\u0275\u0275pipe"](8,"async"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"nb-card-footer",4),u["\u0275\u0275elementStart"](10,"button",5),u["\u0275\u0275listener"]("click",function(){return t.close()}),u["\u0275\u0275text"](11,"Close"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"button",6),u["\u0275\u0275listener"]("click",function(){return t.save()}),u["\u0275\u0275text"](13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275reference"](5);u["\u0275\u0275propertyInterpolate"]("nbSpinnerMessage",t.isSaving?t.appGroupToUpdate?"Updating...":"Saving...":"Loading..."),u["\u0275\u0275property"]("nbSpinner",!u["\u0275\u0275pipeBind1"](1,7,t.avdResourceData$)||t.isSaving),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",t.appGroupToUpdate)("ngIfElse",e),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngIf",u["\u0275\u0275pipeBind1"](8,9,t.avdResourceData$)),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("disabled",t.form.invalid||t.isSaving||!t.hasFormChanges),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",t.appGroupToUpdate?"Update":"Save"," ")}},directives:[r.Asz,r.Q7R,r.ndF,o.O5,r.yKW,r.XWE,r.DPz,P.JL,P.sg,r.h8i,P.Fj,P.JJ,P.u,r.rs,r.q51,o.sg],pipes:[o.Ov],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:45em;height:45em}[_nghost-%COMP%]   .asterisk[_ngcontent-%COMP%]{color:var(--danger);margin-right:.5em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}"]}),e})();var Ce=n(86115);function be(e,t){1&e&&u["\u0275\u0275elementContainer"](0)}function Se(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"nb-card",6),u["\u0275\u0275pipe"](2,"async"),u["\u0275\u0275template"](3,be,1,0,"ng-container",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](),t=u["\u0275\u0275reference"](4);u["\u0275\u0275advance"](1),u["\u0275\u0275propertyInterpolate"]("nbSpinnerMessage",e.isSaving?e.applicationToUpdate?"Updating...":"Saving...":"Loading..."),u["\u0275\u0275property"]("nbSpinner",!u["\u0275\u0275pipeBind1"](2,3,e.startupMenuApps$)||e.isSaving),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngTemplateOutlet",t)}}function we(e,t){1&e&&u["\u0275\u0275elementContainer"](0)}function xe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-card",6),u["\u0275\u0275template"](1,we,1,0,"ng-container",7),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](),t=u["\u0275\u0275reference"](4);u["\u0275\u0275propertyInterpolate"]("nbSpinnerMessage",e.isSaving&&e.applicationToUpdate?"Updating...":"Saving..."),u["\u0275\u0275property"]("nbSpinner",e.isSaving),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",t)}}function Ie(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" Add application to: ",null==e.appGroup?null:e.appGroup.Name," application group ")}}function Pe(e,t){if(1&e&&u["\u0275\u0275text"](0),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275textInterpolate1"]("Update: ",e.getClearApplicationName(null==e.applicationToUpdate?null:e.applicationToUpdate.Name),"application ")}}function Ee(e,t){1&e&&u["\u0275\u0275elementContainer"](0)}function ke(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,Ee,1,0,"ng-container",7),u["\u0275\u0275elementContainerEnd"]()),2&e){u["\u0275\u0275nextContext"](2);const e=u["\u0275\u0275reference"](8);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",e)}}function Ae(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"nb-card-header"),u["\u0275\u0275template"](1,Ie,2,1,"ng-container",0),u["\u0275\u0275template"](2,Pe,1,1,"ng-template",null,8,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"nb-card-body"),u["\u0275\u0275template"](5,ke,2,1,"ng-container",0),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"nb-card-footer",9),u["\u0275\u0275elementStart"](7,"button",10),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().close()}),u["\u0275\u0275text"](8,"Close"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"button",11),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().save()}),u["\u0275\u0275text"](10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275reference"](3),t=u["\u0275\u0275nextContext"](),n=u["\u0275\u0275reference"](6);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.applicationToUpdate)("ngIfElse",e),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngIf",t.withStartMenuItems)("ngIfElse",n),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("disabled",t.form.invalid||t.isSaving||!t.hasFormChanges),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",t.applicationToUpdate?"Update":"Save"," ")}}function Te(e,t){1&e&&u["\u0275\u0275elementContainer"](0)}function Ne(e,t){if(1&e&&u["\u0275\u0275template"](0,Te,1,0,"ng-container",7),2&e){u["\u0275\u0275nextContext"]();const e=u["\u0275\u0275reference"](10);u["\u0275\u0275property"]("ngTemplateOutlet",e)}}function Oe(e,t){1&e&&u["\u0275\u0275elementContainer"](0)}const Me=function(e){return{$implicit:e}};function Ve(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,Oe,1,0,"ng-container",14),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().ngIf;u["\u0275\u0275nextContext"](2);const t=u["\u0275\u0275reference"](10);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",t)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](2,Me,e))}}function _e(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",15),u["\u0275\u0275elementStart"](1,"p"),u["\u0275\u0275text"](2,"Session hosts are not available"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"p"),u["\u0275\u0275text"](4,"Please make sure to have at least one running"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",16),u["\u0275\u0275elementStart"](6,"a",17),u["\u0275\u0275listener"]("click",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).redirectTo(t)}),u["\u0275\u0275text"](7," Go to "),u["\u0275\u0275elementStart"](8,"b"),u["\u0275\u0275text"](9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](10," host pool settings to start a session host "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"button",18),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).initStartupMenuApps()}),u["\u0275\u0275element"](12,"nb-icon",19),u["\u0275\u0275text"](13," Update "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](9),u["\u0275\u0275textInterpolate"](null==e.hostPool?null:e.hostPool.Name)}}function Fe(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,Ve,2,4,"ng-container",0),u["\u0275\u0275template"](2,_e,14,1,"ng-template",null,13,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngIf,n=u["\u0275\u0275reference"](3);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==e?null:e.length)("ngIfElse",n)}}function Re(e,t){if(1&e&&(u["\u0275\u0275template"](0,Fe,4,2,"ng-container",12),u["\u0275\u0275pipe"](1,"async")),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("ngIf",u["\u0275\u0275pipeBind1"](1,1,e.startupMenuApps$))}}function De(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",48),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.Name," ")}}function Ge(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",49),u["\u0275\u0275text"](1," This field is required "),u["\u0275\u0275elementEnd"]())}function Ue(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",22),u["\u0275\u0275elementStart"](1,"div",23),u["\u0275\u0275elementStart"](2,"label",45),u["\u0275\u0275elementStart"](3,"span",25),u["\u0275\u0275text"](4,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"span"),u["\u0275\u0275text"](6,"Application"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",26),u["\u0275\u0275elementStart"](8,"nb-select",46),u["\u0275\u0275listener"]("selectedChange",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).applicationChange(t)}),u["\u0275\u0275template"](9,De,2,2,"nb-option",47),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](10,Ge,2,0,"span",29),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]().$implicit,t=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](9),u["\u0275\u0275property"]("ngForOf",e)("ngForTrackBy",t.trackByFn),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(null==t.form.controls.application.errors?null:t.form.controls.application.errors.required)&&t.form.controls.application.touched)}}function Le(e,t){1&e&&u["\u0275\u0275element"](0,"input",50)}function $e(e,t){if(1&e&&u["\u0275\u0275element"](0,"input",51),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("value",null==e.form.controls||null==e.form.controls.name?null:e.form.controls.name.value)}}function ze(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",49),u["\u0275\u0275text"](1," This field is required "),u["\u0275\u0275elementEnd"]())}function Be(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",49),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" Max display name length is ",null==e.form.controls.name||null==e.form.controls.name.errors?null:e.form.controls.name.errors.maxlength.requiredLength," characters. Actual is ",null==e.form.controls.name||null==e.form.controls.name.errors?null:e.form.controls.name.errors.maxlength.actualLength," ")}}function We(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",49),u["\u0275\u0275text"](1," This field is required "),u["\u0275\u0275elementEnd"]())}function je(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",49),u["\u0275\u0275text"](1,' Enter a Windows or universal app rooted absolute path, e.g. "C:\\app.exe" or "shell:AppsFolder\\appname!App". File names can\'t contain any of the following characters : * ? " < > | / '),u["\u0275\u0275elementEnd"]())}function qe(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",49),u["\u0275\u0275text"](1," This field is required "),u["\u0275\u0275elementEnd"]())}function He(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",49),u["\u0275\u0275text"](1," Enter a rooted absolute app path. File names can't contain any of the following characters : * ? \" < > | / "),u["\u0275\u0275elementEnd"]())}function Je(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",49),u["\u0275\u0275text"](1," This field is required "),u["\u0275\u0275elementEnd"]())}function Qe(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",49),u["\u0275\u0275text"](1," This field is required "),u["\u0275\u0275elementEnd"]())}function Ke(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",22),u["\u0275\u0275elementStart"](1,"div",52),u["\u0275\u0275elementStart"](2,"label",53),u["\u0275\u0275elementStart"](3,"span",25),u["\u0275\u0275text"](4,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"span"),u["\u0275\u0275text"](6,"Command line"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",26),u["\u0275\u0275element"](8,"textarea",54),u["\u0275\u0275template"](9,Qe,2,0,"span",29),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](9),u["\u0275\u0275property"]("ngIf",(null==e.form.controls.commandLine.errors?null:e.form.controls.commandLine.errors.required)&&e.form.controls.commandLine.touched)}}function Xe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-radio",48),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e.value),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.title," ")}}function Ye(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",49),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" Max description length is ",null==e.form.controls.description||null==e.form.controls.description.errors?null:e.form.controls.description.errors.maxlength.requiredLength," characters. Actual is ",null==e.form.controls.description||null==e.form.controls.description.errors?null:e.form.controls.description.errors.maxlength.actualLength," ")}}function Ze(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementContainerStart"](0,20),u["\u0275\u0275template"](1,Ue,11,3,"div",21),u["\u0275\u0275elementStart"](2,"div",22),u["\u0275\u0275elementStart"](3,"div",23),u["\u0275\u0275elementStart"](4,"label",24),u["\u0275\u0275elementStart"](5,"span",25),u["\u0275\u0275text"](6,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"span"),u["\u0275\u0275text"](8,"Name"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"div",26),u["\u0275\u0275template"](10,Le,1,0,"input",27),u["\u0275\u0275template"](11,$e,1,1,"ng-template",null,28,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](13,ze,2,0,"span",29),u["\u0275\u0275template"](14,Be,2,2,"span",29),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"div",22),u["\u0275\u0275elementStart"](16,"div",23),u["\u0275\u0275elementStart"](17,"label",30),u["\u0275\u0275elementStart"](18,"span",25),u["\u0275\u0275text"](19,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"span"),u["\u0275\u0275text"](21,"Application path"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](22,"nb-icon",31),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](23,"div",26),u["\u0275\u0275element"](24,"input",32),u["\u0275\u0275template"](25,We,2,0,"span",29),u["\u0275\u0275template"](26,je,2,0,"span",29),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](27,"div",22),u["\u0275\u0275elementStart"](28,"div",23),u["\u0275\u0275elementStart"](29,"label",33),u["\u0275\u0275elementStart"](30,"span",25),u["\u0275\u0275text"](31,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](32,"span"),u["\u0275\u0275text"](33,"Icon path"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](34,"div",26),u["\u0275\u0275element"](35,"input",34),u["\u0275\u0275template"](36,qe,2,0,"span",29),u["\u0275\u0275template"](37,He,2,0,"span",29),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](38,"div",22),u["\u0275\u0275elementStart"](39,"div",23),u["\u0275\u0275elementStart"](40,"label",35),u["\u0275\u0275elementStart"](41,"span",25),u["\u0275\u0275text"](42,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](43,"span"),u["\u0275\u0275text"](44,"Icon index"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](45,"div",26),u["\u0275\u0275element"](46,"input",36),u["\u0275\u0275template"](47,Je,2,0,"span",29),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](48,Ke,10,1,"div",21),u["\u0275\u0275elementStart"](49,"div",22),u["\u0275\u0275elementStart"](50,"div",37),u["\u0275\u0275elementStart"](51,"label",38),u["\u0275\u0275text"](52,"Require command line"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](53,"div",26),u["\u0275\u0275elementStart"](54,"nb-radio-group",39),u["\u0275\u0275listener"]("valueChange",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().requireCommandLineChange(t)}),u["\u0275\u0275template"](55,Xe,2,2,"nb-radio",40),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](56,"div",22),u["\u0275\u0275elementStart"](57,"label",41),u["\u0275\u0275text"](58," Friendly name "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](59,"div",26),u["\u0275\u0275element"](60,"input",42),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](61,"div",22),u["\u0275\u0275elementStart"](62,"label",43),u["\u0275\u0275text"](63,"Description"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](64,"div",26),u["\u0275\u0275element"](65,"textarea",44),u["\u0275\u0275template"](66,Ye,2,2,"span",29),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.$implicit,n=u["\u0275\u0275reference"](12),o=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("formGroup",o.form),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",o.withStartMenuItems&&e),u["\u0275\u0275advance"](9),u["\u0275\u0275property"]("ngIf",!o.applicationToUpdate)("ngIfElse",n),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",(null==o.form.controls.name.errors?null:o.form.controls.name.errors.required)&&o.form.controls.name.touched),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==o.form.controls.name.errors?null:o.form.controls.name.errors.maxlength),u["\u0275\u0275advance"](11),u["\u0275\u0275property"]("ngIf",(null==o.form.controls.applicationPath.errors?null:o.form.controls.applicationPath.errors.required)&&o.form.controls.applicationPath.touched),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==o.form.controls.applicationPath.errors?null:o.form.controls.applicationPath.errors.invalidPath),u["\u0275\u0275advance"](10),u["\u0275\u0275property"]("ngIf",(null==o.form.controls.iconPath.errors?null:o.form.controls.iconPath.errors.required)&&o.form.controls.iconPath.touched),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==o.form.controls.iconPath.errors?null:o.form.controls.iconPath.errors.invalidIconPath),u["\u0275\u0275advance"](10),u["\u0275\u0275property"]("ngIf",(null==o.form.controls.iconIndex.errors?null:o.form.controls.iconIndex.errors.required)&&o.form.controls.iconIndex.touched),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",o.showCommandLine===o.CommandLineSettingEnum.Require),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("value",o.showCommandLine),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",o.requireCommandLineTypes),u["\u0275\u0275advance"](11),u["\u0275\u0275property"]("ngIf",null==o.form.controls.description||null==o.form.controls.description.errors?null:o.form.controls.description.errors.maxlength)}}const et=/^[a-zA-Z]:\\(?:[^\\:*?"<>|/]+\\)*[^\\:*?"<>|/]+(\.[^\\:*?"<>|/]+)?$/,tt=/^shell:AppsFolder\\[^*?"<>|/]+!App$/,nt=/^[a-zA-Z]:\\(?:[^\\:*?"<>|/]+\\)*[^\\:*?"<>|/]+(\.[^\\:*?"<>|/]+)?$/i;let ot=(()=>{class e{constructor(e,t,n,o,r,i){this.dialogService=e,this.dialogRef=t,this.azureVirtualDesktopService=n,this.hostPoolsService=o,this.router=r,this.toastrService=i,this.destroyed$=new a.xQ,this.withStartMenuItems=!1,this.getClearApplicationName=w,this.CommandLineSettingEnum=S.HJ,this.form=new P.cw({name:new P.NI("",[P.kI.required,P.kI.maxLength(64)]),applicationPath:new P.NI("",[P.kI.required,e=>{const t=(e.value||"").trim();return t?tt.test(t)||et.test(t)?null:{invalidPath:!0}:null}]),iconPath:new P.NI("",[P.kI.required,e=>{const t=(e.value||"").trim();return t?nt.test(t)?null:{invalidIconPath:!0}:null}]),iconIndex:new P.NI(null,[P.kI.required]),displayName:new P.NI(""),description:new P.NI("",[P.kI.maxLength(512)])}),this.applicationModel=new S.VC,this.isSaving=!1,this.hasFormChanges=!1,this.showCommandLine=S.HJ.DoNotAllow,this.requireCommandLineTypes=[{title:"No",value:S.HJ.DoNotAllow},{title:"Yes",value:S.HJ.Require}],this.trackByFn=e=>e}ngOnInit(){this.withStartMenuItems&&(this.initStartupMenuApps(),this.form.addControl("application",new P.NI(null,[P.kI.required]))),this.applicationToUpdate&&this.populateForm(),this.initFormValueChangesHandler()}initStartupMenuApps(){var e;this.startupMenuApps$=this.azureVirtualDesktopService.getStartMenuApplicationsFor(this.tenantViewSceneId,null===(e=this.appGroup)||void 0===e?void 0:e.Id).pipe((0,b.U)(e=>null!=e?e:[]))}close(){if(!this.hasFormChanges)return void this.dialogRef.close();const{onClose:e}=this.dialogService.open(M,{context:{headerTitle:"Warning",bodyText:"You are about to exit without saving your changes. Are you sure you want to leave?",cancelButtonText:"Close without saving",confirmButtonText:"Stay"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1});e.pipe((0,c.R)(this.destroyed$)).subscribe(e=>{!0!==e&&this.dialogRef.close()})}applicationChange(e){var t;this.form.patchValue({name:null!==(t=w(e.Name))&&void 0!==t?t:"",applicationPath:e.Properties.FilePath,iconPath:e.Properties.IconPath,iconIndex:e.Properties.IconIndex})}requireCommandLineChange(e){this.showCommandLine=e,e===S.HJ.Require?this.form.addControl("commandLine",new P.NI(null,[P.kI.required])):this.form.removeControl("commandLine")}redirectTo(e){e.preventDefault(),e.stopPropagation(),this.hostPoolsService.getData().pipe((0,c.R)(this.destroyed$)).subscribe(e=>{const t=e.find(e=>{var t;return e.V2HostPool.Id.toLowerCase()===(null===(t=this.hostPool)||void 0===t?void 0:t.Id.toLowerCase())});t&&(this.close(),this.router.navigate([`/pages/hostpools/${t.Id}/statistic`]))})}save(){this.withStartMenuItems?this.handleRemoteApplicationWithStartMenuItems():this.handleRemoteApplication()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}initFormValueChangesHandler(){const e=this.form.getRawValue();this.form.valueChanges.pipe((0,c.R)(this.destroyed$)).subscribe(t=>this.hasFormChanges=k(e,t).hasDifference)}populateForm(){this.form.patchValue({name:w(this.applicationToUpdate.Name),applicationPath:this.applicationToUpdate.Properties.FilePath,displayName:this.applicationToUpdate.Properties.FriendlyName,description:this.applicationToUpdate.Properties.Description,iconPath:this.applicationToUpdate.Properties.IconPath,iconIndex:this.applicationToUpdate.Properties.IconIndex}),this.applicationToUpdate.Properties.CommandLineSetting===S.HJ.Require&&(this.showCommandLine=this.applicationToUpdate.Properties.CommandLineSetting,this.form.addControl("commandLine",new P.NI(this.applicationToUpdate.Properties.CommandLineArguments,[P.kI.required])))}handleRemoteApplicationWithStartMenuItems(){const{application:e,name:t,applicationPath:n,iconPath:o,iconIndex:r,displayName:i,description:a,commandLine:l}=this.form.getRawValue();this.applicationModel=e,this.applicationModel.Name=t,this.applicationModel.Properties.FilePath=n,this.applicationModel.Properties.IconPath=o,this.applicationModel.Properties.IconIndex=r,this.applicationModel.Properties.FriendlyName=i,this.applicationModel.Properties.Description=a,this.applicationModel.Properties.CommandLineSetting=this.showCommandLine,this.applicationModel.Properties.CommandLineArguments=this.showCommandLine===S.HJ.Require?l:"",this.handleSaving()}handleRemoteApplication(){const{name:e,applicationPath:t,iconPath:n,iconIndex:o,displayName:r,description:i,commandLine:a}=this.form.getRawValue();this.applicationModel={Id:"",Type:"",Name:e,Properties:{ApplicationType:S.lg.InBuilt,CommandLineArguments:this.showCommandLine===S.HJ.Require?a:"",CommandLineSetting:this.showCommandLine,Description:i,FilePath:t,FriendlyName:r,IconContent:null,IconHash:null,IconIndex:o,IconPath:n,MsixPackageApplicationId:null,MsixPackageFamilyName:null,ShowInPortal:!1}},this.handleSaving()}handleSaving(){var e;this.isSaving=!0,this.azureVirtualDesktopService.manageRemoteApplication(this.tenantViewSceneId,null===(e=this.appGroup)||void 0===e?void 0:e.Id,this.applicationModel).pipe((0,c.R)(this.destroyed$)).subscribe({next:()=>{this.isSaving=!1,this.dialogRef.close({rebuildTreeView:!0}),this.toastrService.success(this.applicationToUpdate?"Application updated successfully":"Application created successfully","Success")},error:e=>{this.isSaving=!1,this.toastrService.danger(V(e.error).message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"})}})}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](r.Gln),u["\u0275\u0275directiveInject"](r.X4l),u["\u0275\u0275directiveInject"](v),u["\u0275\u0275directiveInject"](Ce.lJ),u["\u0275\u0275directiveInject"](i.F0),u["\u0275\u0275directiveInject"](r.quB))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-manage-remote-application"]],inputs:{tenantViewSceneId:"tenantViewSceneId",appGroup:"appGroup",applicationToUpdate:"applicationToUpdate",withStartMenuItems:"withStartMenuItems",hostPool:"hostPool"},decls:11,vars:2,consts:[[4,"ngIf","ngIfElse"],["withoutStartMenuItemsTpl",""],["cardTpl",""],["formWithoutApplicationControlTpl",""],["formWithApplicationControlTpl",""],["formControlsTpl",""],[3,"nbSpinner","nbSpinnerMessage"],[4,"ngTemplateOutlet"],["updateHeaderTpl",""],[1,"d-flex","justify-content-between"],["nbButton","",3,"click"],["nbButton","",3,"disabled","click"],[4,"ngIf"],["virtualMachineNotRunningTpl",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"error-container","d-flex","h-100","flex-column","justify-content-center","align-items-center"],[1,"d-flex","flex-column","mt-4"],["href","#",3,"click"],["nbButton","",1,"mt-4",3,"click"],["icon","refresh-outline"],[3,"formGroup"],["class","form-group row",4,"ngIf"],[1,"form-group","row"],[1,"col-md-3","d-flex","justify-content-between","align-items-center"],["for","name",1,"label"],[1,"asterisk"],[1,"col-md-9"],["id","name","type","text","nbInput","","fullWidth","","formControlName","name",4,"ngIf","ngIfElse"],["readOnlyName",""],["class","form-control-error",4,"ngIf"],["for","application_path",1,"label","application-path-label"],["icon","info-outline","nbTooltip","Windows application local drive absolute path. Universal apps are also supported. e.g. shell:AppsFolder\\appname!App"],["type","text","id","application_path","nbInput","","fullWidth","","formControlName","applicationPath"],["for","icon_path",1,"label"],["type","text","id","icon_path","nbInput","","fullWidth","","formControlName","iconPath"],["for","icon_index",1,"label"],["type","number","id","icon_index","nbInput","","fullWidth","","formControlName","iconIndex"],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],["for","require_command_line",1,"label"],["id","require_command_line","name","require_command_line",1,"d-flex",3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],["for","friendly_name",1,"label","col-md-3","d-flex","justify-content-between","align-items-center"],["id","friendly_name","type","text","nbInput","","fullWidth","","formControlName","displayName"],["for","description",1,"label","col-md-3"],["id","description","nbInput","","fullWidth","","formControlName","description"],["for","application",1,"label"],["id","application","fullWidth","","formControlName","application",3,"selectedChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],[1,"form-control-error"],["id","name","type","text","nbInput","","fullWidth","","formControlName","name"],["id","name","type","text","nbInput","","fullWidth","","disabled","",3,"value"],[1,"col-md-3"],["for","command_line",1,"label"],["id","command_line","nbInput","","fullWidth","","formControlName","commandLine"]],template:function(e,t){if(1&e&&(u["\u0275\u0275template"](0,Se,4,5,"ng-container",0),u["\u0275\u0275template"](1,xe,2,3,"ng-template",null,1,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](3,Ae,11,6,"ng-template",null,2,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](5,Ne,1,1,"ng-template",null,3,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](7,Re,2,3,"ng-template",null,4,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](9,Ze,67,15,"ng-template",null,5,u["\u0275\u0275templateRefExtractor"])),2&e){const e=u["\u0275\u0275reference"](2);u["\u0275\u0275property"]("ngIf",t.withStartMenuItems)("ngIfElse",e)}},directives:[o.O5,r.Asz,r.Q7R,o.tP,r.ndF,r.yKW,r.XWE,r.DPz,r.fMN,P.JL,P.sg,r.jNv,r.h8i,P.Fj,P.JJ,P.u,P.wV,r.MFI,o.sg,r.rs,r.q51,r.r3g],pipes:[o.Ov],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:50em;height:55em}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .asterisk[_ngcontent-%COMP%]{color:var(--danger);margin-right:.5em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}[_nghost-%COMP%]   .application-path-label[_ngcontent-%COMP%]{margin-top:.6em}[_nghost-%COMP%]   .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--danger)}"]}),e})();function rt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"button",9),u["\u0275\u0275element"](1,"nb-icon",10),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("nbContextMenu",null==e.treeViewItem?null:e.treeViewItem.contextMenuItems)("nbContextMenuPlacement",(null==e.treeViewItem?null:e.treeViewItem.contextMenuPlacement)||"right")}}function it(e,t){if(1&e&&u["\u0275\u0275element"](0,"nb-icon",11),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275styleProp"]("visibility",null!=e.treeViewItem&&null!=e.treeViewItem.children&&e.treeViewItem.children.length?"visible":"hidden"),u["\u0275\u0275propertyInterpolate1"]("icon","chevron-",null!=e.treeViewItem&&e.treeViewItem.expanded?"down-outline":"right-outline","")}}function at(e,t){if(1&e&&u["\u0275\u0275element"](0,"nb-icon",11),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275styleProp"]("visibility",null!=e.treeViewItem&&e.treeViewItem.childrenLoader?"visible":"hidden"),u["\u0275\u0275propertyInterpolate1"]("icon","chevron-",null!=e.treeViewItem&&e.treeViewItem.expanded?"down-outline":"right-outline","")}}function lt(e,t){if(1&e&&u["\u0275\u0275element"](0,"img",12),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275styleProp"]("visibility",null!=e.treeViewItem&&e.treeViewItem.iconPath?"visible":"hidden"),u["\u0275\u0275property"]("src",null==e.treeViewItem?null:e.treeViewItem.iconPath,u["\u0275\u0275sanitizeUrl"])("alt",null==e.treeViewItem?null:e.treeViewItem.title)}}function st(e,t){1&e&&u["\u0275\u0275element"](0,"ngx-tree-view-item",18),2&e&&u["\u0275\u0275property"]("item",t.$implicit)}function ct(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,st,1,1,"ngx-tree-view-item",17),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",null==e.treeViewItem?null:e.treeViewItem.children)("ngForTrackBy",e.treeViewItemIndex)}}function dt(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"ul",16),u["\u0275\u0275template"](2,ct,2,2,"ng-container",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){u["\u0275\u0275nextContext"]();const e=u["\u0275\u0275reference"](5),t=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",null==t.treeViewItem||null==t.treeViewItem.children?null:t.treeViewItem.children.length)("ngIfElse",e)}}function pt(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"li",19),u["\u0275\u0275element"](1,"div",20),u["\u0275\u0275text"](2," Loading data. Please wait... "),u["\u0275\u0275elementEnd"]())}function mt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"li",22),u["\u0275\u0275text"](1," No data available for "),u["\u0275\u0275elementStart"](2,"b"),u["\u0275\u0275text"](3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](null==e.treeViewItem?null:e.treeViewItem.title)}}function ut(e,t){if(1&e&&u["\u0275\u0275template"](0,mt,4,1,"li",21),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("ngIf",!(null!=e.treeViewItem&&e.treeViewItem.hasLoadingError))}}function ht(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,dt,3,2,"ng-container",13),u["\u0275\u0275template"](2,pt,3,0,"ng-template",null,14,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](4,ut,1,1,"ng-template",null,15,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275reference"](3),t=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!(null!=t.treeViewItem&&t.treeViewItem.isLoading))("ngIfElse",e)}}function ft(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",23),u["\u0275\u0275element"](1,"nb-icon",24),u["\u0275\u0275text"](2," Something went wrong while loading data. "),u["\u0275\u0275elementStart"](3,"a",25),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().loadChildren()}),u["\u0275\u0275text"](4,"Try again"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}const vt=function(e,t){return{expanded:e,"restrict-hover":t}};let gt=(()=>{class e{constructor(){this.destroyed$=new a.xQ,this.treeViewItemIndex=e=>e}set item(e){e&&(this.cachedTreeViewItem&&this.cachedTreeViewItem.id===e.id&&this.cachedTreeViewItem.childrenCache&&(e.childrenCache=this.cachedTreeViewItem.childrenCache),this.treeViewItem=e,this.cachedTreeViewItem=e,e.childrenCache&&(e.children=e.childrenCache),this.treeViewItem.reloadChildren?this.loadChildren(this.treeViewItem.reloadChildren):e.childrenLoader&&e.expanded&&!e.childrenCache&&this.loadChildren())}toggle(){var e,t,n;(null===(t=null===(e=this.treeViewItem)||void 0===e?void 0:e.children)||void 0===t?void 0:t.length)?this.treeViewItem.expanded=!this.treeViewItem.expanded:!(null===(n=this.treeViewItem)||void 0===n?void 0:n.childrenLoader)||this.treeViewItem.hasLoadingError||this.treeViewItem.isLoading||this.loadChildren()}loadChildren(e=!1){if(this.treeViewItem){if(this.treeViewItem.childrenCache&&!e)return this.treeViewItem.children=this.treeViewItem.childrenCache,void(this.treeViewItem.expanded=!0);this.treeViewItem.isLoading=!0,this.treeViewItem.expanded=!0,this.treeViewItem.hasLoadingError=!1,this.treeViewItem.childrenLoader().pipe((0,c.R)(this.destroyed$)).subscribe({next:e=>{this.treeViewItem.children=[...e],this.treeViewItem.childrenCache=[...e],this.treeViewItem.isLoading=!1,this.treeViewItem.reloadChildren=!1},error:()=>{this.treeViewItem.children=[],this.treeViewItem.hasLoadingError=!0,this.treeViewItem.isLoading=!1},complete:()=>this.treeViewItem.isLoading=!1})}}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-tree-view-item"]],inputs:{item:"item"},decls:12,vars:15,consts:[[1,"tree-view-item"],[1,"tree-view-item-row"],["class","context-menu-btn","nbButton","","size","tiny",3,"nbContextMenu","nbContextMenuPlacement",4,"ngIf"],[1,"tree-view-item-content",3,"ngClass","click"],[3,"visibility","icon",4,"ngIf"],["class","display-icon",3,"visibility","src","alt",4,"ngIf"],[1,"title"],[4,"ngIf"],["class","loading-error",4,"ngIf"],["nbButton","","size","tiny",1,"context-menu-btn",3,"nbContextMenu","nbContextMenuPlacement"],["icon","more-vertical-outline"],[3,"icon"],[1,"display-icon",3,"src","alt"],[4,"ngIf","ngIfElse"],["loading",""],["noChildren",""],[1,"tree-view-child"],[3,"item",4,"ngFor","ngForOf","ngForTrackBy"],[3,"item"],[1,"spinner-container"],[1,"loader"],["class","no-data-message",4,"ngIf"],[1,"no-data-message"],[1,"loading-error"],["icon","alert-triangle-outline"],[3,"click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"li"),u["\u0275\u0275elementStart"](1,"div",0),u["\u0275\u0275elementStart"](2,"div",1),u["\u0275\u0275template"](3,rt,2,2,"button",2),u["\u0275\u0275elementStart"](4,"div",3),u["\u0275\u0275listener"]("click",function(){return t.toggle()}),u["\u0275\u0275template"](5,it,1,3,"nb-icon",4),u["\u0275\u0275template"](6,at,1,3,"nb-icon",4),u["\u0275\u0275template"](7,lt,1,4,"img",5),u["\u0275\u0275elementStart"](8,"span",6),u["\u0275\u0275text"](9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](10,ht,6,2,"ng-container",7),u["\u0275\u0275template"](11,ft,5,0,"div",8),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](2),u["\u0275\u0275styleProp"]("cursor",null!=t.treeViewItem&&null!=t.treeViewItem.children&&t.treeViewItem.children.length||null!=t.treeViewItem&&t.treeViewItem.childrenLoader&&(null==t.treeViewItem||!t.treeViewItem.isLoading)?"pointer":"default"),u["\u0275\u0275classProp"]("has-context-menu",null==t.treeViewItem||null==t.treeViewItem.contextMenuItems?null:t.treeViewItem.contextMenuItems.length),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==t.treeViewItem||null==t.treeViewItem.contextMenuItems?null:t.treeViewItem.contextMenuItems.length),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngClass",u["\u0275\u0275pureFunction2"](12,vt,null==t.treeViewItem?null:t.treeViewItem.expanded,!(null!=t.treeViewItem&&null!=t.treeViewItem.children&&t.treeViewItem.children.length||null!=t.treeViewItem&&t.treeViewItem.childrenLoader))),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!(null!=t.treeViewItem&&t.treeViewItem.childrenLoader)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==t.treeViewItem?null:t.treeViewItem.childrenLoader),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==t.treeViewItem?null:t.treeViewItem.iconPath),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](null==t.treeViewItem?null:t.treeViewItem.title),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",((null==t.treeViewItem||null==t.treeViewItem.children?null:t.treeViewItem.children.length)||(null==t.treeViewItem?null:t.treeViewItem.childrenLoader))&&(null==t.treeViewItem?null:t.treeViewItem.expanded)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==t.treeViewItem?null:t.treeViewItem.hasLoadingError))},directives:[o.O5,o.mk,r.DPz,r.SrF,r.fMN,o.sg,e],styles:["[_nghost-%COMP%]   .tree-view-child[_ngcontent-%COMP%]{padding:0 0 0 1.5rem}[_nghost-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;justify-content:space-between;border-bottom:.063em solid #e4e9f2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row[_ngcontent-%COMP%]   .context-menu-btn[_ngcontent-%COMP%]{margin-left:1.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row[_ngcontent-%COMP%]   .tree-view-item-content[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0;grid-gap:.5em;gap:.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row[_ngcontent-%COMP%]   .tree-view-item-content[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{color:#8f9bb3}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row[_ngcontent-%COMP%]   .tree-view-item-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:.8125rem;font-weight:600;line-height:1.5rem;padding:.75rem 0}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row[_ngcontent-%COMP%]   .tree-view-item-content[_ngcontent-%COMP%]   .display-icon[_ngcontent-%COMP%]{width:1.5em;height:1.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row[_ngcontent-%COMP%]   .tree-view-item-content.expanded[_ngcontent-%COMP%]{color:#36f}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row[_ngcontent-%COMP%]   .tree-view-item-content[_ngcontent-%COMP%]:hover:not(.restrict-hover){color:#598bff}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item-row.has-context-menu[_ngcontent-%COMP%]{width:100%;justify-content:space-between}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]:last-child{border-bottom:none}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]:hover{border-bottom:.063em solid #e4e9f2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]:hover   .tree-view-item-content[_ngcontent-%COMP%]{color:#598bff}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .loading-error[_ngcontent-%COMP%], [_nghost-%COMP%]   li.spinner-container[_ngcontent-%COMP%]{height:3em}[_nghost-%COMP%]   li.spinner-container[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.8rem;grid-gap:.5em;gap:.5em}[_nghost-%COMP%]   li.spinner-container[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{position:relative;width:1.5em;height:1.5em;border:.125em solid;border-color:#36f #36f transparent;border-radius:50%;-webkit-animation:rotation 1s linear infinite;animation:rotation 1s linear infinite}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .loading-error[_ngcontent-%COMP%]{display:flex;align-items:center;color:var(--red);font-size:.8rem;grid-gap:.5em;gap:.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .loading-error[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;color:initial;text-decoration:underline;cursor:pointer}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.8rem;grid-gap:.5em;gap:.5em;height:3em}@-webkit-keyframes rotation{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes rotation{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}"]}),e})();function yt(e,t){1&e&&u["\u0275\u0275element"](0,"ngx-tree-view-item",2),2&e&&u["\u0275\u0275property"]("item",t.$implicit)}let Ct=(()=>{class e{constructor(t){this.menuService=t,this.destroyed$=new a.xQ,this.treeViewItems=[],this.treeViewItemIndex=e=>e,e.instanceCount=e.instanceCount+1}set items(e){if(!e)throw new Error("TreeView: items are required");this.treeViewItems=e}ngOnInit(){if(this.contextMenuId||(e.missingContextMenuCount=e.missingContextMenuCount+1),e.instanceCount>1&&e.missingContextMenuCount>0)throw new Error("\n          TreeViewComponent: Multiple instances detected, but one or more of them is missing a contextMenuId.\n          Ensure each tree-view instance has a unique contextMenuId.\n        ");this.menuService.onItemClick().pipe((0,C.h)(e=>{var t;return(null===(t=e.item)||void 0===t?void 0:t.contextMenuId)===this.contextMenuId}),(0,c.R)(this.destroyed$)).subscribe(e=>{var t,n,o;return null===(n=(t=e.item).action)||void 0===n?void 0:n.call(t,null===(o=e.item)||void 0===o?void 0:o.data)})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete(),e.instanceCount=e.instanceCount-1,this.contextMenuId||(e.missingContextMenuCount=e.missingContextMenuCount-1)}}return e.instanceCount=0,e.missingContextMenuCount=0,e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](r.kkI))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-tree-view"]],inputs:{items:"items",contextMenuId:"contextMenuId"},decls:2,vars:2,consts:[[1,"tree-view"],[3,"item",4,"ngFor","ngForOf","ngForTrackBy"],[3,"item"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"ul",0),u["\u0275\u0275template"](1,yt,1,1,"ngx-tree-view-item",1),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",t.treeViewItems)("ngForTrackBy",t.treeViewItemIndex))},directives:[o.sg,gt],styles:["[_nghost-%COMP%]   .tree-view[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}"]}),e})();const bt={autoFocus:!0,closeOnEsc:!1,closeOnBackdropClick:!1,hasScroll:!1};let St=(()=>{class e{constructor(e,t,n){this.azureVirtualDesktopService=e,this.dialogService=t,this.toastrService=n,this.destroyed$=new a.xQ,this.CONTEXT_MENU_ID="hostPoolsContextMenuItems",this.treeViewConfig=[],this.hostPoolsAddAction=()=>this.openManageHostPoolDialog(),this.hostPoolsAddSubscriptionAction=e=>this.openManageHostPoolDialog(e.subscriptionName,e.subscriptionId),this.hostPoolOpenPropertiesAction=e=>this.openManageHostPoolDialog(e.SubscriptionName,null,e),this.hostPoolDeleteAction=e=>{e.Properties.ApplicationGroupReferences.length>0?this.showHostPoolApplicationGroupsWarning(e):this.showHostPoolRemoveConfirmationDialog(e)},this.hostPoolAddRemoteAppGroupAction=e=>this.openManageAppGroup(e,S.Vh.RemoteApp),this.remoteAppGroupStartFromMenuAction=e=>this.openManageRemoteApplication(e.appGroup,void 0,e.hostPool,!0),this.remoteAppGroupAddManuallyAction=e=>this.openManageRemoteApplication(e,void 0),this.remoteAppGroupOpenPropertiesAction=e=>{const t=this.avdOverviewData.HostPools.find(t=>t.Properties.ApplicationGroupReferences.some(t=>t.toLowerCase()===e.Id.toLowerCase()));t&&this.openManageAppGroup(t,S.Vh.RemoteApp,e)},this.remoteAppGroupAssignAction=e=>this.openAssignUserToApplicationGroupDialog(e),this.remoteAppGroupDeleteAction=e=>this.showApplicationsGroupRemoveConfirmationDialog(e),this.hostPoolAddDesktopAppGroupAction=e=>this.openManageAppGroup(e,S.Vh.Desktop),this.desktopAppGroupOpenPropertiesAction=e=>{const t=this.avdOverviewData.HostPools.find(t=>t.Properties.ApplicationGroupReferences.some(t=>t.toLowerCase()===e.Id.toLowerCase()));t&&this.openManageAppGroup(t,S.Vh.Desktop,e)},this.desktopAppGroupAssignAction=e=>this.openAssignUserToApplicationGroupDialog(e),this.desktopAppGroupDeleteAction=e=>this.showApplicationsGroupRemoveConfirmationDialog(e),this.remoteApplicationOpenPropertiesAction=e=>this.openManageRemoteApplication(e.appGroup,e.application),this.remoteApplicationDeleteAction=e=>this.showRemoteApplicationRemoveConfirmationDialog(e.appGroup,e.application,e.node)}set overview(e){e&&(this.avdOverviewData=e,this.buildTreeView(e))}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}buildTreeView(e,t){const n=this.treeViewConfig?I.collectExpandedIds(this.treeViewConfig):[],{HostPools:o,AppGroups:r}=e,i=I.hostPoolsTreeViewConfig({hostPoolsAddAction:this.hostPoolsAddAction,hostPoolsAddSubscriptionAction:this.hostPoolsAddSubscriptionAction,hostPoolOpenPropertiesAction:this.hostPoolOpenPropertiesAction,hostPoolDeleteAction:this.hostPoolDeleteAction,hostPoolAddRemoteAppGroupAction:this.hostPoolAddRemoteAppGroupAction,remoteAppGroupStartFromMenuAction:this.remoteAppGroupStartFromMenuAction,remoteAppGroupAddManuallyAction:this.remoteAppGroupAddManuallyAction,remoteAppGroupOpenPropertiesAction:this.remoteAppGroupOpenPropertiesAction,remoteAppGroupAssignAction:this.remoteAppGroupAssignAction,remoteAppGroupDeleteAction:this.remoteAppGroupDeleteAction,hostPoolAddDesktopAppGroupAction:this.hostPoolAddDesktopAppGroupAction,desktopAppGroupOpenPropertiesAction:this.desktopAppGroupOpenPropertiesAction,desktopAppGroupAssignAction:this.desktopAppGroupAssignAction,desktopAppGroupDeleteAction:this.desktopAppGroupDeleteAction,remoteApplicationOpenPropertiesAction:this.remoteApplicationOpenPropertiesAction,remoteApplicationDeleteAction:this.remoteApplicationDeleteAction},e=>this.getRemoteApplicationsBy(e),this.CONTEXT_MENU_ID,t);this.treeViewConfig=function(e,t,n){const o=function(e){return function(e,t){var n;const o=new Map;for(const r of e){const e=t(r),i=null!==(n=o.get(e))&&void 0!==n?n:[];o.set(e,[...i,r])}return Array.from(o.values())}(e.sort((e,t)=>{const n=e.SubscriptionName.localeCompare(t.SubscriptionName);return 0!==n?n:e.Name.localeCompare(t.Name)}),e=>{const t=e.Id.split("/");let n="";if(t.length>=3){const e=t.findIndex(e=>"subscriptions"===e.toLowerCase());e>=0&&t.length>e+1&&(n=t[e+1])}return`${n}|${e.SubscriptionName}`})}(e).map(e=>function(e,t,n){const o=e.map(e=>function(e,t,n){const o=function(e,t,n,o){return e.map(e=>{const r=t.find(t=>t.Id.toLowerCase()===e.toLowerCase());return r?n.appGroupNodeBuilder(r.Name,r,o):null}).filter(Boolean)}(e.Properties.ApplicationGroupReferences,t,n,e),r=n.appGroupsParentNodeBuilder(o,e);return n.hostPoolNodeBuilder(e.Name,[r],e)}(e,t,n)).filter(Boolean);return n.subscriptionNodeBuilder(e[0],o)}(e,t,n));return[n.rootNodeBuilder(o)]}(o,r,i),I.setExpandedByIds(this.treeViewConfig,n)}getRemoteApplicationsBy(e){var t;return this.azureVirtualDesktopService.getRemoteApplications(null===(t=this.selectedViewScene)||void 0===t?void 0:t.Id,e)}openManageHostPoolDialog(e,t,n){var o;const{onClose:r}=this.dialogService.open(L,{context:{tenantViewSceneId:null===(o=this.selectedViewScene)||void 0===o?void 0:o.Id,subscriptionName:e,preselectSubscriptionId:t,hostPoolToUpdate:n},...bt});r.pipe((0,c.R)(this.destroyed$)).subscribe(e=>{if(!e)return;const{HostPools:t}=this.avdOverviewData,n=this.avdOverviewData.HostPools.find(t=>t.Id===e.hostPool.Id);e.hostPool.Properties.ApplicationGroupReferences=n?n.Properties.ApplicationGroupReferences:[],this.avdOverviewData={...this.avdOverviewData,HostPools:[...t.filter(t=>t.Id!==e.hostPool.Id),e.hostPool]},this.buildTreeView(this.avdOverviewData)})}showHostPoolApplicationGroupsWarning(e){const t=this.dialogService.open(M,{context:{headerTitle:"Warning",bodyText:`${e.Name} host pool has application groups assigned to it. Remove them first and try again after`,cancelButtonText:"Close"},...bt});t.onClose.pipe((0,y.q)(1),(0,c.R)(this.destroyed$)).subscribe(e=>{if(!0!==e)return t.close()})}showHostPoolRemoveConfirmationDialog(e){const{onClose:t}=this.dialogService.open(M,{context:{headerTitle:"Warning",bodyText:`You are about to remove ${e.Name} host pool. Are you sure you want to proceed?`,cancelButtonText:"Cancel",confirmButtonText:"Yes, remove it"},...bt}),n=[...this.avdOverviewData.HostPools];t.pipe((0,y.q)(1),(0,C.h)(e=>!0===e),(0,l.b)(()=>{this.avdOverviewData={...this.avdOverviewData,HostPools:[...this.avdOverviewData.HostPools.filter(t=>t.Id!==e.Id)]},this.buildTreeView(this.avdOverviewData)}),(0,s.w)(()=>{var t;return this.azureVirtualDesktopService.deleteAvdResourceEntity(null===(t=this.selectedViewScene)||void 0===t?void 0:t.Id,e.Id)}),(0,c.R)(this.destroyed$)).subscribe({next:()=>this.toastrService.success("Host pool removed successfully","Success"),error:e=>{this.avdOverviewData={...this.avdOverviewData,HostPools:n},this.buildTreeView(this.avdOverviewData),this.toastrService.danger(V(e.error).message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"})}})}openManageAppGroup(e,t=S.Vh.RemoteApp,n){var o;const{onClose:r}=this.dialogService.open(ye,{context:{tenantViewSceneId:null===(o=this.selectedViewScene)||void 0===o?void 0:o.Id,hostPool:e,appGroupType:t,appGroupToUpdate:n},...bt});r.pipe((0,c.R)(this.destroyed$)).subscribe(t=>{if(!t)return;const{HostPools:o,AppGroups:r}=this.avdOverviewData;if(!t.update)return e.Properties.ApplicationGroupReferences=[...e.Properties.ApplicationGroupReferences,t.appGroup.Id],this.avdOverviewData={...this.avdOverviewData,HostPools:[...o.filter(t=>t.Id!==e.Id),e],AppGroups:[...r,t.appGroup]},this.buildTreeView(this.avdOverviewData),void I.buildWorkspaceTreeView$.next(this.avdOverviewData);if(t.update){const i=o.find(e=>e.Properties.ApplicationGroupReferences.some(e=>e.toLowerCase()===n.Id.toLowerCase())),a=i.Properties.ApplicationGroupReferences.findIndex(e=>e.toLowerCase()===n.Id.toLowerCase());if(-1!==a)return i.Properties.ApplicationGroupReferences[a]=t.appGroup.Id,this.avdOverviewData={...this.avdOverviewData,HostPools:[...o.filter(t=>t.Id!==e.Id),i],AppGroups:[...r.filter(e=>e.Id!==n.Id),t.appGroup]},void this.buildTreeView(this.avdOverviewData)}})}showApplicationsGroupRemoveConfirmationDialog(e){const{onClose:t}=this.dialogService.open(M,{context:{headerTitle:"Warning",bodyText:`You are about to remove ${e.Name} applications group. Are you sure you want to proceed?`,cancelButtonText:"Cancel",confirmButtonText:"Yes, remove it"},...bt}),n=[...this.avdOverviewData.AppGroups],o=this.avdOverviewData.HostPools.map(e=>({...e,Properties:{...e.Properties,ApplicationGroupReferences:[...e.Properties.ApplicationGroupReferences]}}));t.pipe((0,y.q)(1),(0,C.h)(e=>!0===e),(0,l.b)(()=>{const t=this.avdOverviewData.HostPools.map(t=>(t.Properties.ApplicationGroupReferences=[...t.Properties.ApplicationGroupReferences.filter(t=>t.toLowerCase()!==e.Id.toLowerCase())],t));this.avdOverviewData={...this.avdOverviewData,HostPools:[...t],AppGroups:[...this.avdOverviewData.AppGroups.filter(t=>t.Id!==e.Id)]},this.buildTreeView(this.avdOverviewData),I.buildWorkspaceTreeView$.next(this.avdOverviewData)}),(0,s.w)(()=>{var t;return this.azureVirtualDesktopService.deleteAvdResourceEntity(null===(t=this.selectedViewScene)||void 0===t?void 0:t.Id,e.Id)}),(0,c.R)(this.destroyed$)).subscribe({next:()=>this.toastrService.success("Applications group removed successfully","Success"),error:e=>{this.avdOverviewData={...this.avdOverviewData,AppGroups:n,HostPools:o},this.buildTreeView(this.avdOverviewData),this.toastrService.danger(V(e.error).message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"})}})}openAssignUserToApplicationGroupDialog(e){var t;this.dialogService.open(X,{context:{tenantViewSceneId:null===(t=this.selectedViewScene)||void 0===t?void 0:t.Id,appGroupId:e.Id},...bt})}openManageRemoteApplication(e,t,n,o=!1){var r;const{onClose:i}=this.dialogService.open(ot,{context:{tenantViewSceneId:null===(r=this.selectedViewScene)||void 0===r?void 0:r.Id,appGroup:e,applicationToUpdate:t,withStartMenuItems:o,hostPool:n},...bt});i.pipe((0,c.R)(this.destroyed$)).subscribe(t=>{t&&this.buildTreeView(this.avdOverviewData,`${x.AppGroupNodeId}${e.Id}`)})}showRemoteApplicationRemoveConfirmationDialog(e,t,n){const{onClose:o}=this.dialogService.open(M,{context:{headerTitle:"Warning",bodyText:`You are about to remove ${w(t.Name)} applications. Are you sure you want to proceed?`,cancelButtonText:"Cancel",confirmButtonText:"Yes, remove it"},...bt}),r={...n};o.pipe((0,y.q)(1),(0,C.h)(e=>!0===e),(0,s.w)(()=>{var o;return n.children=[...n.children.filter(e=>e.id!==`${x.RemoteAppNodeId}${t.Id}`)],this.azureVirtualDesktopService.deleteRemoteApplication(null===(o=this.selectedViewScene)||void 0===o?void 0:o.Id,e.Id,w(t.Name))}),(0,c.R)(this.destroyed$)).subscribe({next:()=>{this.buildTreeView(this.avdOverviewData,`${x.AppGroupNodeId}${e.Id}`),this.toastrService.success("Applications group removed successfully","Success")},error:e=>{n.children=[...r.children],this.toastrService.danger(V(e.error).message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"})}})}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](v),u["\u0275\u0275directiveInject"](r.Gln),u["\u0275\u0275directiveInject"](r.quB))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-host-pools-tree-view"]],inputs:{overview:"overview",selectedViewScene:"selectedViewScene"},decls:3,vars:2,consts:[[3,"items","contextMenuId"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"nb-card"),u["\u0275\u0275elementStart"](1,"nb-card-body"),u["\u0275\u0275element"](2,"ngx-tree-view",0),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("items",t.treeViewConfig)("contextMenuId",t.CONTEXT_MENU_ID))},directives:[r.Asz,r.yKW,Ct],styles:[""]}),e})();function wt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",20),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.Name," ")}}function xt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-select",18),u["\u0275\u0275template"](1,wt,2,2,"nb-option",19),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",null==e.avdResourcesData?null:e.avdResourcesData.Subscriptions)("ngForTrackBy",e.trackByFn)}}function It(e,t){if(1&e&&u["\u0275\u0275element"](0,"input",21),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("value",null==e.form.controls||null==e.form.controls.subscription||null==e.form.controls.subscription.value?null:e.form.controls.subscription.value.Name)}}function Pt(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",22),u["\u0275\u0275text"](2,"This field is required"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function Et(e,t){1&e&&u["\u0275\u0275element"](0,"input",23)}function kt(e,t){if(1&e&&u["\u0275\u0275element"](0,"input",24),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("value",null==e.form.controls||null==e.form.controls.workSpaceName?null:e.form.controls.workSpaceName.value)}}function At(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",22),u["\u0275\u0275text"](2,"This field is required"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function Tt(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",22),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" Max name length is ",null==e.form.controls.workSpaceName||null==e.form.controls.workSpaceName.errors?null:e.form.controls.workSpaceName.errors.maxlength.requiredLength," characters. Actual is ",null==e.form.controls.workSpaceName||null==e.form.controls.workSpaceName.errors?null:e.form.controls.workSpaceName.errors.maxlength.actualLength," ")}}function Nt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",20),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.Name," ")}}function Ot(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-select",25),u["\u0275\u0275template"](1,Nt,2,2,"nb-option",19),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",null==e.avdResourcesData?null:e.avdResourcesData.Locations)("ngForTrackBy",e.trackByFn)}}function Mt(e,t){if(1&e&&u["\u0275\u0275element"](0,"input",26),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("value",null==e.form.controls||null==e.form.controls.location||null==e.form.controls.location.value?null:e.form.controls.location.value.Name)}}function Vt(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",22),u["\u0275\u0275text"](2,"This field is required"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function _t(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",22),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" Max name length is ",null==e.form.controls.friendlyName.errors?null:e.form.controls.friendlyName.errors.maxlength.requiredLength," characters. Actual is ",null==e.form.controls.friendlyName.errors?null:e.form.controls.friendlyName.errors.maxlength.actualLength," ")}}function Ft(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",22),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" Max description length is ",null==e.form.controls.description||null==e.form.controls.description.errors?null:e.form.controls.description.errors.maxlength.requiredLength," characters. Actual is ",null==e.form.controls.description||null==e.form.controls.description.errors?null:e.form.controls.description.errors.maxlength.actualLength," ")}}function Rt(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"label",27),u["\u0275\u0275text"](3,"Friendly name"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"div",6),u["\u0275\u0275element"](5,"input",28),u["\u0275\u0275template"](6,_t,3,2,"ng-container",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",1),u["\u0275\u0275elementStart"](8,"label",29),u["\u0275\u0275text"](9,"Description"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"div",6),u["\u0275\u0275element"](11,"textarea",30),u["\u0275\u0275template"](12,Ft,3,2,"ng-container",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",null==e.form.controls.friendlyName.errors?null:e.form.controls.friendlyName.errors.maxlength),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",(null==e.form.controls.description||null==e.form.controls.description.errors?null:e.form.controls.description.errors.maxlength)&&e.form.controls.description.touched)}}let Dt=(()=>{class e{constructor(){this.formControlsInitialized=new u.EventEmitter,this.trackByFn=e=>e}ngOnInit(){this.addControls()}getFormSubscriptionItem(){var e,t;if(this.preselectSubscriptionId){const t=Y(this.preselectSubscriptionId);if(t)return null===(e=this.avdResourcesData)||void 0===e?void 0:e.Subscriptions.find(e=>{const n=Y(e.Id);return(null==n?void 0:n.toLowerCase())===t.toLowerCase()})}if(this.workSpaceToUpdate)return null===(t=this.avdResourcesData)||void 0===t?void 0:t.Subscriptions.find(e=>this.workSpaceToUpdate.Id.toLowerCase().includes(e.Id.toLowerCase()))}getFormLocationItem(){var e;return null===(e=this.avdResourcesData)||void 0===e?void 0:e.Locations.find(e=>e.Id===this.workSpaceToUpdate.Location)}getFormLogAnalyticWorkspaceItem(){var e,t;return this.workSpaceToUpdate.LogAnalyticsId&&""!==this.workSpaceToUpdate.LogAnalyticsId?null!==(t=null===(e=this.avdResourcesData)||void 0===e?void 0:e.LogAnalyticsWorkspaces.find(e=>e.Id===this.workSpaceToUpdate.LogAnalyticsId))&&void 0!==t?t:"null":""===this.workSpaceToUpdate.LogAnalyticsId?"":null===this.workSpaceToUpdate.LogAnalyticsId?"null":void 0}addControls(){var e,t,n,o,r,i,a;this.form.addControl("subscription",new P.NI(null!==(e=this.getFormSubscriptionItem())&&void 0!==e?e:null,[P.kI.required]),{emitEvent:!1}),this.form.addControl("workSpaceName",new P.NI(this.workSpaceToUpdate?this.workSpaceToUpdate.Name:"",[P.kI.required,P.kI.maxLength(64)]),{emitEvent:!1}),this.form.addControl("location",new P.NI(this.workSpaceToUpdate?this.getFormLocationItem():null,[P.kI.required]),{emitEvent:!1}),this.form.addControl("logAnalyticWorkspace",new P.NI(this.workSpaceToUpdate?this.getFormLogAnalyticWorkspaceItem():null),{emitEvent:!1}),this.form.addControl("friendlyName",new P.NI(null!==(o=null===(n=null===(t=this.workSpaceToUpdate)||void 0===t?void 0:t.Properties)||void 0===n?void 0:n.FriendlyName)&&void 0!==o?o:"",[P.kI.maxLength(64)]),{emitEvent:!1}),this.form.addControl("description",new P.NI(null!==(a=null===(i=null===(r=this.workSpaceToUpdate)||void 0===r?void 0:r.Properties)||void 0===i?void 0:i.Description)&&void 0!==a?a:"",[P.kI.maxLength(512)]),{emitEvent:!1}),this.formControlsInitialized.emit(this.form.getRawValue())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-workspace-configuration-tab"]],inputs:{form:"form",avdResourcesData:"avdResourcesData",workSpaceToUpdate:"workSpaceToUpdate",preselectSubscriptionId:"preselectSubscriptionId"},outputs:{formControlsInitialized:"formControlsInitialized"},decls:40,vars:12,consts:[[3,"formGroup"],[1,"form-group","row"],[1,"col-md-3","d-flex","justify-content-between","align-items-center"],["for","subscription",1,"label"],[1,"asterisk"],["icon","info-outline","nbTooltip","All charges for resources in an Azure subscription are billed as one."],[1,"col-md-9"],["id","subscription","fullWidth","","formControlName","subscription",4,"ngIf","ngIfElse"],["readOnlySubscription",""],[4,"ngIf"],["for","name",1,"label","col-md-3","d-flex","align-items-center"],["id","name","type","text","nbInput","","fullWidth","","formControlName","workSpaceName",4,"ngIf","ngIfElse"],["readOnlyWorkSpaceName",""],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],["for","location",1,"label"],["icon","info-outline","nbTooltip","Choose the region to create the Azure Virtual Desktop object. Its metadata is saved in the geography linked to that region."],["id","location","fullWidth","","formControlName","location",4,"ngIf","ngIfElse"],["readOnlyLocation",""],["id","subscription","fullWidth","","formControlName","subscription"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],["id","subscription","type","text","nbInput","","fullWidth","","disabled","",3,"value"],[1,"form-control-error"],["id","name","type","text","nbInput","","fullWidth","","formControlName","workSpaceName"],["id","name","type","text","nbInput","","fullWidth","","disabled","",3,"value"],["id","location","fullWidth","","formControlName","location"],["id","location","type","text","nbInput","","fullWidth","","disabled","",3,"value"],["for","friendly_name",1,"label","col-md-3"],["id","friendly_name","type","text","nbInput","","fullWidth","","formControlName","friendlyName"],["for","description",1,"label","col-md-3"],["id","description","nbInput","","fullWidth","","formControlName","description"]],template:function(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0,0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"div",2),u["\u0275\u0275elementStart"](3,"label",3),u["\u0275\u0275elementStart"](4,"span",4),u["\u0275\u0275text"](5,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"span"),u["\u0275\u0275text"](7,"Subscription / Resource Group"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](8,"nb-icon",5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"div",6),u["\u0275\u0275template"](10,xt,2,2,"nb-select",7),u["\u0275\u0275template"](11,It,1,1,"ng-template",null,8,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](13,Pt,3,0,"ng-container",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"div",1),u["\u0275\u0275elementStart"](15,"label",10),u["\u0275\u0275elementStart"](16,"span",4),u["\u0275\u0275text"](17,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](18,"span"),u["\u0275\u0275text"](19,"Workspace name"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"div",6),u["\u0275\u0275template"](21,Et,1,0,"input",11),u["\u0275\u0275template"](22,kt,1,1,"ng-template",null,12,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](24,At,3,0,"ng-container",9),u["\u0275\u0275template"](25,Tt,3,2,"ng-container",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](26,"div",1),u["\u0275\u0275elementStart"](27,"div",13),u["\u0275\u0275elementStart"](28,"label",14),u["\u0275\u0275elementStart"](29,"span",4),u["\u0275\u0275text"](30,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](31,"span"),u["\u0275\u0275text"](32,"Location"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](33,"nb-icon",15),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](34,"div",6),u["\u0275\u0275template"](35,Ot,2,2,"nb-select",16),u["\u0275\u0275template"](36,Mt,1,1,"ng-template",null,17,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](38,Vt,3,0,"ng-container",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](39,Rt,13,2,"ng-container",9),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275reference"](12),n=u["\u0275\u0275reference"](23),o=u["\u0275\u0275reference"](37);u["\u0275\u0275property"]("formGroup",t.form),u["\u0275\u0275advance"](10),u["\u0275\u0275property"]("ngIf",!t.workSpaceToUpdate)("ngIfElse",e),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",(null==t.form.controls.subscription.errors?null:t.form.controls.subscription.errors.required)&&t.form.controls.subscription.touched),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngIf",!t.workSpaceToUpdate)("ngIfElse",n),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",(null==t.form.controls.workSpaceName.errors?null:t.form.controls.workSpaceName.errors.required)&&t.form.controls.workSpaceName.touched),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==t.form.controls.workSpaceName.errors?null:t.form.controls.workSpaceName.errors.maxlength),u["\u0275\u0275advance"](10),u["\u0275\u0275property"]("ngIf",!t.workSpaceToUpdate)("ngIfElse",o),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",(null==t.form.controls.location.errors?null:t.form.controls.location.errors.required)&&t.form.controls.location.touched),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.workSpaceToUpdate)}},directives:[P.JL,P.sg,r.fMN,r.jNv,o.O5,r.rs,P.JJ,P.u,o.sg,r.q51,r.h8i,P.Fj],styles:["[_nghost-%COMP%]   .asterisk[_ngcontent-%COMP%]{color:var(--danger);margin-right:.5em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}"]}),e})();function Gt(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",13),u["\u0275\u0275text"](2,"This field is required"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function Ut(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",13),u["\u0275\u0275text"](2,"This field is required"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function Lt(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"tr"),u["\u0275\u0275elementStart"](1,"td",6),u["\u0275\u0275element"](2,"input",9),u["\u0275\u0275template"](3,Gt,3,0,"ng-container",10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"td",6),u["\u0275\u0275element"](5,"input",9),u["\u0275\u0275template"](6,Ut,3,0,"ng-container",10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"td",7),u["\u0275\u0275elementStart"](8,"button",11),u["\u0275\u0275listener"]("click",function(){const t=u["\u0275\u0275restoreView"](e).index;return u["\u0275\u0275nextContext"](2).remove(t)}),u["\u0275\u0275element"](9,"nb-icon",12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=u["\u0275\u0275nextContext"](2);let r,i;u["\u0275\u0275advance"](2),u["\u0275\u0275propertyInterpolate1"]("id","tag_key_",n,""),u["\u0275\u0275property"]("formControl",o.form.controls[n].get("key")),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==(r=e.get("key"))||null==r.errors?null:r.errors.required),u["\u0275\u0275advance"](2),u["\u0275\u0275propertyInterpolate1"]("id","tag_value_",n,""),u["\u0275\u0275property"]("formControl",o.form.controls[n].get("value")),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==(i=e.get("value"))||null==i.errors?null:i.errors.required)}}function $t(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"form",3),u["\u0275\u0275elementStart"](1,"div",4),u["\u0275\u0275elementStart"](2,"table",5),u["\u0275\u0275elementStart"](3,"thead"),u["\u0275\u0275elementStart"](4,"tr"),u["\u0275\u0275elementStart"](5,"th",6),u["\u0275\u0275text"](6,"Key"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"th",6),u["\u0275\u0275text"](8,"Value"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"th",7),u["\u0275\u0275text"](10,"Remove"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"tbody"),u["\u0275\u0275template"](12,Lt,10,6,"tr",8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("formGroup",e.form),u["\u0275\u0275advance"](12),u["\u0275\u0275property"]("ngForOf",e.form.controls)("ngForTrackBy",e.trackByIndex)}}let zt=(()=>{class e{constructor(){this.formControlsInitialized=new u.EventEmitter,this.trackByIndex=e=>e}ngOnInit(){this.tagsToUpdate?this.populateFormArray(this.tagsToUpdate):this.formControlsInitialized.emit(this.form.getRawValue())}add(){this.form.push(new P.cw({key:new P.NI("",[P.kI.required]),value:new P.NI("",[P.kI.required])}))}remove(e){this.form.removeAt(e)}populateFormArray(e){this.form.clear(),Object.entries(e).forEach(([e,t])=>{this.form.push(new P.cw({key:new P.NI(e),value:new P.NI(t)}),{emitEvent:!1})}),this.formControlsInitialized.emit(this.form.getRawValue())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-tags-tab"]],inputs:{form:"form",tagsToUpdate:"tagsToUpdate"},outputs:{formControlsInitialized:"formControlsInitialized"},decls:4,vars:2,consts:[["class","row",3,"formGroup",4,"ngIf"],["type","button","nbButton","",3,"disabled","click"],["icon","plus-square"],[1,"row",3,"formGroup"],[1,"col-md-12"],[1,"table","table-bordered","table-striped"],[1,"w-50"],[1,"w-25"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","text","nbInput","","fullWidth","",3,"id","formControl"],[4,"ngIf"],["type","button","nbButton","","nbTooltip","Remove",3,"click"],["icon","close-square"],[1,"form-control-error"]],template:function(e,t){1&e&&(u["\u0275\u0275template"](0,$t,13,3,"form",0),u["\u0275\u0275elementStart"](1,"button",1),u["\u0275\u0275listener"]("click",function(){return t.add()}),u["\u0275\u0275element"](2,"nb-icon",2),u["\u0275\u0275text"](3," Add\n"),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275property"]("ngIf",t.form),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("disabled",t.form.invalid))},directives:[o.O5,r.DPz,r.fMN,P._Y,P.JL,P.sg,o.sg,r.h8i,P.Fj,P.JJ,P.oH,r.jNv],styles:["[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}"]}),e})();function Bt(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" Update: ",null==e.workSpaceToUpdate?null:e.workSpaceToUpdate.Name," workspace ")}}function Wt(e,t){1&e&&u["\u0275\u0275text"](0,"Add new workspace")}function jt(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"nb-tabset",7),u["\u0275\u0275elementStart"](1,"nb-tab",8,9),u["\u0275\u0275elementStart"](3,"ngx-workspace-configuration-tab",10),u["\u0275\u0275listener"]("formControlsInitialized",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().childFormControlsInitialized(t,"configuration")}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"nb-tab",11,12),u["\u0275\u0275elementStart"](6,"ngx-tags-tab",13),u["\u0275\u0275listener"]("formControlsInitialized",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().childFormControlsInitialized(t,"tags")}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf,n=u["\u0275\u0275reference"](2),o=u["\u0275\u0275reference"](5),r=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("formGroup",r.form),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("badgeDot",!n.active&&(null==r.form.controls||null==r.form.controls.configuration?null:r.form.controls.configuration.invalid)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("form",r.form.controls.configuration)("avdResourcesData",e[0])("workSpaceToUpdate",r.workSpaceToUpdate)("preselectSubscriptionId",r.preselectSubscriptionId),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("badgeDot",!o.active&&(null==r.form.controls||null==r.form.controls.tags?null:r.form.controls.tags.invalid)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("form",r.form.controls.tags)("tagsToUpdate",null==r.workSpaceToUpdate?null:r.workSpaceToUpdate.Tags)}}let qt=(()=>{class e{constructor(e,t,n,o){this.dialogService=e,this.dialogRef=t,this.azureVirtualDesktopService=n,this.toastrService=o,this.destroyed$=new a.xQ,this.internalLoadedSubscriptionsList=[],this.workSpaceModel=new S.B5,this.form=new P.cw({configuration:new P.cw({}),tags:new P.Oe([])}),this.hasFormChanges=!1,this.isSaving=!1}ngOnInit(){this.avdResourcesData$=this.tenantViewSceneId&&!this.workSpaceToUpdate?this.initCreateWorkSpaceMode():this.initUpdateWorkSpacePoolMode(),this.initFormValueChangesHandler()}close(){if(!this.hasFormChanges)return void this.dialogRef.close();const{onClose:e}=this.dialogService.open(M,{context:{headerTitle:"Warning",bodyText:"You are about to exit without saving your changes. Are you sure you want to leave?",cancelButtonText:"Close without saving",confirmButtonText:"Stay"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1});e.pipe((0,c.R)(this.destroyed$)).subscribe(e=>{!0!==e&&this.dialogRef.close()})}save(){var e,t;this.isSaving=!0;const{configuration:n,tags:o}=this.form.getRawValue(),r=n.subscription.Id,i=this.internalLoadedSubscriptionsList.find(e=>r.toLowerCase().includes(e.id.toLowerCase()));this.workSpaceModel={...this.workSpaceModel,Id:`${r}/providers/Microsoft.DesktopVirtualization/workspaces/${n.workSpaceName}`,SubscriptionName:this.subscriptionName?this.subscriptionName:`${null==i?void 0:i.displayName}`,Name:n.workSpaceName,Location:n.location.Id,LogAnalyticsId:_(n.logAnalyticWorkspace),LogAnalyticsName:null!==(t=null===(e=n.logAnalyticWorkspace)||void 0===e?void 0:e.Name)&&void 0!==t?t:"",Properties:{...this.workSpaceModel.Properties,FriendlyName:n.friendlyName,Description:n.description,ApplicationGroupReferences:[]},Tags:{...this.workSpaceModel.Tags,...o.reduce((e,t)=>({[t.key]:t.value,...e}),{})}},this.handleSaving(this.workSpaceModel)}childFormControlsInitialized(e,t){this.initialFormValues={...this.initialFormValues,[t]:e}}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}initCreateWorkSpaceMode(){return(0,E.aj)([this.azureVirtualDesktopService.getAvdResourcesForCreation(this.tenantViewSceneId),this.azureVirtualDesktopService.getAvdSubscriptions(this.tenantViewSceneId)]).pipe((0,b.U)(([e,t])=>(this.internalLoadedSubscriptionsList=[...t],[e])))}initUpdateWorkSpacePoolMode(){return(0,E.aj)([this.azureVirtualDesktopService.getAvdResourcesForCreation(this.tenantViewSceneId),this.azureVirtualDesktopService.getAvdResourceFor(this.tenantViewSceneId,this.workSpaceToUpdate.Id),this.azureVirtualDesktopService.getAvdSubscriptions(this.tenantViewSceneId)]).pipe((0,b.U)(([e,t,n])=>(this.workSpaceToUpdate={...t},this.internalLoadedSubscriptionsList=[...n],[e,t])))}handleSaving(e){this.azureVirtualDesktopService.manageAvdResourceEntity(this.tenantViewSceneId,e).pipe((0,c.R)(this.destroyed$)).subscribe({next:t=>{200===t.status&&(this.isSaving=!1,this.dialogRef.close({workspace:e}),this.toastrService.success(this.workSpaceToUpdate?"Workspace updated successfully":"Workspace created successfully","Success"))},error:e=>{this.isSaving=!1,this.toastrService.danger(V(e.error).message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"})}})}initFormValueChangesHandler(){this.form.valueChanges.pipe((0,c.R)(this.destroyed$)).subscribe(e=>this.hasFormChanges=k(this.initialFormValues,e).hasDifference)}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](r.Gln),u["\u0275\u0275directiveInject"](r.X4l),u["\u0275\u0275directiveInject"](v),u["\u0275\u0275directiveInject"](r.quB))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-manage-workspace-dialog"]],inputs:{tenantViewSceneId:"tenantViewSceneId",subscriptionName:"subscriptionName",preselectSubscriptionId:"preselectSubscriptionId",workSpaceToUpdate:"workSpaceToUpdate"},decls:14,vars:11,consts:[[3,"nbSpinner","nbSpinnerMessage"],[4,"ngIf","ngIfElse"],["addWorkspaceTitle",""],[3,"formGroup",4,"ngIf"],[1,"d-flex","justify-content-between"],["nbButton","",3,"click"],["nbButton","",3,"disabled","click"],[3,"formGroup"],["tabTitle","Configuration","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["configurationTab",""],[3,"form","avdResourcesData","workSpaceToUpdate","preselectSubscriptionId","formControlsInitialized"],["tabTitle","Tags","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["tagsTab",""],[3,"form","tagsToUpdate","formControlsInitialized"]],template:function(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-card",0),u["\u0275\u0275pipe"](1,"async"),u["\u0275\u0275elementStart"](2,"nb-card-header"),u["\u0275\u0275template"](3,Bt,2,1,"ng-container",1),u["\u0275\u0275template"](4,Wt,1,0,"ng-template",null,2,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"nb-card-body"),u["\u0275\u0275template"](7,jt,7,9,"nb-tabset",3),u["\u0275\u0275pipe"](8,"async"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"nb-card-footer",4),u["\u0275\u0275elementStart"](10,"button",5),u["\u0275\u0275listener"]("click",function(){return t.close()}),u["\u0275\u0275text"](11,"Close"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"button",6),u["\u0275\u0275listener"]("click",function(){return t.save()}),u["\u0275\u0275text"](13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275reference"](5);u["\u0275\u0275propertyInterpolate"]("nbSpinnerMessage",t.isSaving?t.workSpaceToUpdate?"Updating...":"Saving...":"Loading..."),u["\u0275\u0275property"]("nbSpinner",!u["\u0275\u0275pipeBind1"](1,7,t.avdResourcesData$)||t.isSaving),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",t.workSpaceToUpdate)("ngIfElse",e),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngIf",u["\u0275\u0275pipeBind1"](8,9,t.avdResourcesData$)),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("disabled",t.form.invalid||t.isSaving||!t.hasFormChanges),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",t.workSpaceToUpdate?"Update":"Add"," ")}},directives:[r.Asz,r.Q7R,r.ndF,o.O5,r.yKW,r.XWE,r.DPz,r.kyn,P.JL,P.sg,r.TR4,Dt,zt],pipes:[o.Ov],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:80em;height:60em}"]}),e})();function Ht(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1,"Select"),u["\u0275\u0275elementContainerEnd"]())}function Jt(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1,"Deselect"),u["\u0275\u0275elementContainerEnd"]())}function Qt(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"nb-list-item"),u["\u0275\u0275elementStart"](1,"nb-checkbox",12),u["\u0275\u0275listener"]("checkedChange",function(t){return u["\u0275\u0275restoreView"](e).$implicit.checked=t})("checkedChange",function(t){const n=u["\u0275\u0275restoreView"](e).$implicit;return u["\u0275\u0275nextContext"](2).toggle(n,t)}),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("checked",e.checked),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.appGroup.Name)}}function Kt(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",7),u["\u0275\u0275text"](2,"Select the application groups you want to link to your workspace"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"nb-checkbox",8),u["\u0275\u0275listener"]("checkedChange",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().selectAll(t)}),u["\u0275\u0275template"](4,Ht,2,0,"ng-container",9),u["\u0275\u0275template"](5,Jt,2,0,"ng-container",9),u["\u0275\u0275text"](6," all "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"nb-list",10),u["\u0275\u0275template"](8,Qt,3,2,"nb-list-item",11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("checked",e.areAllChecked)("indeterminate",e.isIntermediateState),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.areAllChecked),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.areAllChecked),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngForOf",e.selectableAppGroups)("ngForTrackBy",e.trackByIndex)}}function Xt(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",13),u["\u0275\u0275elementStart"](1,"span",14),u["\u0275\u0275text"](2,"No available application groups to link"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}let Yt=(()=>{class e{constructor(e,t,n,o){this.azureVirtualDesktopService=e,this.dialogRef=t,this.dialogService=n,this.toastrService=o,this.destroyed$=new a.xQ,this.isSaving=!1,this.areAllChecked=!1,this.isIntermediateState=!1,this.selectableAppGroups=[],this.selectedAppGroupsToLink=[],this.trackByIndex=e=>e}set unlinkedAppGroups(e){e&&(this.selectableAppGroups=e.map(e=>({checked:!1,appGroup:e})))}close(){this.selectedAppGroupsToLink.length?this.showConfirmationDialog():this.dialogRef.close()}selectAll(e){this.selectableAppGroups.forEach(t=>this.toggle(t,e)),this.updateCheckStates()}toggle(e,t){e.checked=t,this.selectedAppGroupsToLink=e.checked?[...this.selectedAppGroupsToLink,e.appGroup]:this.selectedAppGroupsToLink.filter(t=>t.Id!==e.appGroup.Id),this.updateCheckStates()}save(){this.isSaving=!0,this.workspace.Properties.ApplicationGroupReferences=[...this.workspace.Properties.ApplicationGroupReferences,...this.selectedAppGroupsToLink.map(e=>e.Id)],this.azureVirtualDesktopService.manageAvdResourceEntity(this.tenantViewSceneId,this.workspace).pipe((0,c.R)(this.destroyed$)).subscribe({next:e=>{200===e.status&&(this.isSaving=!1,this.dialogRef.close({linkedAppGroupsIds:this.workspace.Properties.ApplicationGroupReferences}),this.toastrService.success("Application groups successfully linked to a workspace.","Success"))},error:e=>{this.isSaving=!1,this.toastrService.danger(V(e.error).message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"})}})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}updateCheckStates(){const e=this.selectableAppGroups.length,t=this.selectableAppGroups.filter(e=>e.checked).length;this.areAllChecked=t===e&&e>0,this.isIntermediateState=t>0&&t<e}showConfirmationDialog(){const{onClose:e}=this.dialogService.open(M,{context:{headerTitle:"Warning",bodyText:"You are about to exit without saving your changes. Are you sure you want to leave?",cancelButtonText:"Close without saving",confirmButtonText:"Stay"},hasScroll:!1,closeOnEsc:!1,closeOnBackdropClick:!1});e.pipe((0,c.R)(this.destroyed$)).subscribe(e=>{!0!==e&&this.dialogRef.close()})}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](v),u["\u0275\u0275directiveInject"](r.X4l),u["\u0275\u0275directiveInject"](r.Gln),u["\u0275\u0275directiveInject"](r.quB))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-link-app-group-to-workspace-dialog"]],inputs:{tenantViewSceneId:"tenantViewSceneId",workspace:"workspace",unlinkedAppGroups:"unlinkedAppGroups"},decls:12,vars:4,consts:[["nbSpinnerMessage","Saving...",3,"nbSpinner"],[1,"d-flex","flex-column","overflow-hidden"],[4,"ngIf","ngIfElse"],["noAvailableAppGroupsToLinkTpl",""],[1,"d-flex","justify-content-between"],["nbButton","",3,"click"],["nbButton","",3,"disabled","click"],[1,"label"],[1,"select-all-checkbox",3,"checked","indeterminate","checkedChange"],[4,"ngIf"],["fullWidth",""],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"checked","checkedChange"],[1,"no-data-container"],[1,"text-muted"]],template:function(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-card",0),u["\u0275\u0275elementStart"](1,"nb-card-header"),u["\u0275\u0275text"](2,"Link app groups to a workspace"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"nb-card-body",1),u["\u0275\u0275template"](4,Kt,9,6,"ng-container",2),u["\u0275\u0275template"](5,Xt,3,0,"ng-template",null,3,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"nb-card-footer",4),u["\u0275\u0275elementStart"](8,"button",5),u["\u0275\u0275listener"]("click",function(){return t.close()}),u["\u0275\u0275text"](9,"Close"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"button",6),u["\u0275\u0275listener"]("click",function(){return t.save()}),u["\u0275\u0275text"](11," Save "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275reference"](6);u["\u0275\u0275property"]("nbSpinner",t.isSaving),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngIf",null==t.selectableAppGroups?null:t.selectableAppGroups.length)("ngIfElse",e),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("disabled",!(null!=t.selectedAppGroupsToLink&&t.selectedAppGroupsToLink.length)||t.isSaving)}},directives:[r.Asz,r.Q7R,r.ndF,r.yKW,o.O5,r.XWE,r.DPz,r.NTf,r.zP_,o.sg,r.qBV],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:45em;height:45em}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:hidden;display:grid;grid-template-rows:10% 90%;grid-gap:1em;gap:1em}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]   .select-all-checkbox[_ngcontent-%COMP%]{padding-left:1rem}[_nghost-%COMP%]   nb-list[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   nb-list[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]:last-of-type{border-bottom:none}[_nghost-%COMP%]   .no-data-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%}"]}),e})();const Zt={autoFocus:!0,closeOnEsc:!1,closeOnBackdropClick:!1,hasScroll:!1};let en=(()=>{class e{constructor(e,t,n){this.azureVirtualDesktopService=e,this.dialogService=t,this.toastrService=n,this.destroyed$=new a.xQ,this.CONTEXT_MENU_ID="workspacesContextMenuItems",this.treeViewConfig=[],this.workspacesAddAction=()=>this.openManageWorkspaceDialog(),this.workspacesSubscriptionAddAction=e=>this.openManageWorkspaceDialog(e.subscriptionName,e.subscriptionId),this.workspaceLinkApplicationGroupAction=e=>this.openLinkAppGroupToWorkspaceDialog(e),this.workspaceEditAction=e=>this.openManageWorkspaceDialog(void 0,null,e),this.workspaceDeleteAction=e=>this.showWorkspaceRemoveConfirmationDialog(e),this.workspaceAppGroupUnlinkAction=e=>{const{onClose:t}=this.dialogService.open(M,{context:{headerTitle:"Warning",bodyText:`You are about to unlink ${e.Name} from a workspace. Are you sure you want to proceed?`,cancelButtonText:"Cancel",confirmButtonText:"Yes, unlink it"},...Zt}),n=[...this.avdOverviewData.WorkSpaces],o=[...this.avdOverviewData.AppGroups],r=this.avdOverviewData.WorkSpaces.find(t=>t.Properties.ApplicationGroupReferences.includes(e.Id));if(!r)return;const i=this.avdOverviewData.WorkSpaces.map(t=>t.Id===r.Id?{...t,Properties:{...t.Properties,ApplicationGroupReferences:t.Properties.ApplicationGroupReferences.filter(t=>t!==e.Id)}}:t),a=this.avdOverviewData.AppGroups.map(t=>t.Id===e.Id?{...t,Properties:{...t.Properties,WorkspaceArmPath:null}}:t);t.pipe((0,y.q)(1),(0,C.h)(e=>!0===e),(0,l.b)(()=>{this.avdOverviewData={...this.avdOverviewData,WorkSpaces:i,AppGroups:a},this.buildTreeView(this.avdOverviewData)}),(0,s.w)(()=>{var t;return this.azureVirtualDesktopService.manageAvdResourceEntity(null===(t=this.selectedViewScene)||void 0===t?void 0:t.Id,{...r,Properties:{...r.Properties,ApplicationGroupReferences:r.Properties.ApplicationGroupReferences.filter(t=>t!==e.Id)}})}),(0,c.R)(this.destroyed$)).subscribe({next:()=>this.toastrService.success("Workspace unlinked successfully","Success"),error:e=>{this.avdOverviewData={...this.avdOverviewData,WorkSpaces:n,AppGroups:o},this.buildTreeView(this.avdOverviewData),this.toastrService.danger(V(e.error).message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"})}})}}set overview(e){e&&(this.avdOverviewData=e,this.buildTreeView(e),I.buildWorkspaceTreeView$.pipe((0,c.R)(this.destroyed$)).subscribe(e=>{this.avdOverviewData=e,this.buildTreeView(this.avdOverviewData)}))}ngOnDestroy(){}buildTreeView(e){const t=this.treeViewConfig?I.collectExpandedIds(this.treeViewConfig):[],{AppGroups:n,WorkSpaces:o}=e,r=I.workspacesTreeViewConfig({workspacesAddAction:this.workspacesAddAction,workspacesSubscriptionAddAction:this.workspacesSubscriptionAddAction,workspaceLinkApplicationGroupAction:this.workspaceLinkApplicationGroupAction,workspaceEditAction:this.workspaceEditAction,workspaceDeleteAction:this.workspaceDeleteAction,workspaceAppGroupUnlinkAction:this.workspaceAppGroupUnlinkAction},this.CONTEXT_MENU_ID);this.treeViewConfig=function(e,t,n){const o=function(e){return function(e,t){var n;const o=new Map;for(const r of e){const e=t(r),i=null!==(n=o.get(e))&&void 0!==n?n:[];o.set(e,[...i,r])}return Array.from(o.values())}(e.sort((e,t)=>{const n=e.SubscriptionName.localeCompare(t.SubscriptionName);return 0!==n?n:e.Name.localeCompare(t.Name)}),e=>{const t=e.Id.split("/");let n="";if(t.length>=3){const e=t.findIndex(e=>"subscriptions"===e.toLowerCase());e>=0&&t.length>e+1&&(n=t[e+1])}return`${n}|${e.SubscriptionName}`})}(e).map(e=>function(e,t,n){const o=e.map(e=>function(e,t,n){const o=function(e,t,n){return e&&0!==e.length?e.map(e=>{const o=t.find(t=>t.Id.toLowerCase()===e.toLowerCase());return o?n.appGroupNodeBuilder(o.Name,o):null}).filter(Boolean):[]}(e.Properties.ApplicationGroupReferences,t,n);return n.workspaceNodeBuilder(e.Name,o,e)}(e,t,n)).filter(Boolean);return n.subscriptionNodeBuilder(e[0],o,e)}(e,t,n));return[n.rootNodeBuilder(o)]}(o,n,r),I.setExpandedByIds(this.treeViewConfig,t)}openManageWorkspaceDialog(e,t,n){var o;const{onClose:r}=this.dialogService.open(qt,{context:{tenantViewSceneId:null===(o=this.selectedViewScene)||void 0===o?void 0:o.Id,subscriptionName:e,preselectSubscriptionId:t,workSpaceToUpdate:n},...Zt});r.pipe((0,c.R)(this.destroyed$)).subscribe(e=>{if(!e)return;const{WorkSpaces:t}=this.avdOverviewData,n=this.avdOverviewData.WorkSpaces.find(t=>t.Id===e.workspace.Id);e.workspace.Properties.ApplicationGroupReferences=n?n.Properties.ApplicationGroupReferences:[],this.avdOverviewData={...this.avdOverviewData,WorkSpaces:[...t.filter(t=>t.Id!==e.workspace.Id),e.workspace]},this.buildTreeView(this.avdOverviewData)})}showWorkspaceRemoveConfirmationDialog(e){const{onClose:t}=this.dialogService.open(M,{context:{headerTitle:"Warning",bodyText:`You are about to remove ${e.Name} workspace. Are you sure you want to proceed?`,cancelButtonText:"Cancel",confirmButtonText:"Yes, remove it"},...Zt}),n=[...this.avdOverviewData.WorkSpaces];t.pipe((0,y.q)(1),(0,C.h)(e=>!0===e),(0,l.b)(()=>{this.avdOverviewData={...this.avdOverviewData,WorkSpaces:[...this.avdOverviewData.WorkSpaces.filter(t=>t.Id!==e.Id)]},this.buildTreeView(this.avdOverviewData)}),(0,s.w)(()=>{var t;return this.azureVirtualDesktopService.deleteAvdResourceEntity(null===(t=this.selectedViewScene)||void 0===t?void 0:t.Id,e.Id)}),(0,c.R)(this.destroyed$)).subscribe({next:()=>this.toastrService.success("Workspace removed successfully","Success"),error:e=>{this.avdOverviewData={...this.avdOverviewData,WorkSpaces:n},this.buildTreeView(this.avdOverviewData),this.toastrService.danger(V(e.error).message,"Error",{duration:8e3,toastClass:"avd-resources-event-error-toast"})}})}openLinkAppGroupToWorkspaceDialog(e){var t;const n=this.avdOverviewData.AppGroups.filter(t=>t.Location===(null==e?void 0:e.Location)&&!t.Properties.WorkspaceArmPath),{onClose:o}=this.dialogService.open(Yt,{context:{tenantViewSceneId:null===(t=this.selectedViewScene)||void 0===t?void 0:t.Id,workspace:e,unlinkedAppGroups:n},...Zt});o.pipe((0,c.R)(this.destroyed$)).subscribe(t=>{t&&(e.Properties.ApplicationGroupReferences=t.linkedAppGroupsIds,this.avdOverviewData.AppGroups=this.avdOverviewData.AppGroups.map(n=>t.linkedAppGroupsIds.includes(n.Id)?{...n,Properties:{...n.Properties,WorkspaceArmPath:e.Id}}:n.Properties.WorkspaceArmPath===e.Id?{...n,Properties:{...n.Properties,WorkspaceArmPath:null}}:n),this.avdOverviewData={...this.avdOverviewData,WorkSpaces:[...this.avdOverviewData.WorkSpaces.filter(t=>t.Id!==e.Id),e]},this.buildTreeView(this.avdOverviewData))})}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](v),u["\u0275\u0275directiveInject"](r.Gln),u["\u0275\u0275directiveInject"](r.quB))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-workspaces-tree-view"]],inputs:{overview:"overview",selectedViewScene:"selectedViewScene"},decls:3,vars:2,consts:[[3,"items","contextMenuId"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"nb-card"),u["\u0275\u0275elementStart"](1,"nb-card-body"),u["\u0275\u0275element"](2,"ngx-tree-view",0),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("items",t.treeViewConfig)("contextMenuId",t.CONTEXT_MENU_ID))},directives:[r.Asz,r.yKW,Ct],styles:[""]}),e})();function tn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",7),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.DisplayName," ")}}function nn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-card"),u["\u0275\u0275element"](1,"nb-card-body",8),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("nbSpinner",e.isOverviewLoading)}}function on(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",9),u["\u0275\u0275element"](2,"ngx-host-pools-tree-view",10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",9),u["\u0275\u0275element"](4,"ngx-workspaces-tree-view",10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("nbSpinner",e.isOverviewLoading)("overview",e.overviewData)("selectedViewScene",e.selectedViewScene),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("nbSpinner",e.isOverviewLoading)("overview",e.overviewData)("selectedViewScene",e.selectedViewScene)}}const rn=[{path:"**",redirectTo:"host-pools",pathMatch:"full"},{path:"",component:(()=>{class e{constructor(e,t){this.viewSceneService=e,this.azureVirtualDesktopService=t,this.destroyed$=new a.xQ,this.viewScenes$=this.viewSceneService.getViewScenes().pipe((0,l.b)(e=>this.selectedViewScene=e[0])),this.isOverviewLoading=!1,this.viewSceneIndex=e=>e}ngOnInit(){this.initOverviewData()}viewSceneChanged(e){this.selectedViewScene=e,this.initOverviewData()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}initOverviewData(){this.isOverviewLoading=!0,this.viewSceneService.getViewScenes().pipe((0,s.w)(e=>{var t,n;return this.azureVirtualDesktopService.getAvdResourceOverview(null!==(n=null===(t=this.selectedViewScene)||void 0===t?void 0:t.Id)&&void 0!==n?n:e[0].Id)}),(0,c.R)(this.destroyed$)).subscribe({next:e=>{this.overviewData=e,this.isOverviewLoading=!1},error:()=>{this.overviewData=g,this.isOverviewLoading=!1}})}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](d.E),u["\u0275\u0275directiveInject"](v))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-virtual-desktop"]],decls:15,vars:10,consts:[[1,"form-group","row"],["for","tenant",1,"label","col-md-2","col-form-label"],[1,"col-md-10"],["id","tenant","fullWidth","","nbSpinnerMessage","Loading...",1,"form-control",3,"selected","nbSpinner","selectedChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["class","form-group row",4,"ngIf"],[3,"value"],["nbSpinnerMessage","Loading...",3,"nbSpinner"],[1,"col-md-6"],[3,"nbSpinner","overview","selectedViewScene"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"nb-card"),u["\u0275\u0275elementStart"](1,"nb-card-header"),u["\u0275\u0275elementStart"](2,"h1"),u["\u0275\u0275text"](3,"Virtual Desktop Infrastructure"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"nb-card-body"),u["\u0275\u0275elementStart"](5,"div",0),u["\u0275\u0275elementStart"](6,"label",1),u["\u0275\u0275text"](7,"Tenant"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"div",2),u["\u0275\u0275elementStart"](9,"nb-select",3),u["\u0275\u0275listener"]("selectedChange",function(e){return t.selectedViewScene=e})("selectedChange",function(e){return t.viewSceneChanged(e)}),u["\u0275\u0275pipe"](10,"async"),u["\u0275\u0275template"](11,tn,2,2,"nb-option",4),u["\u0275\u0275pipe"](12,"async"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](13,nn,2,1,"nb-card",5),u["\u0275\u0275template"](14,on,5,6,"div",6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](9),u["\u0275\u0275property"]("selected",t.selectedViewScene)("nbSpinner",!u["\u0275\u0275pipeBind1"](10,6,t.viewScenes$)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngForOf",u["\u0275\u0275pipeBind1"](12,8,t.viewScenes$))("ngForTrackBy",t.viewSceneIndex),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",!t.overviewData&&t.isOverviewLoading),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.overviewData))},directives:[r.Asz,r.ndF,r.yKW,r.rs,r.Q7R,o.sg,o.O5,r.q51,St,en],pipes:[o.Ov],styles:["[_nghost-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:0;border:0}[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{margin-bottom:0}"]}),e})()}];let an=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[i.Bz.forChild(rn)],i.Bz]}),e})(),ln=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[o.ez,r.KdK,r.T2N,r.HKp]]}),e})();function sn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",29),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.Name," ")}}function cn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-select",31),u["\u0275\u0275template"](1,sn,2,2,"nb-option",30),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",null==e.avdResourcesData?null:e.avdResourcesData.Subscriptions)("ngForTrackBy",e.trackByFn)}}function dn(e,t){if(1&e&&u["\u0275\u0275element"](0,"input",32),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("value",null==e.form.controls||null==e.form.controls.subscription||null==e.form.controls.subscription.value?null:e.form.controls.subscription.value.Name)}}function pn(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",33),u["\u0275\u0275text"](2,"This field is required"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function mn(e,t){1&e&&u["\u0275\u0275element"](0,"input",34)}function un(e,t){if(1&e&&u["\u0275\u0275element"](0,"input",35),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("value",null==e.form.controls||null==e.form.controls.hostPoolName?null:e.form.controls.hostPoolName.value)}}function hn(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",33),u["\u0275\u0275text"](2,"This field is required"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function fn(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",33),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" Max name length is ",null==e.form.controls.hostPoolName||null==e.form.controls.hostPoolName.errors?null:e.form.controls.hostPoolName.errors.maxlength.requiredLength," characters. Actual is ",null==e.form.controls.hostPoolName||null==e.form.controls.hostPoolName.errors?null:e.form.controls.hostPoolName.errors.maxlength.actualLength," ")}}function vn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",29),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.Name," ")}}function gn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-select",36),u["\u0275\u0275template"](1,vn,2,2,"nb-option",30),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",null==e.avdResourcesData?null:e.avdResourcesData.Locations)("ngForTrackBy",e.trackByFn)}}function yn(e,t){if(1&e&&u["\u0275\u0275element"](0,"input",37),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("value",null==e.form.controls||null==e.form.controls.location||null==e.form.controls.location.value?null:e.form.controls.location.value.Name)}}function Cn(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",33),u["\u0275\u0275text"](2,"This field is required"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function bn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",29),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.title," ")}}function Sn(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"nb-select",38),u["\u0275\u0275listener"]("selectedChange",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().hostPoolTypeChanged(t)}),u["\u0275\u0275template"](1,bn,2,2,"nb-option",24),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.hostPoolTypes)}}function wn(e,t){if(1&e&&u["\u0275\u0275element"](0,"input",39),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("value",null==e.form.controls||null==e.form.controls.hostPoolType||null==e.form.controls.hostPoolType.value?null:e.form.controls.hostPoolType.value.title)}}function xn(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",33),u["\u0275\u0275text"](2,"This field is required"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function In(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",29),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.title," ")}}function Pn(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",33),u["\u0275\u0275text"](2,"This field is required"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function En(e,t){1&e&&u["\u0275\u0275elementContainer"](0)}function kn(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,En,1,0,"ng-container",46),u["\u0275\u0275elementContainerEnd"]()),2&e){u["\u0275\u0275nextContext"](2);const e=u["\u0275\u0275reference"](65);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",e)}}function An(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",29),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.title," ")}}function Tn(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",33),u["\u0275\u0275text"](2,"This field is required"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function Nn(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",33),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" Sessions limit value must be in between ",e.MIN_SESSIONS_LIMIT," and ",e.MAX_SESSIONS_LIMIT,"")}}function On(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,kn,2,1,"ng-container",9),u["\u0275\u0275elementStart"](2,"div",1),u["\u0275\u0275elementStart"](3,"div",13),u["\u0275\u0275elementStart"](4,"label",40),u["\u0275\u0275elementStart"](5,"span",4),u["\u0275\u0275text"](6,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"span"),u["\u0275\u0275text"](8,"Load balancing algorithm"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](9,"nb-icon",41),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"div",6),u["\u0275\u0275elementStart"](11,"nb-select",42),u["\u0275\u0275template"](12,An,2,2,"nb-option",24),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](13,Tn,3,0,"ng-container",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"div",1),u["\u0275\u0275elementStart"](15,"div",13),u["\u0275\u0275elementStart"](16,"label",43),u["\u0275\u0275text"](17,"Max sessions limit"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](18,"nb-icon",44),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"div",6),u["\u0275\u0275element"](20,"input",45),u["\u0275\u0275template"](21,Nn,3,2,"ng-container",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.hostPoolToUpdate),u["\u0275\u0275advance"](11),u["\u0275\u0275property"]("ngForOf",e.loadBalancingAlgorithmTypes),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(null==e.form.controls.loadBalancingAlgorithm.errors?null:e.form.controls.loadBalancingAlgorithm.errors.required)&&e.form.controls.loadBalancingAlgorithm.touched),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("min",e.MIN_SESSIONS_LIMIT)("max",e.MAX_SESSIONS_LIMIT),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(null==e.form.controls.maxSessionsLimit||null==e.form.controls.maxSessionsLimit.errors?null:e.form.controls.maxSessionsLimit.errors.required)||(null==e.form.controls.maxSessionsLimit||null==e.form.controls.maxSessionsLimit.errors?null:e.form.controls.maxSessionsLimit.errors.min)||(null==e.form.controls.maxSessionsLimit||null==e.form.controls.maxSessionsLimit.errors?null:e.form.controls.maxSessionsLimit.errors.max)&&e.form.controls.maxSessionsLimit.touched)}}function Mn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",29),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.title," ")}}function Vn(e,t){1&e&&u["\u0275\u0275elementContainer"](0)}function _n(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,Vn,1,0,"ng-container",46),u["\u0275\u0275elementContainerEnd"]()),2&e){u["\u0275\u0275nextContext"](2);const e=u["\u0275\u0275reference"](65);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",e)}}function Fn(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"div",13),u["\u0275\u0275elementStart"](3,"label",47),u["\u0275\u0275text"](4,"Assignment type"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](5,"nb-icon",48),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"div",6),u["\u0275\u0275elementStart"](7,"nb-select",49),u["\u0275\u0275template"](8,Mn,2,2,"nb-option",24),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](9,_n,2,1,"ng-container",9),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngForOf",e.assignmentTypes),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.hostPoolToUpdate)}}function Rn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-radio",29),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e.value),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.title," ")}}function Dn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-radio",29),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e.value),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.title," ")}}function Gn(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",33),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" Max name length is ",null==e.form.controls.friendlyName.errors?null:e.form.controls.friendlyName.errors.maxlength.requiredLength," characters. Actual is ",null==e.form.controls.friendlyName.errors?null:e.form.controls.friendlyName.errors.maxlength.actualLength," ")}}function Un(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",33),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" Max description length is ",null==e.form.controls.description||null==e.form.controls.description.errors?null:e.form.controls.description.errors.maxlength.requiredLength," characters. Actual is ",null==e.form.controls.description||null==e.form.controls.description.errors?null:e.form.controls.description.errors.maxlength.actualLength," ")}}function Ln(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",1),u["\u0275\u0275elementStart"](1,"div",13),u["\u0275\u0275elementStart"](2,"label",50),u["\u0275\u0275text"](3,"Start VM on connect"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](4,"nb-icon",51),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",6),u["\u0275\u0275elementStart"](6,"nb-radio-group",52),u["\u0275\u0275template"](7,Rn,2,2,"nb-radio",24),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"div",1),u["\u0275\u0275elementStart"](9,"div",13),u["\u0275\u0275elementStart"](10,"label",53),u["\u0275\u0275text"](11," Validation environment "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](12,"nb-icon",54),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"div",6),u["\u0275\u0275elementStart"](14,"nb-radio-group",55),u["\u0275\u0275template"](15,Dn,2,2,"nb-radio",24),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](16,"div",1),u["\u0275\u0275elementStart"](17,"label",56),u["\u0275\u0275text"](18,"Friendly name"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"div",6),u["\u0275\u0275element"](20,"input",57),u["\u0275\u0275template"](21,Gn,3,2,"ng-container",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](22,"div",1),u["\u0275\u0275elementStart"](23,"label",58),u["\u0275\u0275text"](24,"Description"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"div",6),u["\u0275\u0275element"](26,"textarea",59),u["\u0275\u0275template"](27,Un,3,2,"ng-container",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("ngForOf",e.startVmOnConnectTypes),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngForOf",e.validationEnvironmentTypes),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",null==e.form.controls.friendlyName.errors?null:e.form.controls.friendlyName.errors.maxlength),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",(null==e.form.controls.description||null==e.form.controls.description.errors?null:e.form.controls.description.errors.maxlength)&&e.form.controls.description.touched)}}function $n(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",29),u["\u0275\u0275text"](1,"Unchanged"),u["\u0275\u0275elementEnd"]()),2&e&&u["\u0275\u0275property"]("value","null")}function zn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",29),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.Name," ")}}let Bn=(()=>{class e{constructor(){this.formControlsInitialized=new u.EventEmitter,this.HostPoolTypeClass=S.Bs,this.MAX_SESSIONS_LIMIT=999999,this.MIN_SESSIONS_LIMIT=1,this.preferredAppGroups=[{title:"Desktop",value:S.s2.Desktop},{title:"Remote Apps",value:S.s2.RailApplications}],this.hostPoolTypes=[{title:"Personal",value:S.Bs.Personal},{title:"Pooled",value:S.Bs.Pooled}],this.startVmOnConnectTypes=[{title:"No",value:!1},{title:"Yes",value:!0}],this.validationEnvironmentTypes=[{title:"No",value:!1},{title:"Yes",value:!0}],this.loadBalancingAlgorithmTypes=[{title:"Breadth-first",value:S.rQ.BreadthFirst},{title:"Depth-first",value:S.rQ.DepthFirst}],this.assignmentTypes=[{title:"Automatic",value:S.s0.Automatic},{title:"Direct",value:S.s0.Direct}],this.trackByFn=e=>e}ngOnInit(){this.addControls(),this.hostPoolToUpdate&&this.hostPoolToUpdate.Properties.PreferredAppGroupType===S.s2.None&&(this.preferredAppGroups=[{title:"None",value:S.s2.None},...this.preferredAppGroups])}hostPoolTypeChanged(e){var t;this.selectedHostPoolType=e,(null===(t=this.selectedHostPoolType)||void 0===t?void 0:t.value)===S.Bs.Pooled?this.form.addControl("loadBalancingAlgorithm",new P.NI(null,[P.kI.required]),{emitEvent:!1}):this.form.removeControl("loadBalancingAlgorithm",{emitEvent:!1})}getFormSubscriptionItem(){var e,t;if(this.preselectSubscriptionId){const t=Y(this.preselectSubscriptionId);if(t)return null===(e=this.avdResourcesData)||void 0===e?void 0:e.Subscriptions.find(e=>{const n=Y(e.Id);return(null==n?void 0:n.toLowerCase())===t.toLowerCase()})}if(this.hostPoolToUpdate)return null===(t=this.avdResourcesData)||void 0===t?void 0:t.Subscriptions.find(e=>this.hostPoolToUpdate.Id.toLowerCase().includes(e.Id.toLowerCase()))}getFormLocationItem(){var e;return null===(e=this.avdResourcesData)||void 0===e?void 0:e.Locations.find(e=>e.Id===this.hostPoolToUpdate.Location)}getFormPreferredAppGroupItem(){return this.preferredAppGroups.find(e=>{var t;return e.value===(null===(t=this.hostPoolToUpdate.Properties)||void 0===t?void 0:t.PreferredAppGroupType)})}getFormLogAnalyticWorkspaceItem(){var e,t;return this.hostPoolToUpdate.LogAnalyticsId&&""!==this.hostPoolToUpdate.LogAnalyticsId?null!==(t=null===(e=this.avdResourcesData)||void 0===e?void 0:e.LogAnalyticsWorkspaces.find(e=>e.Id===this.hostPoolToUpdate.LogAnalyticsId))&&void 0!==t?t:"null":""===this.hostPoolToUpdate.LogAnalyticsId?"":null===this.hostPoolToUpdate.LogAnalyticsId?"null":void 0}getFormLoadBalancingAlgorithmItem(){return this.loadBalancingAlgorithmTypes.find(e=>e.value===this.hostPoolToUpdate.Properties.LoadBalancerType)}getFormAssignmentTypeItem(){return this.assignmentTypes.find(e=>e.value===this.hostPoolToUpdate.Properties.PersonalDesktopAssignmentType)}addControls(){var e,t,n,o,r,i,a,l,s,c,d,p,m,u;this.form.addControl("subscription",new P.NI(null!==(e=this.getFormSubscriptionItem())&&void 0!==e?e:null,[P.kI.required]),{emitEvent:!1}),this.form.addControl("hostPoolName",new P.NI(this.hostPoolToUpdate?this.hostPoolToUpdate.Name:"",[P.kI.required,P.kI.maxLength(64)]),{emitEvent:!1}),this.form.addControl("location",new P.NI(this.hostPoolToUpdate?this.getFormLocationItem():null,[P.kI.required]),{emitEvent:!1}),this.selectedHostPoolType=this.hostPoolTypes.find(e=>{var t,n;return e.value===(null===(n=null===(t=this.hostPoolToUpdate)||void 0===t?void 0:t.Properties)||void 0===n?void 0:n.HostPoolType)}),this.form.addControl("hostPoolType",new P.NI(null!==(t=this.selectedHostPoolType)&&void 0!==t?t:null,[P.kI.required]),{emitEvent:!1}),this.form.addControl("preferredAppGroup",new P.NI(this.hostPoolToUpdate?this.getFormPreferredAppGroupItem():null,[P.kI.required]),{emitEvent:!1}),this.form.addControl("logAnalyticWorkspace",new P.NI(this.hostPoolToUpdate?this.getFormLogAnalyticWorkspaceItem():null),{emitEvent:!1}),this.form.addControl("startVMOnConnect",new P.NI(null!==(r=null===(o=null===(n=this.hostPoolToUpdate)||void 0===n?void 0:n.Properties)||void 0===o?void 0:o.StartVmOnConnect)&&void 0!==r&&r),{emitEvent:!1}),this.form.addControl("validationEnvironment",new P.NI(null!==(l=null===(a=null===(i=this.hostPoolToUpdate)||void 0===i?void 0:i.Properties)||void 0===a?void 0:a.ValidationEnvironment)&&void 0!==l&&l),{emitEvent:!1}),this.form.addControl("friendlyName",new P.NI(null!==(d=null===(c=null===(s=this.hostPoolToUpdate)||void 0===s?void 0:s.Properties)||void 0===c?void 0:c.FriendlyName)&&void 0!==d?d:"",[P.kI.maxLength(64)]),{emitEvent:!1}),this.form.addControl("description",new P.NI(null!==(u=null===(m=null===(p=this.hostPoolToUpdate)||void 0===p?void 0:p.Properties)||void 0===m?void 0:m.Description)&&void 0!==u?u:"",[P.kI.maxLength(512)]),{emitEvent:!1}),this.form.addControl("maxSessionsLimit",new P.NI(this.hostPoolToUpdate?this.hostPoolToUpdate.Properties.MaxSessionLimit:1,[P.kI.required,P.kI.min(1),P.kI.max(999999)]),{emitEvent:!1}),this.form.addControl("assignmentType",new P.NI(this.hostPoolToUpdate?this.getFormAssignmentTypeItem():null),{emitEvent:!1}),this.hostPoolToUpdate&&this.hostPoolToUpdate.Properties.HostPoolType===S.Bs.Pooled&&this.form.addControl("loadBalancingAlgorithm",new P.NI(this.hostPoolToUpdate?this.getFormLoadBalancingAlgorithmItem():null,[P.kI.required]),{emitEvent:!1}),this.formControlsInitialized.emit(this.form.getRawValue())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-configuration-tab"]],inputs:{form:"form",avdResourcesData:"avdResourcesData",hostPoolToUpdate:"hostPoolToUpdate",preselectSubscriptionId:"preselectSubscriptionId"},outputs:{formControlsInitialized:"formControlsInitialized"},decls:75,vars:22,consts:[[3,"formGroup"],[1,"form-group","row"],[1,"col-md-3","d-flex","justify-content-between","align-items-center"],["for","subscription",1,"label"],[1,"asterisk"],["icon","info-outline","nbTooltip","All charges for resources in an Azure subscription are billed as one."],[1,"col-md-9"],["id","subscription","fullWidth","","formControlName","subscription",4,"ngIf","ngIfElse"],["readOnlySubscription",""],[4,"ngIf"],["for","name",1,"label","col-md-3","d-flex","align-items-center"],["id","name","type","text","nbInput","","fullWidth","","formControlName","hostPoolName",4,"ngIf","ngIfElse"],["readOnlyHostPoolName",""],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],["for","location",1,"label"],["icon","info-outline","nbTooltip","Choose the region to create the Azure Virtual Desktop object. Its metadata is saved in the geography linked to that region."],["id","location","fullWidth","","formControlName","location",4,"ngIf","ngIfElse"],["readOnlyLocation",""],["for","host_pool_type",1,"label","col-md-3","d-flex","align-items-center"],["id","host_pool_type","fullWidth","","formControlName","hostPoolType",3,"selectedChange",4,"ngIf","ngIfElse"],["readOnlyHostPoolType",""],["for","app_group_type",1,"label"],["icon","info-outline","nbTooltip","\n          Set the preferred app group type for this host pool.\n          If an end user has both RemoteApp and Desktop apps published to them on this host pool they\n          will only see the selected app type in their feed.\n        "],["id","app_group_type","fullWidth","","formControlName","preferredAppGroup"],[3,"value",4,"ngFor","ngForOf"],["hostPoolExtendedOptions",""],["for","log_analytic_workspace",1,"label","col-md-3","d-flex","align-items-center"],["id","log_analytic_workspace","fullWidth","","formControlName","logAnalyticWorkspace"],[3,"value",4,"ngIf"],[3,"value"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["id","subscription","fullWidth","","formControlName","subscription"],["id","subscription","type","text","nbInput","","fullWidth","","disabled","",3,"value"],[1,"form-control-error"],["id","name","type","text","nbInput","","fullWidth","","formControlName","hostPoolName"],["id","name","type","text","nbInput","","fullWidth","","disabled","",3,"value"],["id","location","fullWidth","","formControlName","location"],["id","location","type","text","nbInput","","fullWidth","","disabled","",3,"value"],["id","host_pool_type","fullWidth","","formControlName","hostPoolType",3,"selectedChange"],["id","host_pool_type","type","text","nbInput","","fullWidth","","disabled","",3,"value"],["for","load_balancing_alg",1,"label"],["icon","info-outline","nbTooltip","\n            Breadth-first load balancing distributes new user sessions across all available session hosts in the host pool.\n            Depth-first load balancing distributes new user sessions to an available session host with the\n            highest number of connections but has not reached its maximum session limit threshold.\n          "],["id","load_balancing_alg","fullWidth","","formControlName","loadBalancingAlgorithm"],["for","max_sessions-limit",1,"label"],["icon","info-outline","nbTooltip","\n            The maximum number of users that have concurrent sessions on a session host.\n            When setting a host pool to have depth first load balancing or planning to use Autoscaling,\n            you must set an appropriate max session limit according to the configuration of your deployment and capacity\n            of your VMs. Changing the max session limit will not affect existing user sessions.\n          "],["type","number","nbInput","","fullWidth","","formControlName","maxSessionsLimit",3,"min","max"],[4,"ngTemplateOutlet"],["for","assignment_type",1,"label"],["icon","info-outline","nbTooltip","\n            Automatic assignment \u2013 The service will select an available host and assign it to an user\n            Direct assignment \u2013 Admin selects a specific host to assign to an user\n          "],["id","assignment_type","fullWidth","","formControlName","assignmentType"],["for","start_vm_on_connect",1,"label"],["icon","info-outline","nbTooltip","\n            Enable Start VM on connect to allow users to start the virtual machine from a deallocated state.\n            Important: Custom RBAC role required to power manage VMs.\n          "],["id","start_vm_on_connect","name","start_vm_on_connect","formControlName","startVMOnConnect",1,"d-flex"],["for","validation_environment",1,"label"],["icon","info-outline","nbTooltip","Validation host pool allows you to test service changes before they are deployed to production."],["id","validation_environment","name","validation_environment","formControlName","validationEnvironment",1,"d-flex"],["for","friendly_name",1,"label","col-md-3"],["id","friendly_name","type","text","nbInput","","fullWidth","","formControlName","friendlyName"],["for","description",1,"label","col-md-3"],["id","description","nbInput","","fullWidth","","formControlName","description"]],template:function(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0,0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"div",2),u["\u0275\u0275elementStart"](3,"label",3),u["\u0275\u0275elementStart"](4,"span",4),u["\u0275\u0275text"](5,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"span"),u["\u0275\u0275text"](7,"Subscription / Resource Group"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](8,"nb-icon",5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"div",6),u["\u0275\u0275template"](10,cn,2,2,"nb-select",7),u["\u0275\u0275template"](11,dn,1,1,"ng-template",null,8,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](13,pn,3,0,"ng-container",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"div",1),u["\u0275\u0275elementStart"](15,"label",10),u["\u0275\u0275elementStart"](16,"span",4),u["\u0275\u0275text"](17,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](18,"span"),u["\u0275\u0275text"](19,"Host pool name"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"div",6),u["\u0275\u0275template"](21,mn,1,0,"input",11),u["\u0275\u0275template"](22,un,1,1,"ng-template",null,12,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](24,hn,3,0,"ng-container",9),u["\u0275\u0275template"](25,fn,3,2,"ng-container",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](26,"div",1),u["\u0275\u0275elementStart"](27,"div",13),u["\u0275\u0275elementStart"](28,"label",14),u["\u0275\u0275elementStart"](29,"span",4),u["\u0275\u0275text"](30,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](31,"span"),u["\u0275\u0275text"](32,"Location"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](33,"nb-icon",15),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](34,"div",6),u["\u0275\u0275template"](35,gn,2,2,"nb-select",16),u["\u0275\u0275template"](36,yn,1,1,"ng-template",null,17,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](38,Cn,3,0,"ng-container",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](39,"div",1),u["\u0275\u0275elementStart"](40,"label",18),u["\u0275\u0275elementStart"](41,"span",4),u["\u0275\u0275text"](42,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](43,"span"),u["\u0275\u0275text"](44,"Host pool type"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](45,"div",6),u["\u0275\u0275template"](46,Sn,2,1,"nb-select",19),u["\u0275\u0275template"](47,wn,1,1,"ng-template",null,20,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](49,xn,3,0,"ng-container",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](50,"div",1),u["\u0275\u0275elementStart"](51,"div",13),u["\u0275\u0275elementStart"](52,"label",21),u["\u0275\u0275elementStart"](53,"span",4),u["\u0275\u0275text"](54,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](55,"span"),u["\u0275\u0275text"](56,"Preferred app-group type"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](57,"nb-icon",22),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](58,"div",6),u["\u0275\u0275elementStart"](59,"nb-select",23),u["\u0275\u0275template"](60,In,2,2,"nb-option",24),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](61,Pn,3,0,"ng-container",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](62,On,22,6,"ng-container",9),u["\u0275\u0275template"](63,Fn,10,2,"ng-container",9),u["\u0275\u0275template"](64,Ln,28,4,"ng-template",null,25,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275elementStart"](66,"div",1),u["\u0275\u0275elementStart"](67,"label",26),u["\u0275\u0275text"](68," Enable diagnostic logging "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](69,"div",6),u["\u0275\u0275elementStart"](70,"nb-select",27),u["\u0275\u0275template"](71,$n,2,1,"nb-option",28),u["\u0275\u0275elementStart"](72,"nb-option",29),u["\u0275\u0275text"](73,"No logging"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](74,zn,2,2,"nb-option",30),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275reference"](12),n=u["\u0275\u0275reference"](23),o=u["\u0275\u0275reference"](37),r=u["\u0275\u0275reference"](48);u["\u0275\u0275property"]("formGroup",t.form),u["\u0275\u0275advance"](10),u["\u0275\u0275property"]("ngIf",!t.hostPoolToUpdate)("ngIfElse",e),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",(null==t.form.controls.subscription.errors?null:t.form.controls.subscription.errors.required)&&t.form.controls.subscription.touched),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngIf",!t.hostPoolToUpdate)("ngIfElse",n),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",(null==t.form.controls.hostPoolName.errors?null:t.form.controls.hostPoolName.errors.required)&&t.form.controls.hostPoolName.touched),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==t.form.controls.hostPoolName.errors?null:t.form.controls.hostPoolName.errors.maxlength),u["\u0275\u0275advance"](10),u["\u0275\u0275property"]("ngIf",!t.hostPoolToUpdate)("ngIfElse",o),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",(null==t.form.controls.location.errors?null:t.form.controls.location.errors.required)&&t.form.controls.location.touched),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngIf",!t.hostPoolToUpdate)("ngIfElse",r),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",(null==t.form.controls.hostPoolType.errors?null:t.form.controls.hostPoolType.errors.required)&&t.form.controls.hostPoolType.touched),u["\u0275\u0275advance"](11),u["\u0275\u0275property"]("ngForOf",t.preferredAppGroups),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(null==t.form.controls.preferredAppGroup.errors?null:t.form.controls.preferredAppGroup.errors.required)&&t.form.controls.preferredAppGroup.touched),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(null==t.selectedHostPoolType?null:t.selectedHostPoolType.value)===t.HostPoolTypeClass.Pooled),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(null==t.selectedHostPoolType?null:t.selectedHostPoolType.value)===t.HostPoolTypeClass.Personal),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngIf",t.hostPoolToUpdate),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("value",""),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngForOf",null==t.avdResourcesData?null:t.avdResourcesData.LogAnalyticsWorkspaces)("ngForTrackBy",t.trackByFn)}},directives:[P.JL,P.sg,r.fMN,r.jNv,o.O5,r.rs,P.JJ,P.u,o.sg,r.q51,r.h8i,P.Fj,P.wV,P.qQ,P.Fd,o.tP,r.MFI,r.r3g],styles:["[_nghost-%COMP%]   .asterisk[_ngcontent-%COMP%]{color:var(--danger);margin-right:.5em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}"]}),e})(),Wn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[o.ez,r.zyh,r.T2N,r.KdK]]}),e})();function jn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",16),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.title)}}function qn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",16),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.title)}}function Hn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",16),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.title)}}function Jn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",16),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.title)}}let Qn=(()=>{class e{constructor(){this.formControlsInitialized=new u.EventEmitter,this.rdpNetworkUdpTypes=[{title:"Default",value:S.Op.Default},{title:"Enabled",value:S.Op.Enabled},{title:"Disabled",value:S.Op.Disabled}]}ngOnInit(){this.addControls()}getManagedPrivateUpdItem(){return this.rdpNetworkUdpTypes.find(e=>e.value===this.hostPoolToUpdate.Properties.ManagedPrivateUdp)}getDirectUpdItem(){return this.rdpNetworkUdpTypes.find(e=>e.value===this.hostPoolToUpdate.Properties.DirectUdp)}getPublicUpdItem(){return this.rdpNetworkUdpTypes.find(e=>e.value===this.hostPoolToUpdate.Properties.PublicUdp)}getRelayUpdItem(){return this.rdpNetworkUdpTypes.find(e=>e.value===this.hostPoolToUpdate.Properties.RelayUdp)}addControls(){this.form.addControl("managedPrivateUdp",new P.NI(this.hostPoolToUpdate?this.getManagedPrivateUpdItem():this.rdpNetworkUdpTypes[0]),{emitEvent:!1}),this.form.addControl("directUdp",new P.NI(this.hostPoolToUpdate?this.getDirectUpdItem():this.rdpNetworkUdpTypes[0]),{emitEvent:!1}),this.form.addControl("publicUdp",new P.NI(this.hostPoolToUpdate?this.getPublicUpdItem():this.rdpNetworkUdpTypes[0]),{emitEvent:!1}),this.form.addControl("relayUdp",new P.NI(this.hostPoolToUpdate?this.getRelayUpdItem():this.rdpNetworkUdpTypes[0]),{emitEvent:!1}),this.formControlsInitialized.emit(this.form.getRawValue())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-rdp-short-path-tab"]],inputs:{form:"form",hostPoolToUpdate:"hostPoolToUpdate"},outputs:{formControlsInitialized:"formControlsInitialized"},decls:33,vars:5,consts:[[3,"formGroup"],[1,"form-group","row"],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],["for","managed_private_udp",1,"label"],["icon","info-outline","nbTooltip","\n          Establishes direct UDP connectivity between the client and\n          session host when connected through a private network, such as a VPN.\n        "],[1,"col-md-9"],["id","managed_private_udp","fullWidth","","formControlName","managedPrivateUdp"],[3,"value",4,"ngFor","ngForOf"],["for","direct_udp",1,"label"],["id","direct_udp","fullWidth","","formControlName","directUdp"],["for","public_udp",1,"label"],["icon","info-outline","nbTooltip","\n        Sets up direct UDP connectivity between the client and\n        session host over a public network using the STUN protocol.\n        "],["id","public_udp","fullWidth","","formControlName","publicUdp"],["for","relay_udp",1,"label"],["icon","info-outline","nbTooltip","\n          Uses indirect UDP connectivity between the client and\n          session host over a public network through the TURN protocol.\n        "],["id","relay_udp","fullWidth","","formControlName","relayUdp"],[3,"value"]],template:function(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0,0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"div",2),u["\u0275\u0275elementStart"](3,"label",3),u["\u0275\u0275text"](4,"Managed networks"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](5,"nb-icon",4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"div",5),u["\u0275\u0275elementStart"](7,"nb-select",6),u["\u0275\u0275template"](8,jn,2,2,"nb-option",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"div",1),u["\u0275\u0275elementStart"](10,"div",2),u["\u0275\u0275elementStart"](11,"label",8),u["\u0275\u0275text"](12,"Managed networks (STUN)"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](13,"nb-icon",4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"div",5),u["\u0275\u0275elementStart"](15,"nb-select",9),u["\u0275\u0275template"](16,qn,2,2,"nb-option",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](17,"div",1),u["\u0275\u0275elementStart"](18,"div",2),u["\u0275\u0275elementStart"](19,"label",10),u["\u0275\u0275text"](20,"Public networks (via STUN)"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](21,"nb-icon",11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](22,"div",5),u["\u0275\u0275elementStart"](23,"nb-select",12),u["\u0275\u0275template"](24,Hn,2,2,"nb-option",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"div",1),u["\u0275\u0275elementStart"](26,"div",2),u["\u0275\u0275elementStart"](27,"label",13),u["\u0275\u0275text"](28,"Public networks (via TURN/Relay)"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](29,"nb-icon",14),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](30,"div",5),u["\u0275\u0275elementStart"](31,"nb-select",15),u["\u0275\u0275template"](32,Jn,2,2,"nb-option",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e&&(u["\u0275\u0275property"]("formGroup",t.form),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngForOf",t.rdpNetworkUdpTypes),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngForOf",t.rdpNetworkUdpTypes),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngForOf",t.rdpNetworkUdpTypes),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngForOf",t.rdpNetworkUdpTypes))},directives:[P.JL,P.sg,r.fMN,r.jNv,r.rs,P.JJ,P.u,o.sg,r.q51],styles:["[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();function Kn(e){if(!e)return[];const t=[];let n="",o=!1;for(let r=0;r<e.length;r++){const i=e[r];o?(n+=i,o=!1):"\\"===i?(o=!0,n+=i):";"!==i||o?n+=i:(n.trim()&&t.push(n.trim()),n="")}return n.trim()&&t.push(n.trim()),t}function Xn(e){const t=new Map;return e?(Kn(e).map(e=>e.trim()).filter(Boolean).forEach(e=>{const n=e.split(":");if(n.length<3)return;const o=n[0],r=n[1],i=n.slice(2).join(":");t.set(o,{type:r,value:i})}),t):t}function Yn(e,t){const n={...Zn(e),...Zn(t)};return Object.entries(n).map(([e,t])=>`${e}:${t}`).join(";")}function Zn(e){return Kn(e).filter(Boolean).reduce((e,t)=>{const[n,...o]=t.split(":"),r=o.join(":");return e[n.trim()]=r.trim(),e},{})}function eo(e){if(!e)return e;const t=new Set([":",";","\\"]);let n=e.replace(/\\(.)/g,(e,n)=>t.has(n)?`\\${n}`:`\\\\${n}`);return n.endsWith("\\")&&(n=n.slice(0,-1)),n}function to(e){return e.replace(/\\/g,"\\\\")}function no(e){var t;const n=null===(t=e.value)||void 0===t?void 0:t.toString();return n?n.endsWith("\\")?{endsWithBackslash:!0}:/^(?:[^\\:;]|\\[\\:;])+$/.test(n)?null:{invalidPattern:!0}:null}var oo=(()=>(function(e){e.NotSet="notset",e.NotConfigured="notconfigured",e.EmptyValue="",e.AllValues="*",e.DynamicDrives="dynamicdrives"}(oo||(oo={})),oo))();const ro={title:"Not configured",value:oo.NotSet},io="drivestoredirect:s:;usbdevicestoredirect:s:;redirectclipboard:i:0;redirectprinters:i:0;audiomode:i:0;videoplaybackmode:i:1;devicestoredirect:s:*;redirectcomports:i:1;redirectsmartcards:i:1;enablecredsspsupport:i:1;redirectwebauthn:i:1;use multimon:i:1",ao=[{key:"enablerdsaadauth",type:"i",label:"Microsoft Entra single sign-on",uiType:"select",formControlName:"microsoft_entra_single_sign_on",tooltip:"\n      Specifies whether the connection uses Microsoft Entra authentication to sign in to Entra-joined session hosts and enable SSO.\n      For Hybrid Entra-joined hosts, a Kerberos Server object is required.\n    ",options:[ro,{title:"Connections will not use Microsoft Entra single sign-on",value:0},{title:"Connections will use Microsoft Entra authentication to provide single sign-on",value:1}]},{key:"enablecredsspsupport",type:"i",label:"Credential Security Support Provider",uiType:"select",formControlName:"credential_security_support_provider",tooltip:"Specifies whether Remote Desktop uses CredSSP for authentication when available.",options:[ro,{title:"RDP will not use CredSSP, even if the operating system supports CredSSP",value:0},{title:"RDP will use CredSSP if the operating system supports CredSSP (default)",value:1}]},{key:"alternate shell",type:"s",label:"Alternate shell",uiType:"text",tooltip:"\n      Starts a specified program automatically when you connect to a remote computer, using a valid executable path.\n      This option applies only to server connections.\n    ",formControlName:"alternate_shell",validators:[no],placeholder:"C\\:\\\\ProgramFiles\\\\Office\\\\word.exe"},{key:"kdcproxyname",type:"s",label:"KDC proxy name",uiType:"text",formControlName:"kdc_proxy_name",tooltip:"Enter the FQDN of the KDC Proxy to use.",placeholder:"kdc.contoso.com"}],lo=[{key:"autoreconnection enabled",type:"i",label:"Reconnection",uiType:"select",formControlName:"reconnection",tooltip:"\n      Specifies if the client computer automatically attempts to reconnect to the remote computer after a dropped connection.\n    ",options:[ro,{title:"Client does not automatically try to reconnect",value:0},{title:"Client automatically tries to reconnect",value:1}]},{key:"bandwidthautodetect",type:"i",label:"Bandwidth auto detect",uiType:"select",formControlName:"bandwidth_auto_detect",tooltip:"\n      Specifies whether automatic network bandwidth detection is used.\n      This requires the bandwidth autodetect option and applies to connection type 7.\n    ",options:[ro,{title:"Don't use automatic network bandwidth detection",value:0},{title:"Use automatic network bandwidth",value:1}]},{key:"networkautodetect",type:"i",label:"Network auto detect",uiType:"select",formControlName:"network_auto_detect",tooltip:"\n      Turns on automatic detection of the network type.\n      Works with network autodetect and relates to the connection type.\n    ",options:[ro,{title:"Disable automatic network type detection",value:0},{title:"Enable automatic network type connection",value:1}]},{key:"compression",type:"i",label:"Compression",uiType:"select",formControlName:"compression",tooltip:"Specifies whether bulk compression is applied to the connection.",options:[ro,{title:"Disable RDP bulk compression",value:0},{title:"Enable RDP bulk compression",value:1}]},{key:"videoplaybackmode",type:"i",label:"Video playback",uiType:"select",formControlName:"video_playback_mode",tooltip:"Specifies whether RDC uses RDP-efficient multimedia streaming for video playback.",options:[ro,{title:"Don't use RDP efficient multimedia streaming for video playback",value:0},{title:"Use RDP-efficient multimedia streaming for video playback when possible (default)",value:1}]}],so=[{key:"audiocapturemode",type:"i",label:"Microphone redirection",uiType:"select",formControlName:"microphone_redirection",tooltip:"Specifies how audio recorded on the local computer is managed during a remote session.",uiSubGroupTitle:"Audio and video",options:[ro,{title:"Disable audio capture from the local device",value:0},{title:"Enable audio capture from the local device and redirection to an audio application in the remote session",value:1}]},{key:"encode redirected video capture",type:"i",label:"Redirect video encoding",uiType:"select",formControlName:"redirect_video_encoding",tooltip:"Turns redirected video encoding on or off.",uiSubGroupTitle:"Audio and video",options:[ro,{title:"Disable encoding of redirected video",value:0},{title:"Enable encoding of redirected video",value:1}]},{key:"redirected video capture encoding quality",type:"i",label:"Encoded video quality",uiType:"select",formControlName:"encoded_video_quality",tooltip:"Sets the quality level of encoded video.",uiSubGroupTitle:"Audio and video",options:[ro,{title:"High compression video. Quality may suffer when there is a lot of motion",value:0},{title:"Medium compression",value:1},{title:"Low compression video with high picture quality",value:2}]},{key:"audiomode",type:"i",label:"Audio output location",uiType:"select",formControlName:"audio_output_location",tooltip:"Defines how recorded audio from the local computer is handled in a remote session.",uiSubGroupTitle:"Audio and video",options:[ro,{title:"Play sounds on the local computer (default)",value:0},{title:"Play sounds on the remote computer",value:1},{title:"Do not play sounds",value:2}]},{key:"camerastoredirect",type:"s",label:"Camera redirection",uiType:"select",formControlName:"camera_redirection",tooltip:"\n      Configures which cameras to redirect. This setting uses a semicolon-delimited list of\n      KSCATEGORY_VIDEO_CAMERA interfaces of cameras enabled for redirection.\n    ",uiSubGroupTitle:"Local devices and resources",options:[ro,{title:"Don't redirect any cameras",value:oo.EmptyValue},{title:"Redirect cameras",value:oo.AllValues},{title:"Manually enter list of cameras",value:oo.NotConfigured}],relatedControlForSelectedOption:{key:"camerastoredirect",placeholder:"Example: \\\\?\\\\usb#vid_0bda&pid_58b0&mi\\;\n\\\\?\\\\usb#vid_7cdd&pid_54a1&mi",validators:[no]}},{key:"drivestoredirect",type:"s",label:"Drive/storage redirection",uiType:"select",formControlName:"drive_storage_redirection",tooltip:"\n     Specifies which local disk drives from the client computer are redirected to the remote session.\n    ",uiSubGroupTitle:"Local devices and resources",options:[ro,{title:"Don't redirect any drives (default)",value:oo.EmptyValue},{title:"Redirect all disk drives, including ones that are connected later",value:oo.AllValues},{title:"Dynamic drives: redirect any drives that are connected later",value:oo.DynamicDrives},{title:"Manually enter drives and labels",value:oo.NotConfigured}],relatedControlForSelectedOption:{key:"drivestoredirect",placeholder:"Example: C\\:\\;E\\:\\;",validators:[no]}},{key:"usbdevicestoredirect",type:"s",label:"USB device redirection",uiType:"select",formControlName:"usb_device_redirection",tooltip:"\n      Specifies which supported RemoteFX USB devices on the client computer are\n      redirected and available in a session that supports RemoteFX USB redirection.\n    ",uiSubGroupTitle:"Local devices and resources",options:[ro,{title:"Don't redirect any USB devices (default)",value:oo.EmptyValue},{title:"Redirect all USB devices that are not already redirected by another high-level redirection",value:oo.AllValues},{title:"Redirect all devices that are members of the specified device setup class or devices defined by specific instance ID",value:oo.NotConfigured}],relatedControlForSelectedOption:{key:"usbdevicestoredirect",placeholder:"Example: 72631e54-78a4-11d0-bcf7-00aa00b7b32a\\;53d29ef7-377c-4d14-864b-eb3a85769359",validators:[no]}},{key:"devicestoredirect",type:"s",label:"MTP and PTP device redirection",uiType:"select",formControlName:"mtp_and_ptp_device_redirection",tooltip:"Redirects MTP and PTP devices, such as media players and cameras, to the remote session.",uiSubGroupTitle:"Local devices and resources",options:[ro,{title:"Don't redirect any devices",value:oo.EmptyValue},{title:"Redirect portable media players based on the Media Transfer Protocol(MTP) and digital cameras based on the Picture Transfer Protocol(PTP) (default)",value:oo.AllValues}]},{key:"redirectclipboard",type:"i",label:"Clipboard redirection",uiType:"select",formControlName:"clipboard_redirection",tooltip:"Specifies whether clipboard content is shared between the client computer and the remote session.",uiSubGroupTitle:"Local devices and resources",options:[ro,{title:"Clipboard on local computer isn't available in remote session (default)",value:0},{title:"Clipboard on local computer is available in remote session",value:1}]},{key:"redirectcomports",type:"i",label:"COM ports redirection",uiType:"select",formControlName:"com_ports_redirection",tooltip:"Specifies whether COM (serial) ports on the client computer are redirected for use in the remote session.",uiSubGroupTitle:"Local devices and resources",options:[ro,{title:"COM ports on the local computer are not available in the remote session",value:0},{title:"COM ports on the local computer are available in the remote session (default)",value:1}]},{key:"keyboardhook",type:"i",label:"Keyboard redirection",uiType:"select",formControlName:"keyboard_redirection",tooltip:"\n      Specifies when Windows key combos (such as Windows and Alt+Tab)\n      apply to the remote session in desktop and RemoteApp connections.\n    ",uiSubGroupTitle:"Local devices and resources",options:[ro,{title:"Windows key combinations are applied on the local computer",value:0},{title:"(Desktop only) Windows key combinations are applied on the remote computer when in focus",value:1},{title:"(Desktop only) Windows key combinations are applied on the remote computer in full screen mode only",value:2},{title:"(RemoteApp only) Windows key combinations are applied on the RemoteApp when in focus",value:3}]},{key:"redirectlocation",type:"i",label:"Location service redirection",uiType:"select",formControlName:"location_service_redirection",tooltip:"Specifies whether location sharing is redirected between the client computer and the remote session.",uiSubGroupTitle:"Local devices and resources",options:[ro,{title:"Disable location sharing from the local device",value:0},{title:"Enable location sharing from the local device and redirection to apps in the remote session",value:1}]},{key:"redirectprinters",type:"i",label:"Printer redirection",uiType:"select",formControlName:"printer_redirection",tooltip:"Specifies whether printers on the client computer are redirected to the remote session.",uiSubGroupTitle:"Local devices and resources",options:[ro,{title:"The printers on the local computer are not available in the remote session (default)",value:0},{title:"The printers on the local computer are available in the remote session",value:1}]},{key:"redirectsmartcards",type:"i",label:"Smart card redirection",uiType:"select",formControlName:"smart_card_redirection",tooltip:"Specifies whether smart card devices on the client computer are available in the remote session.",uiSubGroupTitle:"Local devices and resources",options:[ro,{title:"The smart card device on the local computer is not available in the remote session",value:0},{title:"The smart card device on the local computer is available in the remote session (default)",value:1}]},{key:"redirectwebauthn",type:"i",label:"WebAuthn redirection",uiType:"select",formControlName:"web_authn_redirection",tooltip:"Specifies whether WebAuthn requests in the remote session are redirected to the local computer to use local authenticators,\n    such as Windows Hello for Business or security keys.",uiSubGroupTitle:"Local devices and resources",options:[ro,{title:"WebAuthn requests in the remote session are not redirected to the local computer",value:0},{title:"WebAuthn requests in the remote session are redirected to the local computer (default)",value:1}]}],co=[{key:"use multimon",type:"i",label:"Multiple displays",uiType:"select",formControlName:"multiple_displays",tooltip:"\n      Specifies whether the session uses true multiple monitor support when connecting to the remote computer.\n      ",options:[ro,{title:"Don't enable multiple display support",value:0},{title:"Enable multiple display support (default)",value:1}],disableRelatedKeys:["selectedmonitors","maximizetocurrentdisplays","singlemoninwindowedmode"]},{key:"selectedmonitors",type:"s",label:"Selected monitors",uiType:"select",formControlName:"selected_monitors",tooltip:"\n      Defines which local displays are used in the remote session.\n      Displays must be contiguous and require use multimon set to 1.\n    ",options:[ro,{title:"All displays",value:oo.EmptyValue},{title:"Manually enter list of machine specific display IDs",value:oo.NotConfigured}],relatedControlForSelectedOption:{key:"selectedmonitors",placeholder:"Example: ID0123, ID3456, ID23456",validators:[no]}},{key:"maximizetocurrentdisplays",type:"i",label:"Maximize to current displays",uiType:"select",formControlName:"maximize_to_current_displays",tooltip:"\n      Specifies which display the remote session uses for full screen when maximized.\n      Requires use multimon set to 1.\n      ",options:[ro,{title:"Session goes full screen on the displays initially selected when maximizing",value:0},{title:"Session dynamically goes full screen on the displays touched by the session window when maximizing",value:1}]},{key:"singlemoninwindowedmode",type:"i",label:"Multi to single display switch",uiType:"select",formControlName:"multi_to_single_display_switch",tooltip:"\n      Specifies whether a multi-monitor session switches to a single display when exiting full screen.\n      Requires use multimon set to 1.\n    ",options:[ro,{title:"Session retains all displays when exiting full screen",value:0},{title:"Session switches to single display when exiting full screen",value:1}]},{key:"screen mode id",type:"i",label:"Screen mode",uiType:"select",formControlName:"screen_mode",tooltip:"Specifies whether the remote session opens in full-screen mode when connecting.",options:[ro,{title:"The remote session will appear in a window",value:0},{title:"The remote session will appear full screen",value:1}]},{key:"smart sizing",type:"i",label:"Smart sizing",uiType:"select",formControlName:"smart_sizing",tooltip:"Specifies whether the client scales remote desktop content to fit the window when resized.",options:[ro,{title:"The local window content won't scale when resized",value:0},{title:"The local window content will scale when resized",value:1}]},{key:"dynamic resolution",type:"i",label:"Dynamic resolution",uiType:"select",formControlName:"dynamic_resolution",tooltip:"Specifies whether the remote session resolution updates automatically when the window is resized.",options:[ro,{title:"Session resolution remains static for the duration of the session",value:0},{title:"Session resolution updates as the local window resizes",value:1}]},{key:"desktop size id",type:"i",label:"Desktop size",uiType:"select",formControlName:"desktop_size",tooltip:"Defines preset dimensions for the remote desktop session.",options:[ro,{title:"0: 640 x 480",value:0},{title:"1: 800 x 600",value:1},{title:"2: 1024 x 768",value:2},{title:"3: 1280 x 1024",value:3},{title:"4: 1600 x 1200",value:4}]},{key:"desktopheight",type:"i",label:"Desktop height (pixels)",uiType:"number",formControlName:"desktop_height",tooltip:"Sets the remote session desktop height in pixels.",isRequired:!0,validators:[P.kI.required]},{key:"desktopwidth",type:"i",label:"Desktop width (pixels)",uiType:"number",formControlName:"desktop_width",tooltip:"Sets the remote session desktop width in pixels.",isRequired:!0,validators:[P.kI.required]}],po=[...ao,...lo,...so,...co].map(e=>e.key);function mo(e,t){const n={};return e.forEach(e=>{const o=function(e,t){const n=t.get(e.key);switch(e.uiType){case"select":return void 0!==n?""===n?oo.EmptyValue:function(e){switch(e){case oo.NotSet:case oo.NotConfigured:case oo.EmptyValue:case oo.AllValues:case oo.DynamicDrives:return e;default:return isNaN(Number(e))?e:+e}}(n):oo.NotSet;case"text":return n||oo.EmptyValue;case"number":return n?+n:"0";default:return null}}(e,t);n[e.formControlName]=new P.NI(o,e.validators)}),n}var uo=n(39761);function ho(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",12),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e.value),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.title," ")}}function fo(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-select",10),u["\u0275\u0275template"](1,ho,2,2,"nb-option",11),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275property"]("id",e.key)("formControlName",e.formControlName),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.options)}}function vo(e,t){if(1&e&&u["\u0275\u0275element"](0,"input",13),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;let t;u["\u0275\u0275property"]("id",e.key)("placeholder",null!==(t=e.placeholder)&&void 0!==t?t:"")("formControlName",e.formControlName)}}function go(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"div",14),u["\u0275\u0275text"](2," The characters \\ : ; must be escaped with a backslash character '\\', "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",14),u["\u0275\u0275text"](4," and value cannot end with a backslash. e.g. 'C:' should be 'C\\:' "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function yo(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",2),u["\u0275\u0275elementStart"](1,"div",3),u["\u0275\u0275elementStart"](2,"label",4),u["\u0275\u0275text"](3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](4,"nb-icon",5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",6),u["\u0275\u0275template"](6,fo,2,3,"nb-select",7),u["\u0275\u0275template"](7,vo,1,3,"input",8),u["\u0275\u0275template"](8,go,5,0,"ng-container",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("for",e.key),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.label),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("nbTooltip",e.tooltip),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf","select"===e.uiType),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf","text"===e.uiType),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(null==n.form.controls||null==n.form.controls[e.formControlName]||null==n.form.controls[e.formControlName].errors?null:n.form.controls[e.formControlName].errors.endsWithBackslash)||(null==n.form.controls||null==n.form.controls[e.formControlName]||null==n.form.controls[e.formControlName].errors?null:n.form.controls[e.formControlName].errors.invalidPattern))}}let Co=(()=>{class e{constructor(){this.formControlsInitialized=new u.EventEmitter,this.store=ao}ngOnInit(){this.rdpProps&&this.initializeControls()}initializeControls(){var e;const t=new Map(Array.from(Xn(this.rdpProps).entries()).map(([e,{value:t}])=>[e,eo(t)]));Object.entries(mo(this.store,t)).forEach(([e,t])=>{var n;return null===(n=this.form)||void 0===n?void 0:n.addControl(e,t,{emitEvent:!1})}),this.formControlsInitialized.emit(null===(e=this.form)||void 0===e?void 0:e.getRawValue())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-connection-information-tab"]],inputs:{form:"form",rdpProps:"rdpProps"},outputs:{formControlsInitialized:"formControlsInitialized"},decls:2,vars:2,consts:[[3,"formGroup"],["class","form-group row",4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],[1,"label",3,"for"],["icon","info-outline",3,"nbTooltip"],[1,"col-md-9"],["fullWidth","",3,"id","formControlName",4,"ngIf"],["type","text","nbInput","","fullWidth","",3,"id","placeholder","formControlName",4,"ngIf"],[4,"ngIf"],["fullWidth","",3,"id","formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","nbInput","","fullWidth","",3,"id","placeholder","formControlName"],[1,"form-control-error"]],template:function(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0,0),u["\u0275\u0275template"](1,yo,9,6,"div",1),u["\u0275\u0275elementContainerEnd"]()),2&e&&(u["\u0275\u0275property"]("formGroup",t.form),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",t.store))},directives:[P.JL,P.sg,o.sg,r.fMN,r.jNv,o.O5,r.rs,P.JJ,P.u,r.q51,r.h8i,P.Fj],styles:["[_nghost-%COMP%]   .asterisk[_ngcontent-%COMP%]{color:var(--danger);margin-right:.5em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();function bo(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",11),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e.value),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.title," ")}}function So(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-select",9),u["\u0275\u0275template"](1,bo,2,2,"nb-option",10),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275property"]("id",e.key)("formControlName",e.formControlName),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.options)}}function wo(e,t){if(1&e&&u["\u0275\u0275element"](0,"input",12),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;let t;u["\u0275\u0275property"]("id",e.key)("placeholder",null!==(t=e.placeholder)&&void 0!==t?t:"")("formControlName",e.formControlName)}}function xo(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",2),u["\u0275\u0275elementStart"](1,"div",3),u["\u0275\u0275elementStart"](2,"label",4),u["\u0275\u0275text"](3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](4,"nb-icon",5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",6),u["\u0275\u0275template"](6,So,2,3,"nb-select",7),u["\u0275\u0275template"](7,wo,1,3,"input",8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("for",e.key),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.label),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("nbTooltip",e.tooltip),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf","select"===e.uiType),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf","text"===e.uiType)}}let Io=(()=>{class e{constructor(){this.formControlsInitialized=new u.EventEmitter,this.store=lo}ngOnInit(){this.rdpProps&&this.initializeControls()}initializeControls(){var e;const t=new Map(Array.from(Xn(this.rdpProps).entries()).map(([e,{value:t}])=>[e,eo(t)]));Object.entries(mo(this.store,t)).forEach(([e,t])=>{var n;return null===(n=this.form)||void 0===n?void 0:n.addControl(e,t,{emitEvent:!1})}),this.formControlsInitialized.emit(null===(e=this.form)||void 0===e?void 0:e.getRawValue())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-session-behavior-tab"]],inputs:{form:"form",rdpProps:"rdpProps"},outputs:{formControlsInitialized:"formControlsInitialized"},decls:2,vars:2,consts:[[3,"formGroup"],["class","form-group row",4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],[1,"label",3,"for"],["icon","info-outline",3,"nbTooltip"],[1,"col-md-9"],["fullWidth","",3,"id","formControlName",4,"ngIf"],["type","text","nbInput","","fullWidth","",3,"id","placeholder","formControlName",4,"ngIf"],["fullWidth","",3,"id","formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","nbInput","","fullWidth","",3,"id","placeholder","formControlName"]],template:function(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0,0),u["\u0275\u0275template"](1,xo,8,5,"div",1),u["\u0275\u0275elementContainerEnd"]()),2&e&&(u["\u0275\u0275property"]("formGroup",t.form),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",t.store))},directives:[P.JL,P.sg,o.sg,r.fMN,r.jNv,o.O5,r.rs,P.JJ,P.u,r.q51,r.h8i,P.Fj],styles:[""]}),e})();function Po(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",12),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",null===e.value?null:e.value),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.title," ")}}function Eo(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-select",10),u["\u0275\u0275template"](1,Po,2,2,"nb-option",11),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275property"]("id",e.key)("formControlName",e.formControlName),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.options)}}function ko(e,t){if(1&e&&u["\u0275\u0275element"](0,"input",13),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;let t;u["\u0275\u0275property"]("id",e.key)("placeholder",null!==(t=e.placeholder)&&void 0!==t?t:"")("formControlName",e.formControlName)}}function Ao(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"div",3),u["\u0275\u0275elementStart"](2,"div",4),u["\u0275\u0275elementStart"](3,"label",5),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](5,"nb-icon",6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"div",7),u["\u0275\u0275template"](7,Eo,2,3,"nb-select",8),u["\u0275\u0275template"](8,ko,1,3,"input",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("for",e.key),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.label),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("nbTooltip",e.tooltip),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf","select"===e.uiType),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf","text"===e.uiType)}}function To(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",12),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e.value),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.title," ")}}function No(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"nb-select",17),u["\u0275\u0275listener"]("selectedChange",function(t){u["\u0275\u0275restoreView"](e);const n=u["\u0275\u0275nextContext"]().$implicit;return u["\u0275\u0275nextContext"]().selectedChangeHandler(t,n)}),u["\u0275\u0275template"](1,To,2,2,"nb-option",11),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275property"]("id",e.key)("formControlName",e.formControlName),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.options)}}function Oo(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"textarea",18),u["\u0275\u0275text"](1,"        "),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275property"]("formControlName",e.manualFormControlName)("placeholder",e.relatedControlForSelectedOption.placeholder)("id",e.relatedControlForSelectedOption.key)}}function Mo(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"div",19),u["\u0275\u0275text"](2," The characters \\ : ; must be escaped with a backslash character '\\', "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",19),u["\u0275\u0275text"](4," and value cannot end with a backslash. e.g. 'C:' should be 'C\\:' "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function Vo(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,Mo,5,0,"ng-container",16),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().$implicit,t=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(null==t.form.controls||null==t.form.controls[e.manualFormControlName]||null==t.form.controls[e.manualFormControlName].errors?null:t.form.controls[e.manualFormControlName].errors.endsWithBackslash)||(null==t.form.controls||null==t.form.controls[e.manualFormControlName]||null==t.form.controls[e.manualFormControlName].errors?null:t.form.controls[e.manualFormControlName].errors.invalidPattern))}}function _o(e,t){if(1&e&&u["\u0275\u0275element"](0,"input",13),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;let t;u["\u0275\u0275property"]("id",e.key)("placeholder",null!==(t=e.placeholder)&&void 0!==t?t:"")("formControlName",e.formControlName)}}function Fo(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"div",3),u["\u0275\u0275elementStart"](2,"div",4),u["\u0275\u0275elementStart"](3,"label",5),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](5,"nb-icon",6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"div",7),u["\u0275\u0275template"](7,No,2,3,"nb-select",14),u["\u0275\u0275template"](8,Oo,2,3,"textarea",15),u["\u0275\u0275template"](9,Vo,2,1,"ng-container",16),u["\u0275\u0275template"](10,_o,1,3,"input",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("for",e.key),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.label),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("nbTooltip",e.tooltip),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf","select"===e.uiType),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.selfReference&&e.relatedControlForSelectedOption.key===e.key),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.selfReference&&e.relatedControlForSelectedOption.key===e.key),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf","text"===e.uiType)}}let Ro=(()=>{class e{constructor(){this.formControlsInitialized=new u.EventEmitter,this.store=so,this.audioAndVideoControlsGroup=this.store.filter(e=>"Audio and video"===e.uiSubGroupTitle),this.localDevicesAndResourcesControlsGroup=this.store.filter(e=>"Local devices and resources"===e.uiSubGroupTitle)}get cameraRedirectionControl(){return this.form.get("camera_redirection")}get driveStorageRedirectionControl(){return this.form.get("drive_storage_redirection")}get usbDevicesRedirectionControl(){return this.form.get("usb_device_redirection")}ngOnInit(){var e;this.rdpProps&&(this.initializeControls(),this.cleanUpCustomControls(),this.initializeCustomControls(),this.formControlsInitialized.emit(null===(e=this.form)||void 0===e?void 0:e.getRawValue()),setTimeout(()=>{this.cleanUpCameraRedirectionControl(),this.cleanUpDriveStorageRedirectionControl(),this.cleanUpUsbDevicesRedirectionControl()}))}selectedChangeHandler(e,t){e!==oo.NotConfigured?this.removeCustomControl(t):this.addCustomControl(t,"")}ngOnDestroy(){this.cleanUpCustomControls()}initializeControls(){var e;const t=new Map(Array.from(Xn(this.rdpProps).entries()).map(([e,{value:t}])=>[e,eo(t)]));Object.entries(mo(this.store,t)).forEach(([e,t])=>{var n;return null===(n=this.form)||void 0===n?void 0:n.addControl(e,t,{emitEvent:!1})}),this.formControlsInitialized.emit(null===(e=this.form)||void 0===e?void 0:e.getRawValue())}initializeCustomControls(){this.store.forEach(e=>{const t=this.form.get(e.formControlName),n=null==t?void 0:t.value;this.isCustomValue(n,e)&&this.addCustomControl(e,n)})}cleanUpCustomControls(){this.store.forEach(e=>{const t=e.manualFormControlName;t&&this.form.contains(t)&&(this.form.removeControl(t,{emitEvent:!1}),e.selfReference=void 0)})}isCustomValue(e,t){return![oo.NotConfigured,oo.NotSet,oo.EmptyValue,oo.AllValues].includes(e)&&!!t.relatedControlForSelectedOption}addCustomControl(e,t){var n,o,r;e.selfReference={...e},e.manualFormControlName=`${e.formControlName}_manual`,this.form.contains(e.manualFormControlName)||this.form.addControl(e.manualFormControlName,new P.NI(t));const i=this.form.get(e.manualFormControlName);i&&(null===(o=null===(n=e.relatedControlForSelectedOption)||void 0===n?void 0:n.validators)||void 0===o?void 0:o.length)&&(i.setValidators(e.relatedControlForSelectedOption.validators),i.updateValueAndValidity({emitEvent:!1}),i.invalid&&i.markAsTouched()),null===(r=this.form.get(e.formControlName))||void 0===r||r.patchValue(oo.NotConfigured,{emitEvent:!1})}removeCustomControl(e){e.selfReference=void 0;const t=e.manualFormControlName;t&&this.form.contains(t)&&this.form.removeControl(t)}cleanUpCameraRedirectionControl(){this.cleanUpCustomRedirectionControl(this.cameraRedirectionControl,"camera_redirection")}cleanUpDriveStorageRedirectionControl(){this.cleanUpCustomRedirectionControl(this.driveStorageRedirectionControl,"drive_storage_redirection")}cleanUpUsbDevicesRedirectionControl(){this.cleanUpCustomRedirectionControl(this.usbDevicesRedirectionControl,"usb_device_redirection")}cleanUpCustomRedirectionControl(e,t){if(e.value===oo.NotSet||e.value===oo.EmptyValue){const e=this.store.find(e=>e.formControlName===t);e&&(e.selfReference=void 0)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-device-redirection-tab"]],inputs:{form:"form",rdpProps:"rdpProps"},outputs:{formControlsInitialized:"formControlsInitialized"},decls:8,vars:3,consts:[[3,"formGroup"],[1,"mb-3"],[4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],[1,"label",3,"for"],["icon","info-outline",3,"nbTooltip"],[1,"col-md-9"],["fullWidth","",3,"id","formControlName",4,"ngIf"],["type","text","nbInput","","fullWidth","",3,"id","placeholder","formControlName",4,"ngIf"],["fullWidth","",3,"id","formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","nbInput","","fullWidth","",3,"id","placeholder","formControlName"],["fullWidth","",3,"id","formControlName","selectedChange",4,"ngIf"],["class","mt-2","nbInput","","fullWidth","",3,"formControlName","placeholder","id",4,"ngIf"],[4,"ngIf"],["fullWidth","",3,"id","formControlName","selectedChange"],["nbInput","","fullWidth","",1,"mt-2",3,"formControlName","placeholder","id"],[1,"form-control-error"]],template:function(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0,0),u["\u0275\u0275elementStart"](1,"h6",1),u["\u0275\u0275text"](2,"Audio and video"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](3,Ao,9,5,"ng-container",2),u["\u0275\u0275element"](4,"hr"),u["\u0275\u0275elementStart"](5,"h6",1),u["\u0275\u0275text"](6,"Local devices and resources"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](7,Fo,11,7,"ng-container",2),u["\u0275\u0275elementContainerEnd"]()),2&e&&(u["\u0275\u0275property"]("formGroup",t.form),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngForOf",t.audioAndVideoControlsGroup),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngForOf",t.localDevicesAndResourcesControlsGroup))},directives:[P.JL,P.sg,o.sg,r.fMN,r.jNv,o.O5,r.rs,P.JJ,P.u,r.q51,r.h8i,P.Fj],styles:["[_nghost-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1rem}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}"]}),e})();function Do(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",12),u["\u0275\u0275text"](1,"*"),u["\u0275\u0275elementEnd"]())}function Go(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",15),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e.value),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.title," ")}}function Uo(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"nb-select",13),u["\u0275\u0275listener"]("selectedChange",function(t){u["\u0275\u0275restoreView"](e);const n=u["\u0275\u0275nextContext"]().$implicit;return u["\u0275\u0275nextContext"]().selectedChangeHandler(t,n)}),u["\u0275\u0275template"](1,Go,2,2,"nb-option",14),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275property"]("id",e.key)("formControlName",e.formControlName),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.options)}}function Lo(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"textarea",16),u["\u0275\u0275text"](1,"      "),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275property"]("formControlName",e.manualFormControlName)("placeholder",e.relatedControlForSelectedOption.placeholder)("id",e.relatedControlForSelectedOption.key)}}function $o(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"div",17),u["\u0275\u0275text"](2," The characters \\ : ; must be escaped with a backslash character '\\', "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",17),u["\u0275\u0275text"](4," and value cannot end with a backslash. e.g. 'C:' should be 'C\\:' "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function zo(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,$o,5,0,"ng-container",10),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().$implicit,t=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(null==t.form.controls||null==t.form.controls[e.manualFormControlName]||null==t.form.controls[e.manualFormControlName].errors?null:t.form.controls[e.manualFormControlName].errors.endsWithBackslash)||(null==t.form.controls||null==t.form.controls[e.manualFormControlName]||null==t.form.controls[e.manualFormControlName].errors?null:t.form.controls[e.manualFormControlName].errors.invalidPattern))}}function Bo(e,t){if(1&e&&u["\u0275\u0275element"](0,"input",18),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;let t;u["\u0275\u0275property"]("id",e.key)("placeholder",null!==(t=e.placeholder)&&void 0!==t?t:"")("formControlName",e.formControlName)("type",e.uiType)}}function Wo(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",17),u["\u0275\u0275text"](2,"This field is required."),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function jo(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",2),u["\u0275\u0275elementStart"](1,"div",3),u["\u0275\u0275elementStart"](2,"label",4),u["\u0275\u0275template"](3,Do,2,0,"span",5),u["\u0275\u0275elementStart"](4,"span"),u["\u0275\u0275text"](5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](6,"nb-icon",6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",7),u["\u0275\u0275template"](8,Uo,2,3,"nb-select",8),u["\u0275\u0275template"](9,Lo,2,3,"textarea",9),u["\u0275\u0275template"](10,zo,2,1,"ng-container",10),u["\u0275\u0275template"](11,Bo,1,4,"input",11),u["\u0275\u0275template"](12,Wo,3,0,"ng-container",10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("for",e.key),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.isRequired),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](e.label),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("nbTooltip",e.tooltip),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf","select"===e.uiType),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.selfReference&&e.relatedControlForSelectedOption.key===e.key),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.selfReference&&e.relatedControlForSelectedOption.key===e.key),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf","select"!==e.uiType),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(null==n.form.controls||null==n.form.controls[e.formControlName]||null==n.form.controls[e.formControlName].errors?null:n.form.controls[e.formControlName].errors.required)&&(null==n.form.controls||null==n.form.controls[e.formControlName]?null:n.form.controls[e.formControlName].touched))}}let qo=(()=>{class e{constructor(){this.formControlsInitialized=new u.EventEmitter,this.store=co}get selectedMonitorsControl(){return this.form.get("selected_monitors")}ngOnInit(){var e;this.rdpProps&&(this.initializeControls(),this.cleanUpCustomControls(),this.initializeCustomControls(),this.formControlsInitialized.emit(null===(e=this.form)||void 0===e?void 0:e.getRawValue()),setTimeout(()=>{this.initializeUseMultiMonitorsSettings(),this.cleanUpSelectedMonitorsControl()}))}selectedChangeHandler(e,t){var n;(null===(n=null==t?void 0:t.disableRelatedKeys)||void 0===n?void 0:n.length)?1!==e?this.handleDisableControls(t):this.handleEnableControls(t):e!==oo.NotConfigured?this.removeCustomControl(t):this.addCustomControl(t,"")}ngOnDestroy(){this.cleanUpCustomControls()}initializeControls(){var e;const t=new Map(Array.from(Xn(this.rdpProps).entries()).map(([e,{value:t}])=>[e,eo(t)]));Object.entries(mo(this.store,t)).forEach(([e,t])=>{var n;return null===(n=this.form)||void 0===n?void 0:n.addControl(e,t,{emitEvent:!1})}),this.formControlsInitialized.emit(null===(e=this.form)||void 0===e?void 0:e.getRawValue())}initializeUseMultiMonitorsSettings(){const e=this.store.find(e=>"use multimon"===e.key);if(!e)return;const t=this.form.get(e.formControlName),n=null==t?void 0:t.value;n===oo.NotSet||0===n?this.handleDisableControls(e):this.handleEnableControls(e)}handleDisableControls(e){this.processControls(e.disableRelatedKeys,e=>{var t,n;null===(t=this.form.get(e))||void 0===t||t.patchValue(oo.NotSet),null===(n=this.form.get(e))||void 0===n||n.disable()}),this.updateRegistry(e.disableRelatedKeys,e=>(e.selfReference=void 0,e))}handleEnableControls(e){this.processControls(e.disableRelatedKeys,e=>{var t;return null===(t=this.form.get(e))||void 0===t?void 0:t.enable()})}initializeCustomControls(){this.store.forEach(e=>{const t=this.form.get(e.formControlName),n=null==t?void 0:t.value;this.isCustomValue(n,e)&&this.addCustomControl(e,n)})}cleanUpCustomControls(){this.store.forEach(e=>{const t=e.manualFormControlName;t&&this.form.contains(t)&&(this.form.removeControl(t,{emitEvent:!1}),e.selfReference=void 0)})}processControls(e,t){null==e||e.forEach(e=>{var n;const o=null===(n=this.store.find(t=>t.key===e))||void 0===n?void 0:n.formControlName;o&&t(o)})}updateRegistry(e,t){this.store=this.store.map(n=>e.includes(n.key)?t(n):n)}isCustomValue(e,t){return![oo.NotConfigured,oo.NotSet,oo.EmptyValue,oo.AllValues].includes(e)&&!!t.relatedControlForSelectedOption}addCustomControl(e,t){var n,o,r;e.selfReference={...e},e.manualFormControlName=`${e.formControlName}_manual`,this.form.contains(e.manualFormControlName)||this.form.addControl(e.manualFormControlName,new P.NI(t));const i=this.form.get(e.manualFormControlName);i&&(null===(o=null===(n=e.relatedControlForSelectedOption)||void 0===n?void 0:n.validators)||void 0===o?void 0:o.length)&&(i.setValidators(e.relatedControlForSelectedOption.validators),i.updateValueAndValidity({emitEvent:!1}),i.invalid&&i.markAsTouched()),null===(r=this.form.get(e.formControlName))||void 0===r||r.patchValue(oo.NotConfigured,{emitEvent:!1})}removeCustomControl(e){e.selfReference=void 0;const t=e.manualFormControlName;t&&this.form.contains(t)&&this.form.removeControl(t)}cleanUpSelectedMonitorsControl(){if(this.selectedMonitorsControl.value===oo.NotSet||this.selectedMonitorsControl.value===oo.EmptyValue){const e=this.store.find(e=>"selected_monitors"===e.formControlName);e&&(e.selfReference=void 0)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-display-settings-tab"]],inputs:{form:"form",rdpProps:"rdpProps"},outputs:{formControlsInitialized:"formControlsInitialized"},decls:2,vars:2,consts:[[3,"formGroup"],["class","form-group row",4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"col-md-3","d-flex","align-items-center","justify-content-between"],[1,"label",3,"for"],["class","asterisk",4,"ngIf"],["icon","info-outline",3,"nbTooltip"],[1,"col-md-9"],["fullWidth","",3,"id","formControlName","selectedChange",4,"ngIf"],["class","mt-2","nbInput","","fullWidth","",3,"formControlName","placeholder","id",4,"ngIf"],[4,"ngIf"],["min","0","nbInput","","fullWidth","",3,"id","placeholder","formControlName","type",4,"ngIf"],[1,"asterisk"],["fullWidth","",3,"id","formControlName","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["nbInput","","fullWidth","",1,"mt-2",3,"formControlName","placeholder","id"],[1,"form-control-error"],["min","0","nbInput","","fullWidth","",3,"id","placeholder","formControlName","type"]],template:function(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0,0),u["\u0275\u0275template"](1,jo,13,9,"div",1),u["\u0275\u0275elementContainerEnd"]()),2&e&&(u["\u0275\u0275property"]("formGroup",t.form),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",t.store))},directives:[P.JL,P.sg,o.sg,o.O5,r.fMN,r.jNv,r.rs,P.JJ,P.u,r.q51,r.h8i,P.Fj],styles:["[_nghost-%COMP%]   .asterisk[_ngcontent-%COMP%]{color:var(--danger);margin-right:.5em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}"]}),e})();function Ho(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=t.last;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" ",e,"",n?"":", "," ")}}function Jo(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1," [ "),u["\u0275\u0275template"](2,Ho,2,2,"ng-container",9),u["\u0275\u0275text"](3," ] "),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngForOf",null==e.formControl.errors||null==e.formControl.errors.invalidRdp?null:e.formControl.errors.invalidRdp.invalidParts)}}function Qo(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"div",8),u["\u0275\u0275text"](2," These RDP properties are invalid, please fix them and try again. "),u["\u0275\u0275template"](3,Jo,4,1,"ng-container",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",null==e.formControl.errors||null==e.formControl.errors.invalidRdp||null==e.formControl.errors.invalidRdp.invalidParts?null:e.formControl.errors.invalidRdp.invalidParts.length)}}let Ko=(()=>{class e{constructor(){this.destroyed$=new a.xQ,this.rdpPropsChanged=new u.EventEmitter,this.formControl=new P.NI("",[e=>{const t=e.value;if(!t)return null;let n=[],o="",r=!1;for(let a=0;a<t.length;a++){const e=t[a];r?(o+=`\\${e}`,r=!1):"\\"===e?r=!0:";"===e?(o&&(n=[...n,o]),o=""):o+=e}o&&n.push(o);const i=n.filter(e=>!/^([^:]+):([a-z]):(.*)$/i.test(e));return i.length>0?{invalidRdp:{invalidParts:i}}:null}])}set rdpForAdvancedTab(e){e&&this.formControl.setValue(e,{emitEvent:!1})}ngOnInit(){this.formControl.setValue(this.rdpProps,{emitEvent:!1}),this.formControl.valueChanges.pipe((0,c.R)(this.destroyed$)).subscribe(e=>this.rdpPropsChanged.emit(e))}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-advanced-tab"]],inputs:{rdpProps:"rdpProps",rdpForAdvancedTab:"rdpForAdvancedTab"},outputs:{rdpPropsChanged:"rdpPropsChanged"},decls:11,vars:2,consts:[[1,"form-group","row"],[1,"col-md-3","d-flex","justify-content-between"],["for","rdp_props",1,"label"],["icon","info-outline","nbTooltip","\n        Specifies custom RDP properties, such as multi-monitor support or audio redirection, to optimize user experience.\n        Use separators (;i; or ;s;) to avoid errors when adding properties, for example: audiocapturemode:i:1;audiomode:i:0;.\n      "],[1,"col-md-9"],["href","https://learn.microsoft.com/en-us/azure/virtual-desktop/rdp-properties","target","_blank",1,"d-flex","mb-3"],["id","rdp_props","nbInput","","fullWidth","",3,"formControl"],[4,"ngIf"],[1,"form-control-error"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"label",2),u["\u0275\u0275text"](3,"RDP Properties"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](4,"nb-icon",3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",4),u["\u0275\u0275elementStart"](6,"a",5),u["\u0275\u0275text"](7," Learn more about RDP properties here "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](8,"hr"),u["\u0275\u0275element"](9,"textarea",6),u["\u0275\u0275template"](10,Qo,4,1,"ng-container",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](9),u["\u0275\u0275property"]("formControl",t.formControl),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==t.formControl.errors?null:t.formControl.errors.invalidRdp))},directives:[r.fMN,r.jNv,r.h8i,P.Fj,P.JJ,P.oH,o.O5,o.sg],styles:["[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none;min-height:20em;max-height:20em}[_nghost-%COMP%]   .form-control-error[_ngcontent-%COMP%]{font-size:.8em;color:var(--danger)}"]}),e})(),Xo=(()=>{class e{constructor(){this.destroyed$=new a.xQ,this.isCreateMode=!1,this.isFormClearedByEmptyRdpProps=!1,this.customProps=new Map,this.rdpPropertiesChanged=new u.EventEmitter,this.rdpFormHasChanges=new u.EventEmitter,this.isRdpFormValid=new u.EventEmitter,this.form=new P.cw({connectionInformation:new P.cw({}),sessionBehavior:new P.cw({}),deviceRedirection:new P.cw({}),displaySettings:new P.cw({})}),this.hasFormChanges=!1}ngOnInit(){var e;this.isCreateMode=null===this.rdpProperties,this.rdpProperties=null!==(e=this.rdpProperties)&&void 0!==e?e:io,this.extractCustomProps(Xn(this.rdpProperties)),this.initFormValueChangesHandler(),this.initFormValidityChangeHandler()}childFormControlsInitialized(e,t){this.initialFormValues={...this.initialFormValues,[t]:e}}tabChanged(){this.rdpForAdvancedTab=this.isFormClearedByEmptyRdpProps&&this.isCreateMode?Yn(this.rdpPropsCopy,this.serializeFormToRdp()):!this.isFormClearedByEmptyRdpProps||this.isCreateMode?this.rdpProperties:Yn(this.rdpProperties,io)}advancedRdpPropsChanged(e){e||!this.isCreateMode?e||this.isCreateMode?this.processUpdatedRdpString(e):this.handleEmptyRdpInEditMode():this.handleEmptyRdpInCreateMode()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}initializeControls(e){this.removeControls();const t=new Map(Array.from(Xn(e).entries()).map(([e,{value:t}])=>[e,eo(t)])),n=mo(ao,t),o=mo(lo,t),r=mo(so,t),i=mo(co,t);this.form.addControl("connectionInformation",new P.cw(n)),this.form.addControl("sessionBehavior",new P.cw(o)),this.form.addControl("deviceRedirection",new P.cw(r)),this.form.addControl("displaySettings",new P.cw(i))}removeControls(){this.form.removeControl("connectionInformation"),this.form.removeControl("sessionBehavior"),this.form.removeControl("deviceRedirection"),this.form.removeControl("displaySettings")}serializeFormToRdp(){var e,t,n,o;const r=[],i=(e,t)=>{t.forEach(t=>{const n=null==e?void 0:e.get(t.formControlName),o=null==e?void 0:e.get(`${t.formControlName}_manual`);if(n){let e=n.value;if(o&&o.value&&o.value!==oo.NotConfigured&&(e=o.value),e===oo.NotSet)return;switch(t.type){case"i":r.push(`${t.key}:i:${e}`);break;case"s":r.push(`${t.key}:s:${e}`)}}})};i(null===(e=this.form.controls)||void 0===e?void 0:e.connectionInformation,ao),i(null===(t=this.form.controls)||void 0===t?void 0:t.sessionBehavior,lo),i(null===(n=this.form.controls)||void 0===n?void 0:n.deviceRedirection,so),i(null===(o=this.form.controls)||void 0===o?void 0:o.displaySettings,co);for(const[a,{type:l,value:s}]of this.customProps.entries())r.push(`${a}:${l}:${to(s)}`);return r.join(";")}handleEmptyRdpInCreateMode(){this.isFormClearedByEmptyRdpProps=!0,this.rdpPropsCopy=this.serializeFormToRdp(),this.extractCustomProps(Xn(oo.EmptyValue)),this.initializeControls(oo.EmptyValue)}handleEmptyRdpInEditMode(){this.isFormClearedByEmptyRdpProps=!0,this.extractCustomProps(Xn(oo.EmptyValue)),this.initializeControls(oo.EmptyValue)}processUpdatedRdpString(e){this.extractCustomProps(Xn(e)),this.initializeControls(e)}initFormValueChangesHandler(){this.form.valueChanges.pipe((0,c.R)(this.destroyed$)).subscribe(e=>{this.hasFormChanges=k(this.initialFormValues,e).hasDifference,this.isFormClearedByEmptyRdpProps&&this.rdpPropsCopy?this.handleFormChangesWithBackup():this.updateRdpFromForm()})}handleFormChangesWithBackup(){this.rdpPropertiesChanged.emit(this.rdpProperties),this.rdpFormHasChanges.emit(this.hasFormChanges)}updateRdpFromForm(){this.rdpProperties=this.serializeFormToRdp(),this.rdpPropertiesChanged.emit(this.rdpProperties),this.rdpFormHasChanges.emit(this.hasFormChanges)}extractCustomProps(e){this.customProps.clear();for(const[t,{type:n,value:o}]of e.entries())po.includes(t)||this.customProps.set(t,{type:n,value:o})}initFormValidityChangeHandler(){this.form.statusChanges.pipe((0,uo.O)("VALID"),(0,c.R)(this.destroyed$)).subscribe(e=>this.isRdpFormValid.emit("VALID"===e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-rdp-props-tab"]],inputs:{rdpProperties:"rdpProperties"},outputs:{rdpPropertiesChanged:"rdpPropertiesChanged",rdpFormHasChanges:"rdpFormHasChanges",isRdpFormValid:"isRdpFormValid"},decls:15,vars:14,consts:[[3,"changeTab"],["tabTitle","Connection information","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["connectionInformationTab",""],[3,"form","rdpProps","formControlsInitialized"],["tabTitle","Session behaviour"],["tabTitle","Device redirection","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["deviceRedirectionTab",""],["tabTitle","Display settings","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["displaySettingsTab",""],["tabTitle","Advanced","badgePosition","center start","badgeStatus","danger",3,"badgeDot"],["advancedTab",""],[3,"rdpProps","rdpForAdvancedTab","rdpPropsChanged"]],template:function(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-tabset",0),u["\u0275\u0275listener"]("changeTab",function(){return t.tabChanged()}),u["\u0275\u0275elementStart"](1,"nb-tab",1,2),u["\u0275\u0275elementStart"](3,"ngx-connection-information-tab",3),u["\u0275\u0275listener"]("formControlsInitialized",function(e){return t.childFormControlsInitialized(e,"connectionInformation")}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"nb-tab",4),u["\u0275\u0275elementStart"](5,"ngx-session-behavior-tab",3),u["\u0275\u0275listener"]("formControlsInitialized",function(e){return t.childFormControlsInitialized(e,"sessionBehavior")}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"nb-tab",5,6),u["\u0275\u0275elementStart"](8,"ngx-device-redirection-tab",3),u["\u0275\u0275listener"]("formControlsInitialized",function(e){return t.childFormControlsInitialized(e,"deviceRedirection")}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"nb-tab",7,8),u["\u0275\u0275elementStart"](11,"ngx-display-settings-tab",3),u["\u0275\u0275listener"]("formControlsInitialized",function(e){return t.childFormControlsInitialized(e,"displaySettings")}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"nb-tab",9,10),u["\u0275\u0275elementStart"](14,"ngx-advanced-tab",11),u["\u0275\u0275listener"]("rdpPropsChanged",function(e){return t.advancedRdpPropsChanged(e)}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275reference"](2),n=u["\u0275\u0275reference"](7),o=u["\u0275\u0275reference"](10),r=u["\u0275\u0275reference"](13);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("badgeDot",!e.active&&(null==t.form.controls||null==t.form.controls.connectionInformation?null:t.form.controls.connectionInformation.invalid)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("form",t.form.controls.connectionInformation)("rdpProps",t.rdpProperties),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("form",t.form.controls.sessionBehavior)("rdpProps",t.rdpProperties),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("badgeDot",!n.active&&(null==t.form.controls||null==t.form.controls.deviceRedirection?null:t.form.controls.deviceRedirection.invalid)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("form",t.form.controls.deviceRedirection)("rdpProps",t.rdpProperties),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("badgeDot",!o.active&&(null==t.form.controls||null==t.form.controls.displaySettings?null:t.form.controls.displaySettings.invalid)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("form",t.form.controls.displaySettings)("rdpProps",t.rdpProperties),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("badgeDot",!r.active&&(null==t.form.controls||null==t.form.controls.advanced?null:t.form.controls.advanced.invalid)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("rdpProps",t.rdpProperties)("rdpForAdvancedTab",t.rdpForAdvancedTab)}},directives:[r.kyn,r.TR4,Co,Io,Ro,qo,Ko],styles:[""]}),e})();var Yo=n(73556);let Zo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[o.ez,an,r.zyh,r.IIj,r.uuI,ln,r.KdK,r.T2N,r.EoG,P.UX,r.nKr,r.MfT,r.rgH,Wn,r.YNG,P.u5,r.CG_,r.COg,r.AE1,r.V7y,Yo.A0]]}),e})();u["\u0275\u0275setComponentScope"](L,[r.Asz,r.Q7R,r.ndF,o.O5,r.yKW,r.fMN,r.kyn,P.JL,P.sg,r.TR4,Bn,Xo,Qn,zt,r.XWE,r.DPz],[o.Ov])}}]);