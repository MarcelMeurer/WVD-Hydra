!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(self.webpackChunkngx_admin=self.webpackChunkngx_admin||[]).push([[682],{50682:function(t,r,o){"use strict";o.r(r),o.d(r,{RbacManagementModule:function(){return V}});var i=o(38583),a=o(3679),c=o(9857),l=o(47349),s=o(92340),m=o(37716),d=o(91841),p=function(){var t=function(){function t(n){e(this,t),this.http=n}return n(t,[{key:"getRbacAccessViews",value:function(){return this.http.get("".concat(s.N.apiUrl,"/data/rbacs")).pipe((0,l.d)({refCount:!0}))}},{key:"getScopes",value:function(){return this.http.get("".concat(s.N.apiUrl,"/data/rbacs/scopes")).pipe((0,l.d)({refCount:!0}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(m["\u0275\u0275inject"](d.eN))},t.\u0275prov=m["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),u=o(99763),f=o(79765),b=o(46782),h=o(16112),v=o(27861);function g(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"p"),m["\u0275\u0275elementStart"](1,"b"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](3,"br"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.name),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"](" ",n.description," ")}}function S(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"nb-option",17),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275property"]("value",n.SceneHpIdf),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",n.Scope," ")}}function w(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"nb-option",17),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275property"]("value",n.id),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function y(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275element"](2,"input",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275elementStart"](4,"nb-select",11),m["\u0275\u0275template"](5,S,2,2,"nb-option",12),m["\u0275\u0275pipe"](6,"async"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td"),m["\u0275\u0275elementStart"](8,"nb-select",13),m["\u0275\u0275template"](9,w,2,2,"nb-option",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"td"),m["\u0275\u0275element"](11,"input",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"td"),m["\u0275\u0275elementStart"](13,"button",15),m["\u0275\u0275listener"]("click",function(){var e=m["\u0275\u0275restoreView"](n).index;return m["\u0275\u0275nextContext"]().remove(e)}),m["\u0275\u0275element"](14,"nb-icon",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var r=t.index,o=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275classProp"]("is-invalid","INVALID"===o.formRbacViews.controls[r].get("UpnOrGroupName").status&&o.isFormSubmitted),m["\u0275\u0275propertyInterpolate1"]("id","dc-UpnOrGroupName",r,""),m["\u0275\u0275property"]("formControl",o.formRbacViews.controls[r].get("UpnOrGroupName")),m["\u0275\u0275advance"](2),m["\u0275\u0275classProp"]("is-invalid","INVALID"===o.formRbacViews.controls[r].get("SceneHpIdf").status&&o.isFormSubmitted),m["\u0275\u0275property"]("formControl",o.formRbacViews.controls[r].get("SceneHpIdf")),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",m["\u0275\u0275pipeBind1"](6,14,o.scopes$)),m["\u0275\u0275advance"](3),m["\u0275\u0275classProp"]("is-invalid","INVALID"===o.formRbacViews.controls[r].get("Role").status&&o.isFormSubmitted),m["\u0275\u0275property"]("formControl",o.formRbacViews.controls[r].get("Role")),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",o.rolesViewList),m["\u0275\u0275advance"](2),m["\u0275\u0275propertyInterpolate1"]("id","dc-Note",r,""),m["\u0275\u0275property"]("formControl",o.formRbacViews.controls[r].get("Note"))}}var I,N,E=[{path:"",component:(I=function(){function t(n,r,o){e(this,t),this.rbacManagementService=n,this.nbToastrService=r,this.actionService=o,this.destroyed$=new f.xQ,this.form=new a.cw({rbacViews:new a.Oe([])}),this.rolesViewList=h.ed,this.scopes$=this.rbacManagementService.getScopes(),this.isFormSubmitted=!1}return n(t,[{key:"formRbacViews",get:function(){return this.form.get("rbacViews")}},{key:"ngOnInit",value:function(){var e=this;this.rbacManagementService.getRbacAccessViews().pipe((0,b.R)(this.destroyed$)).subscribe(function(t){return t.forEach(function(t){return e.formRbacViews.push(e.createDisplayAccessViewGroup(t))})})}},{key:"add",value:function(){this.formRbacViews.push(this.createAccessViewGroup(new h.DA))}},{key:"remove",value:function(e){this.formRbacViews.removeAt(e)}},{key:"submit",value:function(){this.isFormSubmitted=!0,this.form.invalid?this.nbToastrService.danger("Please check your configuration. Some properties or selections are not valid or missing. Check the red-cross-marked properties.","Form validation error"):this.actionService.sendAction("scenes/00000000-0000-0000-0000-000000000000/SceneStoreRoleBasedAccesses",this.formRbacViews.getRawValue(),"Storing role-based access roles","").subscribe()}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"createDisplayAccessViewGroup",value:function(e){return new a.cw({Id:new a.NI(e.Id),UpnOrGroupName:new a.NI(e.UpnOrGroupName),GroupId:new a.NI(e.GroupId),SceneId:new a.NI(e.SceneId),HostPoolId:new a.NI(e.HostPoolId),Role:new a.NI(e.Role),SceneHpIdf:new a.NI(e.SceneHpIdf),Note:new a.NI(e.Note)})}},{key:"createAccessViewGroup",value:function(e){return new a.cw({UpnOrGroupName:new a.NI(e.UpnOrGroupName),Role:new a.NI(e.Role),SceneHpIdf:new a.NI(e.SceneHpIdf),Note:new a.NI(e.Note)})}}]),t}(),I.\u0275fac=function(e){return new(e||I)(m["\u0275\u0275directiveInject"](p),m["\u0275\u0275directiveInject"](c.quB),m["\u0275\u0275directiveInject"](v.c))},I.\u0275cmp=m["\u0275\u0275defineComponent"]({type:I,selectors:[["ngx-rbac-management"]],decls:38,vars:3,consts:[[1,"row"],[1,"col-md-12"],[4,"ngFor","ngForOf"],[3,"formGroup","ngSubmit"],[1,"table-responsive"],["formArrayName","rbacViews",1,"table","table-bordered","table-striped"],["type","button","nbButton","",3,"click"],["icon","plus-square"],[1,"d-flex","justify-content-end"],["type","submit","nbButton","","status","primary"],["type","text","nbInput","","fullWidth","","placeholder","user@contoso.com (or a group object id)","maxlength","256","required","","minlength","1","nbTooltip","Enter the UPN for the user (user@contoso.com) or a group object id (e.g. 5669456b-5b86-4d7c-9c4b-d287bf7c19bb)",1,"form-control",3,"id","formControl"],["fullWidth","","nbTooltip","Scope",1,"form-control",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["fullWidth","","nbTooltip","Role",1,"form-control",3,"formControl"],["type","text","nbInput","","fullWidth","","placeholder","Add a note","maxlength","256","minlength","1","nbTooltip","Note",1,"form-control",3,"id","formControl"],["type","button","nbButton","","nbTooltip","Remove",3,"click"],["icon","close-square"],[3,"value"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"nb-card"),m["\u0275\u0275elementStart"](3,"nb-card-header"),m["\u0275\u0275elementStart"](4,"h1"),m["\u0275\u0275text"](5,"Role Based Access"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"nb-card-body"),m["\u0275\u0275elementStart"](7,"p"),m["\u0275\u0275text"](8,"Use role-based access to give users or groups permission to this platform. Name the user by their Azure login name (UPN=user principal name, e.g., user@contoso.com), assign the scope and a role. A scope can be a single tenant or a specific host pool in a tenant. Alternatively: Instead of entering a single UPN, the object id of an Entra ID / Azure AD group can be entered to assign a role to this group. A object id typical looks like this: 5669456b-5b86-4d7c-9c4b-d287bf7c19bb. "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"h6"),m["\u0275\u0275text"](10,"Available roles:"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](11,g,5,2,"p",2),m["\u0275\u0275elementStart"](12,"form",3),m["\u0275\u0275listener"]("ngSubmit",function(){return t.submit()}),m["\u0275\u0275elementStart"](13,"div",4),m["\u0275\u0275elementStart"](14,"table",5),m["\u0275\u0275elementStart"](15,"thead"),m["\u0275\u0275elementStart"](16,"tr"),m["\u0275\u0275elementStart"](17,"th"),m["\u0275\u0275text"](18,"Upn or group object id"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"th"),m["\u0275\u0275text"](20,"Scope"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"th"),m["\u0275\u0275text"](22,"Role"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"th"),m["\u0275\u0275text"](24,"Note"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"th"),m["\u0275\u0275text"](26,"Remove"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"tbody"),m["\u0275\u0275template"](28,y,15,16,"tr",2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](29,"br"),m["\u0275\u0275elementStart"](30,"button",6),m["\u0275\u0275listener"]("click",function(){return t.add()}),m["\u0275\u0275element"](31,"nb-icon",7),m["\u0275\u0275text"](32," Add "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](33,"hr"),m["\u0275\u0275element"](34,"br"),m["\u0275\u0275elementStart"](35,"div",8),m["\u0275\u0275elementStart"](36,"button",9),m["\u0275\u0275text"](37,"Save"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](11),m["\u0275\u0275property"]("ngForOf",t.rolesViewList),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("formGroup",t.form),m["\u0275\u0275advance"](16),m["\u0275\u0275property"]("ngForOf",t.formRbacViews.controls))},directives:[c.Asz,c.ndF,c.yKW,i.sg,a._Y,a.JL,a.sg,a.CE,c.DPz,c.fMN,c.h8i,a.Fj,a.nD,a.Q7,a.wO,c.jNv,a.JJ,a.oH,c.rs,c.q51],pipes:[i.Ov],styles:["[_nghost-%COMP%]   nb-select[_ngcontent-%COMP%]{padding:0;border:0}"]}),I)}],x=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=m["\u0275\u0275defineInjector"]({imports:[[u.Bz.forChild(E)],u.Bz]}),t}(),V=((N=function t(){e(this,t)}).\u0275fac=function(e){return new(e||N)},N.\u0275mod=m["\u0275\u0275defineNgModule"]({type:N}),N.\u0275inj=m["\u0275\u0275defineInjector"]({providers:[p],imports:[[i.ez,x,c.zyh,a.u5,c.nKr,c.rgH,c.IIj,c.T2N,c.KdK,a.UX]]}),N)}}])}();