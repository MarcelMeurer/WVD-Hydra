(self.webpackChunkngx_admin=self.webpackChunkngx_admin||[]).push([[106],{39538:function(e,t,n){"use strict";n.d(t,{E:function(){return r}});var o=n(92340),i=n(47349),a=n(37716),l=n(91841);let r=(()=>{class e{constructor(e){this.httpClient=e,this.apiUrl=`${o.N.apiUrl}/data/views/scenes`}getViewScenes(){return this.httpClient.get(`${this.apiUrl}`).pipe((0,i.d)({refCount:!0,bufferSize:1}))}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](l.eN))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},75106:function(e,t,n){"use strict";n.r(t),n.d(t,{ImageBuilderModule:function(){return Se}});var o=n(38583),i=n(10264),a=n(37716);let l=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-image-builder"]],decls:1,vars:0,template:function(e,t){1&e&&a["\u0275\u0275element"](0,"router-outlet")},directives:[i.lC],styles:[""]}),e})();var r=n(79765),s=n(46782),d=n(11173),m=n(85902),c=n(27861),g=n(39538),p=n(91841),u=n(14625),h=n(3679),f=n(98774),S=n(99588);const b=["saveSettings"];function v(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"nb-option",13),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275property"]("value",e.Id),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"]("",e.DisplayName," ")}}const y=function(e){return{"is-invalid":e}};function C(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"input",44,45),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).model.ImageName=t}),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275reference"](1),t=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("disabled",t.model.ImageAutoNaming)("ngModel",t.model.ImageName)("ngClass",a["\u0275\u0275pureFunction1"](3,y,t.submitted&&e.invalid))}}function x(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"nb-option",13),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275property"]("value",e.Id),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",e.DisplayName," ")}}function I(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",5),a["\u0275\u0275elementStart"](1,"label",46),a["\u0275\u0275text"](2,"Hybrid Imaging Location"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"nb-select",47),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).model.HybridImagingCustomLocation=t})("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).onHybridCustomLocationChange(t)}),a["\u0275\u0275elementStart"](4,"nb-option",48),a["\u0275\u0275text"](5,"Azure"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,x,2,2,"nb-option",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngModel",e.model.HybridImagingCustomLocation),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",e.CustomLocationsWithProxy)}}function E(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"div",0),a["\u0275\u0275elementStart"](2,"div",17),a["\u0275\u0275elementStart"](3,"p"),a["\u0275\u0275text"](4,"Service Account, optional: Enter a service account to use in scripts."),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",0),a["\u0275\u0275elementStart"](6,"div",49),a["\u0275\u0275elementStart"](7,"div",5),a["\u0275\u0275elementStart"](8,"label",50),a["\u0275\u0275text"](9,"Service Account Name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",29),a["\u0275\u0275elementStart"](11,"input",51,52),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).model.ServiceDomainUser=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"div",49),a["\u0275\u0275elementStart"](14,"div",5),a["\u0275\u0275elementStart"](15,"label",53),a["\u0275\u0275text"](16,"Service Account Password"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"div",29),a["\u0275\u0275elementStart"](18,"input",54,55),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).model.ServiceDomainPwEncrypted=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275reference"](12),t=a["\u0275\u0275reference"](19),n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](11),a["\u0275\u0275property"]("ngModel",n.model.ServiceDomainUser)("ngClass",a["\u0275\u0275pureFunction1"](4,y,n.submitted&&e.invalid)),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngModel",n.model.ServiceDomainPwEncrypted)("ngClass",a["\u0275\u0275pureFunction1"](6,y,n.submitted&&t.invalid))}}function M(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"nb-option",13),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275property"]("value",e.Id),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",e.Name," ")}}function w(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"nb-option",13),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275property"]("value",e.name),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",e.regionalDisplayName," ")}}function T(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",5),a["\u0275\u0275elementStart"](1,"label",67),a["\u0275\u0275text"](2,"Locations"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"div",29),a["\u0275\u0275elementStart"](4,"nb-select",68),a["\u0275\u0275listener"]("selectedChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](3).model.SharedImageGalleryDefinitionIdRegions=t}),a["\u0275\u0275template"](5,w,2,2,"nb-option",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"](3);a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("selected",e.model.SharedImageGalleryDefinitionIdRegions),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",e.AllRegions)}}function V(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"nb-accordion",0),a["\u0275\u0275elementStart"](1,"nb-accordion-item"),a["\u0275\u0275elementStart"](2,"nb-accordion-item-header"),a["\u0275\u0275text"](3," Azure Compute Gallery "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"nb-accordion-item-body"),a["\u0275\u0275elementStart"](5,"div",0),a["\u0275\u0275elementStart"](6,"div",17),a["\u0275\u0275elementStart"](7,"div",5),a["\u0275\u0275elementStart"](8,"label",56),a["\u0275\u0275text"](9,"Azure Compute Gallery Definition"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",29),a["\u0275\u0275elementStart"](11,"nb-select",57),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).model.SharedImageGalleryDefinitionId=t}),a["\u0275\u0275elementStart"](12,"nb-option",13),a["\u0275\u0275text"](13,"Don't copy image"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](14,M,2,2,"nb-option",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",17),a["\u0275\u0275template"](16,T,6,2,"div",23),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"div",0),a["\u0275\u0275elementStart"](18,"div",42),a["\u0275\u0275elementStart"](19,"div",5),a["\u0275\u0275elementStart"](20,"label",58),a["\u0275\u0275text"](21,"Remove Native Image after Copying"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"div",59),a["\u0275\u0275elementStart"](23,"nb-checkbox",60),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).model.SharedImageGalleryDefinitionRemoveImageAfterCopying=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"div",42),a["\u0275\u0275elementStart"](25,"div",5),a["\u0275\u0275elementStart"](26,"label",61),a["\u0275\u0275text"](27,"Date Naming"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"div",59),a["\u0275\u0275elementStart"](29,"nb-checkbox",62),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).model.SharedImageGalleryDateNaming=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"div",42),a["\u0275\u0275elementStart"](31,"div",5),a["\u0275\u0275elementStart"](32,"label",63),a["\u0275\u0275text"](33,"Shallow replication"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](34,"div",59),a["\u0275\u0275elementStart"](35,"nb-checkbox",64),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).model.SharedImageGalleryDefinitionShallowReplication=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](36,"div",17),a["\u0275\u0275elementStart"](37,"div",5),a["\u0275\u0275elementStart"](38,"label",65),a["\u0275\u0275text"](39,"Keep Older Versions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](40,"div",29),a["\u0275\u0275elementStart"](41,"nb-select",66),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).model.SharedImageKeepVersions=t}),a["\u0275\u0275elementStart"](42,"nb-option",13),a["\u0275\u0275text"](43,"All"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](44,"nb-option",13),a["\u0275\u0275text"](45,"Last version"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](46,"nb-option",13),a["\u0275\u0275text"](47,"Last 3 versions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](48,"nb-option",13),a["\u0275\u0275text"](49,"Last 5 versions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](50,"nb-option",13),a["\u0275\u0275text"](51,"Last 10 versions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](52,"nb-option",13),a["\u0275\u0275text"](53,"Last 20 versions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](11),a["\u0275\u0275property"]("ngModel",e.model.SharedImageGalleryDefinitionId),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",e.GalleryImages),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!e.model.SharedImageGalleryDefinitionShallowReplication),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngModel",e.model.SharedImageGalleryDefinitionRemoveImageAfterCopying),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",e.model.SharedImageGalleryDateNaming),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",e.model.SharedImageGalleryDefinitionShallowReplication),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",e.model.SharedImageKeepVersions),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("value",0),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",1),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",3),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",5),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",10),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",20)}}function O(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"nb-option",13),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275property"]("value",e.Id),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",e.Name," ")}}function R(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"nb-accordion",0),a["\u0275\u0275elementStart"](1,"nb-accordion-item"),a["\u0275\u0275elementStart"](2,"nb-accordion-item-header"),a["\u0275\u0275text"](3," Azure Local "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"nb-accordion-item-body"),a["\u0275\u0275elementStart"](5,"div",0),a["\u0275\u0275elementStart"](6,"div",17),a["\u0275\u0275elementStart"](7,"div",5),a["\u0275\u0275elementStart"](8,"label",69),a["\u0275\u0275text"](9,"Custom Location"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",29),a["\u0275\u0275elementStart"](11,"nb-select",70),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).model.HciLocationId=t}),a["\u0275\u0275elementStart"](12,"nb-option",13),a["\u0275\u0275text"](13,"Don't copy image"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](14,O,2,2,"nb-option",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",0),a["\u0275\u0275elementStart"](16,"div",49),a["\u0275\u0275elementStart"](17,"div",5),a["\u0275\u0275elementStart"](18,"label",71),a["\u0275\u0275text"](19,"Remove Native Image after Copying"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"div",29),a["\u0275\u0275elementStart"](21,"nb-checkbox",72),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).model.HciLocationRemoveImageAfterCopying=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"div",49),a["\u0275\u0275elementStart"](23,"div",5),a["\u0275\u0275elementStart"](24,"label",73),a["\u0275\u0275text"](25,"Use storage account"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"div",29),a["\u0275\u0275elementStart"](27,"nb-checkbox",74),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).model.HciUseStorageAccount=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"div",17),a["\u0275\u0275elementStart"](29,"div",5),a["\u0275\u0275elementStart"](30,"label",75),a["\u0275\u0275text"](31,"Keep Older Versions "),a["\u0275\u0275element"](32,"nb-icon",76),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"div",29),a["\u0275\u0275elementStart"](34,"nb-select",77),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).model.HciLocationImageKeepVersions=t}),a["\u0275\u0275elementStart"](35,"nb-option",13),a["\u0275\u0275text"](36,"All"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](37,"nb-option",13),a["\u0275\u0275text"](38,"Last version"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](39,"nb-option",13),a["\u0275\u0275text"](40,"Last 3 versions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](41,"nb-option",13),a["\u0275\u0275text"](42,"Last 5 versions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](43,"nb-option",13),a["\u0275\u0275text"](44,"Last 10 versions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](45,"nb-option",13),a["\u0275\u0275text"](46,"Last 20 versions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](11),a["\u0275\u0275property"]("ngModel",e.model.HciLocationId),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",e.CustomLocations),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngModel",e.model.HciLocationRemoveImageAfterCopying),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",e.model.HciUseStorageAccount),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngModel",e.model.HciLocationImageKeepVersions),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("value",0),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",1),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",3),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",5),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",10),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",10)}}function D(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"button",78),a["\u0275\u0275text"](1,"Store imaging configuration "),a["\u0275\u0275elementEnd"]())}function P(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"button",79),a["\u0275\u0275text"](1,"Update imaging configuration "),a["\u0275\u0275elementEnd"]())}function k(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"button",80),a["\u0275\u0275text"](1," Create image "),a["\u0275\u0275elementEnd"]())}function L(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"button",80),a["\u0275\u0275text"](1," Apply now "),a["\u0275\u0275elementEnd"]())}function _(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275elementStart"](1,"div",5),a["\u0275\u0275elementStart"](2,"label",14),a["\u0275\u0275text"](3,"Virtual Machine"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"div",7),a["\u0275\u0275elementStart"](5,"nb-select-filter",15,16),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().model.VmResourceId=t})("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().onVmChange(t)}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"div",0),a["\u0275\u0275elementStart"](8,"div",17),a["\u0275\u0275elementStart"](9,"div",5),a["\u0275\u0275elementStart"](10,"label",18),a["\u0275\u0275text"](11,"Automatic Naming"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"div",19),a["\u0275\u0275elementStart"](13,"nb-checkbox",20),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().model.ImageAutoNaming=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"div",21),a["\u0275\u0275template"](15,C,2,5,"input",22),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",17),a["\u0275\u0275template"](17,I,7,2,"div",23),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"div",0),a["\u0275\u0275elementStart"](19,"div",24),a["\u0275\u0275elementStart"](20,"div",5),a["\u0275\u0275elementStart"](21,"label",25),a["\u0275\u0275text"](22,"Image Description"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"div",7),a["\u0275\u0275elementStart"](24,"input",26,27),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().model.ImageNote=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"div",0),a["\u0275\u0275elementStart"](27,"div",17),a["\u0275\u0275elementStart"](28,"div",5),a["\u0275\u0275elementStart"](29,"label",28),a["\u0275\u0275text"](30,"Target Resource Group"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](31,"div",29),a["\u0275\u0275elementStart"](32,"nb-select-filter",30,31),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().model.ImageResourceGroupId=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](34,"div",17),a["\u0275\u0275elementStart"](35,"div",5),a["\u0275\u0275elementStart"](36,"label",32),a["\u0275\u0275text"](37,"Keep Older Versions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](38,"div",29),a["\u0275\u0275elementStart"](39,"nb-select",33),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().model.ImageKeepVersions=t}),a["\u0275\u0275elementStart"](40,"nb-option",13),a["\u0275\u0275text"](41,"All"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](42,"nb-option",13),a["\u0275\u0275text"](43,"Last version"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](44,"nb-option",13),a["\u0275\u0275text"](45,"Last 3 versions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](46,"nb-option",13),a["\u0275\u0275text"](47,"Last 5 versions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](48,"nb-option",13),a["\u0275\u0275text"](49,"Last 10 versions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](50,"nb-option",13),a["\u0275\u0275text"](51,"Last 20 versions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](52,"div",0),a["\u0275\u0275elementStart"](53,"div",17),a["\u0275\u0275elementStart"](54,"div",5),a["\u0275\u0275elementStart"](55,"label",34),a["\u0275\u0275text"](56,"Optional.: Run a Script or Collection on the Master first"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](57,"div",29),a["\u0275\u0275elementStart"](58,"ngx-scriptAndCollection",35),a["\u0275\u0275listener"]("onStatusChange",function(t){a["\u0275\u0275restoreView"](e);const n=a["\u0275\u0275nextContext"]();return n.setSelectedScriptOrCollection(n.i,t)}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](59,"div",17),a["\u0275\u0275elementStart"](60,"div",5),a["\u0275\u0275elementStart"](61,"label",36),a["\u0275\u0275text"](62,"Tag as 'TestImage'"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](63,"div",29),a["\u0275\u0275elementStart"](64,"nb-checkbox",37),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().model.TagAsTestImage=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](65,E,20,8,"div",11),a["\u0275\u0275template"](66,V,54,13,"nb-accordion",38),a["\u0275\u0275template"](67,R,47,11,"nb-accordion",38),a["\u0275\u0275element"](68,"br"),a["\u0275\u0275elementStart"](69,"div",5),a["\u0275\u0275elementStart"](70,"div",39),a["\u0275\u0275template"](71,D,2,0,"button",40),a["\u0275\u0275template"](72,P,2,0,"button",41),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](73,"div",42),a["\u0275\u0275template"](74,k,2,0,"button",43),a["\u0275\u0275template"](75,L,2,0,"button",43),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=a["\u0275\u0275reference"](6),t=a["\u0275\u0275reference"](25),n=a["\u0275\u0275reference"](33),o=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngModel",o.model.VmResourceId)("nbSpinner",o.spinner2)("ngClass",a["\u0275\u0275pureFunction1"](29,y,o.submitted&&e.invalid))("options",o.Vms),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngModel",o.model.ImageAutoNaming),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!o.model.ImageAutoNaming),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",o.CustomLocationsWithProxy&&o.CustomLocationsWithProxy.length>0),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngModel",o.model.ImageNote)("ngClass",a["\u0275\u0275pureFunction1"](31,y,o.submitted&&t.invalid)),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngModel",o.model.ImageResourceGroupId)("ngClass",a["\u0275\u0275pureFunction1"](33,y,o.submitted&&n.invalid))("options",o.ResourceGroups),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngModel",o.model.ImageKeepVersions),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("value",0),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",1),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",3),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",5),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",10),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",20),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("scene",o.model.SceneId)("idSc",o.model.ScriptOrCollectionOnMaster),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",o.model.TagAsTestImage),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",o.model.ScriptOrCollectionOnMaster&&"00000000-0000-0000-0000-000000000000"!=o.model.ScriptOrCollectionOnMaster),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",o.GalleryImagesLength&&""==o.model.HybridImagingCustomLocation),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",o.CustomLocationsLength&&""==o.model.HybridImagingCustomLocation),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",o.storeDirect&&"00000000-0000-0000-0000-000000000000"==o.model.TemplateId),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",o.storeDirect&&"00000000-0000-0000-0000-000000000000"!=o.model.TemplateId),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",o.storeDirect),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!o.storeDirect)}}function N(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-header"),a["\u0275\u0275text"](2,"Save imaging configuration"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"nb-card-body"),a["\u0275\u0275text"](4," Enter a name or description to store the imaging configuration in the database. "),a["\u0275\u0275elementStart"](5,"textarea",81),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().model.TemplateName=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"nb-card-footer"),a["\u0275\u0275elementStart"](7,"div",0),a["\u0275\u0275element"](8,"div",82),a["\u0275\u0275elementStart"](9,"div",83),a["\u0275\u0275elementStart"](10,"button",84),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](e).dialogRef.close("0")}),a["\u0275\u0275text"](11,"Cancel"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"div",83),a["\u0275\u0275elementStart"](13,"button",85),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](e).dialogRef.close("1")}),a["\u0275\u0275text"](14,"Ok"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngModel",e.model.TemplateName)}}let G=(()=>{class e{constructor(e,t,n,o){this.http=e,this.actionService=t,this.dialogService=n,this.viewSceneService=o,this.destroyed$=new r.xQ,this.isInit=!1,this.lastScene="",this.onStatusChange=new a.EventEmitter,this.model=new m.dR,this.selectedCustomLocation="",this.GalleryImagesLength=!1,this.CustomLocationsLength=!1,this.spinner1=!0,this.spinner2=!0,this.submitted=!1}ngOnInit(){this.viewSceneService.getViewScenes().pipe((0,s.R)(this.destroyed$)).subscribe(e=>{this.ViewScenes=e,console.log("Got data about the scenes",this.ViewScenes),this.model=JSON.parse(JSON.stringify(new m.dR)),this.configurationTemplate&&(console.log("Got configuration from parent",this.configurationTemplate),this.onSceneChange(this.configurationTemplate.SceneId,this.configurationTemplate.HybridImagingCustomLocation)),1==this.ViewScenes.length&&null==this.model.SceneId&&(this.model.SceneId=this.ViewScenes[0].Id,this.onSceneChange(this.model.SceneId)),this.spinner1=!1})}onVmChange(e){console.log(`VM changed to ${e}`);var t=this.Vms.find(t=>t.Id.toLowerCase()===e.toLowerCase());this.isInit||(this.ResourceGroups=this.AllResourceGroups.filter(e=>e.SubscriptionId.toLowerCase()===t.SubscriptionId),this.GalleryImages=this.AllGalleryImages.filter(e=>e.HyperV.toLowerCase()===t.HyperV.toLowerCase()),this.GalleryImagesLength=0!=this.GalleryImages.length,this.CustomLocationsLength=0!=this.CustomLocations.length,this.model.ImageResourceGroupId="",this.model.SharedImageGalleryDefinitionId="",this.model.HciLocationId="",this.saveLocalConfig())}onHybridCustomLocationChange(e){console.log(`Custom location changed to ${e}. Updating VMs`),this.selectedCustomLocation=e,this.reloadImagingResources(this.lastScene)}onSceneChange(e,t=""){""!=e&&(console.log(`Tenant changed to ${e}. Updating VMs`),this.model.TemplateId="00000000-0000-0000-0000-000000000000",this.selectedCustomLocation=null!=t?t:"",this.GalleryImages=[],this.CustomLocations=[],this.spinner2=!0,""!=this.lastScene&&this.resetDependentForms(),this.reloadImagingResources(e))}reloadImagingResources(e){this.http.get(`${(new d.tc).apiURL()}/data/scenes/${e}/virtualmachines/imageview${this.selectedCustomLocation}`).subscribe(t=>{this.Vms=t,console.log("Got VMs for the selected tenant: "+t.length),this.Vms.length>0&&this.http.get(`${(new d.tc).apiURL()}/data/scenes/${e}/rolloutResources/subscriptions/${this.Vms[0].SubscriptionId}/locations`).subscribe(e=>{var t;if(this.AllRegions=e,console.log("Got Regions for the selected tenant: "+e.length),null===(t=this.configurationTemplate)||void 0===t?void 0:t.VmResourceId){this.model.VmResourceId=this.configurationTemplate.VmResourceId;var n=0;console.log("Waiting for the resource groups, gallery images and custom location to be initialized");var o=setInterval(()=>{this.CustomLocations&&this.AllGalleryImages&&this.AllResourceGroups&&(clearInterval(o),this.onVmChange(this.model.VmResourceId),this.model=this.configurationTemplate,this.configurationTemplate=null),++n>200&&clearInterval(o)},50)}}),this.spinner2=!1}),this.http.get(`${(new d.tc).apiURL()}/data/scenes/${e}/resourcegroups`).subscribe(e=>{this.AllResourceGroups=e,console.log("Got RGs for the selected tenant: "+e.length)}),this.http.get(`${(new d.tc).apiURL()}/data/scenes/${e}/galleryimages`).subscribe(e=>{this.AllGalleryImages=e,console.log("Got GalleryImages for the selected tenant: "+e.length)}),this.http.get(`${(new d.tc).apiURL()}/data/scenes/${e}/customlocations`).subscribe(e=>{this.CustomLocations=e,this.CustomLocationsWithProxy=this.CustomLocations.filter(e=>1==e.ProxyAvailable),console.log("Got CustomLocations for the selected tenant: "+e.length)}),this.isInit||(this.model.VmResourceId="",this.model.ImageResourceGroupId="",this.model.SharedImageGalleryDefinitionId="",this.model.HciLocationId="",this.lastScene=e,this.model.SceneId=e,this.saveLocalConfig())}setSelectedScriptOrCollection(e,t){this.model.ScriptOrCollectionOnMaster=t}resetDependentForms(){this.model.SceneId=null}onSubmit(e,t){this.submitted=!0,console.log(t),e.valid?(this.saveLocalConfig(),this.storeDirect?"storeImage"==t?this.dialogService.open(this.saveSettings,{}).onClose.subscribe(e=>{"1"==e&&(this.model.TemplateId=window.crypto.randomUUID(),this.actionService.sendActionAsync(`scenes/${this.model.SceneId}/storageimagedefinition`,this.model,"Store image definition","").subscribe(e=>{e?console.log("Got data from the server",e,this.model):this.model.TemplateId="00000000-0000-0000-0000-000000000000"}))}):"updateImage"==t?this.dialogService.open(this.saveSettings,{}).onClose.subscribe(e=>{"1"==e&&this.actionService.sendActionAsync(`scenes/${this.model.SceneId}/storageimagedefinition`,this.model,"Update image definition","").subscribe(e=>{e&&console.log("Got data from the server",e,this.model)})}):this.actionService.sendActionAsync(`scenes/${this.model.SceneId}/createimage`,this.model,"Create image","").subscribe():(console.log("Sending configuration back to parent"),this.onStatusChange.emit(this.model))):alert("Please check your configuration. Some properties or selections are not valid or missing. Check the red-cross-marked properties.")}onCancel(){console.log("Canceling deployment configuration"),this.onStatusChange.emit(null)}saveLocalConfig(){JSON,localStorage.setItem("Hydra.ImageCreation.Default",JSON.stringify(this.model))}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](p.eN),a["\u0275\u0275directiveInject"](c.c),a["\u0275\u0275directiveInject"](u.Gln),a["\u0275\u0275directiveInject"](g.E))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-image-creation-config"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"](b,5),2&e){let e;a["\u0275\u0275queryRefresh"](e=a["\u0275\u0275loadQuery"]())&&(t.saveSettings=e.first)}},inputs:{configurationTemplate:"configurationTemplate",sceneId:"sceneId",storeDirect:"storeDirect"},outputs:{onStatusChange:"onStatusChange"},decls:23,vars:7,consts:[[1,"row"],[1,"col-md-12"],["nbSpinnerSize","small",3,"nbSpinner"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group","row"],["for","dc-scene",1,"label","col-sm-2","col-form-label"],[1,"col-sm-10"],["id","dc-scene","fullWidth","","name","SceneId","required","","nbTooltip","Select the tenant to select the VM (Golden Master)",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["SceneId","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["saveSettings",""],[3,"value"],["for","dc-VmResourceId",1,"label","col-sm-2","col-form-label"],["id","dc-VmResourceId","fullWidth","","nbSpinnerSize","small","placeholder","Select your Golden Master","nbTooltip","Select your Golden Master","name","VmResourceId","required","","labelName","DisplayName","valueName","Id","pre","1",1,"form-control",3,"ngModel","nbSpinner","ngClass","options","ngModelChange"],["VmResourceId","ngModel"],[1,"col-sm-6"],["for","dc-ImageAutoNaming",1,"label","col-sm-4","col-form-label"],[1,"col-sm-1",2,"display","flex"],["id","dc-ImageAutoNaming","name","ImageAutoNaming","nbTooltip","Creates a name automatically: <VM-Name>_<DateTime>. E.g.: T-AVD-BASIC-01_2021-10-01_14-00-00",3,"ngModel","ngModelChange"],[1,"col-sm-7"],["type","text","id","dc-ImageName","nbInput","","fullWidth","","class","form-control","maxlength","60","placeholder","Image name","required","","minlength","4","nbTooltip","Enter a name for the image. Ensure that the name is not in use by another resource.","name","ImageName",3,"disabled","ngModel","ngClass","ngModelChange",4,"ngIf"],["class","form-group row",4,"ngIf"],[1,"col-sm-12"],["for","dc-ImageNote",1,"label","col-sm-2","col-form-label"],["type","text","id","dc-ImageNote","nbInput","","fullWidth","","maxlength","250","placeholder","Windows 10 EUV 20H2 with O365 and main business apps","nbTooltip","Use up to 250 characters to make a not for this image.","name","ImageNote",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["ImageNote","ngModel"],["for","dc-ImageResourceGroupId",1,"label","col-sm-4","col-form-label"],[1,"col-sm-8"],["id","dc-ImageResourceGroupId","fullWidth","","nbTooltip","Select a resource group to store the image.","name","ImageResourceGroupId","required","","labelName","Name","valueName","Id",1,"form-control",3,"ngModel","ngClass","options","ngModelChange"],["ImageResourceGroupId","ngModel"],["for","dc-ImageKeepVersions",1,"label","col-sm-4","col-form-label"],["id","dc-ImageKeepVersions","fullWidth","","nbTooltip","You can optionally delete older images of the same VM in the subscription.","name","ImageKeepVersions",3,"ngModel","ngModelChange"],["for","dc-ScriptOrCollectionStart",1,"label","col-sm-4","col-form-label"],["id","dc-ScriptOrCollectionStart","nbTooltip","Runs a script or collection on the VM / Golden Master before the imaging process starts. This can be used to (e.g.) apply Windows Updates in front of building the final image. This process changes the Master permanently. Steps related to a session host are ignored - only VM native steps are applied.",3,"scene","idSc","onStatusChange"],["for","dc-TagAsTestImage",1,"label","col-sm-4","col-form-label"],["id","dc-TagAsTestImage","name","TagAsTestImage","nbTooltip","Tags an image optionally as a 'TestImage'. Test images are ignored if the rollout configuration is set to use the newest image from a gallery definition or from a VM. Regardless, these images can be selected directly in the rollout configuration (e.g., in a test host pool). To untag, remove the tag 'AVD.TestImage' from an image or gallery version in the Azure Portal.",3,"ngModel","ngModelChange"],["class","row",4,"ngIf"],[1,"offset-sm-8","col-sm-2"],["id","storeImage","nbButton","","style","float: right;","type","submit","nbTooltip","Save the imaging configuration to the database.",4,"ngIf"],["id","updateImage","nbButton","","style","float: right;","type","submit","nbTooltip","Update the imaging configuration in the database.",4,"ngIf"],[1,"col-sm-2"],["type","submit","nbButton","","status","primary","style","float: right;","nbTooltip","Use this configuration to create a new image from the selected VM (Golden Master). The VM remains untouched and can be reused at any time.",4,"ngIf"],["type","text","id","dc-ImageName","nbInput","","fullWidth","","maxlength","60","placeholder","Image name","required","","minlength","4","nbTooltip","Enter a name for the image. Ensure that the name is not in use by another resource.","name","ImageName",1,"form-control",3,"disabled","ngModel","ngClass","ngModelChange"],["ImageName","ngModel"],["for","dc-HybridImagingCustomLocation",1,"label","col-sm-4","col-form-label"],["id","dc-HybridImagingCustomLocation","fullWidth","","nbTooltip","A Hydra Proxy is available in some custom location. Select the custom location to use Hybrid Imaging for this image creation process.","name","dc-HybridImagingCustomLocation",1,"col-sm-8",3,"ngModel","ngModelChange"],["value",""],[1,"col-sm-3"],["for","dc-ServiceDomainUser",1,"label","col-sm-4","col-form-label"],["type","text","id","dc-ServiceDomainUser","nbInput","","fullWidth","","placeholder","service@contoso.com","nbTooltip","Name of the service account, written as name@domain.com","name","ServiceDomainUser",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["ServiceDomainUser","ngModel"],["for","dc-ServiceDomainPwEncrypted",1,"label","col-sm-4","col-form-label"],["type","password","id","dc-ServiceDomainPwEncrypted","nbInput","","fullWidth","","placeholder","**********************","nbTooltip","Password of the service account","name","ServiceDomainPwEncrypted",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["ServiceDomainPwEncrypted","ngModel"],["for","dc-SharedImageGalleryDefinitionId",1,"label","col-sm-4","col-form-label"],["id","dc-SharedImageGalleryDefinitionId","fullWidth","","nbTooltip","Select a shared image gallery definition as a target for the image. The image is copied to the definition at the end of the process.","name","SharedImageGalleryDefinitionId",3,"ngModel","ngModelChange"],["for","dc-SharedImageGalleryDefinitionRemoveImageAfterCopying",1,"label","col-sm-8","col-form-label"],[1,"col-sm-4"],["id","dc-SharedImageGalleryDefinitionRemoveImageAfterCopying","name","SharedImageGalleryDefinitionRemoveImageAfterCopying","nbTooltip","Optionally, delete the native image after copying it to the gallery definition.",3,"ngModel","ngModelChange"],["for","dc-SharedImageGalleryDateNaming",1,"label","col-sm-8","col-form-label"],["id","dc-SharedImageGalleryDateNaming","name","SharedImageGalleryDateNaming","nbTooltip","Usually, the version x.y.z is counted up automatically. Using this option, the version will be year.month.day (UTC). This simplifies the view of the image versions but will remove an existing version from the same day in the gallery definition and is not recognized as a new image for existing hosts.",3,"ngModel","ngModelChange"],["for","dc-SharedImageGalleryDefinitionShallowReplication",1,"label","col-sm-8","col-form-label"],["id","dc-SharedImageGalleryDefinitionShallowReplication","name","SharedImageGalleryDefinitionShallowReplication","nbTooltip","For testing and development, an image version can be configured as shallow replication. This makes the image ready faster, but you can't deploy many hosts in parallel while the image is not copied and the image is only available in the home region.",3,"ngModel","ngModelChange"],["for","dc-SharedImageKeepVersions",1,"label","col-sm-4","col-form-label"],["id","dc-SharedImageKeepVersions","fullWidth","","nbTooltip","You can optionally delete older image versions in the gallery definition.","name","SharedImageKeepVersions",3,"ngModel","ngModelChange"],["for","dc-SharedImageGalleryDefinitionIdRegions",1,"label","col-sm-4","col-form-label"],["id","dc-SharedImageGalleryDefinitionIdRegions","fullWidth","","multiple","","nbTooltip","Select the regions where you want to have your image available.","name","SharedImageGalleryDefinitionIdRegions",3,"selected","selectedChange"],["for","dc-HciLocationId",1,"label","col-sm-4","col-form-label"],["id","dc-HciLocationId","fullWidth","","nbTooltip","Select a custom location as a target for the image. The image is copied to the definition at the end of the process.","name","HciLocationId",3,"ngModel","ngModelChange"],["for","dc-HciLocationRemoveImageAfterCopying",1,"label","col-sm-4","col-form-label"],["id","dc-HciLocationRemoveImageAfterCopying","name","HciLocationRemoveImageAfterCopying","nbTooltip","Optionally, delete the native image after copying it to the custom location.",3,"ngModel","ngModelChange"],["for","dc-HciUseStorageAccount",1,"label","col-sm-4","col-form-label"],["id","dc-HciUseStorageAccount","name","HciUseStorageAccount","nbTooltip","Using a storage account is a more reliable way to transfer an image to Azure Local. If used, the Hydra service principal needs Microsoft.Storage/storageAccounts/write and Storage Blob Data Contributor on the selected resource group.",3,"ngModel","ngModelChange"],["for","dc-HciLocationImageKeepVersions",1,"label","col-sm-4","col-form-label"],["icon","alert-triangle-outline","nbTooltip","Caution: Never let Hydra delete an image that is being used by a virtual machine. VMs can no longer be started or stopped if the base image is deleted. Only deletion would work."],["id","dc-HciLocationImageKeepVersions","fullWidth","","nbTooltip","You can optionally delete older image versions in the Azure portal. Caution: Never let Hydra delete an image that is being used by a virtual machine. VMs can no longer be started or stopped if the base image is deleted. Only deletion would work.","name","HciLocationImageKeepVersions",3,"ngModel","ngModelChange"],["id","storeImage","nbButton","","type","submit","nbTooltip","Save the imaging configuration to the database.",2,"float","right"],["id","updateImage","nbButton","","type","submit","nbTooltip","Update the imaging configuration in the database.",2,"float","right"],["type","submit","nbButton","","status","primary","nbTooltip","Use this configuration to create a new image from the selected VM (Golden Master). The VM remains untouched and can be reused at any time.",2,"float","right"],["rows","1","nbInput","","fullWidth","","placeholder","Name or description","nbTooltip","Enter a name or description to store the imaging configuration in the database.",3,"ngModel","ngModelChange"],[1,"col-sm-6",2,"min-width","200px"],[1,"col-sm-3","text-right"],["nbButton","",1,"cancel",3,"click"],["nbButton","",3,"click"]],template:function(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"nb-card"),a["\u0275\u0275elementStart"](3,"nb-card-header",2),a["\u0275\u0275elementStart"](4,"h1"),a["\u0275\u0275text"](5,"Capture a VM / Golden Master"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"nb-card-body"),a["\u0275\u0275elementStart"](7,"p"),a["\u0275\u0275text"](8,"Create a new image from the selected VM (Golden Master). The original VM remains untouched and can be reused at any time."),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"br"),a["\u0275\u0275elementStart"](10,"form",3,4),a["\u0275\u0275listener"]("ngSubmit",function(n){a["\u0275\u0275restoreView"](e);const o=a["\u0275\u0275reference"](11);return t.onSubmit(o,n.submitter.id)}),a["\u0275\u0275elementStart"](12,"div",5),a["\u0275\u0275elementStart"](13,"label",6),a["\u0275\u0275text"](14,"Tenant"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",7),a["\u0275\u0275elementStart"](16,"nb-select",8,9),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.model.SceneId=e})("ngModelChange",function(e){return t.onSceneChange(e)}),a["\u0275\u0275template"](18,v,2,2,"nb-option",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](19,_,76,35,"ng-container",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](20,"br"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](21,N,15,1,"ng-template",null,12,a["\u0275\u0275templateRefExtractor"])}if(2&e){const e=a["\u0275\u0275reference"](17);a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("nbSpinner",t.spinner1),a["\u0275\u0275advance"](13),a["\u0275\u0275property"]("ngModel",t.model.SceneId)("ngClass",a["\u0275\u0275pureFunction1"](5,y,t.submitted&&e.invalid)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.ViewScenes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.model.SceneId)}},directives:[u.Asz,u.ndF,u.Q7R,u.yKW,h._Y,h.JL,h.F,u.rs,h.Q7,u.jNv,h.JJ,h.On,o.mk,o.sg,o.O5,u.q51,f.S,u.NTf,u.h8i,h.Fj,h.nD,S.I,h.wO,u.qCO,u.SaG,u.YZd,u.AvE,u.fMN,u.DPz,u.XWE],styles:["nb-checkbox[_ngcontent-%COMP%]{margin-bottom:0;display:flex;align-items:center}.form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}.form-control[_ngcontent-%COMP%]{padding:0;border:0}"]}),e})();var A=n(46679);let W=(()=>{class e{constructor(e){var t,n,o;this.router=e,null!=(null===(t=this.router.getCurrentNavigation())||void 0===t?void 0:t.extras.state)?(console.log("Getting data from ImagingDefinitions"),this.configTemplate=JSON.parse(JSON.stringify(null===(o=null===(n=this.router.getCurrentNavigation())||void 0===n?void 0:n.extras.state)||void 0===o?void 0:o.data)),console.log(this.configTemplate)):this.configTemplate=null}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](i.F0))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-image-creation"]],decls:2,vars:2,consts:[[3,"storeDirect","configurationTemplate"],["header","Imaging Log","filterActions","VmCreateImage","filterLastDays","3","top","12"]],template:function(e,t){1&e&&(a["\u0275\u0275element"](0,"ngx-image-creation-config",0),a["\u0275\u0275element"](1,"ngx-actionsLog",1)),2&e&&a["\u0275\u0275property"]("storeDirect",!0)("configurationTemplate",t.configTemplate)},directives:[G,A.d],styles:[".nb-theme-default   [_nghost-%COMP%]   .size-tiny[_ngcontent-%COMP%]{width:26rem;height:17rem}.nb-theme-default   [_nghost-%COMP%]   .flex-container[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;-ms-box-orient:horizontal;display:-moz-flex;display:flex}.nb-theme-default   [_nghost-%COMP%]   .nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.nb-theme-default   [_nghost-%COMP%]   .wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.nb-theme-dark   [_nghost-%COMP%]   .size-tiny[_ngcontent-%COMP%]{width:26rem;height:17rem}.nb-theme-dark   [_nghost-%COMP%]   .flex-container[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;-ms-box-orient:horizontal;display:-moz-flex;display:flex}.nb-theme-dark   [_nghost-%COMP%]   .nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.nb-theme-dark   [_nghost-%COMP%]   .wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.nb-theme-cosmic   [_nghost-%COMP%]   .size-tiny[_ngcontent-%COMP%]{width:26rem;height:17rem}.nb-theme-cosmic   [_nghost-%COMP%]   .flex-container[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;-ms-box-orient:horizontal;display:-moz-flex;display:flex}.nb-theme-cosmic   [_nghost-%COMP%]   .nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.nb-theme-cosmic   [_nghost-%COMP%]   .wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.nb-theme-corporate   [_nghost-%COMP%]   .size-tiny[_ngcontent-%COMP%]{width:26rem;height:17rem}.nb-theme-corporate   [_nghost-%COMP%]   .flex-container[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;-ms-box-orient:horizontal;display:-moz-flex;display:flex}.nb-theme-corporate   [_nghost-%COMP%]   .nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.nb-theme-corporate   [_nghost-%COMP%]   .wrap[_ngcontent-%COMP%]{flex-wrap:wrap}"]}),e})();var z=n(46797),$=n(25917),F=n(39761),U=n(43190),H=n(67666),B=n(68307),j=n(11627),K=n(5304),q=n(56825),J=n(69517),Q=n(14202);const Y=["schedules"],X=["dialog"];function Z(e,t){1&e&&a["\u0275\u0275element"](0,"span",16)}function ee(e,t){1&e&&a["\u0275\u0275element"](0,"span",17)}function te(e,t){1&e&&a["\u0275\u0275element"](0,"span",16)}function ne(e,t){1&e&&a["\u0275\u0275element"](0,"span",17)}function oe(e,t){1&e&&a["\u0275\u0275element"](0,"span",16)}function ie(e,t){1&e&&a["\u0275\u0275element"](0,"span",17)}function ae(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"nb-icon",23),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](e);const t=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"](2).configureSchedules(t.TemplateId)}),a["\u0275\u0275elementEnd"]()}}function le(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"nb-icon",24),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](e);const t=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"](2).configureSchedules(t.TemplateId)}),a["\u0275\u0275elementEnd"]()}}function re(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275elementStart"](1,"tr"),a["\u0275\u0275elementStart"](2,"td"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"td"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"td"),a["\u0275\u0275text"](7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"td"),a["\u0275\u0275text"](9),a["\u0275\u0275pipe"](10,"date"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"td"),a["\u0275\u0275text"](12),a["\u0275\u0275pipe"](13,"date"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"td"),a["\u0275\u0275elementStart"](15,"div",0),a["\u0275\u0275element"](16,"p"),a["\u0275\u0275elementStart"](17,"nb-icon",18),a["\u0275\u0275listener"]("click",function(){const t=a["\u0275\u0275restoreView"](e).$implicit;return a["\u0275\u0275nextContext"](2).config(t)}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](18,ae,1,0,"nb-icon",19),a["\u0275\u0275template"](19,le,1,0,"nb-icon",20),a["\u0275\u0275elementStart"](20,"nb-icon",21),a["\u0275\u0275listener"]("click",function(){const t=a["\u0275\u0275restoreView"](e).$implicit;return a["\u0275\u0275nextContext"](2).delete(t.TemplateId)}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"nb-icon",22),a["\u0275\u0275listener"]("click",function(){const t=a["\u0275\u0275restoreView"](e).$implicit;return a["\u0275\u0275nextContext"](2).start(t.TemplateId)}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.$implicit;a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",e.SceneName," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",e.TemplateName," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate2"](" ",e.VmResourceId.split("/")[4],"\\",e.VmResourceId.split("/")[8]," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind2"](10,8,e.LastRunTime,"short")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind2"](13,11,e.NextRunTime,"short")," "),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",!(null!=e.TemplateSchedule&&e.TemplateSchedule.Enabled)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",null==e.TemplateSchedule?null:e.TemplateSchedule.Enabled)}}function se(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"div",9),a["\u0275\u0275elementStart"](2,"table",10),a["\u0275\u0275elementStart"](3,"thead"),a["\u0275\u0275elementStart"](4,"tr"),a["\u0275\u0275elementStart"](5,"th",11),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](e);const t=a["\u0275\u0275nextContext"]();return t.sortType="SceneName",t.sortReverse=!t.sortReverse,t.sort(t.sortReverse,t.sortType)}),a["\u0275\u0275text"](6," Tenant "),a["\u0275\u0275template"](7,Z,1,0,"span",12),a["\u0275\u0275template"](8,ee,1,0,"span",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"th",11),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](e);const t=a["\u0275\u0275nextContext"]();return t.sortType="TemplateName",t.sortReverse=!t.sortReverse,t.sort(t.sortReverse,t.sortType)}),a["\u0275\u0275text"](10," Description / Name "),a["\u0275\u0275template"](11,te,1,0,"span",12),a["\u0275\u0275template"](12,ne,1,0,"span",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"th",11),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](e);const t=a["\u0275\u0275nextContext"]();return t.sortType="VmResourceId",t.sortReverse=!t.sortReverse,t.sort(t.sortReverse,t.sortType)}),a["\u0275\u0275text"](14," Resource Group / VM "),a["\u0275\u0275template"](15,oe,1,0,"span",12),a["\u0275\u0275template"](16,ie,1,0,"span",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"th"),a["\u0275\u0275text"](18,"Last Runtime (UTC)"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"th"),a["\u0275\u0275text"](20,"Next Runtime (UTC)"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"th"),a["\u0275\u0275text"](22,"Actions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"tbody"),a["\u0275\u0275template"](24,re,22,14,"ng-container",14),a["\u0275\u0275pipe"](25,"slice"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"ngb-pagination",15),a["\u0275\u0275listener"]("pageChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().page=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngIf","SceneName"==e.sortType&&!e.sortReverse),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","SceneName"==e.sortType&&e.sortReverse),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf","TemplateName"==e.sortType&&!e.sortReverse),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","TemplateName"==e.sortType&&e.sortReverse),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf","VmResourceId"==e.sortType&&!e.sortReverse),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","VmResourceId"==e.sortType&&e.sortReverse),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngForOf",a["\u0275\u0275pipeBind3"](25,13,e.imagingDefinitions,(e.page-1)*e.pageSize,e.page*e.pageSize))("ngForTrackBy",e.identifyViewImagingDefinitions),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("collectionSize",e.collectionSize)("page",e.page)("maxSize",5)("boundaryLinks",!0)("pageSize",e.pageSize)}}function de(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-header"),a["\u0275\u0275text"](2,"Confirmation"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"nb-card-body"),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"nb-card-footer"),a["\u0275\u0275elementStart"](6,"div",0),a["\u0275\u0275element"](7,"div",25),a["\u0275\u0275elementStart"](8,"div",26),a["\u0275\u0275elementStart"](9,"button",27),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](e).dialogRef.close("0")}),a["\u0275\u0275text"](10,"Cancel"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"div",26),a["\u0275\u0275elementStart"](12,"button",28),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](e).dialogRef.close("1")}),a["\u0275\u0275text"](13,"Ok"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](e)}}function me(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"nb-option",42),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275property"]("value",e.id),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"]("",e.name," ")}}const ce=function(e){return{"is-invalid":e}};function ge(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-header"),a["\u0275\u0275text"](2,"Imaging schedules"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"nb-card-body"),a["\u0275\u0275elementStart"](4,"p"),a["\u0275\u0275text"](5," You can configure a time to start the imaging process. Please note that the configured time is in UTC time. "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",29),a["\u0275\u0275elementStart"](7,"div",9),a["\u0275\u0275elementStart"](8,"table",10),a["\u0275\u0275elementStart"](9,"thead"),a["\u0275\u0275elementStart"](10,"tr"),a["\u0275\u0275elementStart"](11,"th"),a["\u0275\u0275text"](12,"Enabled"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"th"),a["\u0275\u0275text"](14,"Weekdays"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"th"),a["\u0275\u0275text"](16,"Start (UTC time)"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"th"),a["\u0275\u0275text"](18,"Advanced"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"tbody"),a["\u0275\u0275elementContainerStart"](20,30),a["\u0275\u0275elementStart"](21,"tr"),a["\u0275\u0275elementStart"](22,"td"),a["\u0275\u0275elementStart"](23,"nb-checkbox",31),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().modelSchedules.Enabled=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"td"),a["\u0275\u0275elementStart"](25,"nb-checkbox",32),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().modelSchedules.Weekdays.Mo=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"nb-checkbox",33),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().modelSchedules.Weekdays.Tu=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"nb-checkbox",34),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().modelSchedules.Weekdays.We=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"nb-checkbox",35),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().modelSchedules.Weekdays.Th=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](29,"nb-checkbox",36),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().modelSchedules.Weekdays.Fr=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"nb-checkbox",37),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().modelSchedules.Weekdays.Sa=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](31,"nb-checkbox",38),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().modelSchedules.Weekdays.Su=t}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"td"),a["\u0275\u0275elementStart"](33,"nb-select",39),a["\u0275\u0275listener"]("ngModelChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().modelSchedules.TimeFrom=t}),a["\u0275\u0275template"](34,me,2,2,"nb-option",40),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](35,"td"),a["\u0275\u0275elementStart"](36,"ngx-scheduleSelector",41),a["\u0275\u0275listener"]("onStatusChange",function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().setScheduleAdv(t)}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](37,"nb-card-footer"),a["\u0275\u0275elementStart"](38,"div",0),a["\u0275\u0275element"](39,"div",25),a["\u0275\u0275elementStart"](40,"div",26),a["\u0275\u0275elementStart"](41,"button",27),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](e).dialogRef.close("0")}),a["\u0275\u0275text"](42,"Cancel"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](43,"div",26),a["\u0275\u0275elementStart"](44,"button",28),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](e).dialogRef.close("1")}),a["\u0275\u0275text"](45,"Ok"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](23),a["\u0275\u0275property"]("ngModel",e.modelSchedules.Enabled),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngModel",e.modelSchedules.Weekdays.Mo),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngModel",e.modelSchedules.Weekdays.Tu),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngModel",e.modelSchedules.Weekdays.We),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngModel",e.modelSchedules.Weekdays.Th),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngModel",e.modelSchedules.Weekdays.Fr),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngModel",e.modelSchedules.Weekdays.Sa),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngModel",e.modelSchedules.Weekdays.Su),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngModel",e.modelSchedules.TimeFrom)("ngClass",a["\u0275\u0275pureFunction1"](15,ce,e.submitted&&"INVALID"==(null==e.f.form.controls.TimeFrom?null:e.f.form.controls.TimeFrom.status))),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",e.timeMinuteSelectorEnum),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("dateStart",e.modelSchedules.DateStart)("dateEnd",e.modelSchedules.DateEnd)("repeatWeek",e.modelSchedules.RepeatWeek)("repeatMonth",e.modelSchedules.RepeatMonth)}}const pe=[{path:"",component:l,children:[{path:"create-image",component:W},{path:"imaging-definitions",component:(()=>{class e{constructor(e,t,n,o,i){this.actionService=e,this.http=t,this.toastrService=n,this.dialogService=o,this.router=i,this.interval=2*d.tc.autoRefreshDefault,this.page=1,this.pageSize=20,this.imagingDefinitions$=new r.xQ,this.imagingDefinitions=[],this.allimagingDefinitions=[],this.httpWebRoot=(new d.tc).apiURL(),this.sortType="SceneName",this.sortReverse=!0,this.searchPhrase="",this.styleBtSemiRound="semi-round",this.modelSchedules=new m.m$,this.timeMinuteSelectorEnum=q.ub}ngOnInit(){this.imagingDefinitionsSubscription$=this.imagingDefinitions$.pipe((0,F.O)(0),(0,U.w)(()=>(0,z.H)(1,this.interval)),(0,U.w)(()=>this.http.get(`${(new d.tc).apiURL()}/data/azure/imagingDefinitions`)),(0,H.a)(e=>e.pipe((0,B.b)(e=>this.showToast("danger","Failure accessing the ImagingDefinition-API",`Cannot read data from API. The message is: ${e.message} with status ${e.statusText}`)),(0,j.j)(()=>(0,z.H)(5e3)))),(0,K.K)(e=>(this.showToast("danger","Failure accessing the ImagingDefinition-API",`Cannot read data from API. Reload this site to try it again. The message is: ${e.message} with status ${e.statusText}`),(0,$.of)([])))).subscribe(e=>{console.log("imagingDefinitions: Getting data ",e.length),this.collectionSize=e.length,this.allimagingDefinitions=e,this.searchTable(),this.sort(this.sortReverse,this.sortType)})}identifyViewImagingDefinitions(e,t){return t.Id}update(){this.imagingDefinitions$.next()}configureSchedules(e){const t=this.allimagingDefinitions.find(t=>t.TemplateId==e);t&&(null==t.TemplateSchedule&&(t.TemplateSchedule=new m.m$),this.modelSchedules=t.TemplateSchedule,this.dialogService.open(this.schedules).onClose.subscribe(n=>{"1"==n&&(t.TemplateSchedule=this.modelSchedules,this.triggerImagingConfiguration(e,"storageimagedefinition","Setting schedule",!1,t),this.allimagingDefinitions.find(t=>t.TemplateId==e).TemplateSchedule=this.modelSchedules)}))}setScheduleAdv(e){this.modelSchedules.DateStart=e.DateStart,this.modelSchedules.DateEnd=e.DateEnd,this.modelSchedules.RepeatWeek=e.RepeatWeek,this.modelSchedules.RepeatMonth=e.RepeatMonth}delete(e){var t=this.allimagingDefinitions.find(t=>t.TemplateId==e);this.triggerImagingConfiguration(e,"deletestorageimagedefinition","Delete imaging definition",!0,t)}start(e){var t=this.allimagingDefinitions.find(t=>t.TemplateId==e);this.triggerImagingConfiguration(e,"runstorageimagedefinition","Start imaging",!0,t)}config(e){this.navigateTo("/pages/image-builder/create-image","",e)}triggerImagingConfiguration(e,t,n,o=!1,i=null){o?this.dialogService.open(this.dialog,{context:`Please confirm the operation '${n}'`}).onClose.subscribe(o=>{"1"==o&&this.triggerImagingConfigurationExecute(e,t,n,i)}):this.triggerImagingConfigurationExecute(e,t,n,i)}triggerImagingConfigurationExecute(e,t,n,o=null){var i=this.allimagingDefinitions.find(t=>t.TemplateId==e);console.log("Start action: "+t+" with item id: "+(null==i?void 0:i.TemplateId)),this.actionService.sendActionAsync(`scenes/${null==i?void 0:i.SceneId}/${t}`,o,n,null==i?void 0:i.VmResourceId.split("/").pop()).subscribe(e=>{})}navigateTo(e,t,n={}){this.router.navigate([e],{queryParams:{search:t},state:{data:n}})}searchTable(){this.imagingDefinitions=this.allimagingDefinitions.filter(e=>""==this.searchPhrase||e.TemplateName.toLowerCase().includes(this.searchPhrase.toLowerCase())||e.VmResourceId.toLowerCase().indexOf(this.searchPhrase.toLowerCase())>-1||e.SceneName.toLowerCase().indexOf(this.searchPhrase.toLowerCase())>-1),this.sort(this.sortReverse,this.sortType),this.collectionSize=this.imagingDefinitions.length}sort(e,t){var n=(t+".....").split(".");this.sortInternal(e,n[0],n[1],n[2],n[3])}sortInternal(e,t,n="",o="",i=""){this.imagingDefinitions=this.imagingDefinitions.sort((a,l)=>{try{if(""!=i)var r=a[t][n][o][i],s=l[t][n][o][i];else""!=o?(r=a[t][n][o],s=l[t][n][o]):""!=n?(r=a[t][n],s=l[t][n]):(r=a[t],s=l[t])}catch{r=1,s=1}return e?r>s?1:s>r?-1:0:r>s?-1:1})}ngOnDestroy(){this.imagingDefinitionsSubscription$&&this.imagingDefinitionsSubscription$.unsubscribe()}showToast(e,t,n){this.toastrService.show(n,t?`${t}`:"",{status:e,destroyByClick:!0,duration:2e4,hasIcon:!0,position:u.fe3.TOP_RIGHT,preventDuplicates:!0})}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c.c),a["\u0275\u0275directiveInject"](p.eN),a["\u0275\u0275directiveInject"](u.quB),a["\u0275\u0275directiveInject"](u.Gln),a["\u0275\u0275directiveInject"](i.F0))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-imaging-definitions-config"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](Y,5),a["\u0275\u0275viewQuery"](X,5)),2&e){let e;a["\u0275\u0275queryRefresh"](e=a["\u0275\u0275loadQuery"]())&&(t.schedules=e.first),a["\u0275\u0275queryRefresh"](e=a["\u0275\u0275loadQuery"]())&&(t.dialog=e.first)}},decls:19,vars:3,consts:[[1,"row"],[1,"col-sm-6"],["type","text","nbInput","","fullWidth","","placeholder","Search for a specific tenant, description, VM",3,"ngModel","ngModelChange"],[4,"ngIf"],["type","button","nbButton","",3,"status","click"],["icon","refresh"],["header","Imaging Log","filterActions","VmCreateImage","filterLastDays","3","top","12"],["dialog",""],["schedules",""],[1,"table-responsive"],[1,"table","table-bordered","table-striped"],[3,"click"],["class","fa fa-caret-down",4,"ngIf"],["class","fa fa-caret-up",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex","justify-content-center",3,"collectionSize","page","maxSize","boundaryLinks","pageSize","pageChange"],[1,"fa","fa-caret-down"],[1,"fa","fa-caret-up"],["icon","settings-outline","nbTooltip","Configure","nbTooltip","Reconfigure the imaging configuration",3,"click"],["icon","clock-outline","nbTooltip","Configure schedule","nbTooltipPlacement","top",3,"click",4,"ngIf"],["icon","clock","nbTooltip","Configure schedule","nbTooltipPlacement","top",3,"click",4,"ngIf"],["icon","trash-2-outline","nbTooltip","Delete","nbTooltip","Delete the imaging configuration",3,"click"],["icon","play-circle-outline","nbTooltip","Start","nbTooltip","Start imaging",3,"click"],["icon","clock-outline","nbTooltip","Configure schedule","nbTooltipPlacement","top",3,"click"],["icon","clock","nbTooltip","Configure schedule","nbTooltipPlacement","top",3,"click"],[1,"col-sm-6",2,"min-width","200px"],[1,"col-sm-3","text-right"],["nbButton","",1,"cancel",3,"click"],["nbButton","",3,"click"],["formArrayName","Schedule"],[1,"form-group","row"],["name","Schedule_Enable_111",3,"ngModel","ngModelChange"],["name","Schedule_Weekday_Mo_111","nbTooltip","Monday",3,"ngModel","ngModelChange"],["name","Schedule_Weekday_Tu_111","nbTooltip","Tuesday",3,"ngModel","ngModelChange"],["name","Schedule_Weekday_We_111","nbTooltip","Wednesday",3,"ngModel","ngModelChange"],["name","Schedule_Weekday_Th_111","nbTooltip","Thursday",3,"ngModel","ngModelChange"],["name","Schedule_Weekday_Fr_111","nbTooltip","Friday",3,"ngModel","ngModelChange"],["name","Schedule_Weekday_Sa_111","nbTooltip","Saturday",3,"ngModel","ngModelChange"],["name","Schedule_Weekday_Su_111","nbTooltip","Sunday",3,"ngModel","ngModelChange"],["id","dc-TimeFrom_111","fullWidth","","nbTooltip","Start time (UTC time)","name","TimeFrom_111",3,"ngModel","ngClass","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"dateStart","dateEnd","repeatWeek","repeatMonth","onStatusChange"],[3,"value"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"nb-card"),a["\u0275\u0275elementStart"](2,"nb-card-header"),a["\u0275\u0275elementStart"](3,"h1"),a["\u0275\u0275text"](4,"Imaging Definitions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"nb-card-body"),a["\u0275\u0275elementStart"](6,"div",0),a["\u0275\u0275elementStart"](7,"div",1),a["\u0275\u0275elementStart"](8,"input",2),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.searchPhrase=e})("ngModelChange",function(){return t.searchTable()}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"div",1),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](10,se,27,17,"div",3),a["\u0275\u0275elementStart"](11,"button",4),a["\u0275\u0275listener"]("click",function(){return t.update()}),a["\u0275\u0275element"](12,"nb-icon",5),a["\u0275\u0275text"](13," Update "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](14,"ngx-actionsLog",6),a["\u0275\u0275template"](15,de,14,1,"ng-template",null,7,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275template"](17,ge,46,17,"ng-template",null,8,a["\u0275\u0275templateRefExtractor"])),2&e&&(a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngModel",t.searchPhrase),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.imagingDefinitions),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("status",t.styleBtSemiRound))},directives:[u.Asz,u.ndF,u.yKW,u.h8i,h.Fj,h.JJ,h.On,o.O5,u.DPz,u.fMN,A.d,o.sg,J.N9,u.jNv,u.XWE,h.JL,u.NTf,u.rs,o.mk,Q.S,u.q51],pipes:[o.OU,o.uU],styles:[".nb-theme-default   [_nghost-%COMP%]   .size-tiny[_ngcontent-%COMP%]{width:26rem;height:17rem}.nb-theme-default   [_nghost-%COMP%]   .flex-container[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;-ms-box-orient:horizontal;display:-moz-flex;display:flex}.nb-theme-default   [_nghost-%COMP%]   .nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.nb-theme-default   [_nghost-%COMP%]   .wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.nb-theme-dark   [_nghost-%COMP%]   .size-tiny[_ngcontent-%COMP%]{width:26rem;height:17rem}.nb-theme-dark   [_nghost-%COMP%]   .flex-container[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;-ms-box-orient:horizontal;display:-moz-flex;display:flex}.nb-theme-dark   [_nghost-%COMP%]   .nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.nb-theme-dark   [_nghost-%COMP%]   .wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.nb-theme-cosmic   [_nghost-%COMP%]   .size-tiny[_ngcontent-%COMP%]{width:26rem;height:17rem}.nb-theme-cosmic   [_nghost-%COMP%]   .flex-container[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;-ms-box-orient:horizontal;display:-moz-flex;display:flex}.nb-theme-cosmic   [_nghost-%COMP%]   .nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.nb-theme-cosmic   [_nghost-%COMP%]   .wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.nb-theme-corporate   [_nghost-%COMP%]   .size-tiny[_ngcontent-%COMP%]{width:26rem;height:17rem}.nb-theme-corporate   [_nghost-%COMP%]   .flex-container[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;-ms-box-orient:horizontal;display:-moz-flex;display:flex}.nb-theme-corporate   [_nghost-%COMP%]   .nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.nb-theme-corporate   [_nghost-%COMP%]   .wrap[_ngcontent-%COMP%]{flex-wrap:wrap}"]}),e})()},{path:"**",redirectTo:"create-image",pathMatch:"full"}]}];let ue=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[i.Bz.forChild(pe)],i.Bz]}),e})();var he=n(70427),fe=n(34978);let Se=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[o.ez,ue,u.zyh,u.uuI,h.u5,u.IIj,u.rgH,he.PagesModule,u.MfT,u.nKr,u.oGl,u.KdK,J.jF,u.T2N,fe.D]]}),e})()}}]);