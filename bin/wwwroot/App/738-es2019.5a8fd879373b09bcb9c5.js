(self.webpackChunkngx_admin=self.webpackChunkngx_admin||[]).push([[738],{4738:function(e,t,n){"use strict";n.r(t),n.d(t,{TenantsModule:function(){return W}});var r=n(38583),o=n(10264),i=n(27861);class l{constructor(){this.Enabled=!0,this.UseManagedServiceIdentity=!1,this.AadEndpoints="Global",this.UseResForAad=!1,this.ResTenantId="00000000-0000-0000-0000-000000000000",this.ResApplicationId="00000000-0000-0000-0000-000000000000",this.ResApplication2Id="00000000-0000-0000-0000-000000000000",this.ResApplication3Id="00000000-0000-0000-0000-000000000000",this.ResApplication4Id="00000000-0000-0000-0000-000000000000",this.ResApplication5Id="00000000-0000-0000-0000-000000000000",this.ResEndpoints="Global",this.W365Enabled=!1,this.IntuneEnabled=!1}}const a=[{name:"Global",id:"Global"},{name:"US Government",id:"AzureUSGovernment"},{name:"China Cloud",id:"AzureChinaCloud"}];class d{constructor(){this.Endpoints="Global"}}var s=n(11173),c=n(79765),p=n(46782),m=n(92340),u=n(47349),h=n(37716),y=n(91841);let g=(()=>{class e{constructor(e){this.httpClient=e,this.apiUrl=`${m.N.apiUrl}/data/scenes`}getTenants(){return this.httpClient.get(`${this.apiUrl}`).pipe((0,u.d)({refCount:!0,bufferSize:1}))}getTenantSecretsFor(e){return this.httpClient.get(`${this.apiUrl}/${e}/HydraAgentTenantKeys`).pipe((0,u.d)({refCount:!0,bufferSize:1}))}getProxySecretsFor(e){return this.httpClient.get(`${this.apiUrl}/${e}/HydraProxyKeys`).pipe((0,u.d)({refCount:!0,bufferSize:1}))}}return e.\u0275fac=function(t){return new(t||e)(h["\u0275\u0275inject"](y.eN))},e.\u0275prov=h["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function S(e,t,n,r,o,i,l){try{var a=e[i](l),d=a.value}catch(s){return void n(s)}a.done?t(d):Promise.resolve(d).then(r,o)}function x(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function l(e){S(i,r,o,l,a,"next",e)}function a(e){S(i,r,o,l,a,"throw",e)}l(void 0)})}}var f=n(14625);function E(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementContainerStart"](0),h["\u0275\u0275elementStart"](1,"p"),h["\u0275\u0275text"](2,'The Hydra Agent provides you with insights into Cloud PCs, including real-time monitoring of key performance parameters, user processes, and latencies. Use a software deployment solution, such as Intune, to copy the Hydra Agent from the ZIP file to the "C:\\Program Files\\ITProCloud\\HydraAgent" directory. Run the following command in the Hydra Agent folder with administrative permissions to install it.'),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](3,"textarea",3),h["\u0275\u0275elementStart"](4,"button",4),h["\u0275\u0275listener"]("click",function(){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"]().copyToClipboard()}),h["\u0275\u0275element"](5,"nb-icon",5),h["\u0275\u0275text"](6," Copy "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"p"),h["\u0275\u0275element"](8,"br"),h["\u0275\u0275text"](9,"Keep the keys from the installation command secure and don't share."),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",6),h["\u0275\u0275elementStart"](11,"a",7),h["\u0275\u0275text"](12,"Download the Hydra Agent ZIP file"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("value",e.commandWithSecrets),h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("href",e.hydraAgentDownloadUrl,h["\u0275\u0275sanitizeUrl"])}}let v=(()=>{class e{constructor(e,t,n){this.tenantsService=e,this.dialogRef=t,this.toastrService=n,this.destroyed$=new c.xQ,this.apiUrl=`${m.N.apiUrl}`,this.isLoading=!1}ngOnInit(){this.initHydraAgentTenantKeys()}copyToClipboard(){var e=this;return x(function*(){try{yield navigator.clipboard.writeText(e.commandWithSecrets),e.toastrService.success("Copied to clipboard","Success",{icon:"checkmark-circle-2-outline",preventDuplicates:!0})}catch(t){e.toastrService.danger("Failed to copy to clipboard","Error",{icon:"alert-triangle-outline",preventDuplicates:!0})}})()}close(){this.dialogRef.close()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}initHydraAgentTenantKeys(){this.isLoading=!0,this.tenantsService.getTenantSecretsFor(this.sceneId).pipe((0,p.R)(this.destroyed$)).subscribe({next:e=>{var t;this.commandWithSecrets=`HydraAgent.exe -u "wss://${e.BaseUrl}/wsx" -s "${null!==(t=e.HydraInstanceKey)&&void 0!==t?t:""}" -t "${e.SceneKey}" -i`,this.hydraAgentDownloadUrl=`${this.apiUrl}/download/HydraAgent`,this.isLoading=!1},error:()=>this.isLoading=!1})}}return e.\u0275fac=function(t){return new(t||e)(h["\u0275\u0275directiveInject"](g),h["\u0275\u0275directiveInject"](f.X4l),h["\u0275\u0275directiveInject"](f.quB))},e.\u0275cmp=h["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-tenants-hydra-agent-secrets-dialog"]],inputs:{sceneId:"sceneId"},decls:8,vars:2,consts:[[3,"nbSpinner"],[4,"ngIf"],["nbButton","",3,"click"],["nbInput","","fullWidth","","readonly","",3,"value"],["nbButton","","size","tiny","nbTooltip","Copy to clipboard",3,"click"],["icon","copy-outline"],[1,"mt-5"],[3,"href"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-header"),h["\u0275\u0275text"](2,"Install Hydra Agent for Cloud PCs"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"nb-card-body"),h["\u0275\u0275template"](4,E,13,2,"ng-container",1),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"nb-card-footer"),h["\u0275\u0275elementStart"](6,"button",2),h["\u0275\u0275listener"]("click",function(){return t.close()}),h["\u0275\u0275text"](7,"Close"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275property"]("nbSpinner",t.isLoading),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngIf",!t.isLoading))},directives:[f.Asz,f.Q7R,f.ndF,f.yKW,r.O5,f.XWE,f.DPz,f.h8i,f.jNv,f.fMN],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:45rem;min-height:25rem}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{field-sizing:content;min-height:4em;resize:none}"]}),e})();function b(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementContainerStart"](0),h["\u0275\u0275elementStart"](1,"p"),h["\u0275\u0275text"](2,"Hydra Proxy is an external resource running in data centers that provides additional capabilities for managing Azure Local and Azure Virtual Desktop in hybrid environments. For example, a Hydra Proxy for a custom location in Azure Local enables local image management. Please reference our documentation for more information."),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](3,"textarea",3),h["\u0275\u0275elementStart"](4,"button",4),h["\u0275\u0275listener"]("click",function(){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"]().copyToClipboard()}),h["\u0275\u0275element"](5,"nb-icon",5),h["\u0275\u0275text"](6," Copy "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"p"),h["\u0275\u0275element"](8,"br"),h["\u0275\u0275text"](9,"Keep all keys and command-line options secure. Do not share them."),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",6),h["\u0275\u0275elementStart"](11,"a",7),h["\u0275\u0275text"](12,"Download the Hydra Proxy ZIP file"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("value",e.commandWithSecrets),h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("href",e.hydraProxyDownloadUrl,h["\u0275\u0275sanitizeUrl"])}}let I=(()=>{class e{constructor(e,t,n){this.tenantsService=e,this.dialogRef=t,this.toastrService=n,this.destroyed$=new c.xQ,this.apiUrl=`${m.N.apiUrl}`,this.isLoading=!1}ngOnInit(){this.initHydraProxyTenantKeys()}copyToClipboard(){var e=this;return x(function*(){try{yield navigator.clipboard.writeText(e.commandWithSecrets),e.toastrService.success("Copied to clipboard","Success",{icon:"checkmark-circle-2-outline",preventDuplicates:!0})}catch(t){e.toastrService.danger("Failed to copy to clipboard","Error",{icon:"alert-triangle-outline",preventDuplicates:!0})}})()}close(){this.dialogRef.close()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}initHydraProxyTenantKeys(){this.isLoading=!0,this.tenantsService.getProxySecretsFor(this.sceneId).pipe((0,p.R)(this.destroyed$)).subscribe({next:e=>{var t;this.commandWithSecrets=`HydraAgent.exe -u "wss://${e.BaseUrl}/wsx" -s "${null!==(t=e.HydraInstanceKey)&&void 0!==t?t:""}" -t "${e.SceneKey}" --HydraProxySecret "${e.ProxySecret}" --HydraProxyAes "${e.ProxyAes}" --ProxyMode -i`,this.hydraProxyDownloadUrl="https://itpcupdateweu.blob.core.windows.net/public/Hydra/Helpers/HydraProxy.zip",this.isLoading=!1},error:()=>this.isLoading=!1})}}return e.\u0275fac=function(t){return new(t||e)(h["\u0275\u0275directiveInject"](g),h["\u0275\u0275directiveInject"](f.X4l),h["\u0275\u0275directiveInject"](f.quB))},e.\u0275cmp=h["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-tenants-hydra-proxy-secrets-dialog"]],inputs:{sceneId:"sceneId"},decls:8,vars:2,consts:[[3,"nbSpinner"],[4,"ngIf"],["nbButton","",3,"click"],["nbInput","","fullWidth","","readonly","",3,"value"],["nbButton","","size","tiny","nbTooltip","Copy to clipboard",3,"click"],["icon","copy-outline"],[1,"mt-5"],[3,"href"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-header"),h["\u0275\u0275text"](2,"Hydra Proxy for Azure Local and Hybrid"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"nb-card-body"),h["\u0275\u0275template"](4,b,13,2,"ng-container",1),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"nb-card-footer"),h["\u0275\u0275elementStart"](6,"button",2),h["\u0275\u0275listener"]("click",function(){return t.close()}),h["\u0275\u0275text"](7,"Close"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275property"]("nbSpinner",t.isLoading),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngIf",!t.isLoading))},directives:[f.Asz,f.Q7R,f.ndF,f.yKW,r.O5,f.XWE,f.DPz,f.h8i,f.jNv,f.fMN],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{width:45rem;min-height:25rem}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{field-sizing:content;min-height:4em;resize:none}"]}),e})(),A=(()=>{class e{constructor(e){this.dialogRef=e}close(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(h["\u0275\u0275directiveInject"](f.X4l))},e.\u0275cmp=h["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-tenants-reminder-dialog"]],decls:11,vars:0,consts:[["nbButton","",3,"click"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card"),h["\u0275\u0275elementStart"](1,"nb-card-header"),h["\u0275\u0275text"](2,"Set a Reminder"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"nb-card-body"),h["\u0275\u0275elementStart"](4,"p"),h["\u0275\u0275text"](5," Please regularly check that all secrets of service principals are not expiring over the next time and create a reminder to update the secrets early enough. "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"p"),h["\u0275\u0275text"](7,"Hydra will fail when the validity period has expired."),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"nb-card-footer"),h["\u0275\u0275elementStart"](9,"button",0),h["\u0275\u0275listener"]("click",function(){return t.close()}),h["\u0275\u0275text"](10,"Got it"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]())},directives:[f.Asz,f.ndF,f.yKW,f.XWE,f.DPz],styles:[""]}),e})();var C=n(3679);function R(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",30),h["\u0275\u0275elementStart"](1,"button",31),h["\u0275\u0275listener"]("click",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"](2).$implicit;return h["\u0275\u0275nextContext"]().openHydraAgentTenantsKeysDialog(t,n.Id)}),h["\u0275\u0275text"](2," Get Hydra Agent "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function M(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",10),h["\u0275\u0275elementStart"](1,"label",27),h["\u0275\u0275text"](2,"Enable Windows 365 management (read tool-tip)"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"nb-checkbox",28),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().model[n].W365Enabled=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](4,R,3,0,"div",29),h["\u0275\u0275elementEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"]().index,t=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("name","W365Enabled",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].W365Enabled),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.model[e].W365Enabled)}}function w(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",30),h["\u0275\u0275elementStart"](1,"button",31),h["\u0275\u0275listener"]("click",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"](2).$implicit;return h["\u0275\u0275nextContext"]().openHydraProxyTenantsKeysDialog(t,n.Id)}),h["\u0275\u0275text"](2," Get Hydra Proxy "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function T(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",10),h["\u0275\u0275elementStart"](1,"label",32),h["\u0275\u0275text"](2,"Enable the Hydra Proxy Support (Preview) for this tenant (Read the tooltip)."),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"nb-checkbox",33),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().model[n].HydraProxyEnabled=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](4,w,3,0,"div",29),h["\u0275\u0275elementEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"]().index,t=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("name","HydraProxyEnabled",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].HydraProxyEnabled),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.model[e].HydraProxyEnabled)}}function P(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"nb-option",49),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;h["\u0275\u0275property"]("value",e.id),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function V(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"nb-option",49),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;h["\u0275\u0275property"]("value",e.id),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function D(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",10),h["\u0275\u0275elementStart"](1,"label",50),h["\u0275\u0275text"](2,"Use resource principals also for Entra ID / Azure AD access (very large environments)"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"nb-checkbox",51),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"](3).index;return h["\u0275\u0275nextContext"]().model[n].UseResForAad=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"](3).index,t=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("name","UseResForAad",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].UseResForAad)}}const k=function(e){return{"is-invalid":e}};function z(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275elementStart"](1,"div",0),h["\u0275\u0275elementStart"](2,"div",14),h["\u0275\u0275elementStart"](3,"div",10),h["\u0275\u0275elementStart"](4,"label",17),h["\u0275\u0275text"](5,"Application id"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",18),h["\u0275\u0275elementStart"](7,"input",42),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"](2).index;return h["\u0275\u0275nextContext"]().model[n].ResApplication2Id=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",40),h["\u0275\u0275elementStart"](9,"div",10),h["\u0275\u0275elementStart"](10,"label",17),h["\u0275\u0275text"](11,"Secret"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",18),h["\u0275\u0275elementStart"](13,"input",43),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"](2).index;return h["\u0275\u0275nextContext"]().model[n].ResApplication2SecretEncrypted=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",44),h["\u0275\u0275elementStart"](15,"button",45),h["\u0275\u0275listener"]("click",function(){h["\u0275\u0275restoreView"](e);const t=h["\u0275\u0275nextContext"](2).index;return h["\u0275\u0275nextContext"]().testSecondary2(t)}),h["\u0275\u0275element"](16,"nb-icon",46),h["\u0275\u0275text"](17," Test "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"div",0),h["\u0275\u0275elementStart"](19,"div",14),h["\u0275\u0275elementStart"](20,"div",10),h["\u0275\u0275elementStart"](21,"label",17),h["\u0275\u0275text"](22,"Application id"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"div",18),h["\u0275\u0275elementStart"](24,"input",42),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"](2).index;return h["\u0275\u0275nextContext"]().model[n].ResApplication3Id=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"div",40),h["\u0275\u0275elementStart"](26,"div",10),h["\u0275\u0275elementStart"](27,"label",17),h["\u0275\u0275text"](28,"Secret"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](29,"div",18),h["\u0275\u0275elementStart"](30,"input",43),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"](2).index;return h["\u0275\u0275nextContext"]().model[n].ResApplication3SecretEncrypted=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](31,"div",44),h["\u0275\u0275elementStart"](32,"button",45),h["\u0275\u0275listener"]("click",function(){h["\u0275\u0275restoreView"](e);const t=h["\u0275\u0275nextContext"](2).index;return h["\u0275\u0275nextContext"]().testSecondary3(t)}),h["\u0275\u0275element"](33,"nb-icon",46),h["\u0275\u0275text"](34," Test "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](35,"div",0),h["\u0275\u0275elementStart"](36,"div",14),h["\u0275\u0275elementStart"](37,"div",10),h["\u0275\u0275elementStart"](38,"label",17),h["\u0275\u0275text"](39,"Application id"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](40,"div",18),h["\u0275\u0275elementStart"](41,"input",42),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"](2).index;return h["\u0275\u0275nextContext"]().model[n].ResApplication4Id=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](42,"div",40),h["\u0275\u0275elementStart"](43,"div",10),h["\u0275\u0275elementStart"](44,"label",17),h["\u0275\u0275text"](45,"Secret"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](46,"div",18),h["\u0275\u0275elementStart"](47,"input",43),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"](2).index;return h["\u0275\u0275nextContext"]().model[n].ResApplication4SecretEncrypted=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](48,"div",44),h["\u0275\u0275elementStart"](49,"button",45),h["\u0275\u0275listener"]("click",function(){h["\u0275\u0275restoreView"](e);const t=h["\u0275\u0275nextContext"](2).index;return h["\u0275\u0275nextContext"]().testSecondary4(t)}),h["\u0275\u0275element"](50,"nb-icon",46),h["\u0275\u0275text"](51," Test "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](52,"div",0),h["\u0275\u0275elementStart"](53,"div",14),h["\u0275\u0275elementStart"](54,"div",10),h["\u0275\u0275elementStart"](55,"label",17),h["\u0275\u0275text"](56,"Application id"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](57,"div",18),h["\u0275\u0275elementStart"](58,"input",42),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"](2).index;return h["\u0275\u0275nextContext"]().model[n].ResApplication5Id=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](59,"div",40),h["\u0275\u0275elementStart"](60,"div",10),h["\u0275\u0275elementStart"](61,"label",17),h["\u0275\u0275text"](62,"Secret"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](63,"div",18),h["\u0275\u0275elementStart"](64,"input",43),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"](2).index;return h["\u0275\u0275nextContext"]().model[n].ResApplication5SecretEncrypted=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](65,"div",44),h["\u0275\u0275elementStart"](66,"button",45),h["\u0275\u0275listener"]("click",function(){h["\u0275\u0275restoreView"](e);const t=h["\u0275\u0275nextContext"](2).index;return h["\u0275\u0275nextContext"]().testSecondary5(t)}),h["\u0275\u0275element"](67,"nb-icon",46),h["\u0275\u0275text"](68," Test "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](69,D,4,2,"div",22),h["\u0275\u0275elementEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"](2).index,t=h["\u0275\u0275nextContext"](),n=h["\u0275\u0275reference"](3);h["\u0275\u0275advance"](4),h["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplication2Id",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplication2Id",e,""),h["\u0275\u0275propertyInterpolate1"]("name","ResApplication2Id",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].ResApplication2Id)("ngClass",h["\u0275\u0275pureFunction1"](41,k,t.submitted&&"INVALID"==(null==n.form.controls["ResApplication2Id"+e]?null:n.form.controls["ResApplication2Id"+e].status))),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplication2SecretEncrypted",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplication2SecretEncrypted",e,""),h["\u0275\u0275propertyInterpolate1"]("name","ResApplication2SecretEncrypted",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].ResApplication2SecretEncrypted)("ngClass",h["\u0275\u0275pureFunction1"](43,k,t.submitted&&"INVALID"==(null==n.form.controls["ResApplication2SecretEncrypted"+e]?null:n.form.controls["ResApplication2SecretEncrypted"+e].status))),h["\u0275\u0275advance"](8),h["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplication3Id",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplication3Id",e,""),h["\u0275\u0275propertyInterpolate1"]("name","ResApplication3Id",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].ResApplication3Id)("ngClass",h["\u0275\u0275pureFunction1"](45,k,t.submitted&&"INVALID"==(null==n.form.controls["ResApplication3Id"+e]?null:n.form.controls["ResApplication3Id"+e].status))),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplication3SecretEncrypted",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplication3SecretEncrypted",e,""),h["\u0275\u0275propertyInterpolate1"]("name","ResApplication3SecretEncrypted",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].ResApplication3SecretEncrypted)("ngClass",h["\u0275\u0275pureFunction1"](47,k,t.submitted&&"INVALID"==(null==n.form.controls["ResApplication3SecretEncrypted"+e]?null:n.form.controls["ResApplication3SecretEncrypted"+e].status))),h["\u0275\u0275advance"](8),h["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplication4Id",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplication4Id",e,""),h["\u0275\u0275propertyInterpolate1"]("name","ResApplication4Id",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].ResApplication4Id)("ngClass",h["\u0275\u0275pureFunction1"](49,k,t.submitted&&"INVALID"==(null==n.form.controls["ResApplication4Id"+e]?null:n.form.controls["ResApplication4Id"+e].status))),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplication4SecretEncrypted",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplication4SecretEncrypted",e,""),h["\u0275\u0275propertyInterpolate1"]("name","ResApplication4SecretEncrypted",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].ResApplication4SecretEncrypted)("ngClass",h["\u0275\u0275pureFunction1"](51,k,t.submitted&&"INVALID"==(null==n.form.controls["ResApplication4SecretEncrypted"+e]?null:n.form.controls["ResApplication4SecretEncrypted"+e].status))),h["\u0275\u0275advance"](8),h["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplication5Id",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplication5Id",e,""),h["\u0275\u0275propertyInterpolate1"]("name","ResApplication5Id",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].ResApplication5Id)("ngClass",h["\u0275\u0275pureFunction1"](53,k,t.submitted&&"INVALID"==(null==n.form.controls["ResApplication5Id"+e]?null:n.form.controls["ResApplication5Id"+e].status))),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplication5SecretEncrypted",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplication5SecretEncrypted",e,""),h["\u0275\u0275propertyInterpolate1"]("name","ResApplication5SecretEncrypted",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].ResApplication5SecretEncrypted)("ngClass",h["\u0275\u0275pureFunction1"](55,k,t.submitted&&"INVALID"==(null==n.form.controls["ResApplication5SecretEncrypted"+e]?null:n.form.controls["ResApplication5SecretEncrypted"+e].status))),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngIf",t.model[e].AadTenantId==t.model[e].ResTenantId)}}function H(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275element"](1,"hr"),h["\u0275\u0275elementStart"](2,"b"),h["\u0275\u0275text"](3,"Primary Service Principal"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"p"),h["\u0275\u0275text"](5,"The engine needs a service principal to access and manage Azure Virtual Desktop and Azure resources. Create the service principal in Entra ID / Azure AD and give the service principal access to the resource groups or subscriptions containing your resources."),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",0),h["\u0275\u0275elementStart"](7,"div",14),h["\u0275\u0275elementStart"](8,"div",10),h["\u0275\u0275elementStart"](9,"label",17),h["\u0275\u0275text"](10,"Tenant id"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"div",18),h["\u0275\u0275elementStart"](12,"input",34),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().model[n].AadTenantId=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"div",14),h["\u0275\u0275elementStart"](14,"div",10),h["\u0275\u0275elementStart"](15,"label",17),h["\u0275\u0275text"](16,"Azure Cloud"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"div",14),h["\u0275\u0275elementStart"](18,"nb-select",35),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().model[n].AadEndpoints=t}),h["\u0275\u0275template"](19,P,2,2,"nb-option",36),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"div",0),h["\u0275\u0275elementStart"](21,"div",14),h["\u0275\u0275elementStart"](22,"div",10),h["\u0275\u0275elementStart"](23,"label",17),h["\u0275\u0275text"](24,"Application id"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"div",18),h["\u0275\u0275elementStart"](26,"input",37),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().model[n].AadApplicationId=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](27,"div",14),h["\u0275\u0275elementStart"](28,"div",10),h["\u0275\u0275elementStart"](29,"label",17),h["\u0275\u0275text"](30,"Secret"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](31,"div",18),h["\u0275\u0275elementStart"](32,"input",38),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().model[n].AadApplicationSecretEncrypted=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"nb-accordion",0),h["\u0275\u0275elementStart"](34,"nb-accordion-item"),h["\u0275\u0275elementStart"](35,"nb-accordion-item-header"),h["\u0275\u0275text"](36," Advanced settings "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](37,"nb-accordion-item-body"),h["\u0275\u0275elementStart"](38,"b"),h["\u0275\u0275text"](39,"Split-Tenant mode / Spread mode"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](40,"p"),h["\u0275\u0275text"](41,"Having different tenants for the Azure Virtual Desktop resources and the virtual machines, a second service principal must access the second tenant's virtual machine (split-tenant-mode). Provide the data for the service principal accessing the resource tenant (VMs, vnets, etc)."),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](42,"p"),h["\u0275\u0275text"](43,"This mode can also be used to provide more service principals to access the Azure API in a large environment - spread mode. The Azure API throttles operations if a single service principal requests too many operations in a specific time. Using more service principals can work around this limitation."),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](44,"div",0),h["\u0275\u0275elementStart"](45,"div",14),h["\u0275\u0275elementStart"](46,"div",10),h["\u0275\u0275elementStart"](47,"label",17),h["\u0275\u0275text"](48,"Tenant id"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](49,"div",18),h["\u0275\u0275elementStart"](50,"input",39),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().model[n].ResTenantId=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](51,"div",40),h["\u0275\u0275elementStart"](52,"div",10),h["\u0275\u0275elementStart"](53,"label",17),h["\u0275\u0275text"](54,"Azure Cloud"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](55,"div",14),h["\u0275\u0275elementStart"](56,"nb-select",41),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().model[n].ResEndpoints=t}),h["\u0275\u0275template"](57,V,2,2,"nb-option",36),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](58,"div",0),h["\u0275\u0275elementStart"](59,"div",14),h["\u0275\u0275elementStart"](60,"div",10),h["\u0275\u0275elementStart"](61,"label",17),h["\u0275\u0275text"](62,"Application id"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](63,"div",18),h["\u0275\u0275elementStart"](64,"input",42),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().model[n].ResApplicationId=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](65,"div",40),h["\u0275\u0275elementStart"](66,"div",10),h["\u0275\u0275elementStart"](67,"label",17),h["\u0275\u0275text"](68,"Secret"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](69,"div",18),h["\u0275\u0275elementStart"](70,"input",43),h["\u0275\u0275listener"]("ngModelChange",function(t){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().model[n].ResApplicationSecretEncrypted=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](71,"div",44),h["\u0275\u0275elementStart"](72,"button",45),h["\u0275\u0275listener"]("click",function(){h["\u0275\u0275restoreView"](e);const t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().testSecondary(t)}),h["\u0275\u0275element"](73,"nb-icon",46),h["\u0275\u0275text"](74," Test "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](75,"div",0),h["\u0275\u0275elementStart"](76,"div",12),h["\u0275\u0275elementStart"](77,"button",47),h["\u0275\u0275listener"]("click",function(){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"](2).showMorePrincipals()}),h["\u0275\u0275element"](78,"nb-icon",48),h["\u0275\u0275text"](79," Show more (Spread mode) "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](80,z,70,57,"div",23),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"]().index,t=h["\u0275\u0275nextContext"](),n=h["\u0275\u0275reference"](3);h["\u0275\u0275advance"](9),h["\u0275\u0275propertyInterpolate1"]("for","dc-AadTenantId",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-AadTenantId",e,""),h["\u0275\u0275propertyInterpolate1"]("name","AadTenantId",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].AadTenantId)("ngClass",h["\u0275\u0275pureFunction1"](43,k,t.submitted&&"INVALID"==(null==n.form.controls["AadTenantId"+e]?null:n.form.controls["AadTenantId"+e].status))),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("for","dc-AadEndpoints",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-AadEndpoints",e,""),h["\u0275\u0275propertyInterpolate1"]("name","AadEndpoints",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].AadEndpoints)("ngClass",h["\u0275\u0275pureFunction1"](45,k,t.submitted&&"INVALID"==(null==n.form.controls["AadEndpoints"+e]?null:n.form.controls["AadEndpoints"+e].status))),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",t.cloudLocationEnum),h["\u0275\u0275advance"](4),h["\u0275\u0275propertyInterpolate1"]("for","dc-AadApplicationId",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-AadApplicationId",e,""),h["\u0275\u0275propertyInterpolate1"]("name","AadApplicationId",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].AadApplicationId)("ngClass",h["\u0275\u0275pureFunction1"](47,k,t.submitted&&"INVALID"==(null==n.form.controls["AadApplicationId"+e]?null:n.form.controls["AadApplicationId"+e].status))),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("for","dc-AadApplicationSecretEncrypted",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-AadApplicationSecretEncrypted",e,""),h["\u0275\u0275propertyInterpolate1"]("name","AadApplicationSecretEncrypted",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].AadApplicationSecretEncrypted)("ngClass",h["\u0275\u0275pureFunction1"](49,k,t.submitted&&"INVALID"==(null==n.form.controls["AadApplicationSecretEncrypted"+e]?null:n.form.controls["AadApplicationSecretEncrypted"+e].status))),h["\u0275\u0275advance"](15),h["\u0275\u0275propertyInterpolate1"]("for","dc-ResTenantId",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-ResTenantId",e,""),h["\u0275\u0275propertyInterpolate1"]("name","ResTenantId",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].ResTenantId)("ngClass",h["\u0275\u0275pureFunction1"](51,k,t.submitted&&"INVALID"==(null==n.form.controls["ResTenantId"+e]?null:n.form.controls["ResTenantId"+e].status))),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("for","dc-ResEndpoints",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-ResEndpoints",e,""),h["\u0275\u0275propertyInterpolate1"]("name","ResEndpoints",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].ResEndpoints)("ngClass",h["\u0275\u0275pureFunction1"](53,k,t.submitted&&"INVALID"==(null==n.form.controls["ResEndpoints"+e]?null:n.form.controls["ResEndpoints"+e].status))),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",t.cloudLocationEnum),h["\u0275\u0275advance"](4),h["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplicationId",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplicationId",e,""),h["\u0275\u0275propertyInterpolate1"]("name","ResApplicationId",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].ResApplicationId)("ngClass",h["\u0275\u0275pureFunction1"](55,k,t.submitted&&"INVALID"==(null==n.form.controls["ResApplicationId"+e]?null:n.form.controls["ResApplicationId"+e].status))),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("for","dc-ResApplicationSecretEncrypted",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-ResApplicationSecretEncrypted",e,""),h["\u0275\u0275propertyInterpolate1"]("name","ResApplicationSecretEncrypted",e,""),h["\u0275\u0275property"]("ngModel",t.model[e].ResApplicationSecretEncrypted)("ngClass",h["\u0275\u0275pureFunction1"](57,k,t.submitted&&"INVALID"==(null==n.form.controls["ResApplicationSecretEncrypted"+e]?null:n.form.controls["ResApplicationSecretEncrypted"+e].status))),h["\u0275\u0275advance"](10),h["\u0275\u0275property"]("ngIf",t.showMorePrincipalsFlag)}}function F(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"button",45),h["\u0275\u0275listener"]("click",function(){h["\u0275\u0275restoreView"](e);const t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().testPrimary(t)}),h["\u0275\u0275element"](1,"nb-icon",46),h["\u0275\u0275text"](2," Test Primary "),h["\u0275\u0275elementEnd"]()}}function N(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"nb-card"),h["\u0275\u0275elementStart"](1,"nb-card-header"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"nb-card-body"),h["\u0275\u0275elementStart"](4,"div",0),h["\u0275\u0275elementStart"](5,"div",14),h["\u0275\u0275elementStart"](6,"div",10),h["\u0275\u0275elementStart"](7,"label",15),h["\u0275\u0275text"](8,"Enabled"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"nb-checkbox",16),h["\u0275\u0275listener"]("ngModelChange",function(t){const n=h["\u0275\u0275restoreView"](e).index;return h["\u0275\u0275nextContext"]().model[n].Enabled=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",0),h["\u0275\u0275elementStart"](11,"div",14),h["\u0275\u0275elementStart"](12,"div",10),h["\u0275\u0275elementStart"](13,"label",17),h["\u0275\u0275text"](14,"Display name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",18),h["\u0275\u0275elementStart"](16,"input",19),h["\u0275\u0275listener"]("ngModelChange",function(t){const n=h["\u0275\u0275restoreView"](e).index;return h["\u0275\u0275nextContext"]().model[n].DisplayName=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"div",14),h["\u0275\u0275elementStart"](18,"div",10),h["\u0275\u0275elementStart"](19,"label",20),h["\u0275\u0275text"](20,"Use Managed Service Identity (MSI)"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"nb-checkbox",21),h["\u0275\u0275listener"]("ngModelChange",function(t){const n=h["\u0275\u0275restoreView"](e).index;return h["\u0275\u0275nextContext"]().model[n].UseManagedServiceIdentity=t}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"div",0),h["\u0275\u0275elementStart"](23,"div",14),h["\u0275\u0275template"](24,M,5,3,"div",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"div",14),h["\u0275\u0275template"](26,T,5,3,"div",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](27,H,81,59,"div",23),h["\u0275\u0275element"](28,"hr"),h["\u0275\u0275elementStart"](29,"div",0),h["\u0275\u0275elementStart"](30,"div",12),h["\u0275\u0275elementStart"](31,"button",24),h["\u0275\u0275listener"]("click",function(){const t=h["\u0275\u0275restoreView"](e).index;return h["\u0275\u0275nextContext"]().tenantDelete(t)}),h["\u0275\u0275element"](32,"nb-icon",25),h["\u0275\u0275text"](33," Remove "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](34,"div",12),h["\u0275\u0275template"](35,F,3,0,"button",26),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){const e=t.index,n=h["\u0275\u0275nextContext"](),r=h["\u0275\u0275reference"](3);h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](n.model[e].DisplayName),h["\u0275\u0275advance"](7),h["\u0275\u0275propertyInterpolate1"]("name","Enabled",e,""),h["\u0275\u0275property"]("ngModel",n.model[e].Enabled),h["\u0275\u0275advance"](4),h["\u0275\u0275propertyInterpolate1"]("for","dc-DisplayName",e,""),h["\u0275\u0275advance"](3),h["\u0275\u0275propertyInterpolate1"]("id","dc-DisplayName",e,""),h["\u0275\u0275propertyInterpolate1"]("name","DisplayName",e,""),h["\u0275\u0275property"]("ngModel",n.model[e].DisplayName)("ngClass",h["\u0275\u0275pureFunction1"](14,k,n.submitted&&"INVALID"==(null==r.form.controls["DisplayName"+e]?null:r.form.controls["DisplayName"+e].status))),h["\u0275\u0275advance"](5),h["\u0275\u0275propertyInterpolate1"]("name","UseManagedServiceIdentity",e,""),h["\u0275\u0275property"]("ngModel",n.model[e].UseManagedServiceIdentity),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngIf",n.GlobalConstants.EnableWindows365Management),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",n.GlobalConstants.EnableHydraProxyEnabled),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!n.model[e].UseManagedServiceIdentity),h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("ngIf",!n.model[e].UseManagedServiceIdentity)}}const L=[{path:"",component:(()=>{class e{constructor(e,t,n){this.tenantsService=e,this.actionService=t,this.dialogService=n,this.destroyed$=new c.xQ,this.ALL_TENANTS_ID="00000000-0000-0000-0000-000000000000",this.storeDirect=!0,this.GlobalConstants=s.tc,this.scenes=[],this.model=[],this.cloudLocationEnum=a,this.showMorePrincipalsFlag=!1,this.spinner1=!0,this.submitted=!1}ngOnInit(){this.initTenants()}tenantDelete(e){this.submitted=!1,this.model.splice(e,1)}tenantAdd(){this.submitted=!1,this.model.push(new l)}testPrimary(e){this.testCredentials(this.model[e].AadTenantId,this.model[e].AadApplicationId,this.model[e].AadApplicationSecretEncrypted,this.model[e].AadEndpoints)}testSecondary(e){this.testCredentials(this.model[e].ResTenantId,this.model[e].ResApplicationId,this.model[e].ResApplicationSecretEncrypted,this.model[e].ResEndpoints)}testSecondary2(e){this.testCredentials(this.model[e].ResTenantId,this.model[e].ResApplication2Id,this.model[e].ResApplication2SecretEncrypted,this.model[e].ResEndpoints)}testSecondary3(e){this.testCredentials(this.model[e].ResTenantId,this.model[e].ResApplication3Id,this.model[e].ResApplication3SecretEncrypted,this.model[e].ResEndpoints)}testSecondary4(e){this.testCredentials(this.model[e].ResTenantId,this.model[e].ResApplication4Id,this.model[e].ResApplication4SecretEncrypted,this.model[e].ResEndpoints)}testSecondary5(e){this.testCredentials(this.model[e].ResTenantId,this.model[e].ResApplication5Id,this.model[e].ResApplication5SecretEncrypted,this.model[e].ResEndpoints)}showMorePrincipals(){this.showMorePrincipalsFlag=!0}testCredentials(e,t,n,r){const o=new d;o.TenantId=e,o.ApplicationId=t,o.ApplicationSecret=n,o.Endpoints=r,this.actionService.sendAction(`scenes/${this.ALL_TENANTS_ID}/TestServicePrincipal`,o,"Testing tenant connection","").pipe((0,p.R)(this.destroyed$)).subscribe()}onSubmit(e){this.submitted=!0,e.valid?(this.storeDirect&&this.actionService.sendAction(`scenes/${this.ALL_TENANTS_ID}/SetAllScenes`,this.model,"Storing tenants","").pipe((0,p.R)(this.destroyed$)).subscribe(),this.dialogService.open(A,{hasScroll:!1})):alert("Please check your configuration. Some properties or selections are not valid or missing. Check the red-cross-marked properties.")}openHydraAgentTenantsKeysDialog(e,t){e.stopPropagation(),e.preventDefault(),this.dialogService.open(v,{context:{sceneId:t},hasScroll:!1})}openHydraProxyTenantsKeysDialog(e,t){e.stopPropagation(),e.preventDefault(),this.dialogService.open(I,{context:{sceneId:t},hasScroll:!1})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}initTenants(){this.tenantsService.getTenants().pipe((0,p.R)(this.destroyed$)).subscribe({next:e=>{this.scenes=e,this.model=JSON.parse(JSON.stringify(this.scenes))||[],this.spinner1=!1,console.log("Got data about the scenes",this.scenes)}})}}return e.\u0275fac=function(t){return new(t||e)(h["\u0275\u0275directiveInject"](g),h["\u0275\u0275directiveInject"](i.c),h["\u0275\u0275directiveInject"](f.Gln))},e.\u0275cmp=h["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-tenants"]],decls:37,vars:2,consts:[[1,"row"],[1,"col-md-12"],[3,"ngSubmit"],["f","ngForm"],["nbSpinnerSize","small",3,"nbSpinner"],["target","_blank","href","https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredApps"],["target","_blank","href","https://docs.loginvsi.com/hydra/2.1.0/adding-a-tenant"],[4,"ngFor","ngForOf"],["type","button","nbButton","",3,"click"],["icon","plus-square"],[1,"form-group","row"],[1,"offset-sm-8","col-sm-2"],[1,"col-sm-2"],["type","submit","nbButton","","status","primary",2,"float","right"],[1,"col-sm-6"],["for","dc-Enabled",1,"label","col-sm-4","col-form-label"],["id","dc-Enabled","nbTooltip","Enable or disable this tenant",1,"col-sm-8",3,"ngModel","name","ngModelChange"],[1,"label","col-sm-4","col-form-label",3,"for"],[1,"col-sm-8"],["type","text","placeholder","Contoso.com","required","","nbInput","","fullWidth","","minlength","1",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],["for","dc-UseManagedServiceIdentity",1,"label","col-sm-4","col-form-label"],["id","dc-UseManagedServiceIdentity","nbTooltip","Use the MSI to access the Azure resources. Give the MSI of the app service (same name as the host name of the Hydra portal) permission to the resource groups or subscriptions.",1,"col-sm-8",3,"ngModel","name","ngModelChange"],["class","form-group row",4,"ngIf"],[4,"ngIf"],["type","button","nbButton","","nbTooltip","Remove",3,"click"],["icon","close-square"],["type","button","nbButton","","nbTooltip","Test the connection",3,"click",4,"ngIf"],["for","dc-W365Enabled",1,"label","col-sm-4","col-form-label"],["id","dc-W365Enabled","nbTooltip","Enable Windows 365 management for this tenant.",1,"col-sm-2",3,"ngModel","name","ngModelChange"],["class","col-sm-4",4,"ngIf"],[1,"col-sm-4"],["nbButton","",3,"click"],["for","dc-HydraProxyEnabled",1,"label","col-sm-4","col-form-label"],["id","dc-HydraProxyEnabled","nbTooltip","Enable Hydra Proxy Preview for this tenant.",1,"col-sm-2",3,"ngModel","name","ngModelChange"],["type","text","placeholder","00000000-0000-0000\u200b-0000-000000000000","required","","nbInput","","fullWidth","","minlength","36","nbTooltip","Enter the tenant id of the Azure application registration / service principal",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],["fullWidth","","nbTooltip","Select the Azure cloud environment. Select 'Global' for the typical Azure commercial environment","required","",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","00000000-0000-0000\u200b-0000-000000000000","required","","nbInput","","fullWidth","","minlength","36","nbTooltip","Enter the application id of the Azure application registration / service principal",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],["type","password","placeholder","**********************","required","","nbInput","","fullWidth","","minlength","1","nbTooltip","Enter the secret of he Azure application / service principal",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],["type","text","placeholder","00000000-0000-0000\u200b-0000-000000000000","required","","nbInput","","fullWidth","","minlength","0","nbTooltip","Enter the tenant id of the Azure application registration / service principal (resource tenant)",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],[1,"col-sm-5"],["fullWidth","","nbTooltip","Select the Azure cloud environment. Select 'Global' for the typical Azure commercial environment (resource tenant)","required","",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],["type","text","placeholder","00000000-0000-0000\u200b-0000-000000000000","required","","nbInput","","fullWidth","","minlength","0","nbTooltip","Enter the application id of the Azure application registration / service principal (resource tenant)",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],["type","password","placeholder","**********************","nbInput","","fullWidth","","nbTooltip","Enter the secret of he Azure application / service principal (resource tenant)",1,"form-control",3,"id","ngModel","name","ngClass","ngModelChange"],[1,"col-sm-1"],["type","button","nbButton","","nbTooltip","Test the connection",3,"click"],["icon","checkmark-circle"],["type","button","nbButton","","nbTooltip","Allow to enter more service principals (Spread mode)",3,"click"],["icon","more-horizontal-outline"],[3,"value"],["for","dc-UseResForAad",1,"label","col-sm-4","col-form-label"],["id","dc-UseResForAad","nbTooltip","In huge environments, it can make sense to use multiple service principals to access the primary resources, like host pools, session hosts, and sessions. By selecting this option, all provided service accounts are also used to access the primary resources (round-robin). Please ensure to update secrets early enough for all principals. Otherwise, Hydra will fail if a secret expires.",1,"col-sm-8",3,"ngModel","name","ngModelChange"]],template:function(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",0),h["\u0275\u0275elementStart"](1,"div",1),h["\u0275\u0275elementStart"](2,"form",2,3),h["\u0275\u0275listener"]("ngSubmit",function(){h["\u0275\u0275restoreView"](e);const n=h["\u0275\u0275reference"](3);return t.onSubmit(n)}),h["\u0275\u0275elementStart"](4,"nb-card"),h["\u0275\u0275elementStart"](5,"nb-card-header",4),h["\u0275\u0275elementStart"](6,"h1"),h["\u0275\u0275text"](7,"Tenant Configuration"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"nb-card-body"),h["\u0275\u0275elementStart"](9,"p"),h["\u0275\u0275text"](10,"The engine needs permission to access and manage Azure Virtual Desktop, Azure resources and optionaly Windows 365. Add at least one tenant to start working and managing your environment. You can use the Hydra engine's managed service identity (MSI) or one or more service principals (app registration). The MSI is limited to the tenant where Hydra is installed and focuses on smaller environments (up to 2000 users and 100 hosts). Service principals can be used for larger environments or to integrate multiple tenants. Service principals can be created in "),h["\u0275\u0275elementStart"](11,"a",5),h["\u0275\u0275text"](12,"Entra Id"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](13,"br"),h["\u0275\u0275element"](14,"br"),h["\u0275\u0275text"](15," Independent of choosing the MSI or Service Principal(s), the MSI or the principals need permission to access the Azure resource groups or subscriptions containing the AVD-related resources and optionally the Windows 365 resources with a defined permissions set. Read "),h["\u0275\u0275elementStart"](16,"a",6),h["\u0275\u0275text"](17,"more"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](18,". "),h["\u0275\u0275element"](19,"br"),h["\u0275\u0275element"](20,"br"),h["\u0275\u0275text"](21," If you add or change a service principal for an existing tenant, please restart the engine to apply the new settings (wait until all deployments, imaging processes and automations are finished). "),h["\u0275\u0275element"](22,"br"),h["\u0275\u0275element"](23,"br"),h["\u0275\u0275text"](24,"Important regarding service principals: Please add yourself and your colleagues a reminder to renew the secrets of the service principals before they get invalid. Hydra cannot warn before secrets timed out. "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](25,N,36,16,"nb-card",7),h["\u0275\u0275elementStart"](26,"button",8),h["\u0275\u0275listener"]("click",function(){return t.tenantAdd()}),h["\u0275\u0275element"](27,"nb-icon",9),h["\u0275\u0275text"](28," Add "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](29,"hr"),h["\u0275\u0275element"](30,"br"),h["\u0275\u0275elementStart"](31,"div",10),h["\u0275\u0275element"](32,"div",11),h["\u0275\u0275elementStart"](33,"div",12),h["\u0275\u0275elementStart"](34,"button",13),h["\u0275\u0275text"](35,"Save"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](36,"br"),h["\u0275\u0275elementEnd"]()}2&e&&(h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("nbSpinner",t.spinner1),h["\u0275\u0275advance"](20),h["\u0275\u0275property"]("ngForOf",t.model))},directives:[C._Y,C.JL,C.F,f.Asz,f.ndF,f.Q7R,f.yKW,r.sg,f.DPz,f.fMN,f.NTf,f.jNv,C.JJ,C.On,f.h8i,C.Fj,C.Q7,C.wO,r.mk,r.O5,f.rs,f.qCO,f.SaG,f.YZd,f.AvE,f.q51],styles:["[_nghost-%COMP%]     nb-checkbox{margin-bottom:1rem}[_nghost-%COMP%]     .form-inline [fullWidth]{flex:1}[_nghost-%COMP%]     .form-inline>*{margin:0 1.5rem 1.5rem 0}[_nghost-%COMP%]     nb-card.inline-form-card nb-card-body{padding-bottom:0}[_nghost-%COMP%]     .form-control{padding:0;border:0}"]}),e})()}];let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=h["\u0275\u0275defineInjector"]({imports:[[o.Bz.forChild(L)],o.Bz]}),e})(),W=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=h["\u0275\u0275defineInjector"]({imports:[[r.ez,U,C.u5,f.oGl,f.T2N,f.zyh,f.MfT,f.KdK,f.nKr,f.x4g,f.IIj,f.rgH,C.UX,f.uuI]]}),e})()}}]);